427c427
< eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nvar saito = __webpack_require__(/*! ./saito */ \"./lib/saito/saito.js\");\n\nvar Big = __webpack_require__(/*! big.js */ \"./node_modules/big.js/big.js\");\n\nvar Block =\n/*#__PURE__*/\nfunction () {\n  function Block(app) {\n    var blkjson = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var txsjson = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n    var confirmations = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n\n    _classCallCheck(this, Block);\n\n    this.app = app || {***REMOVED***; //\n    // consensus variables\n    //\n\n    this.block = {***REMOVED***;\n    this.block.ts = new Date().getTime();\n    this.block.prevbsh = \"\";\n    this.block.merkle = \"\";\n    this.block.creator = \"\";\n    this.block.id = 1;\n    this.block.bf = 0;\n    this.block.difficulty = 0.0;\n    this.block.paysplit = 0.5;\n    this.block.powsplit = 0.5;\n    this.block.treasury = Big(\"2868100000.0\"); // TODO\n    //\n    // fix treasury amount\n    //\n\n    this.block.stakepool = Big(\"0\");\n    this.block.coinbase = Big(\"0.0\");\n    this.block.reclaimed = Big(\"0.0\");\n    this.block.sr = 0; // 0 - staking table not refreshed\n    // 1 - staking table refreshed\n    //\n    // hashmaps\n    //\n\n    this.txs_hmap = []; //\n    // block transactions\n    //\n\n    this.transactions = []; //\n    // callbacks\n    //\n\n    this.callbacks = [];\n    this.callbacksTx = []; //\n    // non-consensus variables\n    //\n\n    this.maxtid = 0;\n    this.mintid = 0;\n    this.avgfee = 0;\n    this.size_in_bytes = 0; // size of block in bytes\n\n    this.hash = \"\"; // block hash == hash(this.prehash+last_block.hash)\n\n    this.prehash = \"\"; // hash of signature\n\n    this.filename = \"\"; // name of file on disk if set\n\n    this.confirmations = confirmations;\n    this.is_valid = 1; // set to zero if there is an\n    //\n    // import block headers\n    //\n\n    if (blkjson != \"\") {\n      try {\n***REMOVED*** if (typeof blkjson === 'string') {\n***REMOVED***   this.block = JSON.parse(blkjson.toString(\"utf8\"));\n***REMOVED*** ***REMOVED*** else {\n        this.block = blkjson.block;\n        this.transactions = blkjson.transactions.map(function (tx) {\n          return new saito.transaction(tx.transaction);\n    ***REMOVED***); // ***REMOVED***\n  ***REMOVED*** catch (err) {\n        this.is_valid = 0;\n        return;\n  ***REMOVED***\n***REMOVED***\n\n    return this;\n  ***REMOVED***\n\n  _createClass(Block, [{\n    key: \"affixCallbacks\",\n    value: function affixCallbacks() {\n      for (var z = 0; z < this.transactions.length; z++) {\n        var txmsg = this.transactions[z].returnMessage();\n        this.app.modules.affixCallbacks(this.transactions[z], z, txmsg, this.callbacks, this.callbacksTx, this.app);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"bundle\",\n    value: function () {\n      var _bundle = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var prevblk,\n            mintxid,\n            tx_sigs,\n            tx,\n            eblkd,\n            rebroadcast_amt,\n            i,\n            ii,\n            number_of_golden_tickets,\n            _i,\n            _ii,\n            _ii2,\n            _args = arguments;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                prevblk = _args.length > 0 && _args[0] !== undefined ? _args[0] : null;\n                mintxid = 1;\n                tx_sigs = []; //\n        ***REMOVED*** default values\n        ***REMOVED***\n\n                if (prevblk != null) {\n                  this.block.id = prevblk.block.id + 1;\n                  this.block.treasury = Big(prevblk.block.treasury).plus(Big(prevblk.block.reclaimed));\n                  this.block.coinbase = Big(this.block.treasury).div(this.app.blockchain.genesis_period).toFixed(8);\n                  this.block.treasury = this.block.treasury.minus(Big(this.block.coinbase)).toFixed(8);\n                  this.block.prevbsh = prevblk.returnHash();\n                  this.block.difficulty = prevblk.block.difficulty;\n                  this.block.paysplit = prevblk.block.paysplit;\n                  this.block.powsplit = prevblk.block.powsplit;\n                  this.block.ts = new Date().getTime();\n                  this.block.bf = this.app.burnfee.returnBurnFee(prevblk, this);\n\n                  if (prevblk.transactions.length == 0) {\n                    mintxid = prevblk.returnMaxTxId();\n\n                    if (mintxid == 0) {\n                      mintxid = 1;\n                ***REMOVED***\n              ***REMOVED*** else {\n                    mintxid = prevblk.returnMaxTxId() + 1;\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** initial token allocation\n        ***REMOVED***\n\n\n                if (this.block.id == 1) {\n                  tx = new saito.transaction();\n                  tx.transaction.to.push(new saito.slip(\"1HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"2HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"3HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"4HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"5HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.type = 3;\n                  tx.transaction.from.push(new saito.slip(this.app.wallet.returnPublicKey(), 5000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.id = 1;\n                  tx = this.app.wallet.signTransaction(tx);\n                  this.transactions.push(tx); //\n          ***REMOVED*** staking tx\n          ***REMOVED***\n\n                  tx = new saito.transaction();\n                  tx.transaction.to.push(new saito.slip(\"1HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 6000000, 4, 0, 0, 0, \"\", 1));\n                  /****\n                        tx.transaction.type = 4;\n                        tx.transaction.from.push(new saito.slip(\n                  \tthis.app.wallet.returnPublicKey() ,\n                  \t6000000,\n                  \t4,\n                  \t0,\n                  \t0,\n                  \t0,\n                  \t\"\",\n                  \t1\n                        ));\n                        tx.transaction.id = 2;\n                        tx = this.app.wallet.signTransaction(tx);\n                        this.transactions.push(tx);\n                  ****/\n            ***REMOVED*** //\n        ***REMOVED*** reclaimed funds are the tokens that are\n        ***REMOVED*** unspent in the block 1 GENESIS period ago\n        ***REMOVED*** and thus will fall off the chain with the \n        ***REMOVED*** addition of this block.\n        ***REMOVED***\n        ***REMOVED*** we add these to our treasury in the next \n        ***REMOVED*** block (see above)\n        ***REMOVED***\n\n\n                _context.next = 7;\n                return this.calculateRebroadcasts();\n\n              case 7:\n                eblkd = _context.sent;\n        ***REMOVED***\n        ***REMOVED*** reclaimed txs\n        ***REMOVED***\n                this.block.reclaimed = eblkd.reclaimed; //\n        ***REMOVED*** automatic transaction rebroadcasting\n        ***REMOVED***\n\n                rebroadcast_amt = Big(0.0);\n\n                for (i = 0; i < eblkd.rebroadcast.length; i++) {\n                  for (ii = 0; ii < eblkd.rebroadcast[i].transaction.to.length; ii++) {\n                    rebroadcast_amt = rebroadcast_amt.plus(Big(eblkd.rebroadcast[i].transaction.to[ii].amt));\n              ***REMOVED***\n\n                  this.transactions.push(eblkd.rebroadcast[i]);\n            ***REMOVED*** //\n        ***REMOVED*** now check transactions\n        ***REMOVED***\n\n\n                number_of_golden_tickets = 0;\n                _i = 0;\n\n              case 13:\n                if (!(_i < this.transactions.length)) {\n                  _context.next = 31;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** sequential ids\n        ***REMOVED***\n                this.transactions[_i].transaction.id = mintxid + _i; //\n        ***REMOVED*** golden ticket\n        ***REMOVED***\n\n                if (!(this.transactions[_i].transaction.type == 1)) {\n                  _context.next = 25;\n                  break;\n            ***REMOVED***\n\n                number_of_golden_tickets++;\n\n                if (!(number_of_golden_tickets > 1)) {\n                  _context.next = 21;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 412523: second golden ticket found in block\");\n                this.is_valid = 0;\n                return _context.abrupt(\"return\", this);\n\n              case 21:\n        ***REMOVED***\n        ***REMOVED*** add payment outputs\n        ***REMOVED***\n                if (prevblk != null) {\n                  (function () {\n                    var payments = prevblk.returnBlockPayouts(_this.transactions[_i].transaction.msg); //\n            ***REMOVED*** add reclaimed from block\n            ***REMOVED***\n\n                    _this.block.reclaimed = Big(_this.block.reclaimed).plus(Big(payments.reclaimed)).toFixed(8);\n                    var slips = [];\n                    payments.blocks.forEach(function (block) {\n                      if (block.producer_share > 0) {\n                        slips.push(new saito.slip(block.producer_publickey, block.producer_share, 2));\n                  ***REMOVED***\n\n                      if (block.miner_share > 0) {\n                        slips.push(new saito.slip(block.miner_publickey, block.miner_share, 2));\n                  ***REMOVED***\n\n                      if (block.router_share > 0) {\n                        slips.push(new saito.slip(block.router_publickey, block.router_share, 2));\n                  ***REMOVED***\n\n                      if (block.staker_share > 0) {\n                        slips.push(new saito.slip(block.staker_publickey, block.staker_share, 2));\n                  ***REMOVED***\n                ***REMOVED***);\n\n                    if (slips.length > 0) {\n                      var newtx = new saito.transaction();\n                      newtx.transaction.from.push(new saito.slip(_this.app.wallet.returnPublicKey(), 0.0, 2));\n                      newtx.transaction.to = slips;\n                      newtx.transaction.type = 2; //\n              ***REMOVED*** including for reference\n              ***REMOVED***\n\n                      newtx.transaction.id = _this.transactions.length;\n                      newtx.transaction.msg = payments;\n                      newtx = _this.app.wallet.signTransaction(newtx);\n\n                      _this.transactions.push(newtx);\n                ***REMOVED***\n              ***REMOVED***)();\n            ***REMOVED***\n\n                if (!(this.transactions[_i].transaction.msg.target != prevblk.returnHash())) {\n                  _context.next = 25;\n                  break;\n            ***REMOVED***\n\n                this.is_valid = 0;\n                return _context.abrupt(\"return\", this);\n\n              case 25:\n        ***REMOVED***\n        ***REMOVED*** merkle sigs\n        ***REMOVED***\n                tx_sigs[_i] = this.transactions[_i].returnSignatureSource(this.app); //\n        ***REMOVED*** hashmap of txs\n        ***REMOVED***\n\n                for (_ii = 0; _ii < this.transactions[_i].transaction.from.length; _ii++) {\n                  this.txs_hmap[this.transactions[_i].transaction.from[_ii].add] = 1;\n            ***REMOVED***\n\n                for (_ii2 = 0; _ii2 < this.transactions[_i].transaction.to.length; _ii2++) {\n                  this.txs_hmap[this.transactions[_i].transaction.to[_ii2].add] = 1;\n            ***REMOVED***\n\n              case 28:\n                _i++;\n                _context.next = 13;\n                break;\n\n              case 31:\n        ***REMOVED***\n        ***REMOVED*** merkle root\n        ***REMOVED***\n                if (tx_sigs.length > 0) {\n                  this.block.merkle = this.app.crypto.returnMerkleTree(tx_sigs).root;\n            ***REMOVED*** //\n        ***REMOVED*** update difficulty and paysplit\n        ***REMOVED***\n\n\n                return _context.abrupt(\"return\", this);\n\n              case 33:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this);\n  ***REMOVED***));\n\n      function bundle() {\n        return _bundle.apply(this, arguments);\n  ***REMOVED***\n\n      return bundle;\n***REMOVED***() //\n    // in validation mode, we provide list of TXS to check\n    //\n\n  ***REMOVED***, {\n    key: \"calculateRebroadcasts\",\n    value: function () {\n      var _calculateRebroadcasts = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var txs,\n            expiring_data,\n            needs_rebroadcast,\n            eblk_id,\n            txarray,\n            unspent_amt,\n            hash_of_eblock,\n            eblk,\n            i,\n            ii,\n            slip,\n            tx,\n            iii,\n            is_tx_in_block,\n            v,\n            _args2 = arguments;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                txs = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : null;\n                expiring_data = {\n                  reclaimed: \"0.0\",\n                  rebroadcast: [],\n                  validates: true,\n                  total_rebroadcast: 0\n            ***REMOVED***;\n                needs_rebroadcast = 0;\n\n                if (!(this.app.BROWSER == 1 || this.app.SPVMODE == 1)) {\n                  _context2.next = 5;\n                  break;\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", expiring_data);\n\n              case 5:\n        ***REMOVED***\n        ***REMOVED*** eliminated block id\n        ***REMOVED***\n                eblk_id = this.block.id - this.app.blockchain.genesis_period - 1; //\n        ***REMOVED*** if no blocks to eliminate, return 0.0 and confirm valid\n        ***REMOVED***\n\n                if (!(eblk_id < 1)) {\n                  _context2.next = 8;\n                  break;\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", expiring_data);\n\n              case 8:\n                txarray = [];\n                unspent_amt = Big(0.0);\n                hash_of_eblock = this.app.blockchain.bid_bsh_hmap[eblk_id];\n                _context2.next = 13;\n                return this.app.storage.loadBlockByHash(hash_of_eblock);\n\n              case 13:\n                eblk = _context2.sent;\n\n                for (i = 0; i < eblk.transactions.length; i++) {\n                  for (ii = 0; ii < eblk.transactions[i].transaction.to.length; ii++) {\n                    slip = eblk.transactions[i].transaction.to[ii];\n                    slip.bid = eblk.returnId();\n                    slip.tid = eblk.transactions[i].transaction.id;\n                    slip.bsh = eblk.returnHash();\n                    slip.sid = ii;\n\n                    if (Big(slip.amt).gt(0)) {\n                      if (this.app.shashmap.validate_slip(slip.returnSignatureSource(), this.block.id)) {\n                        if (eblk.transactions[i].isRebroadcast(eblk, this, ii)) {\n                  ***REMOVED***\n                  ***REMOVED*** number of slips rebroadcast as TXS\n                  ***REMOVED***\n                          expiring_data.total_rebroadcast++; //\n                  ***REMOVED*** creating\n                  ***REMOVED***\n\n                          if (txs == null) {\n                    ***REMOVED***\n                    ***REMOVED*** create rebroadcast tx\n                    ***REMOVED***\n                            tx = eblk.transactions[i].generateRebroadcastTransaction(slip.tid, slip.sid, 2);\n\n                            if (tx == null) {\n                              console.log(\"ERROR 481029: issue generating rebroadcast transaction...\");\n                              process.exit();\n                        ***REMOVED*** //\n                    ***REMOVED*** update tx with bid\n                    ***REMOVED***\n\n\n                            for (iii = 0; iii < tx.transaction.from.length; iii++) {\n                              tx.transaction.from[iii].bid = this.block.id;\n                        ***REMOVED***\n\n                            expiring_data.rebroadcast.push(tx); //\n                    ***REMOVED*** validating\n                    ***REMOVED***\n                      ***REMOVED*** else {\n                            needs_rebroadcast++;\n                            is_tx_in_block = 0; //\n                    ***REMOVED*** TODO - surely we can speed this loop up\n                    ***REMOVED***\n\n                            for (v = 0; v < txs.length; v++) {\n                              if (txs[v].transaction.sig == eblk.transactions[i].transaction.sig) {\n                                is_tx_in_block = 1;\n                                v = txs.length + 1;\n                          ***REMOVED***\n                        ***REMOVED*** //\n                    ***REMOVED*** we have an eligible tx that has not\n                    ***REMOVED*** been rebroadcast! this constitutes\n                    ***REMOVED*** an attack\n                    ***REMOVED***\n\n\n                            if (is_tx_in_block == 0) {\n                              console.log(\"\\nTHIS TX IS MISSING: \" + JSON.stringify(eblk.transactions[i].transaction));\n                              expiring_data.validates = false;\n                        ***REMOVED***\n                      ***REMOVED***\n                    ***REMOVED*** else {\n                          unspent_amt = unspent_amt.plus(Big(slip.amt));\n                    ***REMOVED***\n                  ***REMOVED***\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED***\n\n                expiring_data.reclaimed = unspent_amt.toFixed(8);\n                return _context2.abrupt(\"return\", expiring_data);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee2, this);\n  ***REMOVED***));\n\n      function calculateRebroadcasts() {\n        return _calculateRebroadcasts.apply(this, arguments);\n  ***REMOVED***\n\n      return calculateRebroadcasts;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"containsGoldenTicket\",\n    value: function containsGoldenTicket() {\n      for (var i = 0; i < this.transactions.length; i++) {\n        if (this.transactions[i].isGoldenTicket() == 1) {\n          return 1;\n    ***REMOVED***\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"decryptTransactions\",\n    value: function decryptTransactions() {\n      for (var i = 0; i < this.transactions.length; i++) {\n        if (this.transactions[i].involvesPublicKey(this.app.wallet.returnPublicKey()) == 1) {\n          this.transactions[i].decryptMessage(this.app);\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFilename\",\n    value: function returnFilename() {\n      return this.block.ts + \"-\" + this.returnHash() + \".blk\";\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnRoutingWorkNeeded\",\n    value: function returnRoutingWorkNeeded() {\n      return this.block.bf.current;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnCoinbase\",\n    value: function returnCoinbase() {\n      return this.block.coinbase;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnDifficulty\",\n    value: function returnDifficulty() {\n      return this.block.difficulty;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnEmbeddedRoutingWork\",\n    value: function returnEmbeddedRoutingWork() {\n      var v = Big(0);\n\n      for (var i = 0; i < this.transactions.length; i++) {\n        if (this.transactions[i].is_valid == 1) {\n          var available_work = Big(this.transactions[i].returnRoutingWorkAvailable(this.app, this.block.creator));\n\n          if (this.transactions[i].transaction.type == 1) {\n            if (this.transactions[i].transaction.msg.target != this.prevbsh) {\n              available_work = Big(0);\n        ***REMOVED***\n      ***REMOVED***\n\n          v = v.plus(available_work);\n    ***REMOVED***\n  ***REMOVED***\n\n      return v.toFixed(8);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnHash\",\n    value: function returnHash() {\n      if (this.hash != \"\") {\n        return this.hash;\n  ***REMOVED***\n\n      this.prehash = this.app.crypto.hash(this.returnFingerprint());\n      this.hash = this.app.crypto.hash(this.prehash + this.block.prevbsh);\n      return this.hash;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnId\",\n    value: function returnId() {\n      return this.block.id;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMaxTxId\",\n    value: function returnMaxTxId() {\n      if (this.maxtid != 0) {\n        return this.maxtid;\n  ***REMOVED***\n\n      for (var z = 0; z < this.transactions.length; z++) {\n        if (this.transactions[z].transaction.id > this.maxtid) {\n          this.maxtid = this.transactions[z].transaction.id;\n    ***REMOVED***\n  ***REMOVED***\n\n      return this.maxtid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMinTxId\",\n    value: function returnMinTxId() {\n      if (this.mintid != 0) {\n        return this.mintid;\n  ***REMOVED***\n\n      if (this.transactions.length == 0) {\n        return this.app.blockchain.returnMinTxId();\n  ***REMOVED***\n\n      ;\n      this.mintid = this.transactions[0].transaction.id;\n\n      for (var z = 1; z < this.transactions.length; z++) {\n        if (this.transactions[z].transaction.id < this.mintid) {\n          this.mintid = this.transactions[z].transaction.id;\n    ***REMOVED***\n  ***REMOVED***\n\n      return this.mintid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnPaysplit\",\n    value: function returnPaysplit() {\n      return this.block.paysplit;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnPowsplit\",\n    value: function returnPowsplit() {\n      return this.block.powsplit;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnReclaimed\",\n    value: function returnReclaimed() {\n      return this.block.reclaimed;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFingerprint\",\n    value: function returnFingerprint() {\n      return JSON.stringify(this.block);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnTreasury\",\n    value: function returnTreasury() {\n      return this.block.treasury;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"runCallbacks\",\n    value: function () {\n      var _runCallbacks = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(conf) {\n        var i, ii;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                for (i = this.confirmations + 1; i <= conf; i++) {\n                  for (ii = 0; ii < this.callbacks.length; ii++) {\n                    this.callbacks[ii](this, this.transactions[this.callbacksTx[ii]], i, this.app);\n              ***REMOVED***\n            ***REMOVED***\n\n                this.confirmations = conf;\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee3, this);\n  ***REMOVED***));\n\n      function runCallbacks(_x) {\n        return _runCallbacks.apply(this, arguments);\n  ***REMOVED***\n\n      return runCallbacks;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"spendInputs\",\n    value: function spendInputs() {\n      for (var i = 0; i < this.transactions.length; i++) {\n        for (var ii = 0; ii < this.transactions[i].transaction.from.length; ii++) {\n          if (this.transactions[i].transaction.from[ii].amt > 0) {\n            this.app.shashmap.insert_slip(this.transactions[i].transaction.from[ii].returnSignatureSource(), this.block.id);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return 1;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"unspendInputs\",\n    value: function unspendInputs() {\n      for (var b = 0; b < this.transactions.length; b++) {\n        for (var bb = 0; bb < this.transactions[b].transaction.from.length; bb++) {\n          if (this.transactions[b].transaction.from[bb].amt > 0) {\n            this.app.shashmap.insert_slip(this.transactions[b].transaction.from[bb].returnSignatureSource(), -1);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return 1;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"validate\",\n    value: function () {\n      var _validate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var reclaimed, prevblk, mintxid, tx_sigs, bt, cb, bf, hmap, slips, number_of_golden_tickets, index_of_block_payment, index_of_golden_ticket, i, payments, x, j, eblkd;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.block.prevbsh == \"\")) {\n                  _context4.next = 2;\n                  break;\n            ***REMOVED***\n\n                return _context4.abrupt(\"return\", 1);\n\n              case 2:\n        ***REMOVED***try {\n                reclaimed = \"0\";\n                prevblk = this.app.blockchain.returnBlockByHash(this.block.prevbsh);\n                mintxid = 1;\n                tx_sigs = [];\n\n                if (prevblk != null) {\n                  if (prevblk.transactions.length == 0) {\n                    mintxid = prevblk.returnMaxTxId();\n\n                    if (mintxid == 0) {\n                      mintxid = 1;\n                ***REMOVED***\n              ***REMOVED*** else {\n                    mintxid = prevblk.returnMaxTxId() + 1;\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** check block headers\n        ***REMOVED***\n\n\n                if (!(this.block.id != prevblk.block.id + 1)) {\n                  _context4.next = 10;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 482039: block id is not single increment over previous block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 10:\n                bt = Big(prevblk.block.treasury).plus(Big(prevblk.block.reclaimed));\n                cb = Big(bt).div(this.app.blockchain.genesis_period).toFixed(8);\n                bt = bt.minus(Big(cb)).toFixed(8);\n\n                if (!(this.block.treasury != bt)) {\n                  _context4.next = 16;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 410829: block treasury does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 16:\n                if (!(this.block.coinbase != cb)) {\n                  _context4.next = 19;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 410829: block coinbase does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 19:\n                if (!(this.block.difficulty != prevblk.block.difficulty)) {\n                  _context4.next = 22;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block difficulty does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 22:\n                if (!(this.block.paysplit != prevblk.block.paysplit)) {\n                  _context4.next = 25;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block paysplit does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 25:\n                if (!(this.block.powsplit != prevblk.block.powsplit)) {\n                  _context4.next = 28;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block difficulty does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 28:\n                bf = this.app.burnfee.returnBurnFee(prevblk, this);\n\n                if (!(this.block.bf != bf)) {\n                  _context4.next = 32;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block difficulty does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 32:\n                if (!(prevblk.block.ts >= this.block.ts)) {\n                  _context4.next = 35;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 729384: block timestamp not incremented from previous block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 35:\n                hmap = [];\n                slips = [];\n                number_of_golden_tickets = 0;\n                index_of_block_payment = -1;\n                index_of_golden_ticket = -1;\n                i = 0;\n\n              case 41:\n                if (!(i <= this.transactions.length - 1)) {\n                  _context4.next = 83;\n                  break;\n            ***REMOVED***\n\n                if (!(this.transactions[i].transaction.id != mintxid + i)) {\n                  _context4.next = 45;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 517324: transaction ids are out-of-order when validating block - \" + mintxid + \"-\" + i + \" ------- \" + this.transactions[i].transaction.id);\n                return _context4.abrupt(\"return\", 0);\n\n              case 45:\n                if (!(this.transactions[i].transaction.type == 1)) {\n                  _context4.next = 60;\n                  break;\n            ***REMOVED***\n\n                index_of_golden_ticket = i;\n\n                if (!(this.transactions[i].transaction.msg.target != prevblk.returnHash())) {\n                  _context4.next = 52;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 029312: golden ticket does not match prevblk hash\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 52:\n                number_of_golden_tickets++;\n\n                if (!(number_of_golden_tickets > 1)) {\n                  _context4.next = 56;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 189842: two golden tickets in block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 56:\n        ***REMOVED***\n        ***REMOVED*** prevblk is not null here\n        ***REMOVED***\n                payments = prevblk.returnBlockPayouts(this.transactions[i].transaction.msg);\n                reclaimed = payments.reclaimed;\n                payments.blocks.forEach(function (block) {\n                  if (block.producer_share > 0) {\n                    slips.push(new saito.slip(block.producer_publickey, block.producer_share, 2));\n              ***REMOVED***\n\n                  if (block.miner_share > 0) {\n                    slips.push(new saito.slip(block.miner_publickey, block.miner_share, 2));\n              ***REMOVED***\n\n                  if (block.router_share > 0) {\n                    slips.push(new saito.slip(block.router_publickey, block.router_share, 2));\n              ***REMOVED***\n\n                  if (block.staker_share > 0) {\n                    slips.push(new saito.slip(block.staker_publickey, block.staker_share, 2));\n              ***REMOVED***\n            ***REMOVED***);\n\n                for (x = 0; x < slips.length; x++) {\n                  slips[x].sid = x;\n            ***REMOVED***\n\n              case 60:\n                if (!(this.transactions[i].transaction.type == 2)) {\n                  _context4.next = 65;\n                  break;\n            ***REMOVED***\n\n                if (!(index_of_block_payment != -1)) {\n                  _context4.next = 64;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 581029: two block paymeet (type=2) transactions in block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 64:\n                index_of_block_payment = i;\n\n              case 65:\n        ***REMOVED***\n        ***REMOVED*** merkle sigs\n        ***REMOVED***\n                tx_sigs[i] = this.transactions[i].returnSignatureSource(this.app);\n                ; //\n        ***REMOVED*** no duplicate inputs slips\n        ***REMOVED***\n\n                j = 0;\n\n              case 68:\n                if (!(j < this.transactions[i].transaction.from.length)) {\n                  _context4.next = 76;\n                  break;\n            ***REMOVED***\n\n                if (!(hmap[this.transactions[i].transaction.from[j].returnSignatureSource()] != undefined)) {\n                  _context4.next = 72;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 820493: multiple transactions spend same input detected\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 72:\n                if (this.transactions[i].transaction.from[j].amt > 0) {\n                  hmap[this.transactions[i].transaction.from[j].returnSignatureSource()] = 1;\n            ***REMOVED***\n\n              case 73:\n                j++;\n                _context4.next = 68;\n                break;\n\n              case 76:\n                if (this.transactions[i].validate(this.app, this.block.id)) {\n                  _context4.next = 80;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 174233: block contains invalid transaction: \".concat(i));\n                this.transactions[i].is_valid = 0;\n                return _context4.abrupt(\"return\", 0);\n\n              case 80:\n                i++;\n                _context4.next = 41;\n                break;\n\n              case 83:\n                if (!(index_of_golden_ticket > -1)) {\n                  _context4.next = 96;\n                  break;\n            ***REMOVED***\n\n                if (!(index_of_block_payment == -1)) {\n                  _context4.next = 89;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 697812: golden ticket in block, but not block payment transaction\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 89:\n                if (!(this.app.crypto.hash(JSON.stringify(slips)) == this.app.crypto.hash(JSON.stringify(this.transactions[index_of_block_payment].transaction.to)))) {\n                  _context4.next = 92;\n                  break;\n            ***REMOVED***\n\n                _context4.next = 96;\n                break;\n\n              case 92:\n                console.log(\"ERROR 840192: to slips in block fee transaction invalid\");\n                console.log(\"RECOVERED SLIPS: \", slips);\n                console.log(\"TX TO SLIPS\", this.transactions[index_of_block_payment].transaction.to);\n                return _context4.abrupt(\"return\", 0);\n\n              case 96:\n                if (!(this.app.blockchain.isFullySynced() == 1)) {\n                  _context4.next = 109;\n                  break;\n            ***REMOVED***\n\n                _context4.next = 99;\n                return this.calculateRebroadcasts(this.transactions);\n\n              case 99:\n                eblkd = _context4.sent;\n        ***REMOVED***\n        ***REMOVED*** reclaimed txs\n        ***REMOVED***\n                reclaimed = Big(reclaimed).plus(Big(eblkd.reclaimed));\n\n                if (Big(this.block.reclaimed).eq(reclaimed)) {\n                  _context4.next = 104;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 241948: reclaimed funds do not match expected when validating\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 104:\n                ; //\n        ***REMOVED*** atr validates\n        ***REMOVED***\n\n                if (!(eblkd.validates == false)) {\n                  _context4.next = 108;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 115293: rebroadcast transactions do not match when validating\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 108:\n                ;\n\n              case 109:\n                if (!(tx_sigs.length > 0)) {\n                  _context4.next = 113;\n                  break;\n            ***REMOVED***\n\n                if (!(this.block.merkle != this.app.crypto.returnMerkleTree(tx_sigs).root)) {\n                  _context4.next = 113;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 258102: merkle root does not match provided root\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 113:\n                return _context4.abrupt(\"return\", 1);\n\n              case 114:\n              case \"end\":\n                return _context4.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee4, this);\n  ***REMOVED***));\n\n      function validate() {\n        return _validate.apply(this, arguments);\n  ***REMOVED***\n\n      return validate;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnBlockPayouts\",\n    value: function returnBlockPayouts() {\n      var gt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var rvalue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {***REMOVED***;\n      var rloop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var stakers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n      if (rvalue.blocks == undefined) {\n        rvalue.blocks = [];\n        rvalue.reclaimed = \"0\";\n  ***REMOVED***\n\n      var payments = {***REMOVED***;\n      payments.producer_publickey = \"\";\n      payments.producer_share = \"0.0\";\n      payments.miner_publickey = \"\";\n      payments.miner_share = \"0.0\";\n      payments.router_publickey = \"\";\n      payments.router_share = \"0.0\";\n      payments.staker_publickey = \"\";\n      payments.staker_share = \"0.0\";\n      payments.bsh = this.returnHash();\n      payments.bid = this.block.id;\n      payments.rloop = rloop; //\n      // no golden ticket? check treasury\n      //\n\n      try {\n        if (gt == null) {\n          if (this.block.prevbsh == \"\") {\n            if (rloop == 10) {\n              rvalue.reclaimed = Big(rvalue.reclaimed).plus(Big(payments.total_fees_in_block)).toFixed(8);\n              return rvalue;\n        ***REMOVED*** else {\n              return rvalue;\n        ***REMOVED***\n      ***REMOVED*** else {\n            var _prevblk = this.app.blockchain.returnBlockByHash(this.block.prevbsh);\n\n            if (this.containsGoldenTicket()) {\n              return rvalue;\n        ***REMOVED*** else {\n              return _prevblk.returnBlockPayouts(gt, rvalue, rloop + 1);\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED*** catch (err) {\n        console.log(\"ERROR: in checking treasury: \", err);\n  ***REMOVED*** //\n      // first block\n      //\n\n\n      if (this.block.prevbsh == \"\") {\n        if (rloop == 10) {\n          rvalue.reclaimed = Big(rvalue.reclaimed).plus(Big(this.returnFees())).toFixed(8);\n          return rvalue;\n    ***REMOVED*** else {\n          return rvalue;\n    ***REMOVED***\n  ***REMOVED***\n\n      try {\n***REMOVED***\n***REMOVED*** golden ticket\n***REMOVED***\n        var prevbsh = this.block.prevbsh;\n        var prevblk = this.app.blockchain.returnBlockByHash(prevbsh);\n        var producer_publickey = this.block.creator;\n        var miner_publickey = \"\";\n        var router_publickey = \"\";\n        var staker_publickey = \"\";\n        var total_work_needed = this.app.burnfee.returnWorkNeeded(prevblk.block.ts, this.block.ts, prevblk.block.bf); // int\n\n        var total_work_available = this.returnEmbeddedRoutingWork(); // string\n\n        var total_fees_in_block = this.returnFees(); // string\n\n        var producer_share = Big(total_work_available).minus(Big(total_work_needed)); // Big\n\n        var paysplit_share = Big(total_fees_in_block).minus(producer_share).plus(this.returnCoinbase()); // Big\n\n        var miner_share = paysplit_share.div(2).toFixed(8); // string\n\n        var router_share = paysplit_share.minus(Big(miner_share)).toFixed(8); // string\n\n        var staker_share = \"0.0\";\n  ***REMOVED*** catch (err) {\n        console.log(\"ERROR IN GOLDEN TICKET CREATION: \", err);\n  ***REMOVED*** //\n      // pick the router\n      //\n\n\n      if (Big(router_share).gt(0)) {\n***REMOVED***\n***REMOVED*** random decimal between 0-1 picks winning tx\n***REMOVED***\n        var winnerHash = this.app.crypto.hash(gt.random).slice(0, 12);\n        var maxHash = \"ffffffffffff\";\n        var winnerNum = parseInt(winnerHash, 16); // 16 = num is hex\n\n        var maxNum = parseInt(maxHash, 16); // 16 = num is hex\n\n        var winnerDec = winnerNum / maxNum;\n        var winner_fee = Big(total_fees_in_block).times(winnerDec);\n        var winning_tx_idx = -1;\n        var cumulative_fee = Big(0.0);\n        var stop = 0; //\n***REMOVED*** TODO - faster search algorithm\n***REMOVED***\n***REMOVED*** find winning tx randomly\n***REMOVED***\n\n        for (var i = 0; i < this.transactions.length && stop == 0; i++) {\n          cumulative_fee.plus(Big(this.transactions[i].returnFees(this.app)));\n\n          if (cumulative_fee.gte(winner_fee)) {\n            stop = 1;\n            winning_tx_idx = i - 1;\n      ***REMOVED***\n    ***REMOVED*** //\n***REMOVED*** assign winners\n***REMOVED***\n\n\n        if (winning_tx_idx == -1) {\n          router_publickey = this.block.creator;\n    ***REMOVED*** //\n***REMOVED*** or find winner in routing portion\n***REMOVED***\n        else {\n            var winning_tx = this.transactions[winning_tx_idx]; //\n    ***REMOVED*** no path info, default to sender\n    ***REMOVED***\n\n            if (winning_tx.transaction.path.length == 0) {\n              router_publickey = winning_tx.transaction.from[0].add;\n        ***REMOVED*** //\n    ***REMOVED*** path info, repeat random generation\n    ***REMOVED***\n\n\n            var winner2Hash = this.app.crypto.hash(winnerHash).slice(0, 12);\n            var winner2Num = parseInt(winner2Hash, 16);\n            var winner2Dec = winner2Num / maxNum;\n            var pathlength = winning_tx.transaction.path.length;\n            var pathtotal = winning_tx.returnFees(this.app);\n\n            if (winner2Dec == 0) {\n              router_publickey = winning_tx.transaction.path[0].to;\n        ***REMOVED*** else {\n              if (winnerDec == 1) {\n                router_publickey = winning_tx.transaction.path[pathlength].to;\n          ***REMOVED*** else {\n                var y = pathlength;\n                var x = 2 - 1 / Math.pow(2, y - 1); // i.e. 1.75 for 3 node path\n\n                var z = y * winner2Dec;\n\n                for (var _i2 = 0; _i2 < pathlength; _i2++) {\n                  var a = 2 - 1 / Math.pow(2, _i2 - 1);\n\n                  if (a <= z) {\n                    router_publickey = winning_tx.transaction.path[_i2].to;\n              ***REMOVED***\n            ***REMOVED***\n          ***REMOVED***\n        ***REMOVED***\n      ***REMOVED***\n  ***REMOVED***\n\n      if (rloop == 0) {\n***REMOVED***\n***REMOVED*** winning miner\n***REMOVED***\n        miner_publickey = gt.publickey;\n  ***REMOVED*** else {\n***REMOVED***\n***REMOVED*** winning staker\n***REMOVED***\n        var _x2 = this.app.bank.returnWinningStaker(gt, stakers);\n\n        stakers = _x2.stakers;\n        staker_publickey = _x2.publickey;\n        staker_share = miner_share;\n        miner_share = \"0.0\";\n  ***REMOVED*** // extra for testing diagnostics\n\n\n      payments.coinbase = this.returnCoinbase();\n      payments.producer_publickey = producer_publickey;\n      payments.miner_publickey = miner_publickey;\n      payments.router_publickey = router_publickey;\n      payments.staker_publickey = staker_publickey;\n      payments.producer_share = producer_share;\n      payments.miner_share = miner_share;\n      payments.staker_share = staker_share;\n      payments.router_share = router_share;\n      payments.total_fees_in_block = total_fees_in_block;\n      payments.total_work_needed = total_work_needed;\n      payments.total_work_available = total_work_available;\n      payments.paysplit_share = paysplit_share;\n      rvalue.blocks.push(payments);\n\n      if (this.containsGoldenTicket() || rloop == 10) {\n        return rvalue;\n  ***REMOVED*** else {\n        gt.random = this.app.crypto.hash(gt.random);\n        return prevblk.returnBlockPayouts(gt, rvalue, rloop + 1);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFees\",\n    value: function returnFees() {\n      var v = Big(0);\n\n      for (var i = 0; i < this.transactions.length; i++) {\n        v = v.plus(Big(this.transactions[i].returnFees(this.app)));\n  ***REMOVED***\n\n      return v.toFixed(8);\n***REMOVED*** // Use this when we're saving data to disk\n\n  ***REMOVED***, {\n    key: \"returnBlockFileData\",\n    value: function returnBlockFileData() {\n      var blkcontent = {\n        block: JSON.parse(JSON.stringify(this.block)),\n        transactions: JSON.parse(JSON.stringify(this.transactions))\n  ***REMOVED***;\n      return JSON.stringify(blkcontent);\n***REMOVED***\n  ***REMOVED***]);\n\n  return Block;\n***REMOVED***();\n\nmodule.exports = Block;\n/* WEBPACK VAR INJECTION */***REMOVED***.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2FpdG8vYmxvY2suanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2FpdG8vYmxvY2suanM/MTAxYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHNhaXRvID0gcmVxdWlyZSgnLi9zYWl0bycpO1xuY29uc3QgQmlnID0gcmVxdWlyZSgnYmlnLmpzJyk7XG5cblxuY2xhc3MgQmxvY2sge1xuXG4gIGNvbnN0cnVjdG9yKGFwcCwgYmxranNvbiA9IFwiXCIsIHR4c2pzb24gPSBcIlwiLCBjb25maXJtYXRpb25zID0gLTEpIHtcblxuICAgIHRoaXMuYXBwID0gYXBwIHx8IHt9O1xuXG4gICAgLy9cbiAgICAvLyBjb25zZW5zdXMgdmFyaWFibGVzXG4gICAgLy9cbiAgICB0aGlzLmJsb2NrIFx0XHQgICAgICAgID0ge307XG4gICAgdGhpcy5ibG9jay50cyBcdCAgICAgIFx0PSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLmJsb2NrLnByZXZic2ggXHRcdD0gXCJcIjtcbiAgICB0aGlzLmJsb2NrLm1lcmtsZSBcdCAgXHQ9IFwiXCI7XG4gICAgdGhpcy5ibG9jay5jcmVhdG9yIFx0ICBcdD0gXCJcIjtcbiAgICB0aGlzLmJsb2NrLmlkIFx0ICAgICAgXHQ9IDE7XG4gICAgdGhpcy5ibG9jay5iZiBcdCAgICAgIFx0PSAwOyBcbiAgICB0aGlzLmJsb2NrLmRpZmZpY3VsdHkgXHQ9IDAuMDtcbiAgICB0aGlzLmJsb2NrLnBheXNwbGl0IFx0PSAwLjU7XG4gICAgdGhpcy5ibG9jay5wb3dzcGxpdCBcdD0gMC41O1xuICAgIHRoaXMuYmxvY2sudHJlYXN1cnkgXHQ9IEJpZyhcIjI4NjgxMDAwMDAuMFwiKTsgIC8vIFRPRE9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4IHRyZWFzdXJ5IGFtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgIHRoaXMuYmxvY2suc3Rha2Vwb29sICBcdD0gQmlnKFwiMFwiKTtcdFx0XG4gICAgdGhpcy5ibG9jay5jb2luYmFzZSBcdD0gQmlnKFwiMC4wXCIpO1xuICAgIHRoaXMuYmxvY2sucmVjbGFpbWVkIFx0PSBCaWcoXCIwLjBcIik7XG4gICAgdGhpcy5ibG9jay5zciBcdCAgICAgIFx0PSAwO1x0XHRcdC8vIDAgLSBzdGFraW5nIHRhYmxlIG5vdCByZWZyZXNoZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSAtIHN0YWtpbmcgdGFibGUgcmVmcmVzaGVkXG5cbiAgICAvL1xuICAgIC8vIGhhc2htYXBzXG4gICAgLy9cbiAgICB0aGlzLnR4c19obWFwXHRcdD0gW107XG5cblxuICAgIC8vXG4gICAgLy8gYmxvY2sgdHJhbnNhY3Rpb25zXG4gICAgLy9cbiAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IFtdO1xuXG5cbiAgICAvL1xuICAgIC8vIGNhbGxiYWNrc1xuICAgIC8vXG4gICAgdGhpcy5jYWxsYmFja3MgIFx0PSBbXTtcbiAgICB0aGlzLmNhbGxiYWNrc1R4IFx0PSBbXTtcblxuXG4gICAgLy9cbiAgICAvLyBub24tY29uc2Vuc3VzIHZhcmlhYmxlc1xuICAgIC8vXG4gICAgdGhpcy5tYXh0aWQgXHRcdD0gMDtcbiAgICB0aGlzLm1pbnRpZCBcdFx0PSAwO1xuICAgIHRoaXMuYXZnZmVlIFx0XHQ9IDA7XG5cbiAgICB0aGlzLnNpemVfaW5fYnl0ZXMgXHQ9IDA7ICAgICAgICAgICAvLyBzaXplIG9mIGJsb2NrIGluIGJ5dGVzXG4gICAgdGhpcy5oYXNoIFx0XHQ9IFwiXCI7ICAgICAgICAgIC8vIGJsb2NrIGhhc2ggPT0gaGFzaCh0aGlzLnByZWhhc2grbGFzdF9ibG9jay5oYXNoKVxuICAgIHRoaXMucHJlaGFzaCBcdFx0PSBcIlwiOyAgICAgICAgICAvLyBoYXNoIG9mIHNpZ25hdHVyZVxuICAgIHRoaXMuZmlsZW5hbWUgXHQ9IFwiXCI7ICAgICAgICAgIC8vIG5hbWUgb2YgZmlsZSBvbiBkaXNrIGlmIHNldFxuXG4gICAgdGhpcy5jb25maXJtYXRpb25zID0gY29uZmlybWF0aW9ucztcblxuICAgIHRoaXMuaXNfdmFsaWQgPSAxOyAgICAgICAgICAgLy8gc2V0IHRvIHplcm8gaWYgdGhlcmUgaXMgYW5cblxuXG4gICAgLy9cbiAgICAvLyBpbXBvcnQgYmxvY2sgaGVhZGVyc1xuICAgIC8vXG4gICAgaWYgKGJsa2pzb24gIT0gXCJcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gaWYgKHR5cGVvZiBibGtqc29uID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyAgIHRoaXMuYmxvY2sgPSBKU09OLnBhcnNlKGJsa2pzb24udG9TdHJpbmcoXCJ1dGY4XCIpKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ibG9jayA9IGJsa2pzb24uYmxvY2s7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25zID0gYmxranNvbi50cmFuc2FjdGlvbnMubWFwKHR4ID0+IG5ldyBzYWl0by50cmFuc2FjdGlvbih0eC50cmFuc2FjdGlvbikpO1xuICAgICAgICAvLyB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5pc192YWxpZCA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cblxuXG4gIGFmZml4Q2FsbGJhY2tzKCkge1xuICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyB6KyspIHtcbiAgICAgIHZhciB0eG1zZyA9IHRoaXMudHJhbnNhY3Rpb25zW3pdLnJldHVybk1lc3NhZ2UoKTtcbiAgICAgIHRoaXMuYXBwLm1vZHVsZXMuYWZmaXhDYWxsYmFja3ModGhpcy50cmFuc2FjdGlvbnNbel0sIHosIHR4bXNnLCB0aGlzLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3NUeCwgdGhpcy5hcHApO1xuICAgIH1cbiAgfVxuXG5cblxuICBhc3luYyBidW5kbGUocHJldmJsaz1udWxsKSB7XG5cbiAgICBsZXQgbWludHhpZCA9IDE7XG4gICAgbGV0IHR4X3NpZ3MgPSBbXTtcblxuICAgIC8vXG4gICAgLy8gZGVmYXVsdCB2YWx1ZXNcbiAgICAvL1xuICAgIGlmIChwcmV2YmxrICE9IG51bGwpIHtcblxuICAgICAgdGhpcy5ibG9jay5pZCBcdFx0PSBwcmV2YmxrLmJsb2NrLmlkICsgMTtcbiAgICAgIHRoaXMuYmxvY2sudHJlYXN1cnkgXHQ9IEJpZyhwcmV2YmxrLmJsb2NrLnRyZWFzdXJ5KS5wbHVzKEJpZyhwcmV2YmxrLmJsb2NrLnJlY2xhaW1lZCkpO1xuICAgICAgdGhpcy5ibG9jay5jb2luYmFzZSBcdD0gQmlnKHRoaXMuYmxvY2sudHJlYXN1cnkpLmRpdih0aGlzLmFwcC5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kKS50b0ZpeGVkKDgpO1xuICAgICAgdGhpcy5ibG9jay50cmVhc3VyeSBcdD0gdGhpcy5ibG9jay50cmVhc3VyeS5taW51cyhCaWcodGhpcy5ibG9jay5jb2luYmFzZSkpLnRvRml4ZWQoOCk7XG4gICAgICB0aGlzLmJsb2NrLnByZXZic2ggXHQ9IHByZXZibGsucmV0dXJuSGFzaCgpO1xuICAgICAgdGhpcy5ibG9jay5kaWZmaWN1bHR5IFx0PSBwcmV2YmxrLmJsb2NrLmRpZmZpY3VsdHk7XG4gICAgICB0aGlzLmJsb2NrLnBheXNwbGl0IFx0PSBwcmV2YmxrLmJsb2NrLnBheXNwbGl0O1xuICAgICAgdGhpcy5ibG9jay5wb3dzcGxpdCBcdD0gcHJldmJsay5ibG9jay5wb3dzcGxpdDtcbiAgICAgIHRoaXMuYmxvY2sudHNcdFx0PSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHRoaXMuYmxvY2suYmYgXHRcdD0gdGhpcy5hcHAuYnVybmZlZS5yZXR1cm5CdXJuRmVlKHByZXZibGssIHRoaXMpO1xuICAgICAgaWYgKHByZXZibGsudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIG1pbnR4aWRcdFx0XHQ9IHByZXZibGsucmV0dXJuTWF4VHhJZCgpO1xuICAgICAgICBpZiAobWludHhpZCA9PSAwKSBcdHsgbWludHhpZCA9IDE7IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1pbnR4aWRcdFx0XHQ9IHByZXZibGsucmV0dXJuTWF4VHhJZCgpICsgMTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gaW5pdGlhbCB0b2tlbiBhbGxvY2F0aW9uXG4gICAgLy9cbiAgICBpZiAodGhpcy5ibG9jay5pZCA9PSAxKSB7XG5cbiAgICAgIGxldCB0eCA9IG5ldyBzYWl0by50cmFuc2FjdGlvbigpO1xuICAgICAgdHgudHJhbnNhY3Rpb24udG8ucHVzaChuZXcgc2FpdG8uc2xpcChcblx0XCIxSEw1Mm45aVdCS0ZEeU1UVnB2dUtORUh0MmZaUVV4RGVicGlCYXF3a1dNZlwiLFxuXHQxMDAwMDAwMDAwLFxuXHQzLFxuXHQwLFxuXHQwLFxuXHQwLFxuXHRcIlwiLFxuXHQxXG4gICAgICApKTtcbiAgICAgIHR4LnRyYW5zYWN0aW9uLnRvLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdFwiMkhMNTJuOWlXQktGRHlNVFZwdnVLTkVIdDJmWlFVeERlYnBpQmFxd2tXTWZcIixcblx0MTAwMDAwMDAwMCxcblx0Myxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4gICAgICB0eC50cmFuc2FjdGlvbi50by5wdXNoKG5ldyBzYWl0by5zbGlwKFxuXHRcIjNITDUybjlpV0JLRkR5TVRWcHZ1S05FSHQyZlpRVXhEZWJwaUJhcXdrV01mXCIsXG5cdDEwMDAwMDAwMDAsXG5cdDMsXG5cdDAsXG5cdDAsXG5cdDAsXG5cdFwiXCIsXG5cdDFcbiAgICAgICkpO1xuICAgICAgdHgudHJhbnNhY3Rpb24udG8ucHVzaChuZXcgc2FpdG8uc2xpcChcblx0XCI0SEw1Mm45aVdCS0ZEeU1UVnB2dUtORUh0MmZaUVV4RGVicGlCYXF3a1dNZlwiLFxuXHQxMDAwMDAwMDAwLFxuXHQzLFxuXHQwLFxuXHQwLFxuXHQwLFxuXHRcIlwiLFxuXHQxXG4gICAgICApKTtcbiAgICAgIHR4LnRyYW5zYWN0aW9uLnRvLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdFwiNUhMNTJuOWlXQktGRHlNVFZwdnVLTkVIdDJmWlFVeERlYnBpQmFxd2tXTWZcIixcblx0MTAwMDAwMDAwMCxcblx0Myxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4gICAgICB0eC50cmFuc2FjdGlvbi50eXBlID0gMztcbiAgICAgIHR4LnRyYW5zYWN0aW9uLmZyb20ucHVzaChuZXcgc2FpdG8uc2xpcChcblx0dGhpcy5hcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpICxcblx0NTAwMDAwMDAwMCxcblx0Myxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4gICAgICB0eC50cmFuc2FjdGlvbi5pZCA9IDE7XG4gICAgICB0eCA9IHRoaXMuYXBwLndhbGxldC5zaWduVHJhbnNhY3Rpb24odHgpO1xuICAgICAgdGhpcy50cmFuc2FjdGlvbnMucHVzaCh0eCk7XG5cbi8vXG4vLyBzdGFraW5nIHR4XG4vL1xuICAgICAgdHggPSBuZXcgc2FpdG8udHJhbnNhY3Rpb24oKTtcbiAgICAgIHR4LnRyYW5zYWN0aW9uLnRvLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdFwiMUhMNTJuOWlXQktGRHlNVFZwdnVLTkVIdDJmWlFVeERlYnBpQmFxd2tXTWZcIixcblx0NjAwMDAwMCxcblx0NCxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4vKioqKlxuICAgICAgdHgudHJhbnNhY3Rpb24udHlwZSA9IDQ7XG4gICAgICB0eC50cmFuc2FjdGlvbi5mcm9tLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSAsXG5cdDYwMDAwMDAsXG5cdDQsXG5cdDAsXG5cdDAsXG5cdDAsXG5cdFwiXCIsXG5cdDFcbiAgICAgICkpO1xuICAgICAgdHgudHJhbnNhY3Rpb24uaWQgPSAyO1xuICAgICAgdHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHR4KTtcbiAgICAgIHRoaXMudHJhbnNhY3Rpb25zLnB1c2godHgpO1xuKioqKi9cbiAgICB9XG5cblxuXG5cbiAgICAvL1xuICAgIC8vIHJlY2xhaW1lZCBmdW5kcyBhcmUgdGhlIHRva2VucyB0aGF0IGFyZVxuICAgIC8vIHVuc3BlbnQgaW4gdGhlIGJsb2NrIDEgR0VORVNJUyBwZXJpb2QgYWdvXG4gICAgLy8gYW5kIHRodXMgd2lsbCBmYWxsIG9mZiB0aGUgY2hhaW4gd2l0aCB0aGUgXG4gICAgLy8gYWRkaXRpb24gb2YgdGhpcyBibG9jay5cbiAgICAvL1xuICAgIC8vIHdlIGFkZCB0aGVzZSB0byBvdXIgdHJlYXN1cnkgaW4gdGhlIG5leHQgXG4gICAgLy8gYmxvY2sgKHNlZSBhYm92ZSlcbiAgICAvL1xuICAgIGxldCBlYmxrZCA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlUmVicm9hZGNhc3RzKCk7XG5cbiAgICAvL1xuICAgIC8vIHJlY2xhaW1lZCB0eHNcbiAgICAvL1xuICAgIHRoaXMuYmxvY2sucmVjbGFpbWVkID0gZWJsa2QucmVjbGFpbWVkO1xuXG4gICAgLy9cbiAgICAvLyBhdXRvbWF0aWMgdHJhbnNhY3Rpb24gcmVicm9hZGNhc3RpbmdcbiAgICAvL1xuICAgIGxldCByZWJyb2FkY2FzdF9hbXQgPSBCaWcoMC4wKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVibGtkLnJlYnJvYWRjYXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgZWJsa2QucmVicm9hZGNhc3RbaV0udHJhbnNhY3Rpb24udG8ubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgIHJlYnJvYWRjYXN0X2FtdCA9IHJlYnJvYWRjYXN0X2FtdC5wbHVzKEJpZyhlYmxrZC5yZWJyb2FkY2FzdFtpXS50cmFuc2FjdGlvbi50b1tpaV0uYW10KSk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYW5zYWN0aW9ucy5wdXNoKGVibGtkLnJlYnJvYWRjYXN0W2ldKTtcbiAgICB9XG5cblxuXG4gICAgLy9cbiAgICAvLyBub3cgY2hlY2sgdHJhbnNhY3Rpb25zXG4gICAgLy9cbiAgICBsZXQgbnVtYmVyX29mX2dvbGRlbl90aWNrZXRzID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgLy9cbiAgICAgIC8vIHNlcXVlbnRpYWwgaWRzXG4gICAgICAvL1xuICAgICAgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uaWQgPSAobWludHhpZCArIGkpO1xuXG4gICAgICAvL1xuICAgICAgLy8gZ29sZGVuIHRpY2tldFxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi50eXBlID09IDEpIHtcblxuICAgICAgICBudW1iZXJfb2ZfZ29sZGVuX3RpY2tldHMrKztcbiAgICAgICAgaWYgKG51bWJlcl9vZl9nb2xkZW5fdGlja2V0cyA+IDEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDQxMjUyMzogc2Vjb25kIGdvbGRlbiB0aWNrZXQgZm91bmQgaW4gYmxvY2tcIik7XG4gICAgICAgICAgdGhpcy5pc192YWxpZCA9IDA7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvL1xuICAgICAgICAvLyBhZGQgcGF5bWVudCBvdXRwdXRzXG4gICAgICAgIC8vXG4gICAgICAgIGlmIChwcmV2YmxrICE9IG51bGwpIHtcblxuICAgICAgICAgIGxldCBwYXltZW50cyA9IHByZXZibGsucmV0dXJuQmxvY2tQYXlvdXRzKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLm1zZyk7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIGFkZCByZWNsYWltZWQgZnJvbSBibG9ja1xuICAgICAgICAgIC8vXG4gICAgICAgICAgdGhpcy5ibG9jay5yZWNsYWltZWQgPSBCaWcodGhpcy5ibG9jay5yZWNsYWltZWQpLnBsdXMoQmlnKHBheW1lbnRzLnJlY2xhaW1lZCkpLnRvRml4ZWQoOCk7XG5cbiAgICAgICAgICBsZXQgc2xpcHMgPSBbXTtcblxuICAgICAgICAgIHBheW1lbnRzLmJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT4ge1xuICAgICAgICAgICAgaWYgKGJsb2NrLnByb2R1Y2VyX3NoYXJlID4gMCkge1xuICAgICAgICAgICAgICBzbGlwcy5wdXNoKG5ldyBzYWl0by5zbGlwKGJsb2NrLnByb2R1Y2VyX3B1YmxpY2tleSwgYmxvY2sucHJvZHVjZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChibG9jay5taW5lcl9zaGFyZSA+IDApIHtcbiAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5taW5lcl9wdWJsaWNrZXksIGJsb2NrLm1pbmVyX3NoYXJlLCAyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmxvY2sucm91dGVyX3NoYXJlID4gMCkge1xuICAgICAgICAgICAgICBzbGlwcy5wdXNoKG5ldyBzYWl0by5zbGlwKGJsb2NrLnJvdXRlcl9wdWJsaWNrZXksIGJsb2NrLnJvdXRlcl9zaGFyZSwgMikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJsb2NrLnN0YWtlcl9zaGFyZSA+IDApIHtcbiAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5zdGFrZXJfcHVibGlja2V5LCBibG9jay5zdGFrZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChzbGlwcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIGxldCBuZXd0eCA9IG5ldyBzYWl0by50cmFuc2FjdGlvbigpO1xuICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24uZnJvbS5wdXNoKG5ldyBzYWl0by5zbGlwKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSwgMC4wLCAyKSk7XG4gICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi50byA9IHNsaXBzO1xuICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24udHlwZSA9IDI7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBpbmNsdWRpbmcgZm9yIHJlZmVyZW5jZVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLmlkICA9IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZyA9IHBheW1lbnRzO1xuICAgICAgICAgICAgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zLnB1c2gobmV3dHgpO1xuXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24ubXNnLnRhcmdldCAhPSBwcmV2YmxrLnJldHVybkhhc2goKSkge1xuICAgICAgICAgIHRoaXMuaXNfdmFsaWQgPSAwO1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIG1lcmtsZSBzaWdzXG4gICAgICAvL1xuICAgICAgdHhfc2lnc1tpXSA9IHRoaXMudHJhbnNhY3Rpb25zW2ldLnJldHVyblNpZ25hdHVyZVNvdXJjZSh0aGlzLmFwcCk7XG5cbiAgICAgIC8vXG4gICAgICAvLyBoYXNobWFwIG9mIHR4c1xuICAgICAgLy9cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaWkrKykgeyB0aGlzLnR4c19obWFwW3RoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmZyb21baWldLmFkZF0gPSAxOyB9XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udG8ubGVuZ3RoOyBpaSsrKSB7IHRoaXMudHhzX2htYXBbdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udG9baWldLmFkZF0gPSAxOyB9XG5cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIG1lcmtsZSByb290XG4gICAgLy9cbiAgICBpZiAodHhfc2lncy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmJsb2NrLm1lcmtsZSA9IHRoaXMuYXBwLmNyeXB0by5yZXR1cm5NZXJrbGVUcmVlKHR4X3NpZ3MpLnJvb3Q7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgZGlmZmljdWx0eSBhbmQgcGF5c3BsaXRcbiAgICAvL1xuXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgfVxuXG5cblxuXG4gIC8vXG4gIC8vIGluIHZhbGlkYXRpb24gbW9kZSwgd2UgcHJvdmlkZSBsaXN0IG9mIFRYUyB0byBjaGVja1xuICAvL1xuICBhc3luYyBjYWxjdWxhdGVSZWJyb2FkY2FzdHModHhzPW51bGwpIHtcblxuICAgIGxldCBleHBpcmluZ19kYXRhID0geyBcbiAgICAgIHJlY2xhaW1lZDogXCIwLjBcIiwgXG4gICAgICByZWJyb2FkY2FzdDogW10sIFxuICAgICAgdmFsaWRhdGVzOiB0cnVlICxcbiAgICAgIHRvdGFsX3JlYnJvYWRjYXN0OiAwXG4gICAgfVxuICAgIGxldCBuZWVkc19yZWJyb2FkY2FzdCA9IDA7XG5cbiAgICBpZiAodGhpcy5hcHAuQlJPV1NFUiA9PSAxIHx8IHRoaXMuYXBwLlNQVk1PREUgPT0gMSkgeyByZXR1cm4gZXhwaXJpbmdfZGF0YTsgfVxuXG4gICAgLy9cbiAgICAvLyBlbGltaW5hdGVkIGJsb2NrIGlkXG4gICAgLy9cbiAgICBsZXQgZWJsa19pZCA9IHRoaXMuYmxvY2suaWQgLSB0aGlzLmFwcC5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kIC0gMTtcblxuICAgIC8vXG4gICAgLy8gaWYgbm8gYmxvY2tzIHRvIGVsaW1pbmF0ZSwgcmV0dXJuIDAuMCBhbmQgY29uZmlybSB2YWxpZFxuICAgIC8vXG4gICAgaWYgKGVibGtfaWQgPCAxKSB7IHJldHVybiBleHBpcmluZ19kYXRhOyB9XG5cbiAgICBsZXQgdHhhcnJheSA9IFtdO1xuICAgIGxldCB1bnNwZW50X2FtdCA9IEJpZygwLjApO1xuXG4gICAgbGV0IGhhc2hfb2ZfZWJsb2NrID0gdGhpcy5hcHAuYmxvY2tjaGFpbi5iaWRfYnNoX2htYXBbZWJsa19pZF07XG4gICAgbGV0IGVibGsgPSBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja0J5SGFzaChoYXNoX29mX2VibG9jayk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVibGsudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgZWJsay50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udG8ubGVuZ3RoOyBpaSsrKSB7XG5cbiAgICAgICAgbGV0IHNsaXAgXHQ9IGVibGsudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLnRvW2lpXTtcbiAgICAgICAgc2xpcC5iaWQgICBcdD0gZWJsay5yZXR1cm5JZCgpO1xuICAgICAgICBzbGlwLnRpZCAgIFx0PSBlYmxrLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5pZDtcbiAgICAgICAgc2xpcC5ic2ggXHQ9IGVibGsucmV0dXJuSGFzaCgpO1xuICAgICAgICBzbGlwLnNpZCBcdD0gaWk7XG5cbiAgICAgICAgaWYgKEJpZyhzbGlwLmFtdCkuZ3QoMCkpIHtcbiAgICAgICAgICBpZiAodGhpcy5hcHAuc2hhc2htYXAudmFsaWRhdGVfc2xpcChzbGlwLnJldHVyblNpZ25hdHVyZVNvdXJjZSgpLCB0aGlzLmJsb2NrLmlkKSkge1xuICAgICAgICAgICAgaWYgKGVibGsudHJhbnNhY3Rpb25zW2ldLmlzUmVicm9hZGNhc3QoZWJsaywgdGhpcywgaWkpKSB7XG5cblx0ICAgICAgLy9cblx0ICAgICAgLy8gbnVtYmVyIG9mIHNsaXBzIHJlYnJvYWRjYXN0IGFzIFRYU1xuXHQgICAgICAvL1xuICAgICAgICAgICAgICBleHBpcmluZ19kYXRhLnRvdGFsX3JlYnJvYWRjYXN0Kys7XG5cbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgLy8gY3JlYXRpbmdcbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgaWYgKHR4cyA9PSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSByZWJyb2FkY2FzdCB0eFxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgbGV0IHR4ID0gZWJsay50cmFuc2FjdGlvbnNbaV0uZ2VuZXJhdGVSZWJyb2FkY2FzdFRyYW5zYWN0aW9uKHNsaXAudGlkLCBzbGlwLnNpZCwgMik7XG4gICAgICAgICAgICAgICAgaWYgKHR4ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNDgxMDI5OiBpc3N1ZSBnZW5lcmF0aW5nIHJlYnJvYWRjYXN0IHRyYW5zYWN0aW9uLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdHggd2l0aCBiaWRcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGlpaSA9IDA7IGlpaSA8IHR4LnRyYW5zYWN0aW9uLmZyb20ubGVuZ3RoOyBpaWkrKykge1xuICAgICAgICAgICAgICAgICAgdHgudHJhbnNhY3Rpb24uZnJvbVtpaWldLmJpZCA9IHRoaXMuYmxvY2suaWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXhwaXJpbmdfZGF0YS5yZWJyb2FkY2FzdC5wdXNoKHR4KTtcblxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvLyB2YWxpZGF0aW5nXG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG5cblx0XHRuZWVkc19yZWJyb2FkY2FzdCsrO1xuICAgICAgICAgICAgICAgIGxldCBpc190eF9pbl9ibG9jayA9IDA7XG5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBzdXJlbHkgd2UgY2FuIHNwZWVkIHRoaXMgbG9vcCB1cFxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCB0eHMubGVuZ3RoOyB2KyspIHtcblxuICAgICAgICAgICAgICAgICAgaWYgKHR4c1t2XS50cmFuc2FjdGlvbi5zaWcgPT0gZWJsay50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uc2lnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzX3R4X2luX2Jsb2NrID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdiA9IHR4cy5sZW5ndGggKyAxO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhbiBlbGlnaWJsZSB0eCB0aGF0IGhhcyBub3RcbiAgICAgICAgICAgICAgICAvLyBiZWVuIHJlYnJvYWRjYXN0ISB0aGlzIGNvbnN0aXR1dGVzXG4gICAgICAgICAgICAgICAgLy8gYW4gYXR0YWNrXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICBpZiAoaXNfdHhfaW5fYmxvY2sgPT0gMCkge1xuY29uc29sZS5sb2coXCJcXG5USElTIFRYIElTIE1JU1NJTkc6IFwiICsgSlNPTi5zdHJpbmdpZnkoZWJsay50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24pKTtcbiAgICAgICAgICAgICAgICAgIGV4cGlyaW5nX2RhdGEudmFsaWRhdGVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB1bnNwZW50X2FtdCA9IHVuc3BlbnRfYW10LnBsdXMoQmlnKHNsaXAuYW10KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXhwaXJpbmdfZGF0YS5yZWNsYWltZWQgPSB1bnNwZW50X2FtdC50b0ZpeGVkKDgpO1xuXG4gICAgcmV0dXJuIGV4cGlyaW5nX2RhdGE7XG4gIH1cblxuICBjb250YWluc0dvbGRlblRpY2tldCgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0uaXNHb2xkZW5UaWNrZXQoKSA9PSAxKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGRlY3J5cHRUcmFuc2FjdGlvbnMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLmludm9sdmVzUHVibGljS2V5KHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSkgPT0gMSkge1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uc1tpXS5kZWNyeXB0TWVzc2FnZSh0aGlzLmFwcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuRmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2sudHMgKyBcIi1cIiArIHRoaXMucmV0dXJuSGFzaCgpICsgXCIuYmxrXCI7XG4gIH1cblxuICByZXR1cm5Sb3V0aW5nV29ya05lZWRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9jay5iZi5jdXJyZW50O1xuICB9XG5cbiAgcmV0dXJuQ29pbmJhc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2suY29pbmJhc2U7XG4gIH1cblxuICByZXR1cm5EaWZmaWN1bHR5KCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLmRpZmZpY3VsdHk7XG4gIH1cblxuICByZXR1cm5FbWJlZGRlZFJvdXRpbmdXb3JrKCkge1xuXG4gICAgbGV0IHYgPSBCaWcoMCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0uaXNfdmFsaWQgPT0gMSkge1xuICAgICAgICBsZXQgYXZhaWxhYmxlX3dvcmsgPSBCaWcodGhpcy50cmFuc2FjdGlvbnNbaV0ucmV0dXJuUm91dGluZ1dvcmtBdmFpbGFibGUodGhpcy5hcHAsIHRoaXMuYmxvY2suY3JlYXRvcikpO1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udHlwZSA9PSAxKSB7XG4gICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLm1zZy50YXJnZXQgIT0gdGhpcy5wcmV2YnNoKSB7XG4gICAgICAgICAgICBhdmFpbGFibGVfd29yayA9IEJpZygwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdiA9IHYucGx1cyhhdmFpbGFibGVfd29yayk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2LnRvRml4ZWQoOCk7XG4gIH1cblxuXG4gIHJldHVybkhhc2goKSB7XG4gICAgaWYgKHRoaXMuaGFzaCAhPSBcIlwiKSB7IHJldHVybiB0aGlzLmhhc2g7IH1cbiAgICB0aGlzLnByZWhhc2ggPSB0aGlzLmFwcC5jcnlwdG8uaGFzaCh0aGlzLnJldHVybkZpbmdlcnByaW50KCkpO1xuICAgIHRoaXMuaGFzaCA9IHRoaXMuYXBwLmNyeXB0by5oYXNoKHRoaXMucHJlaGFzaCArIHRoaXMuYmxvY2sucHJldmJzaCk7XG4gICAgcmV0dXJuIHRoaXMuaGFzaDtcbiAgfVxuXG5cbiAgcmV0dXJuSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2suaWQ7XG4gIH1cblxuICByZXR1cm5NYXhUeElkKCkge1xuICAgIGlmICh0aGlzLm1heHRpZCAhPSAwKSB7IHJldHVybiB0aGlzLm1heHRpZDsgfVxuICAgIGZvciAodmFyIHogPSAwOyB6IDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyB6KyspIHtcbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1t6XS50cmFuc2FjdGlvbi5pZCA+IHRoaXMubWF4dGlkKSB7XG4gICAgICAgIHRoaXMubWF4dGlkID0gdGhpcy50cmFuc2FjdGlvbnNbel0udHJhbnNhY3Rpb24uaWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1heHRpZDtcbiAgfVxuXG4gIHJldHVybk1pblR4SWQoKSB7XG4gICAgaWYgKHRoaXMubWludGlkICE9IDApIHsgcmV0dXJuIHRoaXMubWludGlkOyB9XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwKSB7IHJldHVybiB0aGlzLmFwcC5ibG9ja2NoYWluLnJldHVybk1pblR4SWQoKTsgfTtcbiAgICB0aGlzLm1pbnRpZCA9IHRoaXMudHJhbnNhY3Rpb25zWzBdLnRyYW5zYWN0aW9uLmlkO1xuICAgIGZvciAodmFyIHogPSAxOyB6IDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyB6KyspIHtcbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1t6XS50cmFuc2FjdGlvbi5pZCA8IHRoaXMubWludGlkKSB7XG4gICAgICAgIHRoaXMubWludGlkID0gdGhpcy50cmFuc2FjdGlvbnNbel0udHJhbnNhY3Rpb24uaWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1pbnRpZDtcbiAgfVxuXG4gIHJldHVyblBheXNwbGl0KCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLnBheXNwbGl0O1xuICB9XG5cbiAgcmV0dXJuUG93c3BsaXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2sucG93c3BsaXQ7XG4gIH1cblxuICByZXR1cm5SZWNsYWltZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2sucmVjbGFpbWVkO1xuICB9XG5cbiAgcmV0dXJuRmluZ2VycHJpbnQoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuYmxvY2spO1xuICB9O1xuXG4gIHJldHVyblRyZWFzdXJ5KCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLnRyZWFzdXJ5O1xuICB9XG5cbiAgYXN5bmMgcnVuQ2FsbGJhY2tzKGNvbmYpIHtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5jb25maXJtYXRpb25zICsgMTsgaSA8PSBjb25mOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0aGlzLmNhbGxiYWNrcy5sZW5ndGg7IGlpKyspIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbaWldKHRoaXMsIHRoaXMudHJhbnNhY3Rpb25zW3RoaXMuY2FsbGJhY2tzVHhbaWldXSwgaSwgdGhpcy5hcHApO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbmZpcm1hdGlvbnMgPSBjb25mO1xuICB9XG5cbiAgc3BlbmRJbnB1dHMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmZyb20ubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tW2lpXS5hbXQgPiAwKSB7XG5cdCAgdGhpcy5hcHAuc2hhc2htYXAuaW5zZXJ0X3NsaXAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uZnJvbVtpaV0ucmV0dXJuU2lnbmF0dXJlU291cmNlKCksIHRoaXMuYmxvY2suaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdW5zcGVuZElucHV0cygpIHtcbiAgICBmb3IgKGxldCBiID0gMDsgYiA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDsgYisrKSB7XG4gICAgICBmb3IgKGxldCBiYiA9IDA7IGJiIDwgdGhpcy50cmFuc2FjdGlvbnNbYl0udHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IGJiKyspIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2JdLnRyYW5zYWN0aW9uLmZyb21bYmJdLmFtdCA+IDApIHtcbiAgICAgICAgICB0aGlzLmFwcC5zaGFzaG1hcC5pbnNlcnRfc2xpcCh0aGlzLnRyYW5zYWN0aW9uc1tiXS50cmFuc2FjdGlvbi5mcm9tW2JiXS5yZXR1cm5TaWduYXR1cmVTb3VyY2UoKSwgLTEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAxO1xuICB9XG5cblxuXG5cbiAgYXN5bmMgdmFsaWRhdGUoKSB7XG5cbiAgICBpZiAodGhpcy5ibG9jay5wcmV2YnNoID09IFwiXCIpIHsgcmV0dXJuIDE7IH1cblxuICAgIC8vdHJ5IHtcblxuICAgICAgbGV0IHJlY2xhaW1lZCA9IFwiMFwiO1xuICAgICAgbGV0IHByZXZibGsgPSB0aGlzLmFwcC5ibG9ja2NoYWluLnJldHVybkJsb2NrQnlIYXNoKHRoaXMuYmxvY2sucHJldmJzaCk7XG4gICAgICBsZXQgbWludHhpZCA9IDE7XG4gICAgICBsZXQgdHhfc2lncyA9IFtdO1xuICAgICAgaWYgKHByZXZibGsgIT0gbnVsbCkge1xuICAgICAgICBpZiAocHJldmJsay50cmFuc2FjdGlvbnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICBtaW50eGlkID0gcHJldmJsay5yZXR1cm5NYXhUeElkKCk7XG4gICAgICAgICAgaWYgKG1pbnR4aWQgPT0gMCkgeyBtaW50eGlkID0gMTsgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pbnR4aWQgPSBwcmV2YmxrLnJldHVybk1heFR4SWQoKSsxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vXG4gICAgICAvLyBjaGVjayBibG9jayBoZWFkZXJzXG4gICAgICAvL1xuICAgICAgaWYgKHRoaXMuYmxvY2suaWQgIT0gKHByZXZibGsuYmxvY2suaWQrMSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA0ODIwMzk6IGJsb2NrIGlkIGlzIG5vdCBzaW5nbGUgaW5jcmVtZW50IG92ZXIgcHJldmlvdXMgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICBsZXQgYnQgPSBCaWcocHJldmJsay5ibG9jay50cmVhc3VyeSkucGx1cyhCaWcocHJldmJsay5ibG9jay5yZWNsYWltZWQpKTtcbiAgICAgIGxldCBjYiA9IEJpZyhidCkuZGl2KHRoaXMuYXBwLmJsb2NrY2hhaW4uZ2VuZXNpc19wZXJpb2QpLnRvRml4ZWQoOCk7XG4gICAgICAgICAgYnQgPSBidC5taW51cyhCaWcoY2IpKS50b0ZpeGVkKDgpO1xuXG4gICAgICBpZiAodGhpcy5ibG9jay50cmVhc3VyeSAhPSBidCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDQxMDgyOTogYmxvY2sgdHJlYXN1cnkgZG9lcyBub3QgdmFsaWRhdGUgaW4gbmV3IGJsb2NrXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYmxvY2suY29pbmJhc2UgIT0gY2IpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA0MTA4Mjk6IGJsb2NrIGNvaW5iYXNlIGRvZXMgbm90IHZhbGlkYXRlIGluIG5ldyBibG9ja1wiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmJsb2NrLmRpZmZpY3VsdHkgIT0gcHJldmJsay5ibG9jay5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTcxOTI4OiBibG9jayBkaWZmaWN1bHR5IGRvZXMgbm90IHZhbGlkYXRlIGluIG5ldyBibG9ja1wiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5ibG9jay5wYXlzcGxpdCAhPSBwcmV2YmxrLmJsb2NrLnBheXNwbGl0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTcxOTI4OiBibG9jayBwYXlzcGxpdCBkb2VzIG5vdCB2YWxpZGF0ZSBpbiBuZXcgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYmxvY2sucG93c3BsaXQgIT0gcHJldmJsay5ibG9jay5wb3dzcGxpdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MTkyODogYmxvY2sgZGlmZmljdWx0eSBkb2VzIG5vdCB2YWxpZGF0ZSBpbiBuZXcgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICBsZXQgYmYgPSB0aGlzLmFwcC5idXJuZmVlLnJldHVybkJ1cm5GZWUocHJldmJsaywgdGhpcyk7XG4gICAgICBpZiAodGhpcy5ibG9jay5iZiAhPSBiZikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MTkyODogYmxvY2sgZGlmZmljdWx0eSBkb2VzIG5vdCB2YWxpZGF0ZSBpbiBuZXcgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gbXkgdGltZXN0YW1wIG11c3QgYmUgYmlnZ2VyIHRoYW4gbGFzdCB0aW1lc3RhbXBcbiAgICAgIC8vXG4gICAgICBpZiAocHJldmJsay5ibG9jay50cyA+PSB0aGlzLmJsb2NrLnRzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNzI5Mzg0OiBibG9jayB0aW1lc3RhbXAgbm90IGluY3JlbWVudGVkIGZyb20gcHJldmlvdXMgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG5cbiAgICAgIGxldCBobWFwID0gW107XG4gICAgICBsZXQgc2xpcHMgPSBbXTtcbiAgICAgIGxldCBudW1iZXJfb2ZfZ29sZGVuX3RpY2tldHMgPSAwO1xuICAgICAgbGV0IGluZGV4X29mX2Jsb2NrX3BheW1lbnQgPSAtMTtcbiAgICAgIGxldCBpbmRleF9vZl9nb2xkZW5fdGlja2V0ID0gLTE7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aC0xOyBpKyspIHtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBzZXF1ZW50aWFsIGlkc1xuICAgICAgICAvL1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uaWQgIT0gKG1pbnR4aWQgKyBpKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTE3MzI0OiB0cmFuc2FjdGlvbiBpZHMgYXJlIG91dC1vZi1vcmRlciB3aGVuIHZhbGlkYXRpbmcgYmxvY2sgLSBcIiArIG1pbnR4aWQgKyBcIi1cIiArIGkgKyBcIiAtLS0tLS0tIFwiICsgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cblxuICAgICAgICAvL1xuICAgICAgICAvLyBnb2xkZW4gdGlja2V0XG4gICAgICAgIC8vXG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi50eXBlID09IDEpIHtcblxuICAgICAgICAgIGluZGV4X29mX2dvbGRlbl90aWNrZXQgPSBpO1xuXG4gICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLm1zZy50YXJnZXQgIT0gcHJldmJsay5yZXR1cm5IYXNoKCkpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAwMjkzMTI6IGdvbGRlbiB0aWNrZXQgZG9lcyBub3QgbWF0Y2ggcHJldmJsayBoYXNoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBudW1iZXJfb2ZfZ29sZGVuX3RpY2tldHMrKztcbiAgICAgICAgICAgIGlmIChudW1iZXJfb2ZfZ29sZGVuX3RpY2tldHMgPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMTg5ODQyOiB0d28gZ29sZGVuIHRpY2tldHMgaW4gYmxvY2tcIik7XG4gICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gcHJldmJsayBpcyBub3QgbnVsbCBoZXJlXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgbGV0IHBheW1lbnRzID0gcHJldmJsay5yZXR1cm5CbG9ja1BheW91dHModGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24ubXNnKTtcbiAgICAgICAgICAgIHJlY2xhaW1lZCA9IHBheW1lbnRzLnJlY2xhaW1lZDtcblxuICAgICAgICAgICAgcGF5bWVudHMuYmxvY2tzLmZvckVhY2goKGJsb2NrKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChibG9jay5wcm9kdWNlcl9zaGFyZSA+IDApIHtcbiAgICAgICAgICAgICAgICBzbGlwcy5wdXNoKG5ldyBzYWl0by5zbGlwKGJsb2NrLnByb2R1Y2VyX3B1YmxpY2tleSwgYmxvY2sucHJvZHVjZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYmxvY2subWluZXJfc2hhcmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5taW5lcl9wdWJsaWNrZXksIGJsb2NrLm1pbmVyX3NoYXJlLCAyKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGJsb2NrLnJvdXRlcl9zaGFyZSA+IDApIHtcbiAgICAgICAgICAgICAgICBzbGlwcy5wdXNoKG5ldyBzYWl0by5zbGlwKGJsb2NrLnJvdXRlcl9wdWJsaWNrZXksIGJsb2NrLnJvdXRlcl9zaGFyZSwgMikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChibG9jay5zdGFrZXJfc2hhcmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5zdGFrZXJfcHVibGlja2V5LCBibG9jay5zdGFrZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHNsaXBzLmxlbmd0aDsgeCsrKSB7IHNsaXBzW3hdLnNpZCA9IHg7IH1cblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGZlZSB0cmFuc2FjdGlvbiBhbHdheXMgZm9sbG93cyBnb2xkZW4gdGlja2V0IChpZiBleGlzdHMpXG4gICAgICAgIC8vXG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi50eXBlID09IDIpIHtcbiAgICAgICAgICBpZiAoaW5kZXhfb2ZfYmxvY2tfcGF5bWVudCAhPSAtMSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1ODEwMjk6IHR3byBibG9jayBwYXltZWV0ICh0eXBlPTIpIHRyYW5zYWN0aW9ucyBpbiBibG9ja1wiKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbmRleF9vZl9ibG9ja19wYXltZW50ID0gaTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gbWVya2xlIHNpZ3NcbiAgICAgICAgLy9cbiAgICAgICAgdHhfc2lnc1tpXSA9IHRoaXMudHJhbnNhY3Rpb25zW2ldLnJldHVyblNpZ25hdHVyZVNvdXJjZSh0aGlzLmFwcCk7O1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIG5vIGR1cGxpY2F0ZSBpbnB1dHMgc2xpcHNcbiAgICAgICAgLy9cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgaWYgKGhtYXBbdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uZnJvbVtqXS5yZXR1cm5TaWduYXR1cmVTb3VyY2UoKV0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDgyMDQ5MzogbXVsdGlwbGUgdHJhbnNhY3Rpb25zIHNwZW5kIHNhbWUgaW5wdXQgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmZyb21bal0uYW10ID4gMCkge1xuICAgICAgICAgICAgaG1hcFt0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tW2pdLnJldHVyblNpZ25hdHVyZVNvdXJjZSgpXSA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdmFsaWRhdGUgdHJhbnNhY3Rpb25zXG4gICAgICAgIC8vXG4gICAgICAgIGlmICghdGhpcy50cmFuc2FjdGlvbnNbaV0udmFsaWRhdGUodGhpcy5hcHAsIHRoaXMuYmxvY2suaWQpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYEVSUk9SIDE3NDIzMzogYmxvY2sgY29udGFpbnMgaW52YWxpZCB0cmFuc2FjdGlvbjogJHtpfWApO1xuICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zW2ldLmlzX3ZhbGlkID0gMDtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gZ29sZGVuIHRpY2tldHMgbXVzdCBwYXkgb3V0XG4gICAgICAvL1xuICAgICAgaWYgKGluZGV4X29mX2dvbGRlbl90aWNrZXQgPiAtMSkge1xuXHRpZiAoaW5kZXhfb2ZfYmxvY2tfcGF5bWVudCA9PSAtMSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNjk3ODEyOiBnb2xkZW4gdGlja2V0IGluIGJsb2NrLCBidXQgbm90IGJsb2NrIHBheW1lbnQgdHJhbnNhY3Rpb25cIik7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIGNoZWNrIGFjY3VyYXRlXG4gICAgICAgICAgLy9cbiAgICAgICAgICBpZiAodGhpcy5hcHAuY3J5cHRvLmhhc2goSlNPTi5zdHJpbmdpZnkoc2xpcHMpKSA9PSB0aGlzLmFwcC5jcnlwdG8uaGFzaChKU09OLnN0cmluZ2lmeSh0aGlzLnRyYW5zYWN0aW9uc1tpbmRleF9vZl9ibG9ja19wYXltZW50XS50cmFuc2FjdGlvbi50bykpKSB7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgODQwMTkyOiB0byBzbGlwcyBpbiBibG9jayBmZWUgdHJhbnNhY3Rpb24gaW52YWxpZFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUkVDT1ZFUkVEIFNMSVBTOiBcIiwgc2xpcHMpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUWCBUTyBTTElQU1wiLCB0aGlzLnRyYW5zYWN0aW9uc1tpbmRleF9vZl9ibG9ja19wYXltZW50XS50cmFuc2FjdGlvbi50byk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICB9IFxuICAgICAgICB9XG4gICAgICB9XG5cblxuICAgICAgLy9cbiAgICAgIC8vIGlmIGZ1bGx5LXN5bmNlZFxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLmFwcC5ibG9ja2NoYWluLmlzRnVsbHlTeW5jZWQoKSA9PSAxKSB7XG5cbiAgICAgICAgbGV0IGVibGtkXHQ9IGF3YWl0IHRoaXMuY2FsY3VsYXRlUmVicm9hZGNhc3RzKHRoaXMudHJhbnNhY3Rpb25zKTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyByZWNsYWltZWQgdHhzXG4gICAgICAgIC8vXG4gICAgICAgIHJlY2xhaW1lZCA9IEJpZyhyZWNsYWltZWQpLnBsdXMoQmlnKGVibGtkLnJlY2xhaW1lZCkpO1xuICAgICAgICBpZiAoIUJpZyh0aGlzLmJsb2NrLnJlY2xhaW1lZCkuZXEocmVjbGFpbWVkKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMjQxOTQ4OiByZWNsYWltZWQgZnVuZHMgZG8gbm90IG1hdGNoIGV4cGVjdGVkIHdoZW4gdmFsaWRhdGluZ1wiKTtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBhdHIgdmFsaWRhdGVzXG4gICAgICAgIC8vXG4gICAgICAgIGlmIChlYmxrZC52YWxpZGF0ZXMgPT0gZmFsc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDExNTI5MzogcmVicm9hZGNhc3QgdHJhbnNhY3Rpb25zIGRvIG5vdCBtYXRjaCB3aGVuIHZhbGlkYXRpbmdcIik7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH07XG4gICAgICB9XG5cblxuICAgICAgLy9cbiAgICAgIC8vIGNoZWNrIG1lcmtsZSByb290XG4gICAgICAvL1xuICAgICAgaWYgKHR4X3NpZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAodGhpcy5ibG9jay5tZXJrbGUgIT0gdGhpcy5hcHAuY3J5cHRvLnJldHVybk1lcmtsZVRyZWUodHhfc2lncykucm9vdCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMjU4MTAyOiBtZXJrbGUgcm9vdCBkb2VzIG5vdCBtYXRjaCBwcm92aWRlZCByb290XCIpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIGNoZWNrIGRpZmZpY3VsdHkgYW5kIHBheXNwbGl0XG4gICAgICAvL1xuXG4gICAgICAvL1xuICAgICAgLy8gY2hlY2sgcGF5bWVudHMgYXJlIE9LXG4gICAgICAvL1xuXG4gICAgLy99IGNhdGNoIChlcnIpIHtcbiAgICAvLyAgY29uc29sZS5sb2coXCJFUlJPUiA5MjE4NDI6IHVua25vd24gZXJyb3Igd2hpbGUgdmFsaWRhdGluZyBibG9jay4uLjogXCIgKyBlcnIpO1xuICAgIC8vICByZXR1cm4gMDtcbiAgICAvL31cblxuICAgIHJldHVybiAxO1xuXG4gIH1cblxuXG5cblxuXG5cblxuXG4gIHJldHVybkJsb2NrUGF5b3V0cyhndD1udWxsLCBydmFsdWU9e30sIHJsb29wPTAsIHN0YWtlcnM9W10pIHtcblxuICAgIGlmIChydmFsdWUuYmxvY2tzID09IHVuZGVmaW5lZCkgeyBcbiAgICAgIHJ2YWx1ZS5ibG9ja3MgXHRcdFx0PSBbXTsgXG4gICAgICBydmFsdWUucmVjbGFpbWVkIFx0XHRcdD0gXCIwXCI7XG4gICAgfVxuXG4gICAgbGV0IHBheW1lbnRzID0ge307XG4gICAgcGF5bWVudHMucHJvZHVjZXJfcHVibGlja2V5IFx0PSBcIlwiO1xuICAgIHBheW1lbnRzLnByb2R1Y2VyX3NoYXJlIFx0XHQ9IFwiMC4wXCI7XG4gICAgcGF5bWVudHMubWluZXJfcHVibGlja2V5IFx0XHQ9IFwiXCI7XG4gICAgcGF5bWVudHMubWluZXJfc2hhcmUgXHRcdD0gXCIwLjBcIjtcbiAgICBwYXltZW50cy5yb3V0ZXJfcHVibGlja2V5IFx0XHQ9IFwiXCI7XG4gICAgcGF5bWVudHMucm91dGVyX3NoYXJlIFx0XHQ9IFwiMC4wXCI7XG4gICAgcGF5bWVudHMuc3Rha2VyX3B1YmxpY2tleSBcdFx0PSBcIlwiO1xuICAgIHBheW1lbnRzLnN0YWtlcl9zaGFyZSBcdFx0PSBcIjAuMFwiO1xuXG4gICAgcGF5bWVudHMuYnNoXHRcdFx0PSB0aGlzLnJldHVybkhhc2goKTtcbiAgICBwYXltZW50cy5iaWRcdFx0XHQ9IHRoaXMuYmxvY2suaWQ7XG4gICAgcGF5bWVudHMucmxvb3BcdFx0XHQ9IHJsb29wO1xuXG5cbiAgICAvL1xuICAgIC8vIG5vIGdvbGRlbiB0aWNrZXQ/IGNoZWNrIHRyZWFzdXJ5XG4gICAgLy9cbiAgICB0cnkge1xuICAgICAgaWYgKGd0ID09IG51bGwpIHtcblxuICAgICAgICBpZiAodGhpcy5ibG9jay5wcmV2YnNoID09IFwiXCIpIHtcbiAgICAgICAgICBpZiAocmxvb3AgPT0gMTApIHtcbiAgICAgICAgICAgIHJ2YWx1ZS5yZWNsYWltZWQgPSBCaWcocnZhbHVlLnJlY2xhaW1lZCkucGx1cyhCaWcocGF5bWVudHMudG90YWxfZmVlc19pbl9ibG9jaykpLnRvRml4ZWQoOCk7XG4gICAgICAgICAgICByZXR1cm4gcnZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgcHJldmJsayA9IHRoaXMuYXBwLmJsb2NrY2hhaW4ucmV0dXJuQmxvY2tCeUhhc2godGhpcy5ibG9jay5wcmV2YnNoKTtcbiAgICAgICAgICBpZiAodGhpcy5jb250YWluc0dvbGRlblRpY2tldCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcnZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJldmJsay5yZXR1cm5CbG9ja1BheW91dHMoZ3QsIHJ2YWx1ZSwgcmxvb3ArMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IGluIGNoZWNraW5nIHRyZWFzdXJ5OiBcIiwgZXJyKTtcbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gZmlyc3QgYmxvY2tcbiAgICAvL1xuICAgIGlmICh0aGlzLmJsb2NrLnByZXZic2ggPT0gXCJcIikge1xuICAgICAgaWYgKHJsb29wID09IDEwKSB7XG4gICAgICAgIHJ2YWx1ZS5yZWNsYWltZWQgPSBCaWcocnZhbHVlLnJlY2xhaW1lZCkucGx1cyhCaWcodGhpcy5yZXR1cm5GZWVzKCkpKS50b0ZpeGVkKDgpO1xuICAgICAgICByZXR1cm4gcnZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJ2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIHRyeSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBnb2xkZW4gdGlja2V0XG4gICAgICAvL1xuICAgICAgdmFyIHByZXZic2ggPSB0aGlzLmJsb2NrLnByZXZic2g7XG4gICAgICB2YXIgcHJldmJsayA9IHRoaXMuYXBwLmJsb2NrY2hhaW4ucmV0dXJuQmxvY2tCeUhhc2gocHJldmJzaCk7XG5cbiAgICAgIHZhciBwcm9kdWNlcl9wdWJsaWNrZXkgICAgICAgICAgICBcdD0gdGhpcy5ibG9jay5jcmVhdG9yO1xuICAgICAgdmFyIG1pbmVyX3B1YmxpY2tleSAgICAgICAgICAgICAgIFx0PSBcIlwiO1xuICAgICAgdmFyIHJvdXRlcl9wdWJsaWNrZXkgICAgICAgICAgICAgIFx0PSBcIlwiO1xuICAgICAgdmFyIHN0YWtlcl9wdWJsaWNrZXkgICAgICAgICAgICAgIFx0PSBcIlwiO1xuXG4gICAgICB2YXIgdG90YWxfd29ya19uZWVkZWQgICAgICAgICAgICAgXHQ9IHRoaXMuYXBwLmJ1cm5mZWUucmV0dXJuV29ya05lZWRlZChwcmV2YmxrLmJsb2NrLnRzLCB0aGlzLmJsb2NrLnRzLCBwcmV2YmxrLmJsb2NrLmJmKTsgLy8gaW50XG4gICAgICB2YXIgdG90YWxfd29ya19hdmFpbGFibGUgICAgICAgICAgXHQ9IHRoaXMucmV0dXJuRW1iZWRkZWRSb3V0aW5nV29yaygpOyAgICAgLy8gc3RyaW5nXG4gICAgICB2YXIgdG90YWxfZmVlc19pbl9ibG9jayAgICAgICAgICAgXHQ9IHRoaXMucmV0dXJuRmVlcygpOyAgICAgICAgICAgICAgICAgICAgLy8gc3RyaW5nXG4gICAgICB2YXIgcHJvZHVjZXJfc2hhcmUgICAgICAgICAgICAgICAgXHQ9IEJpZyh0b3RhbF93b3JrX2F2YWlsYWJsZSkubWludXMoQmlnKHRvdGFsX3dvcmtfbmVlZGVkKSk7IC8vIEJpZ1xuICAgICAgdmFyIHBheXNwbGl0X3NoYXJlICAgICAgICAgICAgICAgIFx0PSBCaWcodG90YWxfZmVlc19pbl9ibG9jaykubWludXMocHJvZHVjZXJfc2hhcmUpLnBsdXModGhpcy5yZXR1cm5Db2luYmFzZSgpKTsgLy8gQmlnXG4gICAgICB2YXIgbWluZXJfc2hhcmUgICAgICAgICAgICAgICAgICAgXHQ9IHBheXNwbGl0X3NoYXJlLmRpdigyKS50b0ZpeGVkKDgpOyAgICAgLy8gc3RyaW5nXG4gICAgICB2YXIgcm91dGVyX3NoYXJlICAgICAgICAgICAgICAgICAgXHQ9IHBheXNwbGl0X3NoYXJlLm1pbnVzKEJpZyhtaW5lcl9zaGFyZSkpLnRvRml4ZWQoOCk7IC8vIHN0cmluZ1xuICAgICAgdmFyIHN0YWtlcl9zaGFyZSAgICAgICAgICAgICAgICAgIFx0PSBcIjAuMFwiO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIElOIEdPTERFTiBUSUNLRVQgQ1JFQVRJT046IFwiLCBlcnIpO1xuICAgIH1cblxuXG5cbiAgICAvL1xuICAgIC8vIHBpY2sgdGhlIHJvdXRlclxuICAgIC8vXG4gICAgaWYgKEJpZyhyb3V0ZXJfc2hhcmUpLmd0KDApKSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyByYW5kb20gZGVjaW1hbCBiZXR3ZWVuIDAtMSBwaWNrcyB3aW5uaW5nIHR4XG4gICAgICAvL1xuICAgICAgbGV0IHdpbm5lckhhc2ggPSB0aGlzLmFwcC5jcnlwdG8uaGFzaChndC5yYW5kb20pLnNsaWNlKDAsMTIpO1xuICAgICAgbGV0IG1heEhhc2ggICAgPSBcImZmZmZmZmZmZmZmZlwiO1xuICAgICAgbGV0IHdpbm5lck51bSAgPSBwYXJzZUludCh3aW5uZXJIYXNoLCAxNik7IC8vIDE2ID0gbnVtIGlzIGhleFxuICAgICAgbGV0IG1heE51bSAgICAgPSBwYXJzZUludChtYXhIYXNoLCAxNik7ICAgIC8vIDE2ID0gbnVtIGlzIGhleFxuICAgICAgbGV0IHdpbm5lckRlYyAgPSB3aW5uZXJOdW0gLyBtYXhOdW07XG5cbiAgICAgIGxldCB3aW5uZXJfZmVlID0gQmlnKHRvdGFsX2ZlZXNfaW5fYmxvY2spLnRpbWVzKHdpbm5lckRlYyk7XG5cbiAgICAgIGxldCB3aW5uaW5nX3R4X2lkeCA9IC0xO1xuICAgICAgbGV0IGN1bXVsYXRpdmVfZmVlID0gQmlnKDAuMCk7XG4gICAgICBsZXQgc3RvcCA9IDA7XG5cbiAgICAgIC8vXG4gICAgICAvLyBUT0RPIC0gZmFzdGVyIHNlYXJjaCBhbGdvcml0aG1cbiAgICAgIC8vXG4gICAgICAvLyBmaW5kIHdpbm5pbmcgdHggcmFuZG9tbHlcbiAgICAgIC8vXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aCAmJiBzdG9wID09IDA7IGkrKykge1xuICAgICAgICBjdW11bGF0aXZlX2ZlZS5wbHVzKEJpZyh0aGlzLnRyYW5zYWN0aW9uc1tpXS5yZXR1cm5GZWVzKHRoaXMuYXBwKSkpO1xuICAgICAgICBpZiAoY3VtdWxhdGl2ZV9mZWUuZ3RlKHdpbm5lcl9mZWUpKSB7XG4gICAgICAgICAgc3RvcCA9IDE7XG4gICAgICAgICAgd2lubmluZ190eF9pZHggPSBpLTE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIGFzc2lnbiB3aW5uZXJzXG4gICAgICAvL1xuICAgICAgaWYgKHdpbm5pbmdfdHhfaWR4ID09IC0xKSB7XG4gICAgICAgIHJvdXRlcl9wdWJsaWNrZXkgPSB0aGlzLmJsb2NrLmNyZWF0b3I7XG4gICAgICB9XG5cblxuICAgICAgLy9cbiAgICAgIC8vIG9yIGZpbmQgd2lubmVyIGluIHJvdXRpbmcgcG9ydGlvblxuICAgICAgLy9cbiAgICAgIGVsc2Uge1xuXG4gICAgICAgIGxldCB3aW5uaW5nX3R4ID0gdGhpcy50cmFuc2FjdGlvbnNbd2lubmluZ190eF9pZHhdO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIG5vIHBhdGggaW5mbywgZGVmYXVsdCB0byBzZW5kZXJcbiAgICAgICAgLy9cbiAgICAgICAgaWYgKHdpbm5pbmdfdHgudHJhbnNhY3Rpb24ucGF0aC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHJvdXRlcl9wdWJsaWNrZXkgPSB3aW5uaW5nX3R4LnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gcGF0aCBpbmZvLCByZXBlYXQgcmFuZG9tIGdlbmVyYXRpb25cbiAgICAgICAgLy9cbiAgICAgICAgbGV0IHdpbm5lcjJIYXNoID0gdGhpcy5hcHAuY3J5cHRvLmhhc2god2lubmVySGFzaCkuc2xpY2UoMCwxMik7XG4gICAgICAgIGxldCB3aW5uZXIyTnVtICA9IHBhcnNlSW50KHdpbm5lcjJIYXNoLCAxNik7XG4gICAgICAgIGxldCB3aW5uZXIyRGVjICA9IHdpbm5lcjJOdW0gLyBtYXhOdW07XG5cbiAgICAgICAgbGV0IHBhdGhsZW5ndGggPSB3aW5uaW5nX3R4LnRyYW5zYWN0aW9uLnBhdGgubGVuZ3RoO1xuICAgICAgICBsZXQgcGF0aHRvdGFsICA9IHdpbm5pbmdfdHgucmV0dXJuRmVlcyh0aGlzLmFwcCk7XG5cbiAgICAgICAgaWYgKHdpbm5lcjJEZWMgPT0gMCkge1xuICAgICAgICAgIHJvdXRlcl9wdWJsaWNrZXkgPSB3aW5uaW5nX3R4LnRyYW5zYWN0aW9uLnBhdGhbMF0udG87XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBpZiAod2lubmVyRGVjID09IDEpIHtcbiAgICAgICAgICAgIHJvdXRlcl9wdWJsaWNrZXkgPSB3aW5uaW5nX3R4LnRyYW5zYWN0aW9uLnBhdGhbcGF0aGxlbmd0aF0udG87XG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgbGV0IHkgPSBwYXRobGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHggPSAyIC0gKDEvKE1hdGgucG93KDIsKHktMSkpKSk7ICAvLyBpLmUuIDEuNzUgZm9yIDMgbm9kZSBwYXRoXG4gICAgICAgICAgICBsZXQgeiA9IHkgKiB3aW5uZXIyRGVjO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBsZXQgYSA9IDIgLSAoMS8oTWF0aC5wb3coMiwoaS0xKSkpKTtcbiAgICAgICAgICAgICAgaWYgKGEgPD0geikgeyByb3V0ZXJfcHVibGlja2V5ID0gd2lubmluZ190eC50cmFuc2FjdGlvbi5wYXRoW2ldLnRvOyB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGlmIChybG9vcCA9PSAwKSB7XG4gICAgICAvL1xuICAgICAgLy8gd2lubmluZyBtaW5lclxuICAgICAgLy9cbiAgICAgIG1pbmVyX3B1YmxpY2tleSA9IGd0LnB1YmxpY2tleTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9cbiAgICAgIC8vIHdpbm5pbmcgc3Rha2VyXG4gICAgICAvL1xuICAgICAgbGV0IHggPSB0aGlzLmFwcC5iYW5rLnJldHVybldpbm5pbmdTdGFrZXIoZ3QsIHN0YWtlcnMpO1xuICAgICAgc3Rha2VycyA9IHguc3Rha2VycztcbiAgICAgIHN0YWtlcl9wdWJsaWNrZXkgPSB4LnB1YmxpY2tleTtcbiAgICAgIHN0YWtlcl9zaGFyZSA9IG1pbmVyX3NoYXJlO1xuICAgICAgbWluZXJfc2hhcmUgPSBcIjAuMFwiO1xuICAgIH1cblxuXG4gICAgLy8gZXh0cmEgZm9yIHRlc3RpbmcgZGlhZ25vc3RpY3NcbiAgICBwYXltZW50cy5jb2luYmFzZSA9IHRoaXMucmV0dXJuQ29pbmJhc2UoKTtcblxuICAgIHBheW1lbnRzLnByb2R1Y2VyX3B1YmxpY2tleVx0PSBwcm9kdWNlcl9wdWJsaWNrZXk7XG4gICAgcGF5bWVudHMubWluZXJfcHVibGlja2V5IFx0PSBtaW5lcl9wdWJsaWNrZXk7XG4gICAgcGF5bWVudHMucm91dGVyX3B1YmxpY2tleVx0PSByb3V0ZXJfcHVibGlja2V5O1xuICAgIHBheW1lbnRzLnN0YWtlcl9wdWJsaWNrZXlcdD0gc3Rha2VyX3B1YmxpY2tleTtcblxuICAgIHBheW1lbnRzLnByb2R1Y2VyX3NoYXJlXHQ9IHByb2R1Y2VyX3NoYXJlO1xuICAgIHBheW1lbnRzLm1pbmVyX3NoYXJlXHQ9IG1pbmVyX3NoYXJlO1xuICAgIHBheW1lbnRzLnN0YWtlcl9zaGFyZVx0PSBzdGFrZXJfc2hhcmU7XG4gICAgcGF5bWVudHMucm91dGVyX3NoYXJlXHQ9IHJvdXRlcl9zaGFyZTtcblxuICAgIHBheW1lbnRzLnRvdGFsX2ZlZXNfaW5fYmxvY2sgICAgICBcdD0gdG90YWxfZmVlc19pbl9ibG9jaztcbiAgICBwYXltZW50cy50b3RhbF93b3JrX25lZWRlZCAgICAgXHQ9IHRvdGFsX3dvcmtfbmVlZGVkO1xuICAgIHBheW1lbnRzLnRvdGFsX3dvcmtfYXZhaWxhYmxlICAgICBcdD0gdG90YWxfd29ya19hdmFpbGFibGU7XG4gICAgcGF5bWVudHMucGF5c3BsaXRfc2hhcmUgICAgICAgICAgIFx0PSBwYXlzcGxpdF9zaGFyZTtcblxuICAgIHJ2YWx1ZS5ibG9ja3MucHVzaChwYXltZW50cyk7XG5cbiAgICBpZiAodGhpcy5jb250YWluc0dvbGRlblRpY2tldCgpIHx8IHJsb29wID09IDEwKSB7XG4gICAgICByZXR1cm4gcnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBndC5yYW5kb20gPSB0aGlzLmFwcC5jcnlwdG8uaGFzaChndC5yYW5kb20pO1xuICAgICAgcmV0dXJuIHByZXZibGsucmV0dXJuQmxvY2tQYXlvdXRzKGd0LCBydmFsdWUsIHJsb29wKzEpO1xuICAgIH1cblxuICB9XG5cblxuXG5cbiAgcmV0dXJuRmVlcygpIHtcbiAgICBsZXQgdiA9IEJpZygwKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2ID0gdi5wbHVzKEJpZyh0aGlzLnRyYW5zYWN0aW9uc1tpXS5yZXR1cm5GZWVzKHRoaXMuYXBwKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdi50b0ZpeGVkKDgpO1xuICB9XG5cbiAgLy8gVXNlIHRoaXMgd2hlbiB3ZSdyZSBzYXZpbmcgZGF0YSB0byBkaXNrXG4gIHJldHVybkJsb2NrRmlsZURhdGEoKSB7XG4gICAgbGV0IGJsa2NvbnRlbnQgPSB7XG4gICAgICBibG9jazogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmJsb2NrKSksXG4gICAgICB0cmFuc2FjdGlvbnM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbnMpKVxuICAgIH07XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGJsa2NvbnRlbnQpO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCbG9jaztcblxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBVUE7QUFVQTtBQVVBO0FBVUE7QUFVQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVVBOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBREE7QUFDQTs7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7O0FBREE7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFFQTtBQUNBO0FBQUE7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUF6Q0E7QUEwQ0E7QUFDQTtBQUVBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBcEZBOzs7OztBQXVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBOzs7OztBQUFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFBQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBOztBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUFFQTs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7QUFPQTs7Ozs7QUFBQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFLQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBREE7Ozs7O0FBS0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQU1BOzs7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBT0E7Ozs7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7O0FBREE7Ozs7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVJBOzs7OztBQWFBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQTdGQTs7Ozs7QUFtR0E7Ozs7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUtBOzs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVFBOzs7Ozs7QUFFQTtBQUNBOztBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFBQTtBQUNBOztBQU1BOzs7OztBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFnQkE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQVBBO0FBVUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7Ozs7QUFJQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/saito/block.js\n");
---
> eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nvar saito = __webpack_require__(/*! ./saito */ \"./lib/saito/saito.js\");\n\nvar Big = __webpack_require__(/*! big.js */ \"./node_modules/big.js/big.js\");\n\nvar Block =\n/*#__PURE__*/\nfunction () {\n  function Block(app) {\n    var blkjson = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var txsjson = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n    var confirmations = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n\n    _classCallCheck(this, Block);\n\n    this.app = app || {***REMOVED***; //\n    // consensus variables\n    //\n\n    this.block = {***REMOVED***;\n    this.block.ts = new Date().getTime();\n    this.block.prevbsh = \"\";\n    this.block.merkle = \"\";\n    this.block.creator = \"\";\n    this.block.id = 1;\n    this.block.bf = 0;\n    this.block.difficulty = 0.0;\n    this.block.paysplit = 0.5;\n    this.block.powsplit = 0.5;\n    this.block.treasury = Big(\"2868100000.0\"); // TODO\n    //\n    // fix treasury amount\n    //\n\n    this.block.stakepool = Big(\"0\");\n    this.block.coinbase = Big(\"0.0\");\n    this.block.reclaimed = Big(\"0.0\");\n    this.block.sr = 0; // 0 - staking table not refreshed\n    // 1 - staking table refreshed\n    //\n    // hashmaps\n    //\n\n    this.txs_hmap = []; //\n    // block transactions\n    //\n\n    this.transactions = []; //\n    // callbacks\n    //\n\n    this.callbacks = [];\n    this.callbacksTx = []; //\n    // non-consensus variables\n    //\n\n    this.maxtid = 0;\n    this.mintid = 0;\n    this.avgfee = 0;\n    this.size_in_bytes = 0; // size of block in bytes\n\n    this.hash = \"\"; // block hash == hash(this.prehash+last_block.hash)\n\n    this.prehash = \"\"; // hash of signature\n\n    this.filename = \"\"; // name of file on disk if set\n\n    this.confirmations = confirmations;\n    this.is_valid = 1; // set to zero if there is an\n    //\n    // import block headers\n    //\n\n    if (blkjson != \"\") {\n      try {\n***REMOVED*** if (typeof blkjson === 'string') {\n***REMOVED***   this.block = JSON.parse(blkjson.toString(\"utf8\"));\n***REMOVED*** ***REMOVED*** else {\n        this.block = blkjson.block;\n        this.transactions = blkjson.transactions.map(function (tx) {\n          return new saito.transaction(tx.transaction);\n    ***REMOVED***); // ***REMOVED***\n  ***REMOVED*** catch (err) {\n        this.is_valid = 0;\n        return;\n  ***REMOVED***\n***REMOVED***\n\n    return this;\n  ***REMOVED***\n\n  _createClass(Block, [{\n    key: \"affixCallbacks\",\n    value: function affixCallbacks() {\n      for (var z = 0; z < this.transactions.length; z++) {\n        var txmsg = this.transactions[z].returnMessage();\n        this.app.modules.affixCallbacks(this.transactions[z], z, txmsg, this.callbacks, this.callbacksTx, this.app);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"bundle\",\n    value: function () {\n      var _bundle = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var prevblk,\n            mintxid,\n            tx_sigs,\n            tx,\n            eblkd,\n            rebroadcast_amt,\n            i,\n            ii,\n            number_of_golden_tickets,\n            _i,\n            _ii,\n            _ii2,\n            _args = arguments;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                prevblk = _args.length > 0 && _args[0] !== undefined ? _args[0] : null;\n                mintxid = 1;\n                tx_sigs = []; //\n        ***REMOVED*** default values\n        ***REMOVED***\n\n                if (prevblk != null) {\n                  this.block.id = prevblk.block.id + 1;\n                  this.block.treasury = Big(prevblk.block.treasury).plus(Big(prevblk.block.reclaimed));\n                  this.block.coinbase = Big(this.block.treasury).div(this.app.blockchain.genesis_period).toFixed(8);\n                  this.block.treasury = this.block.treasury.minus(Big(this.block.coinbase)).toFixed(8);\n                  this.block.prevbsh = prevblk.returnHash();\n                  this.block.difficulty = prevblk.block.difficulty;\n                  this.block.paysplit = prevblk.block.paysplit;\n                  this.block.powsplit = prevblk.block.powsplit;\n                  this.block.ts = new Date().getTime();\n                  this.block.bf = this.app.burnfee.returnBurnFee(prevblk, this);\n\n                  if (prevblk.transactions.length == 0) {\n                    mintxid = prevblk.returnMaxTxId();\n\n                    if (mintxid == 0) {\n                      mintxid = 1;\n                ***REMOVED***\n              ***REMOVED*** else {\n                    mintxid = prevblk.returnMaxTxId() + 1;\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** initial token allocation\n        ***REMOVED***\n\n\n                if (this.block.id == 1) {\n                  tx = new saito.transaction();\n                  tx.transaction.to.push(new saito.slip(\"1HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"2HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"3HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"4HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.to.push(new saito.slip(\"5HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 1000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.type = 3;\n                  tx.transaction.from.push(new saito.slip(this.app.wallet.returnPublicKey(), 5000000000, 3, 0, 0, 0, \"\", 1));\n                  tx.transaction.id = 1;\n                  tx = this.app.wallet.signTransaction(tx);\n                  this.transactions.push(tx); //\n          ***REMOVED*** staking tx\n          ***REMOVED***\n\n                  tx = new saito.transaction();\n                  tx.transaction.to.push(new saito.slip(\"1HL52n9iWBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMf\", 6000000, 4, 0, 0, 0, \"\", 1));\n                  /****\n                        tx.transaction.type = 4;\n                        tx.transaction.from.push(new saito.slip(\n                  \tthis.app.wallet.returnPublicKey() ,\n                  \t6000000,\n                  \t4,\n                  \t0,\n                  \t0,\n                  \t0,\n                  \t\"\",\n                  \t1\n                        ));\n                        tx.transaction.id = 2;\n                        tx = this.app.wallet.signTransaction(tx);\n                        this.transactions.push(tx);\n                  ****/\n            ***REMOVED*** //\n        ***REMOVED*** reclaimed funds are the tokens that are\n        ***REMOVED*** unspent in the block 1 GENESIS period ago\n        ***REMOVED*** and thus will fall off the chain with the \n        ***REMOVED*** addition of this block.\n        ***REMOVED***\n        ***REMOVED*** we add these to our treasury in the next \n        ***REMOVED*** block (see above)\n        ***REMOVED***\n\n\n                _context.next = 7;\n                return this.calculateRebroadcasts();\n\n              case 7:\n                eblkd = _context.sent;\n        ***REMOVED***\n        ***REMOVED*** reclaimed txs\n        ***REMOVED***\n                this.block.reclaimed = eblkd.reclaimed; //\n        ***REMOVED*** automatic transaction rebroadcasting (added 1-by-1 at end)\n        ***REMOVED***\n\n                rebroadcast_amt = Big(0.0);\n\n                for (i = 0; i < eblkd.rebroadcast.length; i++) {\n                  for (ii = 0; ii < eblkd.rebroadcast[i].transaction.to.length; ii++) {\n                    rebroadcast_amt = rebroadcast_amt.plus(Big(eblkd.rebroadcast[i].transaction.to[ii].amt));\n              ***REMOVED***\n\n                  this.transactions.push(eblkd.rebroadcast[i]);\n            ***REMOVED*** //\n        ***REMOVED*** now check transactions\n        ***REMOVED***\n\n\n                number_of_golden_tickets = 0;\n                _i = 0;\n\n              case 13:\n                if (!(_i < this.transactions.length)) {\n                  _context.next = 31;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** sequential ids\n        ***REMOVED***\n                this.transactions[_i].transaction.id = mintxid + _i; //\n        ***REMOVED*** golden ticket\n        ***REMOVED***\n\n                if (!(this.transactions[_i].transaction.type == 1)) {\n                  _context.next = 25;\n                  break;\n            ***REMOVED***\n\n                number_of_golden_tickets++;\n\n                if (!(number_of_golden_tickets > 1)) {\n                  _context.next = 21;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 412523: second golden ticket found in block\");\n                this.is_valid = 0;\n                return _context.abrupt(\"return\", this);\n\n              case 21:\n        ***REMOVED***\n        ***REMOVED*** payments and monetary policy\n        ***REMOVED***\n                if (prevblk != null) {\n                  (function () {\n                    var payments = prevblk.returnBlockPayouts(_this.transactions[_i].transaction.msg); //\n            ***REMOVED*** add reclaimed from block\n            ***REMOVED***\n\n                    _this.block.reclaimed = Big(_this.block.reclaimed).plus(Big(payments.reclaimed)).toFixed(8);\n                    var slips = [];\n                    payments.blocks.forEach(function (block) {\n                      if (block.producer_share > 0) {\n                        slips.push(new saito.slip(block.producer_publickey, block.producer_share, 2));\n                  ***REMOVED***\n\n                      if (block.miner_share > 0) {\n                        slips.push(new saito.slip(block.miner_publickey, block.miner_share, 2));\n                  ***REMOVED***\n\n                      if (block.router_share > 0) {\n                        slips.push(new saito.slip(block.router_publickey, block.router_share, 2));\n                  ***REMOVED***\n\n                      if (block.staker_share > 0) {\n                        slips.push(new saito.slip(block.staker_publickey, block.staker_share, 2));\n                  ***REMOVED***\n                ***REMOVED***);\n\n                    if (slips.length > 0) {\n                      var newtx = new saito.transaction();\n                      newtx.transaction.from.push(new saito.slip(_this.app.wallet.returnPublicKey(), 0.0, 2));\n                      newtx.transaction.to = slips;\n                      newtx.transaction.type = 2; //\n              ***REMOVED*** including for reference\n              ***REMOVED***\n\n                      newtx.transaction.id = _this.transactions.length;\n                      newtx.transaction.msg = payments;\n                      newtx = _this.app.wallet.signTransaction(newtx);\n\n                      _this.transactions.push(newtx);\n                ***REMOVED***\n              ***REMOVED***)();\n            ***REMOVED***\n\n                if (!(this.transactions[_i].transaction.msg.target != prevblk.returnHash())) {\n                  _context.next = 25;\n                  break;\n            ***REMOVED***\n\n                this.is_valid = 0;\n                return _context.abrupt(\"return\", this);\n\n              case 25:\n        ***REMOVED***\n        ***REMOVED*** merkle sigs\n        ***REMOVED***\n                tx_sigs[_i] = this.transactions[_i].returnSignatureSource(this.app); //\n        ***REMOVED*** hashmap of txs\n        ***REMOVED***\n\n                for (_ii = 0; _ii < this.transactions[_i].transaction.from.length; _ii++) {\n                  this.txs_hmap[this.transactions[_i].transaction.from[_ii].add] = 1;\n            ***REMOVED***\n\n                for (_ii2 = 0; _ii2 < this.transactions[_i].transaction.to.length; _ii2++) {\n                  this.txs_hmap[this.transactions[_i].transaction.to[_ii2].add] = 1;\n            ***REMOVED***\n\n              case 28:\n                _i++;\n                _context.next = 13;\n                break;\n\n              case 31:\n        ***REMOVED***\n        ***REMOVED*** merkle root\n        ***REMOVED***\n                if (tx_sigs.length > 0) {\n                  this.block.merkle = this.app.crypto.returnMerkleTree(tx_sigs).root;\n            ***REMOVED*** //\n        ***REMOVED*** update difficulty and paysplit\n        ***REMOVED***\n\n\n                return _context.abrupt(\"return\", this);\n\n              case 33:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this);\n  ***REMOVED***));\n\n      function bundle() {\n        return _bundle.apply(this, arguments);\n  ***REMOVED***\n\n      return bundle;\n***REMOVED***() //\n    // in validation mode, we provide list of TXS to check\n    //\n\n  ***REMOVED***, {\n    key: \"calculateRebroadcasts\",\n    value: function () {\n      var _calculateRebroadcasts = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var txs,\n            expiring_data,\n            needs_rebroadcast,\n            eblk_id,\n            unspent_amt,\n            hash_of_eblock,\n            eblk,\n            i,\n            ii,\n            slip,\n            tx,\n            iii,\n            _args2 = arguments;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                txs = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : null;\n                expiring_data = {\n                  reclaimed: \"0.0\",\n                  rebroadcast: [],\n                  total_rebroadcast: 0\n            ***REMOVED***;\n                needs_rebroadcast = 0;\n\n                if (!(this.app.BROWSER == 1 || this.app.SPVMODE == 1)) {\n                  _context2.next = 5;\n                  break;\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", expiring_data);\n\n              case 5:\n        ***REMOVED***\n        ***REMOVED*** eliminated block id\n        ***REMOVED***\n                eblk_id = this.block.id - this.app.blockchain.genesis_period - 1;\n\n                if (!(eblk_id < 1)) {\n                  _context2.next = 8;\n                  break;\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", expiring_data);\n\n              case 8:\n                unspent_amt = Big(0.0);\n                hash_of_eblock = this.app.blockchain.bid_bsh_hmap[eblk_id];\n                _context2.next = 12;\n                return this.app.storage.loadBlockByHash(hash_of_eblock);\n\n              case 12:\n                eblk = _context2.sent;\n\n                for (i = 0; i < eblk.transactions.length; i++) {\n                  for (ii = 0; ii < eblk.transactions[i].transaction.to.length; ii++) {\n                    slip = eblk.transactions[i].transaction.to[ii];\n                    slip.bid = eblk.returnId();\n                    slip.tid = eblk.transactions[i].transaction.id;\n                    slip.bsh = eblk.returnHash();\n                    slip.sid = ii;\n\n                    if (Big(slip.amt).gt(0)) {\n                      if (this.app.shashmap.validate_slip(slip.returnSignatureSource(), this.block.id)) {\n                        if (eblk.transactions[i].isRebroadcast(eblk, this, ii)) {\n                  ***REMOVED***\n                  ***REMOVED*** number of slips rebroadcast as TXS\n                  ***REMOVED***\n                          expiring_data.total_rebroadcast++; //\n                  ***REMOVED*** create rebroadcast tx\n                  ***REMOVED***\n\n                          tx = eblk.transactions[i].generateRebroadcastTransaction(this.block.creator, slip.tid, slip.sid, 2);\n\n                          if (tx == null) {\n                            console.log(\"ERROR 481029: issue generating rebroadcast transaction...\");\n                            process.exit();\n                      ***REMOVED*** //\n                  ***REMOVED*** update tx with bid\n                  ***REMOVED***\n\n\n                          for (iii = 0; iii < tx.transaction.from.length; iii++) {\n                            tx.transaction.from[iii].bid = this.block.id;\n                      ***REMOVED***\n\n                          expiring_data.rebroadcast.push(tx);\n                    ***REMOVED*** else {\n                          unspent_amt = unspent_amt.plus(Big(slip.amt));\n                          expiring_data.reclaimed = unspent_amt.toFixed(8);\n                    ***REMOVED***\n                  ***REMOVED***\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", expiring_data);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee2, this);\n  ***REMOVED***));\n\n      function calculateRebroadcasts() {\n        return _calculateRebroadcasts.apply(this, arguments);\n  ***REMOVED***\n\n      return calculateRebroadcasts;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"containsGoldenTicket\",\n    value: function containsGoldenTicket() {\n      for (var i = 0; i < this.transactions.length; i++) {\n        if (this.transactions[i].isGoldenTicket() == 1) {\n          return 1;\n    ***REMOVED***\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"decryptTransactions\",\n    value: function decryptTransactions() {\n      for (var i = 0; i < this.transactions.length; i++) {\n        if (this.transactions[i].involvesPublicKey(this.app.wallet.returnPublicKey()) == 1) {\n          this.transactions[i].decryptMessage(this.app);\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFilename\",\n    value: function returnFilename() {\n      return this.block.ts + \"-\" + this.returnHash() + \".blk\";\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnRoutingWorkNeeded\",\n    value: function returnRoutingWorkNeeded() {\n      return this.block.bf.current;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnCoinbase\",\n    value: function returnCoinbase() {\n      return this.block.coinbase;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnDifficulty\",\n    value: function returnDifficulty() {\n      return this.block.difficulty;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnEmbeddedRoutingWork\",\n    value: function returnEmbeddedRoutingWork() {\n      var v = Big(0);\n\n      for (var i = 0; i < this.transactions.length; i++) {\n        if (this.transactions[i].is_valid == 1) {\n          var available_work = Big(this.transactions[i].returnRoutingWorkAvailable(this.app, this.block.creator));\n\n          if (this.transactions[i].transaction.type == 1) {\n            if (this.transactions[i].transaction.msg.target != this.prevbsh) {\n              available_work = Big(0);\n        ***REMOVED***\n      ***REMOVED***\n\n          v = v.plus(available_work);\n    ***REMOVED***\n  ***REMOVED***\n\n      return v.toFixed(8);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnHash\",\n    value: function returnHash() {\n      if (this.hash != \"\") {\n        return this.hash;\n  ***REMOVED***\n\n      this.prehash = this.app.crypto.hash(this.returnFingerprint());\n      this.hash = this.app.crypto.hash(this.prehash + this.block.prevbsh);\n      return this.hash;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnId\",\n    value: function returnId() {\n      return this.block.id;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMaxTxId\",\n    value: function returnMaxTxId() {\n      if (this.maxtid != 0) {\n        return this.maxtid;\n  ***REMOVED***\n\n      for (var z = 0; z < this.transactions.length; z++) {\n        if (this.transactions[z].transaction.id > this.maxtid) {\n          this.maxtid = this.transactions[z].transaction.id;\n    ***REMOVED***\n  ***REMOVED***\n\n      return this.maxtid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMinTxId\",\n    value: function returnMinTxId() {\n      if (this.mintid != 0) {\n        return this.mintid;\n  ***REMOVED***\n\n      if (this.transactions.length == 0) {\n        return this.app.blockchain.returnMinTxId();\n  ***REMOVED***\n\n      ;\n      this.mintid = this.transactions[0].transaction.id;\n\n      for (var z = 1; z < this.transactions.length; z++) {\n        if (this.transactions[z].transaction.id < this.mintid) {\n          this.mintid = this.transactions[z].transaction.id;\n    ***REMOVED***\n  ***REMOVED***\n\n      return this.mintid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnPaysplit\",\n    value: function returnPaysplit() {\n      return this.block.paysplit;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnPowsplit\",\n    value: function returnPowsplit() {\n      return this.block.powsplit;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnReclaimed\",\n    value: function returnReclaimed() {\n      return this.block.reclaimed;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFingerprint\",\n    value: function returnFingerprint() {\n      return JSON.stringify(this.block);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnTreasury\",\n    value: function returnTreasury() {\n      return this.block.treasury;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"runCallbacks\",\n    value: function () {\n      var _runCallbacks = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(conf) {\n        var i, ii;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                for (i = this.confirmations + 1; i <= conf; i++) {\n                  for (ii = 0; ii < this.callbacks.length; ii++) {\n                    this.callbacks[ii](this, this.transactions[this.callbacksTx[ii]], i, this.app);\n              ***REMOVED***\n            ***REMOVED***\n\n                this.confirmations = conf;\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee3, this);\n  ***REMOVED***));\n\n      function runCallbacks(_x) {\n        return _runCallbacks.apply(this, arguments);\n  ***REMOVED***\n\n      return runCallbacks;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"spendInputs\",\n    value: function spendInputs() {\n      for (var i = 0; i < this.transactions.length; i++) {\n        for (var ii = 0; ii < this.transactions[i].transaction.from.length; ii++) {\n          if (this.transactions[i].transaction.from[ii].amt > 0) {\n            this.app.shashmap.insert_slip(this.transactions[i].transaction.from[ii].returnSignatureSource(), this.block.id);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return 1;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"unspendInputs\",\n    value: function unspendInputs() {\n      for (var b = 0; b < this.transactions.length; b++) {\n        for (var bb = 0; bb < this.transactions[b].transaction.from.length; bb++) {\n          if (this.transactions[b].transaction.from[bb].amt > 0) {\n            this.app.shashmap.insert_slip(this.transactions[b].transaction.from[bb].returnSignatureSource(), -1);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return 1;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"validate\",\n    value: function () {\n      var _validate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var reclaimed, prevblk, mintxid, tx_sigs, bt, cb, bf, hmap, slips, number_of_golden_tickets, index_of_block_payment, index_of_golden_ticket, i, payments, x, j, eblkd, atr_idx, _i2, _i3;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.block.prevbsh == \"\")) {\n                  _context4.next = 2;\n                  break;\n            ***REMOVED***\n\n                return _context4.abrupt(\"return\", 1);\n\n              case 2:\n        ***REMOVED***try {\n                reclaimed = \"0\";\n                prevblk = this.app.blockchain.returnBlockByHash(this.block.prevbsh);\n                mintxid = 1;\n                tx_sigs = [];\n\n                if (prevblk != null) {\n                  if (prevblk.transactions.length == 0) {\n                    mintxid = prevblk.returnMaxTxId();\n\n                    if (mintxid == 0) {\n                      mintxid = 1;\n                ***REMOVED***\n              ***REMOVED*** else {\n                    mintxid = prevblk.returnMaxTxId() + 1;\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** check block headers\n        ***REMOVED***\n\n\n                if (!(this.block.id != prevblk.block.id + 1)) {\n                  _context4.next = 10;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 482039: block id is not single increment over previous block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 10:\n                bt = Big(prevblk.block.treasury).plus(Big(prevblk.block.reclaimed));\n                cb = Big(bt).div(this.app.blockchain.genesis_period).toFixed(8);\n                bt = bt.minus(Big(cb)).toFixed(8);\n\n                if (!(this.block.treasury != bt)) {\n                  _context4.next = 16;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 410829: block treasury does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 16:\n                if (!(this.block.coinbase != cb)) {\n                  _context4.next = 19;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 410829: block coinbase does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 19:\n                if (!(this.block.difficulty != prevblk.block.difficulty)) {\n                  _context4.next = 22;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block difficulty does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 22:\n                if (!(this.block.paysplit != prevblk.block.paysplit)) {\n                  _context4.next = 25;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block paysplit does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 25:\n                if (!(this.block.powsplit != prevblk.block.powsplit)) {\n                  _context4.next = 28;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block difficulty does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 28:\n                bf = this.app.burnfee.returnBurnFee(prevblk, this);\n\n                if (!(this.block.bf != bf)) {\n                  _context4.next = 32;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 571928: block difficulty does not validate in new block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 32:\n                if (!(prevblk.block.ts >= this.block.ts)) {\n                  _context4.next = 35;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 729384: block timestamp not incremented from previous block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 35:\n                hmap = [];\n                slips = [];\n                number_of_golden_tickets = 0;\n                index_of_block_payment = -1;\n                index_of_golden_ticket = -1;\n                i = 0;\n\n              case 41:\n                if (!(i <= this.transactions.length - 1)) {\n                  _context4.next = 83;\n                  break;\n            ***REMOVED***\n\n                if (!(this.transactions[i].transaction.id != mintxid + i)) {\n                  _context4.next = 45;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 517324: transaction ids are out-of-order when validating block - \" + mintxid + \"-\" + i + \" ------- \" + this.transactions[i].transaction.id);\n                return _context4.abrupt(\"return\", 0);\n\n              case 45:\n                if (!(this.transactions[i].transaction.type == 1)) {\n                  _context4.next = 60;\n                  break;\n            ***REMOVED***\n\n                index_of_golden_ticket = i;\n\n                if (!(this.transactions[i].transaction.msg.target != prevblk.returnHash())) {\n                  _context4.next = 52;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 029312: golden ticket does not match prevblk hash\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 52:\n                number_of_golden_tickets++;\n\n                if (!(number_of_golden_tickets > 1)) {\n                  _context4.next = 56;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 189842: two golden tickets in block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 56:\n        ***REMOVED***\n        ***REMOVED*** prevblk is not null here\n        ***REMOVED***\n                payments = prevblk.returnBlockPayouts(this.transactions[i].transaction.msg);\n                reclaimed = payments.reclaimed;\n                payments.blocks.forEach(function (block) {\n                  if (block.producer_share > 0) {\n                    slips.push(new saito.slip(block.producer_publickey, block.producer_share, 2));\n              ***REMOVED***\n\n                  if (block.miner_share > 0) {\n                    slips.push(new saito.slip(block.miner_publickey, block.miner_share, 2));\n              ***REMOVED***\n\n                  if (block.router_share > 0) {\n                    slips.push(new saito.slip(block.router_publickey, block.router_share, 2));\n              ***REMOVED***\n\n                  if (block.staker_share > 0) {\n                    slips.push(new saito.slip(block.staker_publickey, block.staker_share, 2));\n              ***REMOVED***\n            ***REMOVED***);\n\n                for (x = 0; x < slips.length; x++) {\n                  slips[x].sid = x;\n            ***REMOVED***\n\n              case 60:\n                if (!(this.transactions[i].transaction.type == 2)) {\n                  _context4.next = 65;\n                  break;\n            ***REMOVED***\n\n                if (!(index_of_block_payment != -1)) {\n                  _context4.next = 64;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 581029: two block paymeet (type=2) transactions in block\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 64:\n                index_of_block_payment = i;\n\n              case 65:\n        ***REMOVED***\n        ***REMOVED*** merkle sigs\n        ***REMOVED***\n                tx_sigs[i] = this.transactions[i].returnSignatureSource(this.app);\n                ; //\n        ***REMOVED*** no duplicate inputs slips\n        ***REMOVED***\n\n                j = 0;\n\n              case 68:\n                if (!(j < this.transactions[i].transaction.from.length)) {\n                  _context4.next = 76;\n                  break;\n            ***REMOVED***\n\n                if (!(hmap[this.transactions[i].transaction.from[j].returnSignatureSource()] != undefined)) {\n                  _context4.next = 72;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 820493: multiple transactions spend same input detected\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 72:\n                if (this.transactions[i].transaction.from[j].amt > 0) {\n                  hmap[this.transactions[i].transaction.from[j].returnSignatureSource()] = 1;\n            ***REMOVED***\n\n              case 73:\n                j++;\n                _context4.next = 68;\n                break;\n\n              case 76:\n                if (this.transactions[i].validate(this.app, this.block.id)) {\n                  _context4.next = 80;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 174233: block contains invalid transaction: \".concat(i));\n                this.transactions[i].is_valid = 0;\n                return _context4.abrupt(\"return\", 0);\n\n              case 80:\n                i++;\n                _context4.next = 41;\n                break;\n\n              case 83:\n                if (!(index_of_golden_ticket > -1)) {\n                  _context4.next = 96;\n                  break;\n            ***REMOVED***\n\n                if (!(index_of_block_payment == -1)) {\n                  _context4.next = 89;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 697812: golden ticket in block, but not block payment transaction\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 89:\n                if (!(this.app.crypto.hash(JSON.stringify(slips)) == this.app.crypto.hash(JSON.stringify(this.transactions[index_of_block_payment].transaction.to)))) {\n                  _context4.next = 92;\n                  break;\n            ***REMOVED***\n\n                _context4.next = 96;\n                break;\n\n              case 92:\n                console.log(\"ERROR 840192: to slips in block fee transaction invalid\");\n                console.log(\"RECOVERED SLIPS: \", slips);\n                console.log(\"TX TO SLIPS\", this.transactions[index_of_block_payment].transaction.to);\n                return _context4.abrupt(\"return\", 0);\n\n              case 96:\n                if (!(this.app.blockchain.isFullySynced() == 1 && this.app.BROWSER == 0 && this.app.SPVMODE == 0)) {\n                  _context4.next = 135;\n                  break;\n            ***REMOVED***\n\n                console.log(\"\\n\\n\\nAM I SYNCED FULLY: \" + this.app.blockchain.isFullySynced());\n                _context4.next = 100;\n                return this.calculateRebroadcasts(this.transactions);\n\n              case 100:\n                eblkd = _context4.sent;\n                console.log(\"NUMBER OF REBROADCAST TXS: \" + eblkd.rebroadcast.length); //\n        ***REMOVED*** reclaimed txs\n        ***REMOVED***\n\n                reclaimed = Big(reclaimed).plus(Big(eblkd.reclaimed));\n\n                if (Big(this.block.reclaimed).eq(reclaimed)) {\n                  _context4.next = 106;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 241948: reclaimed funds do not match expected when validating\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 106:\n                ; //\n        ***REMOVED*** atr validates\n        ***REMOVED***\n        ***REMOVED*** the last transaction in any block will be the fee-transaction. ATR transactions\n        ***REMOVED*** are BEFORE that, added in the order that that are generated. So we check that \n        ***REMOVED*** all of the transactions are good.\n        ***REMOVED***\n\n                atr_idx = this.transactions.length - 1;\n\n                if (!(atr_idx > 0)) {\n                  _context4.next = 124;\n                  break;\n            ***REMOVED***\n\n                if (this.transactions[atr_idx].transaction.type == 2) {\n                  atr_idx--;\n            ***REMOVED***\n\n                if (!(atr_idx > 0)) {\n                  _context4.next = 124;\n                  break;\n            ***REMOVED***\n\n                _i2 = eblkd.rebroadcast.length - 1;\n\n              case 112:\n                if (!(_i2 >= 0)) {\n                  _context4.next = 124;\n                  break;\n            ***REMOVED***\n\n                eblkd.rebroadcast[_i2].transaction.id = this.transactions[atr_idx].transaction.id;\n\n                if (!(JSON.stringify(eblkd.rebroadcast[_i2].transaction) != JSON.stringify(this.transactions[atr_idx].transaction))) {\n                  _context4.next = 119;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 549280: rebroadcast txs JSON outputs not as expected\");\n                console.log(\"#1: \" + JSON.stringify(eblkd.rebroadcast[_i2].transaction));\n                console.log(\"#2: \" + JSON.stringify(this.transactions[atr_idx].transaction));\n                return _context4.abrupt(\"return\", 0);\n\n              case 119:\n                atr_idx--;\n                console.log(\"atr moved down to: \" + atr_idx);\n\n              case 121:\n                _i2--;\n                _context4.next = 112;\n                break;\n\n              case 124:\n                _i3 = atr_idx;\n\n              case 125:\n                if (!(_i3 > 0)) {\n                  _context4.next = 135;\n                  break;\n            ***REMOVED***\n\n                if (!(this.transactions[_i3].transaction.type == 5 || this.transactions[_i3].transaction.type == 6 || this.transactions[_i3].transaction.type == 7)) {\n                  _context4.next = 132;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 004222: block chains rebroadcast transactions outside appropriate range\");\n                console.log(JSON.stringify(this.transactions[_i3]));\n                console.log(\"atr_idx: \" + atr_idx + \" --- \" + _i3);\n                console.log(\"BLOCK: \" + JSON.stringify(this.transactions));\n                return _context4.abrupt(\"return\", 0);\n\n              case 132:\n                _i3--;\n                _context4.next = 125;\n                break;\n\n              case 135:\n                if (!(tx_sigs.length > 0)) {\n                  _context4.next = 139;\n                  break;\n            ***REMOVED***\n\n                if (!(this.block.merkle != this.app.crypto.returnMerkleTree(tx_sigs).root)) {\n                  _context4.next = 139;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 258102: merkle root does not match provided root\");\n                return _context4.abrupt(\"return\", 0);\n\n              case 139:\n                return _context4.abrupt(\"return\", 1);\n\n              case 140:\n              case \"end\":\n                return _context4.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee4, this);\n  ***REMOVED***));\n\n      function validate() {\n        return _validate.apply(this, arguments);\n  ***REMOVED***\n\n      return validate;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnBlockPayouts\",\n    value: function returnBlockPayouts() {\n      var gt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var rvalue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {***REMOVED***;\n      var rloop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var stakers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n      if (rvalue.blocks == undefined) {\n        rvalue.blocks = [];\n        rvalue.reclaimed = \"0\";\n  ***REMOVED***\n\n      var payments = {***REMOVED***;\n      payments.producer_publickey = \"\";\n      payments.producer_share = \"0.0\";\n      payments.miner_publickey = \"\";\n      payments.miner_share = \"0.0\";\n      payments.router_publickey = \"\";\n      payments.router_share = \"0.0\";\n      payments.staker_publickey = \"\";\n      payments.staker_share = \"0.0\";\n      payments.bsh = this.returnHash();\n      payments.bid = this.block.id;\n      payments.rloop = rloop; //\n      // no golden ticket? check treasury\n      //\n\n      try {\n        if (gt == null) {\n          if (this.block.prevbsh == \"\") {\n            if (rloop == 10) {\n              rvalue.reclaimed = Big(rvalue.reclaimed).plus(Big(payments.total_fees_in_block)).toFixed(8);\n              return rvalue;\n        ***REMOVED*** else {\n              return rvalue;\n        ***REMOVED***\n      ***REMOVED*** else {\n            var _prevblk = this.app.blockchain.returnBlockByHash(this.block.prevbsh);\n\n            if (this.containsGoldenTicket()) {\n              return rvalue;\n        ***REMOVED*** else {\n              return _prevblk.returnBlockPayouts(gt, rvalue, rloop + 1);\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED*** catch (err) {\n        console.log(\"ERROR: in checking treasury: \", err);\n  ***REMOVED*** //\n      // first block\n      //\n\n\n      if (this.block.prevbsh == \"\") {\n        if (rloop == 10) {\n          rvalue.reclaimed = Big(rvalue.reclaimed).plus(Big(this.returnFees())).toFixed(8);\n          return rvalue;\n    ***REMOVED*** else {\n          return rvalue;\n    ***REMOVED***\n  ***REMOVED***\n\n      try {\n***REMOVED***\n***REMOVED*** golden ticket\n***REMOVED***\n        var prevbsh = this.block.prevbsh;\n        var prevblk = this.app.blockchain.returnBlockByHash(prevbsh);\n        var producer_publickey = this.block.creator;\n        var miner_publickey = \"\";\n        var router_publickey = \"\";\n        var staker_publickey = \"\";\n        var total_work_needed = this.app.burnfee.returnWorkNeeded(prevblk.block.ts, this.block.ts, prevblk.block.bf); // int\n\n        var total_work_available = this.returnEmbeddedRoutingWork(); // string\n\n        var total_fees_in_block = this.returnFees(); // string\n\n        var producer_share = Big(total_work_available).minus(Big(total_work_needed)); // Big\n\n        var paysplit_share = Big(total_fees_in_block).minus(producer_share).plus(this.returnCoinbase()); // Big\n\n        var miner_share = paysplit_share.div(2).toFixed(8); // string\n\n        var router_share = paysplit_share.minus(Big(miner_share)).toFixed(8); // string\n\n        var staker_share = \"0.0\";\n  ***REMOVED*** catch (err) {\n        console.log(\"ERROR IN GOLDEN TICKET CREATION: \", err);\n  ***REMOVED*** //\n      // pick the router\n      //\n\n\n      if (Big(router_share).gt(0)) {\n***REMOVED***\n***REMOVED*** random decimal between 0-1 picks winning tx\n***REMOVED***\n        var winnerHash = this.app.crypto.hash(gt.random).slice(0, 12);\n        var maxHash = \"ffffffffffff\";\n        var winnerNum = parseInt(winnerHash, 16); // 16 = num is hex\n\n        var maxNum = parseInt(maxHash, 16); // 16 = num is hex\n\n        var winnerDec = winnerNum / maxNum;\n        var winner_fee = Big(total_fees_in_block).times(winnerDec);\n        var winning_tx_idx = -1;\n        var cumulative_fee = Big(0.0);\n        var stop = 0; //\n***REMOVED*** TODO - faster search algorithm\n***REMOVED***\n***REMOVED*** find winning tx randomly\n***REMOVED***\n\n        for (var i = 0; i < this.transactions.length && stop == 0; i++) {\n          cumulative_fee.plus(Big(this.transactions[i].returnFees(this.app)));\n\n          if (cumulative_fee.gte(winner_fee)) {\n            stop = 1;\n            winning_tx_idx = i - 1;\n      ***REMOVED***\n    ***REMOVED*** //\n***REMOVED*** assign winners\n***REMOVED***\n\n\n        if (winning_tx_idx == -1) {\n          router_publickey = this.block.creator;\n    ***REMOVED*** //\n***REMOVED*** or find winner in routing portion\n***REMOVED***\n        else {\n            var winning_tx = this.transactions[winning_tx_idx]; //\n    ***REMOVED*** no path info, default to sender\n    ***REMOVED***\n\n            if (winning_tx.transaction.path.length == 0) {\n              router_publickey = winning_tx.transaction.from[0].add;\n        ***REMOVED*** //\n    ***REMOVED*** path info, repeat random generation\n    ***REMOVED***\n\n\n            var winner2Hash = this.app.crypto.hash(winnerHash).slice(0, 12);\n            var winner2Num = parseInt(winner2Hash, 16);\n            var winner2Dec = winner2Num / maxNum;\n            var pathlength = winning_tx.transaction.path.length;\n            var pathtotal = winning_tx.returnFees(this.app);\n\n            if (winner2Dec == 0) {\n              router_publickey = winning_tx.transaction.path[0].to;\n        ***REMOVED*** else {\n              if (winnerDec == 1) {\n                router_publickey = winning_tx.transaction.path[pathlength].to;\n          ***REMOVED*** else {\n                var y = pathlength;\n                var x = 2 - 1 / Math.pow(2, y - 1); // i.e. 1.75 for 3 node path\n\n                var z = y * winner2Dec;\n\n                for (var _i4 = 0; _i4 < pathlength; _i4++) {\n                  var a = 2 - 1 / Math.pow(2, _i4 - 1);\n\n                  if (a <= z) {\n                    router_publickey = winning_tx.transaction.path[_i4].to;\n              ***REMOVED***\n            ***REMOVED***\n          ***REMOVED***\n        ***REMOVED***\n      ***REMOVED***\n  ***REMOVED***\n\n      if (rloop == 0) {\n***REMOVED***\n***REMOVED*** winning miner\n***REMOVED***\n        miner_publickey = gt.publickey;\n  ***REMOVED*** else {\n***REMOVED***\n***REMOVED*** winning staker\n***REMOVED***\n        var _x2 = this.app.bank.returnWinningStaker(gt, stakers);\n\n        stakers = _x2.stakers;\n        staker_publickey = _x2.publickey;\n        staker_share = miner_share;\n        miner_share = \"0.0\";\n  ***REMOVED*** // extra for testing diagnostics\n\n\n      payments.coinbase = this.returnCoinbase();\n      payments.producer_publickey = producer_publickey;\n      payments.miner_publickey = miner_publickey;\n      payments.router_publickey = router_publickey;\n      payments.staker_publickey = staker_publickey;\n      payments.producer_share = producer_share;\n      payments.miner_share = miner_share;\n      payments.staker_share = staker_share;\n      payments.router_share = router_share;\n      payments.total_fees_in_block = total_fees_in_block;\n      payments.total_work_needed = total_work_needed;\n      payments.total_work_available = total_work_available;\n      payments.paysplit_share = paysplit_share;\n      rvalue.blocks.push(payments);\n\n      if (this.containsGoldenTicket() || rloop == 10) {\n        return rvalue;\n  ***REMOVED*** else {\n        gt.random = this.app.crypto.hash(gt.random);\n        return prevblk.returnBlockPayouts(gt, rvalue, rloop + 1);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFees\",\n    value: function returnFees() {\n      var v = Big(0);\n\n      for (var i = 0; i < this.transactions.length; i++) {\n        v = v.plus(Big(this.transactions[i].returnFees(this.app)));\n  ***REMOVED***\n\n      return v.toFixed(8);\n***REMOVED*** // Use this when we're saving data to disk\n\n  ***REMOVED***, {\n    key: \"returnBlockFileData\",\n    value: function returnBlockFileData() {\n      var blkcontent = {\n        block: JSON.parse(JSON.stringify(this.block)),\n        transactions: JSON.parse(JSON.stringify(this.transactions))\n  ***REMOVED***;\n      return JSON.stringify(blkcontent);\n***REMOVED***\n  ***REMOVED***]);\n\n  return Block;\n***REMOVED***();\n\nmodule.exports = Block;\n/* WEBPACK VAR INJECTION */***REMOVED***.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2FpdG8vYmxvY2suanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2FpdG8vYmxvY2suanM/MTAxYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHNhaXRvID0gcmVxdWlyZSgnLi9zYWl0bycpO1xuY29uc3QgQmlnID0gcmVxdWlyZSgnYmlnLmpzJyk7XG5cblxuY2xhc3MgQmxvY2sge1xuXG4gIGNvbnN0cnVjdG9yKGFwcCwgYmxranNvbiA9IFwiXCIsIHR4c2pzb24gPSBcIlwiLCBjb25maXJtYXRpb25zID0gLTEpIHtcblxuICAgIHRoaXMuYXBwID0gYXBwIHx8IHt9O1xuXG4gICAgLy9cbiAgICAvLyBjb25zZW5zdXMgdmFyaWFibGVzXG4gICAgLy9cbiAgICB0aGlzLmJsb2NrIFx0XHQgICAgICAgID0ge307XG4gICAgdGhpcy5ibG9jay50cyBcdCAgICAgIFx0PSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLmJsb2NrLnByZXZic2ggXHRcdD0gXCJcIjtcbiAgICB0aGlzLmJsb2NrLm1lcmtsZSBcdCAgXHQ9IFwiXCI7XG4gICAgdGhpcy5ibG9jay5jcmVhdG9yIFx0ICBcdD0gXCJcIjtcbiAgICB0aGlzLmJsb2NrLmlkIFx0ICAgICAgXHQ9IDE7XG4gICAgdGhpcy5ibG9jay5iZiBcdCAgICAgIFx0PSAwOyBcbiAgICB0aGlzLmJsb2NrLmRpZmZpY3VsdHkgXHQ9IDAuMDtcbiAgICB0aGlzLmJsb2NrLnBheXNwbGl0IFx0PSAwLjU7XG4gICAgdGhpcy5ibG9jay5wb3dzcGxpdCBcdD0gMC41O1xuICAgIHRoaXMuYmxvY2sudHJlYXN1cnkgXHQ9IEJpZyhcIjI4NjgxMDAwMDAuMFwiKTsgIC8vIFRPRE9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4IHRyZWFzdXJ5IGFtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgIHRoaXMuYmxvY2suc3Rha2Vwb29sICBcdD0gQmlnKFwiMFwiKTtcdFx0XG4gICAgdGhpcy5ibG9jay5jb2luYmFzZSBcdD0gQmlnKFwiMC4wXCIpO1xuICAgIHRoaXMuYmxvY2sucmVjbGFpbWVkIFx0PSBCaWcoXCIwLjBcIik7XG4gICAgdGhpcy5ibG9jay5zciBcdCAgICAgIFx0PSAwO1x0XHRcdC8vIDAgLSBzdGFraW5nIHRhYmxlIG5vdCByZWZyZXNoZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSAtIHN0YWtpbmcgdGFibGUgcmVmcmVzaGVkXG5cbiAgICAvL1xuICAgIC8vIGhhc2htYXBzXG4gICAgLy9cbiAgICB0aGlzLnR4c19obWFwXHRcdD0gW107XG5cblxuICAgIC8vXG4gICAgLy8gYmxvY2sgdHJhbnNhY3Rpb25zXG4gICAgLy9cbiAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IFtdO1xuXG5cbiAgICAvL1xuICAgIC8vIGNhbGxiYWNrc1xuICAgIC8vXG4gICAgdGhpcy5jYWxsYmFja3MgIFx0PSBbXTtcbiAgICB0aGlzLmNhbGxiYWNrc1R4IFx0PSBbXTtcblxuXG4gICAgLy9cbiAgICAvLyBub24tY29uc2Vuc3VzIHZhcmlhYmxlc1xuICAgIC8vXG4gICAgdGhpcy5tYXh0aWQgXHRcdD0gMDtcbiAgICB0aGlzLm1pbnRpZCBcdFx0PSAwO1xuICAgIHRoaXMuYXZnZmVlIFx0XHQ9IDA7XG5cbiAgICB0aGlzLnNpemVfaW5fYnl0ZXMgXHQ9IDA7ICAgICAgICAgICAvLyBzaXplIG9mIGJsb2NrIGluIGJ5dGVzXG4gICAgdGhpcy5oYXNoIFx0XHQ9IFwiXCI7ICAgICAgICAgIC8vIGJsb2NrIGhhc2ggPT0gaGFzaCh0aGlzLnByZWhhc2grbGFzdF9ibG9jay5oYXNoKVxuICAgIHRoaXMucHJlaGFzaCBcdFx0PSBcIlwiOyAgICAgICAgICAvLyBoYXNoIG9mIHNpZ25hdHVyZVxuICAgIHRoaXMuZmlsZW5hbWUgXHQ9IFwiXCI7ICAgICAgICAgIC8vIG5hbWUgb2YgZmlsZSBvbiBkaXNrIGlmIHNldFxuXG4gICAgdGhpcy5jb25maXJtYXRpb25zID0gY29uZmlybWF0aW9ucztcblxuICAgIHRoaXMuaXNfdmFsaWQgPSAxOyAgICAgICAgICAgLy8gc2V0IHRvIHplcm8gaWYgdGhlcmUgaXMgYW5cblxuXG4gICAgLy9cbiAgICAvLyBpbXBvcnQgYmxvY2sgaGVhZGVyc1xuICAgIC8vXG4gICAgaWYgKGJsa2pzb24gIT0gXCJcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gaWYgKHR5cGVvZiBibGtqc29uID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyAgIHRoaXMuYmxvY2sgPSBKU09OLnBhcnNlKGJsa2pzb24udG9TdHJpbmcoXCJ1dGY4XCIpKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ibG9jayA9IGJsa2pzb24uYmxvY2s7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25zID0gYmxranNvbi50cmFuc2FjdGlvbnMubWFwKHR4ID0+IG5ldyBzYWl0by50cmFuc2FjdGlvbih0eC50cmFuc2FjdGlvbikpO1xuICAgICAgICAvLyB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5pc192YWxpZCA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cblxuXG4gIGFmZml4Q2FsbGJhY2tzKCkge1xuICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyB6KyspIHtcbiAgICAgIHZhciB0eG1zZyA9IHRoaXMudHJhbnNhY3Rpb25zW3pdLnJldHVybk1lc3NhZ2UoKTtcbiAgICAgIHRoaXMuYXBwLm1vZHVsZXMuYWZmaXhDYWxsYmFja3ModGhpcy50cmFuc2FjdGlvbnNbel0sIHosIHR4bXNnLCB0aGlzLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3NUeCwgdGhpcy5hcHApO1xuICAgIH1cbiAgfVxuXG5cblxuICBhc3luYyBidW5kbGUocHJldmJsaz1udWxsKSB7XG5cbiAgICBsZXQgbWludHhpZCA9IDE7XG4gICAgbGV0IHR4X3NpZ3MgPSBbXTtcblxuICAgIC8vXG4gICAgLy8gZGVmYXVsdCB2YWx1ZXNcbiAgICAvL1xuICAgIGlmIChwcmV2YmxrICE9IG51bGwpIHtcblxuICAgICAgdGhpcy5ibG9jay5pZCBcdFx0PSBwcmV2YmxrLmJsb2NrLmlkICsgMTtcbiAgICAgIHRoaXMuYmxvY2sudHJlYXN1cnkgXHQ9IEJpZyhwcmV2YmxrLmJsb2NrLnRyZWFzdXJ5KS5wbHVzKEJpZyhwcmV2YmxrLmJsb2NrLnJlY2xhaW1lZCkpO1xuICAgICAgdGhpcy5ibG9jay5jb2luYmFzZSBcdD0gQmlnKHRoaXMuYmxvY2sudHJlYXN1cnkpLmRpdih0aGlzLmFwcC5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kKS50b0ZpeGVkKDgpO1xuICAgICAgdGhpcy5ibG9jay50cmVhc3VyeSBcdD0gdGhpcy5ibG9jay50cmVhc3VyeS5taW51cyhCaWcodGhpcy5ibG9jay5jb2luYmFzZSkpLnRvRml4ZWQoOCk7XG4gICAgICB0aGlzLmJsb2NrLnByZXZic2ggXHQ9IHByZXZibGsucmV0dXJuSGFzaCgpO1xuICAgICAgdGhpcy5ibG9jay5kaWZmaWN1bHR5IFx0PSBwcmV2YmxrLmJsb2NrLmRpZmZpY3VsdHk7XG4gICAgICB0aGlzLmJsb2NrLnBheXNwbGl0IFx0PSBwcmV2YmxrLmJsb2NrLnBheXNwbGl0O1xuICAgICAgdGhpcy5ibG9jay5wb3dzcGxpdCBcdD0gcHJldmJsay5ibG9jay5wb3dzcGxpdDtcbiAgICAgIHRoaXMuYmxvY2sudHNcdFx0PSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHRoaXMuYmxvY2suYmYgXHRcdD0gdGhpcy5hcHAuYnVybmZlZS5yZXR1cm5CdXJuRmVlKHByZXZibGssIHRoaXMpO1xuICAgICAgaWYgKHByZXZibGsudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIG1pbnR4aWRcdFx0XHQ9IHByZXZibGsucmV0dXJuTWF4VHhJZCgpO1xuICAgICAgICBpZiAobWludHhpZCA9PSAwKSBcdHsgbWludHhpZCA9IDE7IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1pbnR4aWRcdFx0XHQ9IHByZXZibGsucmV0dXJuTWF4VHhJZCgpICsgMTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gaW5pdGlhbCB0b2tlbiBhbGxvY2F0aW9uXG4gICAgLy9cbiAgICBpZiAodGhpcy5ibG9jay5pZCA9PSAxKSB7XG5cbiAgICAgIGxldCB0eCA9IG5ldyBzYWl0by50cmFuc2FjdGlvbigpO1xuICAgICAgdHgudHJhbnNhY3Rpb24udG8ucHVzaChuZXcgc2FpdG8uc2xpcChcblx0XCIxSEw1Mm45aVdCS0ZEeU1UVnB2dUtORUh0MmZaUVV4RGVicGlCYXF3a1dNZlwiLFxuXHQxMDAwMDAwMDAwLFxuXHQzLFxuXHQwLFxuXHQwLFxuXHQwLFxuXHRcIlwiLFxuXHQxXG4gICAgICApKTtcbiAgICAgIHR4LnRyYW5zYWN0aW9uLnRvLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdFwiMkhMNTJuOWlXQktGRHlNVFZwdnVLTkVIdDJmWlFVeERlYnBpQmFxd2tXTWZcIixcblx0MTAwMDAwMDAwMCxcblx0Myxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4gICAgICB0eC50cmFuc2FjdGlvbi50by5wdXNoKG5ldyBzYWl0by5zbGlwKFxuXHRcIjNITDUybjlpV0JLRkR5TVRWcHZ1S05FSHQyZlpRVXhEZWJwaUJhcXdrV01mXCIsXG5cdDEwMDAwMDAwMDAsXG5cdDMsXG5cdDAsXG5cdDAsXG5cdDAsXG5cdFwiXCIsXG5cdDFcbiAgICAgICkpO1xuICAgICAgdHgudHJhbnNhY3Rpb24udG8ucHVzaChuZXcgc2FpdG8uc2xpcChcblx0XCI0SEw1Mm45aVdCS0ZEeU1UVnB2dUtORUh0MmZaUVV4RGVicGlCYXF3a1dNZlwiLFxuXHQxMDAwMDAwMDAwLFxuXHQzLFxuXHQwLFxuXHQwLFxuXHQwLFxuXHRcIlwiLFxuXHQxXG4gICAgICApKTtcbiAgICAgIHR4LnRyYW5zYWN0aW9uLnRvLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdFwiNUhMNTJuOWlXQktGRHlNVFZwdnVLTkVIdDJmWlFVeERlYnBpQmFxd2tXTWZcIixcblx0MTAwMDAwMDAwMCxcblx0Myxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4gICAgICB0eC50cmFuc2FjdGlvbi50eXBlID0gMztcbiAgICAgIHR4LnRyYW5zYWN0aW9uLmZyb20ucHVzaChuZXcgc2FpdG8uc2xpcChcblx0dGhpcy5hcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpICxcblx0NTAwMDAwMDAwMCxcblx0Myxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4gICAgICB0eC50cmFuc2FjdGlvbi5pZCA9IDE7XG4gICAgICB0eCA9IHRoaXMuYXBwLndhbGxldC5zaWduVHJhbnNhY3Rpb24odHgpO1xuICAgICAgdGhpcy50cmFuc2FjdGlvbnMucHVzaCh0eCk7XG5cbi8vXG4vLyBzdGFraW5nIHR4XG4vL1xuICAgICAgdHggPSBuZXcgc2FpdG8udHJhbnNhY3Rpb24oKTtcbiAgICAgIHR4LnRyYW5zYWN0aW9uLnRvLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdFwiMUhMNTJuOWlXQktGRHlNVFZwdnVLTkVIdDJmWlFVeERlYnBpQmFxd2tXTWZcIixcblx0NjAwMDAwMCxcblx0NCxcblx0MCxcblx0MCxcblx0MCxcblx0XCJcIixcblx0MVxuICAgICAgKSk7XG4vKioqKlxuICAgICAgdHgudHJhbnNhY3Rpb24udHlwZSA9IDQ7XG4gICAgICB0eC50cmFuc2FjdGlvbi5mcm9tLnB1c2gobmV3IHNhaXRvLnNsaXAoXG5cdHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSAsXG5cdDYwMDAwMDAsXG5cdDQsXG5cdDAsXG5cdDAsXG5cdDAsXG5cdFwiXCIsXG5cdDFcbiAgICAgICkpO1xuICAgICAgdHgudHJhbnNhY3Rpb24uaWQgPSAyO1xuICAgICAgdHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHR4KTtcbiAgICAgIHRoaXMudHJhbnNhY3Rpb25zLnB1c2godHgpO1xuKioqKi9cbiAgICB9XG5cblxuXG5cbiAgICAvL1xuICAgIC8vIHJlY2xhaW1lZCBmdW5kcyBhcmUgdGhlIHRva2VucyB0aGF0IGFyZVxuICAgIC8vIHVuc3BlbnQgaW4gdGhlIGJsb2NrIDEgR0VORVNJUyBwZXJpb2QgYWdvXG4gICAgLy8gYW5kIHRodXMgd2lsbCBmYWxsIG9mZiB0aGUgY2hhaW4gd2l0aCB0aGUgXG4gICAgLy8gYWRkaXRpb24gb2YgdGhpcyBibG9jay5cbiAgICAvL1xuICAgIC8vIHdlIGFkZCB0aGVzZSB0byBvdXIgdHJlYXN1cnkgaW4gdGhlIG5leHQgXG4gICAgLy8gYmxvY2sgKHNlZSBhYm92ZSlcbiAgICAvL1xuICAgIGxldCBlYmxrZCA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlUmVicm9hZGNhc3RzKCk7XG5cbiAgICAvL1xuICAgIC8vIHJlY2xhaW1lZCB0eHNcbiAgICAvL1xuICAgIHRoaXMuYmxvY2sucmVjbGFpbWVkID0gZWJsa2QucmVjbGFpbWVkO1xuXG5cbiAgICAvL1xuICAgIC8vIGF1dG9tYXRpYyB0cmFuc2FjdGlvbiByZWJyb2FkY2FzdGluZyAoYWRkZWQgMS1ieS0xIGF0IGVuZClcbiAgICAvL1xuICAgIGxldCByZWJyb2FkY2FzdF9hbXQgPSBCaWcoMC4wKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVibGtkLnJlYnJvYWRjYXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgZWJsa2QucmVicm9hZGNhc3RbaV0udHJhbnNhY3Rpb24udG8ubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgIHJlYnJvYWRjYXN0X2FtdCA9IHJlYnJvYWRjYXN0X2FtdC5wbHVzKEJpZyhlYmxrZC5yZWJyb2FkY2FzdFtpXS50cmFuc2FjdGlvbi50b1tpaV0uYW10KSk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYW5zYWN0aW9ucy5wdXNoKGVibGtkLnJlYnJvYWRjYXN0W2ldKTtcbiAgICB9XG5cblxuXG4gICAgLy9cbiAgICAvLyBub3cgY2hlY2sgdHJhbnNhY3Rpb25zXG4gICAgLy9cbiAgICBsZXQgbnVtYmVyX29mX2dvbGRlbl90aWNrZXRzID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgLy9cbiAgICAgIC8vIHNlcXVlbnRpYWwgaWRzXG4gICAgICAvL1xuICAgICAgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uaWQgPSAobWludHhpZCArIGkpO1xuXG4gICAgICAvL1xuICAgICAgLy8gZ29sZGVuIHRpY2tldFxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi50eXBlID09IDEpIHtcblxuICAgICAgICBudW1iZXJfb2ZfZ29sZGVuX3RpY2tldHMrKztcbiAgICAgICAgaWYgKG51bWJlcl9vZl9nb2xkZW5fdGlja2V0cyA+IDEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDQxMjUyMzogc2Vjb25kIGdvbGRlbiB0aWNrZXQgZm91bmQgaW4gYmxvY2tcIik7XG4gICAgICAgICAgdGhpcy5pc192YWxpZCA9IDA7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvL1xuICAgICAgICAvLyBwYXltZW50cyBhbmQgbW9uZXRhcnkgcG9saWN5XG4gICAgICAgIC8vXG4gICAgICAgIGlmIChwcmV2YmxrICE9IG51bGwpIHtcblxuICAgICAgICAgIGxldCBwYXltZW50cyA9IHByZXZibGsucmV0dXJuQmxvY2tQYXlvdXRzKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLm1zZyk7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIGFkZCByZWNsYWltZWQgZnJvbSBibG9ja1xuICAgICAgICAgIC8vXG4gICAgICAgICAgdGhpcy5ibG9jay5yZWNsYWltZWQgPSBCaWcodGhpcy5ibG9jay5yZWNsYWltZWQpLnBsdXMoQmlnKHBheW1lbnRzLnJlY2xhaW1lZCkpLnRvRml4ZWQoOCk7XG5cbiAgICAgICAgICBsZXQgc2xpcHMgPSBbXTtcblxuICAgICAgICAgIHBheW1lbnRzLmJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT4ge1xuICAgICAgICAgICAgaWYgKGJsb2NrLnByb2R1Y2VyX3NoYXJlID4gMCkge1xuICAgICAgICAgICAgICBzbGlwcy5wdXNoKG5ldyBzYWl0by5zbGlwKGJsb2NrLnByb2R1Y2VyX3B1YmxpY2tleSwgYmxvY2sucHJvZHVjZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChibG9jay5taW5lcl9zaGFyZSA+IDApIHtcbiAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5taW5lcl9wdWJsaWNrZXksIGJsb2NrLm1pbmVyX3NoYXJlLCAyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmxvY2sucm91dGVyX3NoYXJlID4gMCkge1xuICAgICAgICAgICAgICBzbGlwcy5wdXNoKG5ldyBzYWl0by5zbGlwKGJsb2NrLnJvdXRlcl9wdWJsaWNrZXksIGJsb2NrLnJvdXRlcl9zaGFyZSwgMikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJsb2NrLnN0YWtlcl9zaGFyZSA+IDApIHtcbiAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5zdGFrZXJfcHVibGlja2V5LCBibG9jay5zdGFrZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChzbGlwcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIGxldCBuZXd0eCA9IG5ldyBzYWl0by50cmFuc2FjdGlvbigpO1xuICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24uZnJvbS5wdXNoKG5ldyBzYWl0by5zbGlwKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSwgMC4wLCAyKSk7XG4gICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi50byA9IHNsaXBzO1xuICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24udHlwZSA9IDI7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBpbmNsdWRpbmcgZm9yIHJlZmVyZW5jZVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLmlkICA9IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZyA9IHBheW1lbnRzO1xuICAgICAgICAgICAgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zLnB1c2gobmV3dHgpO1xuXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24ubXNnLnRhcmdldCAhPSBwcmV2YmxrLnJldHVybkhhc2goKSkge1xuICAgICAgICAgIHRoaXMuaXNfdmFsaWQgPSAwO1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIG1lcmtsZSBzaWdzXG4gICAgICAvL1xuICAgICAgdHhfc2lnc1tpXSA9IHRoaXMudHJhbnNhY3Rpb25zW2ldLnJldHVyblNpZ25hdHVyZVNvdXJjZSh0aGlzLmFwcCk7XG5cbiAgICAgIC8vXG4gICAgICAvLyBoYXNobWFwIG9mIHR4c1xuICAgICAgLy9cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaWkrKykgeyB0aGlzLnR4c19obWFwW3RoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmZyb21baWldLmFkZF0gPSAxOyB9XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udG8ubGVuZ3RoOyBpaSsrKSB7IHRoaXMudHhzX2htYXBbdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udG9baWldLmFkZF0gPSAxOyB9XG5cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIG1lcmtsZSByb290XG4gICAgLy9cbiAgICBpZiAodHhfc2lncy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmJsb2NrLm1lcmtsZSA9IHRoaXMuYXBwLmNyeXB0by5yZXR1cm5NZXJrbGVUcmVlKHR4X3NpZ3MpLnJvb3Q7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgZGlmZmljdWx0eSBhbmQgcGF5c3BsaXRcbiAgICAvL1xuXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgfVxuXG5cblxuXG4gIC8vXG4gIC8vIGluIHZhbGlkYXRpb24gbW9kZSwgd2UgcHJvdmlkZSBsaXN0IG9mIFRYUyB0byBjaGVja1xuICAvL1xuICBhc3luYyBjYWxjdWxhdGVSZWJyb2FkY2FzdHModHhzPW51bGwpIHtcblxuICAgIGxldCBleHBpcmluZ19kYXRhID0geyBcbiAgICAgIHJlY2xhaW1lZDogXCIwLjBcIiwgXG4gICAgICByZWJyb2FkY2FzdDogW10sIFxuICAgICAgdG90YWxfcmVicm9hZGNhc3Q6IDBcbiAgICB9XG4gICAgbGV0IG5lZWRzX3JlYnJvYWRjYXN0ID0gMDtcblxuICAgIGlmICh0aGlzLmFwcC5CUk9XU0VSID09IDEgfHwgdGhpcy5hcHAuU1BWTU9ERSA9PSAxKSB7IHJldHVybiBleHBpcmluZ19kYXRhOyB9XG5cbiAgICAvL1xuICAgIC8vIGVsaW1pbmF0ZWQgYmxvY2sgaWRcbiAgICAvL1xuICAgIGxldCBlYmxrX2lkID0gdGhpcy5ibG9jay5pZCAtIHRoaXMuYXBwLmJsb2NrY2hhaW4uZ2VuZXNpc19wZXJpb2QgLSAxO1xuICAgIGlmIChlYmxrX2lkIDwgMSkgeyByZXR1cm4gZXhwaXJpbmdfZGF0YTsgfVxuXG4gICAgbGV0IHVuc3BlbnRfYW10ID0gQmlnKDAuMCk7XG5cbiAgICBsZXQgaGFzaF9vZl9lYmxvY2sgPSB0aGlzLmFwcC5ibG9ja2NoYWluLmJpZF9ic2hfaG1hcFtlYmxrX2lkXTtcbiAgICBsZXQgZWJsayA9IGF3YWl0IHRoaXMuYXBwLnN0b3JhZ2UubG9hZEJsb2NrQnlIYXNoKGhhc2hfb2ZfZWJsb2NrKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWJsay50cmFuc2FjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBlYmxrLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi50by5sZW5ndGg7IGlpKyspIHtcblxuICAgICAgICBsZXQgc2xpcCBcdD0gZWJsay50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udG9baWldO1xuICAgICAgICBzbGlwLmJpZCAgIFx0PSBlYmxrLnJldHVybklkKCk7XG4gICAgICAgIHNsaXAudGlkICAgXHQ9IGVibGsudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmlkO1xuICAgICAgICBzbGlwLmJzaCBcdD0gZWJsay5yZXR1cm5IYXNoKCk7XG4gICAgICAgIHNsaXAuc2lkIFx0PSBpaTtcblxuICAgICAgICBpZiAoQmlnKHNsaXAuYW10KS5ndCgwKSkge1xuICAgICAgICAgIGlmICh0aGlzLmFwcC5zaGFzaG1hcC52YWxpZGF0ZV9zbGlwKHNsaXAucmV0dXJuU2lnbmF0dXJlU291cmNlKCksIHRoaXMuYmxvY2suaWQpKSB7XG4gICAgICAgICAgICBpZiAoZWJsay50cmFuc2FjdGlvbnNbaV0uaXNSZWJyb2FkY2FzdChlYmxrLCB0aGlzLCBpaSkpIHtcblxuXHQgICAgICAvL1xuXHQgICAgICAvLyBudW1iZXIgb2Ygc2xpcHMgcmVicm9hZGNhc3QgYXMgVFhTXG5cdCAgICAgIC8vXG4gICAgICAgICAgICAgIGV4cGlyaW5nX2RhdGEudG90YWxfcmVicm9hZGNhc3QrKztcblxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvLyBjcmVhdGUgcmVicm9hZGNhc3QgdHhcbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgbGV0IHR4ID0gZWJsay50cmFuc2FjdGlvbnNbaV0uZ2VuZXJhdGVSZWJyb2FkY2FzdFRyYW5zYWN0aW9uKHRoaXMuYmxvY2suY3JlYXRvciwgc2xpcC50aWQsIHNsaXAuc2lkLCAyKTtcbiAgICAgICAgICAgICAgaWYgKHR4ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDQ4MTAyOTogaXNzdWUgZ2VuZXJhdGluZyByZWJyb2FkY2FzdCB0cmFuc2FjdGlvbi4uLlwiKTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIC8vIHVwZGF0ZSB0eCB3aXRoIGJpZFxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICBmb3IgKGxldCBpaWkgPSAwOyBpaWkgPCB0eC50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaWlpKyspIHtcbiAgICAgICAgICAgICAgICB0eC50cmFuc2FjdGlvbi5mcm9tW2lpaV0uYmlkID0gdGhpcy5ibG9jay5pZDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGV4cGlyaW5nX2RhdGEucmVicm9hZGNhc3QucHVzaCh0eCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHVuc3BlbnRfYW10ID0gdW5zcGVudF9hbXQucGx1cyhCaWcoc2xpcC5hbXQpKTtcbiAgICAgICAgICAgICAgZXhwaXJpbmdfZGF0YS5yZWNsYWltZWQgPSB1bnNwZW50X2FtdC50b0ZpeGVkKDgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBleHBpcmluZ19kYXRhO1xuICB9XG5cbiAgY29udGFpbnNHb2xkZW5UaWNrZXQoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLmlzR29sZGVuVGlja2V0KCkgPT0gMSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBkZWNyeXB0VHJhbnNhY3Rpb25zKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS5pbnZvbHZlc1B1YmxpY0tleSh0aGlzLmFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCkpID09IDEpIHtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbnNbaV0uZGVjcnlwdE1lc3NhZ2UodGhpcy5hcHApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybkZpbGVuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLnRzICsgXCItXCIgKyB0aGlzLnJldHVybkhhc2goKSArIFwiLmJsa1wiO1xuICB9XG5cbiAgcmV0dXJuUm91dGluZ1dvcmtOZWVkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2suYmYuY3VycmVudDtcbiAgfVxuXG4gIHJldHVybkNvaW5iYXNlKCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLmNvaW5iYXNlO1xuICB9XG5cbiAgcmV0dXJuRGlmZmljdWx0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9jay5kaWZmaWN1bHR5O1xuICB9XG5cbiAgcmV0dXJuRW1iZWRkZWRSb3V0aW5nV29yaygpIHtcblxuICAgIGxldCB2ID0gQmlnKDApO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLmlzX3ZhbGlkID09IDEpIHtcbiAgICAgICAgbGV0IGF2YWlsYWJsZV93b3JrID0gQmlnKHRoaXMudHJhbnNhY3Rpb25zW2ldLnJldHVyblJvdXRpbmdXb3JrQXZhaWxhYmxlKHRoaXMuYXBwLCB0aGlzLmJsb2NrLmNyZWF0b3IpKTtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLnR5cGUgPT0gMSkge1xuICAgICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5tc2cudGFyZ2V0ICE9IHRoaXMucHJldmJzaCkge1xuICAgICAgICAgICAgYXZhaWxhYmxlX3dvcmsgPSBCaWcoMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHYgPSB2LnBsdXMoYXZhaWxhYmxlX3dvcmspO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdi50b0ZpeGVkKDgpO1xuICB9XG5cblxuICByZXR1cm5IYXNoKCkge1xuICAgIGlmICh0aGlzLmhhc2ggIT0gXCJcIikgeyByZXR1cm4gdGhpcy5oYXNoOyB9XG4gICAgdGhpcy5wcmVoYXNoID0gdGhpcy5hcHAuY3J5cHRvLmhhc2godGhpcy5yZXR1cm5GaW5nZXJwcmludCgpKTtcbiAgICB0aGlzLmhhc2ggPSB0aGlzLmFwcC5jcnlwdG8uaGFzaCh0aGlzLnByZWhhc2ggKyB0aGlzLmJsb2NrLnByZXZic2gpO1xuICAgIHJldHVybiB0aGlzLmhhc2g7XG4gIH1cblxuXG4gIHJldHVybklkKCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLmlkO1xuICB9XG5cbiAgcmV0dXJuTWF4VHhJZCgpIHtcbiAgICBpZiAodGhpcy5tYXh0aWQgIT0gMCkgeyByZXR1cm4gdGhpcy5tYXh0aWQ7IH1cbiAgICBmb3IgKHZhciB6ID0gMDsgeiA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDsgeisrKSB7XG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbel0udHJhbnNhY3Rpb24uaWQgPiB0aGlzLm1heHRpZCkge1xuICAgICAgICB0aGlzLm1heHRpZCA9IHRoaXMudHJhbnNhY3Rpb25zW3pdLnRyYW5zYWN0aW9uLmlkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tYXh0aWQ7XG4gIH1cblxuICByZXR1cm5NaW5UeElkKCkge1xuICAgIGlmICh0aGlzLm1pbnRpZCAhPSAwKSB7IHJldHVybiB0aGlzLm1pbnRpZDsgfVxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGggPT0gMCkgeyByZXR1cm4gdGhpcy5hcHAuYmxvY2tjaGFpbi5yZXR1cm5NaW5UeElkKCk7IH07XG4gICAgdGhpcy5taW50aWQgPSB0aGlzLnRyYW5zYWN0aW9uc1swXS50cmFuc2FjdGlvbi5pZDtcbiAgICBmb3IgKHZhciB6ID0gMTsgeiA8IHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aDsgeisrKSB7XG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbel0udHJhbnNhY3Rpb24uaWQgPCB0aGlzLm1pbnRpZCkge1xuICAgICAgICB0aGlzLm1pbnRpZCA9IHRoaXMudHJhbnNhY3Rpb25zW3pdLnRyYW5zYWN0aW9uLmlkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5taW50aWQ7XG4gIH1cblxuICByZXR1cm5QYXlzcGxpdCgpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9jay5wYXlzcGxpdDtcbiAgfVxuXG4gIHJldHVyblBvd3NwbGl0KCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLnBvd3NwbGl0O1xuICB9XG5cbiAgcmV0dXJuUmVjbGFpbWVkKCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrLnJlY2xhaW1lZDtcbiAgfVxuXG4gIHJldHVybkZpbmdlcnByaW50KCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmJsb2NrKTtcbiAgfTtcblxuICByZXR1cm5UcmVhc3VyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9jay50cmVhc3VyeTtcbiAgfVxuXG4gIGFzeW5jIHJ1bkNhbGxiYWNrcyhjb25mKSB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMuY29uZmlybWF0aW9ucyArIDE7IGkgPD0gY29uZjsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5jYWxsYmFja3MubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW2lpXSh0aGlzLCB0aGlzLnRyYW5zYWN0aW9uc1t0aGlzLmNhbGxiYWNrc1R4W2lpXV0sIGksIHRoaXMuYXBwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25maXJtYXRpb25zID0gY29uZjtcbiAgfVxuXG4gIHNwZW5kSW5wdXRzKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaWkrKykge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uZnJvbVtpaV0uYW10ID4gMCkge1xuXHQgIHRoaXMuYXBwLnNoYXNobWFwLmluc2VydF9zbGlwKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmZyb21baWldLnJldHVyblNpZ25hdHVyZVNvdXJjZSgpLCB0aGlzLmJsb2NrLmlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIHVuc3BlbmRJbnB1dHMoKSB7XG4gICAgZm9yIChsZXQgYiA9IDA7IGIgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGIrKykge1xuICAgICAgZm9yIChsZXQgYmIgPSAwOyBiYiA8IHRoaXMudHJhbnNhY3Rpb25zW2JdLnRyYW5zYWN0aW9uLmZyb20ubGVuZ3RoOyBiYisrKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tiXS50cmFuc2FjdGlvbi5mcm9tW2JiXS5hbXQgPiAwKSB7XG4gICAgICAgICAgdGhpcy5hcHAuc2hhc2htYXAuaW5zZXJ0X3NsaXAodGhpcy50cmFuc2FjdGlvbnNbYl0udHJhbnNhY3Rpb24uZnJvbVtiYl0ucmV0dXJuU2lnbmF0dXJlU291cmNlKCksIC0xKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMTtcbiAgfVxuXG5cblxuXG4gIGFzeW5jIHZhbGlkYXRlKCkge1xuXG4gICAgaWYgKHRoaXMuYmxvY2sucHJldmJzaCA9PSBcIlwiKSB7IHJldHVybiAxOyB9XG5cbiAgICAvL3RyeSB7XG5cbiAgICAgIGxldCByZWNsYWltZWQgPSBcIjBcIjtcbiAgICAgIGxldCBwcmV2YmxrID0gdGhpcy5hcHAuYmxvY2tjaGFpbi5yZXR1cm5CbG9ja0J5SGFzaCh0aGlzLmJsb2NrLnByZXZic2gpO1xuICAgICAgbGV0IG1pbnR4aWQgPSAxO1xuICAgICAgbGV0IHR4X3NpZ3MgPSBbXTtcbiAgICAgIGlmIChwcmV2YmxrICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHByZXZibGsudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgbWludHhpZCA9IHByZXZibGsucmV0dXJuTWF4VHhJZCgpO1xuICAgICAgICAgIGlmIChtaW50eGlkID09IDApIHsgbWludHhpZCA9IDE7IH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaW50eGlkID0gcHJldmJsay5yZXR1cm5NYXhUeElkKCkrMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gY2hlY2sgYmxvY2sgaGVhZGVyc1xuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLmJsb2NrLmlkICE9IChwcmV2YmxrLmJsb2NrLmlkKzEpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNDgyMDM5OiBibG9jayBpZCBpcyBub3Qgc2luZ2xlIGluY3JlbWVudCBvdmVyIHByZXZpb3VzIGJsb2NrXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgbGV0IGJ0ID0gQmlnKHByZXZibGsuYmxvY2sudHJlYXN1cnkpLnBsdXMoQmlnKHByZXZibGsuYmxvY2sucmVjbGFpbWVkKSk7XG4gICAgICBsZXQgY2IgPSBCaWcoYnQpLmRpdih0aGlzLmFwcC5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kKS50b0ZpeGVkKDgpO1xuICAgICAgICAgIGJ0ID0gYnQubWludXMoQmlnKGNiKSkudG9GaXhlZCg4KTtcblxuICAgICAgaWYgKHRoaXMuYmxvY2sudHJlYXN1cnkgIT0gYnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA0MTA4Mjk6IGJsb2NrIHRyZWFzdXJ5IGRvZXMgbm90IHZhbGlkYXRlIGluIG5ldyBibG9ja1wiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmJsb2NrLmNvaW5iYXNlICE9IGNiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNDEwODI5OiBibG9jayBjb2luYmFzZSBkb2VzIG5vdCB2YWxpZGF0ZSBpbiBuZXcgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ibG9jay5kaWZmaWN1bHR5ICE9IHByZXZibGsuYmxvY2suZGlmZmljdWx0eSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MTkyODogYmxvY2sgZGlmZmljdWx0eSBkb2VzIG5vdCB2YWxpZGF0ZSBpbiBuZXcgYmxvY2tcIik7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYmxvY2sucGF5c3BsaXQgIT0gcHJldmJsay5ibG9jay5wYXlzcGxpdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MTkyODogYmxvY2sgcGF5c3BsaXQgZG9lcyBub3QgdmFsaWRhdGUgaW4gbmV3IGJsb2NrXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmJsb2NrLnBvd3NwbGl0ICE9IHByZXZibGsuYmxvY2sucG93c3BsaXQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1NzE5Mjg6IGJsb2NrIGRpZmZpY3VsdHkgZG9lcyBub3QgdmFsaWRhdGUgaW4gbmV3IGJsb2NrXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgbGV0IGJmID0gdGhpcy5hcHAuYnVybmZlZS5yZXR1cm5CdXJuRmVlKHByZXZibGssIHRoaXMpO1xuICAgICAgaWYgKHRoaXMuYmxvY2suYmYgIT0gYmYpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1NzE5Mjg6IGJsb2NrIGRpZmZpY3VsdHkgZG9lcyBub3QgdmFsaWRhdGUgaW4gbmV3IGJsb2NrXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIG15IHRpbWVzdGFtcCBtdXN0IGJlIGJpZ2dlciB0aGFuIGxhc3QgdGltZXN0YW1wXG4gICAgICAvL1xuICAgICAgaWYgKHByZXZibGsuYmxvY2sudHMgPj0gdGhpcy5ibG9jay50cykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDcyOTM4NDogYmxvY2sgdGltZXN0YW1wIG5vdCBpbmNyZW1lbnRlZCBmcm9tIHByZXZpb3VzIGJsb2NrXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuXG4gICAgICBsZXQgaG1hcCA9IFtdO1xuICAgICAgbGV0IHNsaXBzID0gW107XG4gICAgICBsZXQgbnVtYmVyX29mX2dvbGRlbl90aWNrZXRzID0gMDtcbiAgICAgIGxldCBpbmRleF9vZl9ibG9ja19wYXltZW50ID0gLTE7XG4gICAgICBsZXQgaW5kZXhfb2ZfZ29sZGVuX3RpY2tldCA9IC0xO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGgtMTsgaSsrKSB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gc2VxdWVudGlhbCBpZHNcbiAgICAgICAgLy9cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmlkICE9IChtaW50eGlkICsgaSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDUxNzMyNDogdHJhbnNhY3Rpb24gaWRzIGFyZSBvdXQtb2Ytb3JkZXIgd2hlbiB2YWxpZGF0aW5nIGJsb2NrIC0gXCIgKyBtaW50eGlkICsgXCItXCIgKyBpICsgXCIgLS0tLS0tLSBcIiArIHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZ29sZGVuIHRpY2tldFxuICAgICAgICAvL1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udHlwZSA9PSAxKSB7XG5cbiAgICAgICAgICBpbmRleF9vZl9nb2xkZW5fdGlja2V0ID0gaTtcblxuICAgICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5tc2cudGFyZ2V0ICE9IHByZXZibGsucmV0dXJuSGFzaCgpKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMDI5MzEyOiBnb2xkZW4gdGlja2V0IGRvZXMgbm90IG1hdGNoIHByZXZibGsgaGFzaFwiKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgbnVtYmVyX29mX2dvbGRlbl90aWNrZXRzKys7XG4gICAgICAgICAgICBpZiAobnVtYmVyX29mX2dvbGRlbl90aWNrZXRzID4gMSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDE4OTg0MjogdHdvIGdvbGRlbiB0aWNrZXRzIGluIGJsb2NrXCIpO1xuICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIHByZXZibGsgaXMgbm90IG51bGwgaGVyZVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGxldCBwYXltZW50cyA9IHByZXZibGsucmV0dXJuQmxvY2tQYXlvdXRzKHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLm1zZyk7XG4gICAgICAgICAgICByZWNsYWltZWQgPSBwYXltZW50cy5yZWNsYWltZWQ7XG5cbiAgICAgICAgICAgIHBheW1lbnRzLmJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT4ge1xuICAgICAgICAgICAgICBpZiAoYmxvY2sucHJvZHVjZXJfc2hhcmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5wcm9kdWNlcl9wdWJsaWNrZXksIGJsb2NrLnByb2R1Y2VyX3NoYXJlLCAyKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGJsb2NrLm1pbmVyX3NoYXJlID4gMCkge1xuICAgICAgICAgICAgICAgIHNsaXBzLnB1c2gobmV3IHNhaXRvLnNsaXAoYmxvY2subWluZXJfcHVibGlja2V5LCBibG9jay5taW5lcl9zaGFyZSwgMikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChibG9jay5yb3V0ZXJfc2hhcmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc2xpcHMucHVzaChuZXcgc2FpdG8uc2xpcChibG9jay5yb3V0ZXJfcHVibGlja2V5LCBibG9jay5yb3V0ZXJfc2hhcmUsIDIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYmxvY2suc3Rha2VyX3NoYXJlID4gMCkge1xuICAgICAgICAgICAgICAgIHNsaXBzLnB1c2gobmV3IHNhaXRvLnNsaXAoYmxvY2suc3Rha2VyX3B1YmxpY2tleSwgYmxvY2suc3Rha2VyX3NoYXJlLCAyKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBzbGlwcy5sZW5ndGg7IHgrKykgeyBzbGlwc1t4XS5zaWQgPSB4OyB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL1xuICAgICAgICAvLyBmZWUgdHJhbnNhY3Rpb24gYWx3YXlzIGZvbGxvd3MgZ29sZGVuIHRpY2tldCAoaWYgZXhpc3RzKVxuICAgICAgICAvL1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udHlwZSA9PSAyKSB7XG4gICAgICAgICAgaWYgKGluZGV4X29mX2Jsb2NrX3BheW1lbnQgIT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTgxMDI5OiB0d28gYmxvY2sgcGF5bWVldCAodHlwZT0yKSB0cmFuc2FjdGlvbnMgaW4gYmxvY2tcIik7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXhfb2ZfYmxvY2tfcGF5bWVudCA9IGk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIG1lcmtsZSBzaWdzXG4gICAgICAgIC8vXG4gICAgICAgIHR4X3NpZ3NbaV0gPSB0aGlzLnRyYW5zYWN0aW9uc1tpXS5yZXR1cm5TaWduYXR1cmVTb3VyY2UodGhpcy5hcHApOztcblxuICAgICAgICAvL1xuICAgICAgICAvLyBubyBkdXBsaWNhdGUgaW5wdXRzIHNsaXBzXG4gICAgICAgIC8vXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmIChobWFwW3RoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLmZyb21bal0ucmV0dXJuU2lnbmF0dXJlU291cmNlKCldICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA4MjA0OTM6IG11bHRpcGxlIHRyYW5zYWN0aW9ucyBzcGVuZCBzYW1lIGlucHV0IGRldGVjdGVkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi5mcm9tW2pdLmFtdCA+IDApIHtcbiAgICAgICAgICAgIGhtYXBbdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24uZnJvbVtqXS5yZXR1cm5TaWduYXR1cmVTb3VyY2UoKV0gPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHZhbGlkYXRlIHRyYW5zYWN0aW9uc1xuICAgICAgICAvL1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb25zW2ldLnZhbGlkYXRlKHRoaXMuYXBwLCB0aGlzLmJsb2NrLmlkKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBFUlJPUiAxNzQyMzM6IGJsb2NrIGNvbnRhaW5zIGludmFsaWQgdHJhbnNhY3Rpb246ICR7aX1gKTtcbiAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uc1tpXS5pc192YWxpZCA9IDA7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIGdvbGRlbiB0aWNrZXRzIG11c3QgcGF5IG91dFxuICAgICAgLy9cbiAgICAgIGlmIChpbmRleF9vZl9nb2xkZW5fdGlja2V0ID4gLTEpIHtcblx0aWYgKGluZGV4X29mX2Jsb2NrX3BheW1lbnQgPT0gLTEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDY5NzgxMjogZ29sZGVuIHRpY2tldCBpbiBibG9jaywgYnV0IG5vdCBibG9jayBwYXltZW50IHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBjaGVjayBhY2N1cmF0ZVxuICAgICAgICAgIC8vXG4gICAgICAgICAgaWYgKHRoaXMuYXBwLmNyeXB0by5oYXNoKEpTT04uc3RyaW5naWZ5KHNsaXBzKSkgPT0gdGhpcy5hcHAuY3J5cHRvLmhhc2goSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbnNbaW5kZXhfb2ZfYmxvY2tfcGF5bWVudF0udHJhbnNhY3Rpb24udG8pKSkge1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDg0MDE5MjogdG8gc2xpcHMgaW4gYmxvY2sgZmVlIHRyYW5zYWN0aW9uIGludmFsaWRcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJFQ09WRVJFRCBTTElQUzogXCIsIHNsaXBzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVFggVE8gU0xJUFNcIiwgdGhpcy50cmFuc2FjdGlvbnNbaW5kZXhfb2ZfYmxvY2tfcGF5bWVudF0udHJhbnNhY3Rpb24udG8pO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgfSBcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8vXG4gICAgICAvLyBvbmx5IHZhbGlkYXRlIG1vbmV0YXJ5IHBvbGljeSBpZiBmdWxseS1zeW5jZWQgd2l0aCBmdWxsIGJsb2NrIGhpc3RvcnlcbiAgICAgIC8vXG4gICAgICBpZiAodGhpcy5hcHAuYmxvY2tjaGFpbi5pc0Z1bGx5U3luY2VkKCkgPT0gMSAmJiB0aGlzLmFwcC5CUk9XU0VSID09IDAgJiYgdGhpcy5hcHAuU1BWTU9ERSA9PSAwKSB7XG5cbmNvbnNvbGUubG9nKFwiXFxuXFxuXFxuQU0gSSBTWU5DRUQgRlVMTFk6IFwiICsgdGhpcy5hcHAuYmxvY2tjaGFpbi5pc0Z1bGx5U3luY2VkKCkpO1xuXG4gICAgICAgIGxldCBlYmxrZFx0PSBhd2FpdCB0aGlzLmNhbGN1bGF0ZVJlYnJvYWRjYXN0cyh0aGlzLnRyYW5zYWN0aW9ucyk7XG5cbmNvbnNvbGUubG9nKFwiTlVNQkVSIE9GIFJFQlJPQURDQVNUIFRYUzogXCIgKyBlYmxrZC5yZWJyb2FkY2FzdC5sZW5ndGgpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHJlY2xhaW1lZCB0eHNcbiAgICAgICAgLy9cbiAgICAgICAgcmVjbGFpbWVkID0gQmlnKHJlY2xhaW1lZCkucGx1cyhCaWcoZWJsa2QucmVjbGFpbWVkKSk7XG4gICAgICAgIGlmICghQmlnKHRoaXMuYmxvY2sucmVjbGFpbWVkKS5lcShyZWNsYWltZWQpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAyNDE5NDg6IHJlY2xhaW1lZCBmdW5kcyBkbyBub3QgbWF0Y2ggZXhwZWN0ZWQgd2hlbiB2YWxpZGF0aW5nXCIpO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGF0ciB2YWxpZGF0ZXNcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhlIGxhc3QgdHJhbnNhY3Rpb24gaW4gYW55IGJsb2NrIHdpbGwgYmUgdGhlIGZlZS10cmFuc2FjdGlvbi4gQVRSIHRyYW5zYWN0aW9uc1xuXHQvLyBhcmUgQkVGT1JFIHRoYXQsIGFkZGVkIGluIHRoZSBvcmRlciB0aGF0IHRoYXQgYXJlIGdlbmVyYXRlZC4gU28gd2UgY2hlY2sgdGhhdCBcblx0Ly8gYWxsIG9mIHRoZSB0cmFuc2FjdGlvbnMgYXJlIGdvb2QuXG5cdC8vXG5cdGxldCBhdHJfaWR4ID0gdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoLTE7XG4gICAgICAgIGlmIChhdHJfaWR4ID4gMCkge1xuXHQgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1thdHJfaWR4XS50cmFuc2FjdGlvbi50eXBlID09IDIpIHsgYXRyX2lkeC0tOyB9XG4gICAgICAgICAgaWYgKGF0cl9pZHggPiAwKSB7XG4gICAgXHQgICAgZm9yIChsZXQgaSA9IGVibGtkLnJlYnJvYWRjYXN0Lmxlbmd0aC0xOyBpID49IDA7IGktLSkge1xuXHQgICAgICBlYmxrZC5yZWJyb2FkY2FzdFtpXS50cmFuc2FjdGlvbi5pZCA9IHRoaXMudHJhbnNhY3Rpb25zW2F0cl9pZHhdLnRyYW5zYWN0aW9uLmlkO1xuXHQgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWJsa2QucmVicm9hZGNhc3RbaV0udHJhbnNhY3Rpb24pICE9IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNhY3Rpb25zW2F0cl9pZHhdLnRyYW5zYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTQ5MjgwOiByZWJyb2FkY2FzdCB0eHMgSlNPTiBvdXRwdXRzIG5vdCBhcyBleHBlY3RlZFwiKTtcbmNvbnNvbGUubG9nKFwiIzE6IFwiICsgSlNPTi5zdHJpbmdpZnkoZWJsa2QucmVicm9hZGNhc3RbaV0udHJhbnNhY3Rpb24pKTsgXG5jb25zb2xlLmxvZyhcIiMyOiBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNhY3Rpb25zW2F0cl9pZHhdLnRyYW5zYWN0aW9uKSk7XG4gICAgICAgICAgICAgICByZXR1cm4gMDtcblx0ICAgICAgfVxuXHQgICAgICBhdHJfaWR4LS07XG5jb25zb2xlLmxvZyhcImF0ciBtb3ZlZCBkb3duIHRvOiBcIiArIGF0cl9pZHgpO1xuXHQgICAgfSBcblx0ICB9XG5cdH1cblxuXHQvL1xuXHQvLyBubyBzdXBlcmZsdW91cyBhdHIgdHhzIHNuZWFraW5nIGluXG5cdC8vIFxuXHRmb3IgKGxldCBpID0gYXRyX2lkeDsgaSA+IDA7IGktLSkge1xuXHQgIGlmIChcblx0ICAgIHRoaXMudHJhbnNhY3Rpb25zW2ldLnRyYW5zYWN0aW9uLnR5cGUgPT0gNSB8fFxuXHQgICAgdGhpcy50cmFuc2FjdGlvbnNbaV0udHJhbnNhY3Rpb24udHlwZSA9PSA2IHx8XG5cdCAgICB0aGlzLnRyYW5zYWN0aW9uc1tpXS50cmFuc2FjdGlvbi50eXBlID09IDdcblx0ICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMDA0MjIyOiBibG9jayBjaGFpbnMgcmVicm9hZGNhc3QgdHJhbnNhY3Rpb25zIG91dHNpZGUgYXBwcm9wcmlhdGUgcmFuZ2VcIik7XG5jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnRyYW5zYWN0aW9uc1tpXSkpO1xuY29uc29sZS5sb2coXCJhdHJfaWR4OiBcIiArIGF0cl9pZHggKyBcIiAtLS0gXCIgKyBpKTtcbmNvbnNvbGUubG9nKFwiQkxPQ0s6IFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbnMpKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuXHQgIH1cblx0fVxuICAgICAgfVxuXG5cbiAgICAgIC8vXG4gICAgICAvLyBjaGVjayBtZXJrbGUgcm9vdFxuICAgICAgLy9cbiAgICAgIGlmICh0eF9zaWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMuYmxvY2subWVya2xlICE9IHRoaXMuYXBwLmNyeXB0by5yZXR1cm5NZXJrbGVUcmVlKHR4X3NpZ3MpLnJvb3QpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDI1ODEwMjogbWVya2xlIHJvb3QgZG9lcyBub3QgbWF0Y2ggcHJvdmlkZWQgcm9vdFwiKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vXG4gICAgICAvLyBjaGVjayBkaWZmaWN1bHR5IGFuZCBwYXlzcGxpdFxuICAgICAgLy9cblxuICAgICAgLy9cbiAgICAgIC8vIGNoZWNrIHBheW1lbnRzIGFyZSBPS1xuICAgICAgLy9cblxuICAgIC8vfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gIGNvbnNvbGUubG9nKFwiRVJST1IgOTIxODQyOiB1bmtub3duIGVycm9yIHdoaWxlIHZhbGlkYXRpbmcgYmxvY2suLi46IFwiICsgZXJyKTtcbiAgICAvLyAgcmV0dXJuIDA7XG4gICAgLy99XG5cbiAgICByZXR1cm4gMTtcblxuICB9XG5cblxuXG5cblxuXG5cblxuICByZXR1cm5CbG9ja1BheW91dHMoZ3Q9bnVsbCwgcnZhbHVlPXt9LCBybG9vcD0wLCBzdGFrZXJzPVtdKSB7XG5cbiAgICBpZiAocnZhbHVlLmJsb2NrcyA9PSB1bmRlZmluZWQpIHsgXG4gICAgICBydmFsdWUuYmxvY2tzIFx0XHRcdD0gW107IFxuICAgICAgcnZhbHVlLnJlY2xhaW1lZCBcdFx0XHQ9IFwiMFwiO1xuICAgIH1cblxuICAgIGxldCBwYXltZW50cyA9IHt9O1xuICAgIHBheW1lbnRzLnByb2R1Y2VyX3B1YmxpY2tleSBcdD0gXCJcIjtcbiAgICBwYXltZW50cy5wcm9kdWNlcl9zaGFyZSBcdFx0PSBcIjAuMFwiO1xuICAgIHBheW1lbnRzLm1pbmVyX3B1YmxpY2tleSBcdFx0PSBcIlwiO1xuICAgIHBheW1lbnRzLm1pbmVyX3NoYXJlIFx0XHQ9IFwiMC4wXCI7XG4gICAgcGF5bWVudHMucm91dGVyX3B1YmxpY2tleSBcdFx0PSBcIlwiO1xuICAgIHBheW1lbnRzLnJvdXRlcl9zaGFyZSBcdFx0PSBcIjAuMFwiO1xuICAgIHBheW1lbnRzLnN0YWtlcl9wdWJsaWNrZXkgXHRcdD0gXCJcIjtcbiAgICBwYXltZW50cy5zdGFrZXJfc2hhcmUgXHRcdD0gXCIwLjBcIjtcblxuICAgIHBheW1lbnRzLmJzaFx0XHRcdD0gdGhpcy5yZXR1cm5IYXNoKCk7XG4gICAgcGF5bWVudHMuYmlkXHRcdFx0PSB0aGlzLmJsb2NrLmlkO1xuICAgIHBheW1lbnRzLnJsb29wXHRcdFx0PSBybG9vcDtcblxuXG4gICAgLy9cbiAgICAvLyBubyBnb2xkZW4gdGlja2V0PyBjaGVjayB0cmVhc3VyeVxuICAgIC8vXG4gICAgdHJ5IHtcbiAgICAgIGlmIChndCA9PSBudWxsKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuYmxvY2sucHJldmJzaCA9PSBcIlwiKSB7XG4gICAgICAgICAgaWYgKHJsb29wID09IDEwKSB7XG4gICAgICAgICAgICBydmFsdWUucmVjbGFpbWVkID0gQmlnKHJ2YWx1ZS5yZWNsYWltZWQpLnBsdXMoQmlnKHBheW1lbnRzLnRvdGFsX2ZlZXNfaW5fYmxvY2spKS50b0ZpeGVkKDgpO1xuICAgICAgICAgICAgcmV0dXJuIHJ2YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJ2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHByZXZibGsgPSB0aGlzLmFwcC5ibG9ja2NoYWluLnJldHVybkJsb2NrQnlIYXNoKHRoaXMuYmxvY2sucHJldmJzaCk7XG4gICAgICAgICAgaWYgKHRoaXMuY29udGFpbnNHb2xkZW5UaWNrZXQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJ2YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByZXZibGsucmV0dXJuQmxvY2tQYXlvdXRzKGd0LCBydmFsdWUsIHJsb29wKzEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBpbiBjaGVja2luZyB0cmVhc3VyeTogXCIsIGVycik7XG4gICAgfVxuXG5cbiAgICAvL1xuICAgIC8vIGZpcnN0IGJsb2NrXG4gICAgLy9cbiAgICBpZiAodGhpcy5ibG9jay5wcmV2YnNoID09IFwiXCIpIHtcbiAgICAgIGlmIChybG9vcCA9PSAxMCkge1xuICAgICAgICBydmFsdWUucmVjbGFpbWVkID0gQmlnKHJ2YWx1ZS5yZWNsYWltZWQpLnBsdXMoQmlnKHRoaXMucmV0dXJuRmVlcygpKSkudG9GaXhlZCg4KTtcbiAgICAgICAgcmV0dXJuIHJ2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBydmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICB0cnkge1xuXG4gICAgICAvL1xuICAgICAgLy8gZ29sZGVuIHRpY2tldFxuICAgICAgLy9cbiAgICAgIHZhciBwcmV2YnNoID0gdGhpcy5ibG9jay5wcmV2YnNoO1xuICAgICAgdmFyIHByZXZibGsgPSB0aGlzLmFwcC5ibG9ja2NoYWluLnJldHVybkJsb2NrQnlIYXNoKHByZXZic2gpO1xuXG4gICAgICB2YXIgcHJvZHVjZXJfcHVibGlja2V5ICAgICAgICAgICAgXHQ9IHRoaXMuYmxvY2suY3JlYXRvcjtcbiAgICAgIHZhciBtaW5lcl9wdWJsaWNrZXkgICAgICAgICAgICAgICBcdD0gXCJcIjtcbiAgICAgIHZhciByb3V0ZXJfcHVibGlja2V5ICAgICAgICAgICAgICBcdD0gXCJcIjtcbiAgICAgIHZhciBzdGFrZXJfcHVibGlja2V5ICAgICAgICAgICAgICBcdD0gXCJcIjtcblxuICAgICAgdmFyIHRvdGFsX3dvcmtfbmVlZGVkICAgICAgICAgICAgIFx0PSB0aGlzLmFwcC5idXJuZmVlLnJldHVybldvcmtOZWVkZWQocHJldmJsay5ibG9jay50cywgdGhpcy5ibG9jay50cywgcHJldmJsay5ibG9jay5iZik7IC8vIGludFxuICAgICAgdmFyIHRvdGFsX3dvcmtfYXZhaWxhYmxlICAgICAgICAgIFx0PSB0aGlzLnJldHVybkVtYmVkZGVkUm91dGluZ1dvcmsoKTsgICAgIC8vIHN0cmluZ1xuICAgICAgdmFyIHRvdGFsX2ZlZXNfaW5fYmxvY2sgICAgICAgICAgIFx0PSB0aGlzLnJldHVybkZlZXMoKTsgICAgICAgICAgICAgICAgICAgIC8vIHN0cmluZ1xuICAgICAgdmFyIHByb2R1Y2VyX3NoYXJlICAgICAgICAgICAgICAgIFx0PSBCaWcodG90YWxfd29ya19hdmFpbGFibGUpLm1pbnVzKEJpZyh0b3RhbF93b3JrX25lZWRlZCkpOyAvLyBCaWdcbiAgICAgIHZhciBwYXlzcGxpdF9zaGFyZSAgICAgICAgICAgICAgICBcdD0gQmlnKHRvdGFsX2ZlZXNfaW5fYmxvY2spLm1pbnVzKHByb2R1Y2VyX3NoYXJlKS5wbHVzKHRoaXMucmV0dXJuQ29pbmJhc2UoKSk7IC8vIEJpZ1xuICAgICAgdmFyIG1pbmVyX3NoYXJlICAgICAgICAgICAgICAgICAgIFx0PSBwYXlzcGxpdF9zaGFyZS5kaXYoMikudG9GaXhlZCg4KTsgICAgIC8vIHN0cmluZ1xuICAgICAgdmFyIHJvdXRlcl9zaGFyZSAgICAgICAgICAgICAgICAgIFx0PSBwYXlzcGxpdF9zaGFyZS5taW51cyhCaWcobWluZXJfc2hhcmUpKS50b0ZpeGVkKDgpOyAvLyBzdHJpbmdcbiAgICAgIHZhciBzdGFrZXJfc2hhcmUgICAgICAgICAgICAgICAgICBcdD0gXCIwLjBcIjtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgY29uc29sZS5sb2coXCJFUlJPUiBJTiBHT0xERU4gVElDS0VUIENSRUFUSU9OOiBcIiwgZXJyKTtcbiAgICB9XG5cblxuXG4gICAgLy9cbiAgICAvLyBwaWNrIHRoZSByb3V0ZXJcbiAgICAvL1xuICAgIGlmIChCaWcocm91dGVyX3NoYXJlKS5ndCgwKSkge1xuXG4gICAgICAvL1xuICAgICAgLy8gcmFuZG9tIGRlY2ltYWwgYmV0d2VlbiAwLTEgcGlja3Mgd2lubmluZyB0eFxuICAgICAgLy9cbiAgICAgIGxldCB3aW5uZXJIYXNoID0gdGhpcy5hcHAuY3J5cHRvLmhhc2goZ3QucmFuZG9tKS5zbGljZSgwLDEyKTtcbiAgICAgIGxldCBtYXhIYXNoICAgID0gXCJmZmZmZmZmZmZmZmZcIjtcbiAgICAgIGxldCB3aW5uZXJOdW0gID0gcGFyc2VJbnQod2lubmVySGFzaCwgMTYpOyAvLyAxNiA9IG51bSBpcyBoZXhcbiAgICAgIGxldCBtYXhOdW0gICAgID0gcGFyc2VJbnQobWF4SGFzaCwgMTYpOyAgICAvLyAxNiA9IG51bSBpcyBoZXhcbiAgICAgIGxldCB3aW5uZXJEZWMgID0gd2lubmVyTnVtIC8gbWF4TnVtO1xuXG4gICAgICBsZXQgd2lubmVyX2ZlZSA9IEJpZyh0b3RhbF9mZWVzX2luX2Jsb2NrKS50aW1lcyh3aW5uZXJEZWMpO1xuXG4gICAgICBsZXQgd2lubmluZ190eF9pZHggPSAtMTtcbiAgICAgIGxldCBjdW11bGF0aXZlX2ZlZSA9IEJpZygwLjApO1xuICAgICAgbGV0IHN0b3AgPSAwO1xuXG4gICAgICAvL1xuICAgICAgLy8gVE9ETyAtIGZhc3RlciBzZWFyY2ggYWxnb3JpdGhtXG4gICAgICAvL1xuICAgICAgLy8gZmluZCB3aW5uaW5nIHR4IHJhbmRvbWx5XG4gICAgICAvL1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGggJiYgc3RvcCA9PSAwOyBpKyspIHtcbiAgICAgICAgY3VtdWxhdGl2ZV9mZWUucGx1cyhCaWcodGhpcy50cmFuc2FjdGlvbnNbaV0ucmV0dXJuRmVlcyh0aGlzLmFwcCkpKTtcbiAgICAgICAgaWYgKGN1bXVsYXRpdmVfZmVlLmd0ZSh3aW5uZXJfZmVlKSkge1xuICAgICAgICAgIHN0b3AgPSAxO1xuICAgICAgICAgIHdpbm5pbmdfdHhfaWR4ID0gaS0xO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vXG4gICAgICAvLyBhc3NpZ24gd2lubmVyc1xuICAgICAgLy9cbiAgICAgIGlmICh3aW5uaW5nX3R4X2lkeCA9PSAtMSkge1xuICAgICAgICByb3V0ZXJfcHVibGlja2V5ID0gdGhpcy5ibG9jay5jcmVhdG9yO1xuICAgICAgfVxuXG5cbiAgICAgIC8vXG4gICAgICAvLyBvciBmaW5kIHdpbm5lciBpbiByb3V0aW5nIHBvcnRpb25cbiAgICAgIC8vXG4gICAgICBlbHNlIHtcblxuICAgICAgICBsZXQgd2lubmluZ190eCA9IHRoaXMudHJhbnNhY3Rpb25zW3dpbm5pbmdfdHhfaWR4XTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBubyBwYXRoIGluZm8sIGRlZmF1bHQgdG8gc2VuZGVyXG4gICAgICAgIC8vXG4gICAgICAgIGlmICh3aW5uaW5nX3R4LnRyYW5zYWN0aW9uLnBhdGgubGVuZ3RoID09IDApIHtcbiAgICAgICAgICByb3V0ZXJfcHVibGlja2V5ID0gd2lubmluZ190eC50cmFuc2FjdGlvbi5mcm9tWzBdLmFkZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHBhdGggaW5mbywgcmVwZWF0IHJhbmRvbSBnZW5lcmF0aW9uXG4gICAgICAgIC8vXG4gICAgICAgIGxldCB3aW5uZXIySGFzaCA9IHRoaXMuYXBwLmNyeXB0by5oYXNoKHdpbm5lckhhc2gpLnNsaWNlKDAsMTIpO1xuICAgICAgICBsZXQgd2lubmVyMk51bSAgPSBwYXJzZUludCh3aW5uZXIySGFzaCwgMTYpO1xuICAgICAgICBsZXQgd2lubmVyMkRlYyAgPSB3aW5uZXIyTnVtIC8gbWF4TnVtO1xuXG4gICAgICAgIGxldCBwYXRobGVuZ3RoID0gd2lubmluZ190eC50cmFuc2FjdGlvbi5wYXRoLmxlbmd0aDtcbiAgICAgICAgbGV0IHBhdGh0b3RhbCAgPSB3aW5uaW5nX3R4LnJldHVybkZlZXModGhpcy5hcHApO1xuXG4gICAgICAgIGlmICh3aW5uZXIyRGVjID09IDApIHtcbiAgICAgICAgICByb3V0ZXJfcHVibGlja2V5ID0gd2lubmluZ190eC50cmFuc2FjdGlvbi5wYXRoWzBdLnRvO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgaWYgKHdpbm5lckRlYyA9PSAxKSB7XG4gICAgICAgICAgICByb3V0ZXJfcHVibGlja2V5ID0gd2lubmluZ190eC50cmFuc2FjdGlvbi5wYXRoW3BhdGhsZW5ndGhdLnRvO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGxldCB5ID0gcGF0aGxlbmd0aDtcbiAgICAgICAgICAgIGxldCB4ID0gMiAtICgxLyhNYXRoLnBvdygyLCh5LTEpKSkpOyAgLy8gaS5lLiAxLjc1IGZvciAzIG5vZGUgcGF0aFxuICAgICAgICAgICAgbGV0IHogPSB5ICogd2lubmVyMkRlYztcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRobGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgbGV0IGEgPSAyIC0gKDEvKE1hdGgucG93KDIsKGktMSkpKSk7XG4gICAgICAgICAgICAgIGlmIChhIDw9IHopIHsgcm91dGVyX3B1YmxpY2tleSA9IHdpbm5pbmdfdHgudHJhbnNhY3Rpb24ucGF0aFtpXS50bzsgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBpZiAocmxvb3AgPT0gMCkge1xuICAgICAgLy9cbiAgICAgIC8vIHdpbm5pbmcgbWluZXJcbiAgICAgIC8vXG4gICAgICBtaW5lcl9wdWJsaWNrZXkgPSBndC5wdWJsaWNrZXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vXG4gICAgICAvLyB3aW5uaW5nIHN0YWtlclxuICAgICAgLy9cbiAgICAgIGxldCB4ID0gdGhpcy5hcHAuYmFuay5yZXR1cm5XaW5uaW5nU3Rha2VyKGd0LCBzdGFrZXJzKTtcbiAgICAgIHN0YWtlcnMgPSB4LnN0YWtlcnM7XG4gICAgICBzdGFrZXJfcHVibGlja2V5ID0geC5wdWJsaWNrZXk7XG4gICAgICBzdGFrZXJfc2hhcmUgPSBtaW5lcl9zaGFyZTtcbiAgICAgIG1pbmVyX3NoYXJlID0gXCIwLjBcIjtcbiAgICB9XG5cblxuICAgIC8vIGV4dHJhIGZvciB0ZXN0aW5nIGRpYWdub3N0aWNzXG4gICAgcGF5bWVudHMuY29pbmJhc2UgPSB0aGlzLnJldHVybkNvaW5iYXNlKCk7XG5cbiAgICBwYXltZW50cy5wcm9kdWNlcl9wdWJsaWNrZXlcdD0gcHJvZHVjZXJfcHVibGlja2V5O1xuICAgIHBheW1lbnRzLm1pbmVyX3B1YmxpY2tleSBcdD0gbWluZXJfcHVibGlja2V5O1xuICAgIHBheW1lbnRzLnJvdXRlcl9wdWJsaWNrZXlcdD0gcm91dGVyX3B1YmxpY2tleTtcbiAgICBwYXltZW50cy5zdGFrZXJfcHVibGlja2V5XHQ9IHN0YWtlcl9wdWJsaWNrZXk7XG5cbiAgICBwYXltZW50cy5wcm9kdWNlcl9zaGFyZVx0PSBwcm9kdWNlcl9zaGFyZTtcbiAgICBwYXltZW50cy5taW5lcl9zaGFyZVx0PSBtaW5lcl9zaGFyZTtcbiAgICBwYXltZW50cy5zdGFrZXJfc2hhcmVcdD0gc3Rha2VyX3NoYXJlO1xuICAgIHBheW1lbnRzLnJvdXRlcl9zaGFyZVx0PSByb3V0ZXJfc2hhcmU7XG5cbiAgICBwYXltZW50cy50b3RhbF9mZWVzX2luX2Jsb2NrICAgICAgXHQ9IHRvdGFsX2ZlZXNfaW5fYmxvY2s7XG4gICAgcGF5bWVudHMudG90YWxfd29ya19uZWVkZWQgICAgIFx0PSB0b3RhbF93b3JrX25lZWRlZDtcbiAgICBwYXltZW50cy50b3RhbF93b3JrX2F2YWlsYWJsZSAgICAgXHQ9IHRvdGFsX3dvcmtfYXZhaWxhYmxlO1xuICAgIHBheW1lbnRzLnBheXNwbGl0X3NoYXJlICAgICAgICAgICBcdD0gcGF5c3BsaXRfc2hhcmU7XG5cbiAgICBydmFsdWUuYmxvY2tzLnB1c2gocGF5bWVudHMpO1xuXG4gICAgaWYgKHRoaXMuY29udGFpbnNHb2xkZW5UaWNrZXQoKSB8fCBybG9vcCA9PSAxMCkge1xuICAgICAgcmV0dXJuIHJ2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ3QucmFuZG9tID0gdGhpcy5hcHAuY3J5cHRvLmhhc2goZ3QucmFuZG9tKTtcbiAgICAgIHJldHVybiBwcmV2YmxrLnJldHVybkJsb2NrUGF5b3V0cyhndCwgcnZhbHVlLCBybG9vcCsxKTtcbiAgICB9XG5cbiAgfVxuXG5cblxuXG4gIHJldHVybkZlZXMoKSB7XG4gICAgbGV0IHYgPSBCaWcoMCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdiA9IHYucGx1cyhCaWcodGhpcy50cmFuc2FjdGlvbnNbaV0ucmV0dXJuRmVlcyh0aGlzLmFwcCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHYudG9GaXhlZCg4KTtcbiAgfVxuXG4gIC8vIFVzZSB0aGlzIHdoZW4gd2UncmUgc2F2aW5nIGRhdGEgdG8gZGlza1xuICByZXR1cm5CbG9ja0ZpbGVEYXRhKCkge1xuICAgIGxldCBibGtjb250ZW50ID0ge1xuICAgICAgYmxvY2s6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ibG9jaykpLFxuICAgICAgdHJhbnNhY3Rpb25zOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNhY3Rpb25zKSlcbiAgICB9O1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShibGtjb250ZW50KTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmxvY2s7XG5cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQVVBO0FBVUE7QUFVQTtBQVVBO0FBVUE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFVQTs7Ozs7Ozs7Ozs7Ozs7OztBQWdCQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQURBO0FBQ0E7O0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBOztBQURBOzs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7Ozs7O0FBRUE7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBekNBO0FBMENBO0FBQ0E7QUFFQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQXBGQTs7Ozs7QUF1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7Ozs7O0FBQUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7O0FBQUE7QUFDQTs7QUFDQTtBQUVBOztBQUNBO0FBQ0E7O0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBRUE7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQU9BOzs7OztBQUFBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUtBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFEQTs7Ozs7QUFLQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBTUE7Ozs7O0FBRUE7QUFDQTtBQUNBOzs7OztBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQUE7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFPQTs7Ozs7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7QUFEQTs7Ozs7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUkE7Ozs7O0FBYUE7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBN0ZBOzs7OztBQW1HQTs7Ozs7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBS0E7Ozs7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUUE7Ozs7O0FBRUE7O0FBRUE7QUFDQTs7QUFEQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7QUFDQTs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBOzs7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7Ozs7O0FBQ0E7QUFDQTs7QUFEQTs7Ozs7QUFDQTtBQUNBO0FBQUE7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBVkE7Ozs7O0FBaUJBO0FBQ0E7O0FBREE7Ozs7O0FBRUE7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVhBOzs7OztBQW1CQTs7Ozs7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBZ0JBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFQQTtBQVVBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7Ozs7O0FBSUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/saito/block.js\n");
438c438
< eval("/* WEBPACK VAR INJECTION */(function(process) {function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nvar saito = __webpack_require__(/*! ./saito */ \"./lib/saito/saito.js\"); // const Big      = require('big.js');\n\n\nvar Blockchain =\n/*#__PURE__*/\nfunction () {\n  function Blockchain(app) {\n    _classCallCheck(this, Blockchain);\n\n    this.app = app || {***REMOVED***;\n    this.index = {***REMOVED***;\n    this.index.blocks = [];\n    this.bsh_lc_hmap = [];\n    this.bsh_bid_hmap = [];\n    this.bid_bsh_hmap = [];\n    this.bsh_ts_hmap = [];\n    this.lc_pos_set = false;\n    this.lc_pos = 0;\n    this.last_lc_pos = 0;\n    this.run_callbacks = 1;\n    this.callback_limit = 50;\n    this.fork_id = \"\";\n    this.fork_id_mod = 10; // regenerate every N blocks\n\n    this.genesis_ts = 0;\n    this.genesis_bid = 0;\n    this.genesis_period = 100000; //this.genesis_period       \t= 6;\n\n    this.last_bsh = \"\";\n    this.last_bid = 0;\n    this.last_ts = 0;\n    this.last_bf = 0.0;\n    this.lowest_acceptable_ts = 0;\n    this.lowest_acceptable_bsh = \"\";\n    this.lowest_acceptable_bid = 0;\n    this.indexing_active = 0;\n    return this;\n  ***REMOVED***\n\n  _createClass(Blockchain, [{\n    key: \"addBlockToBlockchain\",\n    value: function () {\n      var _addBlockToBlockchain = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(blk) {\n        var force,\n            pos,\n            i_am_the_longest_chain,\n            shared_ancestor_pos,\n            shared_ancestor_pos_found,\n            lblk,\n            nblk,\n            lchain_pos,\n            nchain_pos,\n            lchain_len,\n            nchain_len,\n            lchain_bf,\n            nchain_bf,\n            lchain_ts,\n            nchain_ts,\n            lchain_prevbsh,\n            nchain_prevbsh,\n            search_pos,\n            search_bf,\n            search_ts,\n            search_bsh,\n            search_prevbsh,\n            sblk,\n            _h,\n            new_hash_to_hunt_for,\n            old_hash_to_hunt_for,\n            new_block_hashes,\n            old_block_hashes,\n            min_block_idx,\n            max_block_idx,\n            i,\n            _min_block_idx,\n            _max_block_idx,\n            _i,\n            _args = arguments;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                force = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n                console.log(\"\\n\\n ... adding block \" + blk.block.id + \": \" + blk.returnHash());\n                this.indexing_active = 1; ///////////////////\n        ***REMOVED*** SANITY CHECKS //\n        ***REMOVED***/////////////////\n\n                if (!(blk.is_valid == 0)) {\n                  _context.next = 7;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 178234: block is not valid when adding to chain. terminating...\");\n                this.indexing_active = 0;\n                return _context.abrupt(\"return\");\n\n              case 7:\n                if (!(blk.block.ts < this.genesis_ts || blk.block.id < this.genesis_bid)) {\n                  _context.next = 11;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 792837: block id precedes genesis period. terminating...\");\n                this.indexing_active = 0;\n                return _context.abrupt(\"return\");\n\n              case 11:\n                if (!this.isHashIndexed(blk.returnHash())) {\n                  _context.next = 15;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 582039: blockchain already contains this block hash. terminating...\");\n                this.indexing_active = 0;\n                return _context.abrupt(\"return\");\n\n              case 15:\n        ***REMOVED***\n        ***REMOVED*** create reference for previous lc\n        ***REMOVED***\n                this.last_lc_pos = this.lc_pos; //\n        ***REMOVED*** previous block not indexed, but acceptable\n        ***REMOVED***\n\n                if (blk.block.ts < this.lowest_acceptable_ts) {\n                  this.lowest_acceptable_ts = blk.block.ts;\n            ***REMOVED*** //\n        ***REMOVED*** track first block\n        ***REMOVED***\n        ***REMOVED*** if we are adding our first block, we set this as our lowest\n        ***REMOVED*** acceptable ts to avoid requesting earlier blocks ad infinitum\n        ***REMOVED*** into the past.\n        ***REMOVED***\n        ***REMOVED*** lowest acceptable bid must be updated so that we know the\n        ***REMOVED*** earliest block we need to worry about when handling full slip\n        ***REMOVED*** validation.\n        ***REMOVED***\n\n\n                if (this.lowest_acceptable_ts == 0) {\n                  this.lowest_acceptable_bid = blk.block.id;\n                  this.lowest_acceptable_bsh = blk.returnHash(); //\n          ***REMOVED*** !!!!!!!!!!!! BLOCK !!!!!!!!!!!!\n          ***REMOVED***\n          ***REMOVED***if (this.app.options.blockchain != null) {\n\n                  this.lowest_acceptable_ts = this.last_ts; //***REMOVED***\n\n                  if (this.lowest_acceptable_ts == 0) {\n                    this.lowest_acceptable_ts = blk.block.ts;\n              ***REMOVED***\n            ***REMOVED*** else {\n                  if (this.lowest_acceptable_ts > blk.block.ts) {\n                    if (!force) {\n                      this.lowest_acceptable_ts = blk.block.ts;\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** fetch missing blocks\n        ***REMOVED***\n\n\n                if (blk.block.ts > this.lowest_acceptable_ts) {\n                  if (!this.isHashIndexed(blk.block.prevbsh)) {\n                    if (this.lc_pos_set == true) {\n                      if (blk.block.id > this.index.blocks[this.lc_pos].bid - this.genesis_period) {\n                ***REMOVED***\n                ***REMOVED*** TODO\n                ***REMOVED***\n                ***REMOVED*** send request for missing block\n                ***REMOVED***\n                        console.log(\"ERROR 148019: missing block\");\n                        process.exit();\n                  ***REMOVED***\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED*** ////////////////////\n        ***REMOVED*** insert indexes //\n        ***REMOVED***//////////////////\n\n\n                pos = this.binaryInsert(this.index.blocks, blk, function (a, b) {\n                  return a.block.ts - b.block.ts;\n            ***REMOVED***);\n                this.bsh_bid_hmap[blk.returnHash()] = blk.block.id;\n                this.bsh_ts_hmap[blk.returnHash()] = blk.block.ts;\n                this.index.blocks[pos] = blk; ////////////////////////////\n        ***REMOVED*** identify longest chain //\n        ***REMOVED***//////////////////////////\n\n                i_am_the_longest_chain = 0;\n                shared_ancestor_pos = 0;\n                shared_ancestor_pos_found = false;\n\n                if (this.index.blocks.length == 1) {\n                  i_am_the_longest_chain = 1;\n                  this.lc_pos = pos;\n                  this.last_bsh = blk.returnHash();\n                  this.last_bid = blk.block.id;\n                  this.last_bf = blk.block.bf;\n                  this.last_ts = blk.block.ts;\n            ***REMOVED***\n\n                if (this.last_bsh == blk.block.prevbsh && this.index.blocks.length > 1) {\n          ***REMOVED***\n          ***REMOVED*** last block is longest chain\n          ***REMOVED***\n                  if (this.bsh_lc_hmap[this.last_bsh] == 1) {\n                    i_am_the_longest_chain = 1;\n                    shared_ancestor_pos = this.last_lc_pos;\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** trace back to find shared ancestor\n        ***REMOVED***\n\n\n                if (!(i_am_the_longest_chain == 0)) {\n                  _context.next = 86;\n                  break;\n            ***REMOVED***\n\n                if (!(blk.block.id >= this.index.blocks[this.lc_pos].block.id)) {\n                  _context.next = 84;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** find the last shared ancestor\n        ***REMOVED***\n                lblk = this.index.blocks[this.lc_pos];\n                nblk = this.index.blocks[pos];\n\n                if (blk.block.id == lblk.block.id) {\n                  i_am_the_longest_chain = 1;\n            ***REMOVED***\n\n                if (!(blk.block.prevbsh == lblk.block.bsh)) {\n                  _context.next = 37;\n                  break;\n            ***REMOVED***\n\n                i_am_the_longest_chain = 1;\n                _context.next = 82;\n                break;\n\n              case 37:\n                lchain_pos = this.lc_pos;\n                nchain_pos = pos;\n                lchain_len = 0;\n                nchain_len = 0;\n                lchain_bf = lblk.block.bf;\n                nchain_bf = nblk.block.bf;\n                lchain_ts = lblk.block.ts;\n                nchain_ts = nblk.block.ts;\n                lchain_prevbsh = lblk.block.prevbsh;\n                nchain_prevbsh = nblk.block.prevbsh;\n                search_pos = null;\n                search_bf = null;\n                search_ts = null;\n                search_bsh = null;\n                search_prevbsh = null;\n\n                if (nchain_ts >= lchain_ts) {\n                  search_pos = nchain_pos - 1;\n            ***REMOVED*** else {\n                  search_pos = lchain_pos - 1;\n            ***REMOVED***\n\n              case 53:\n                if (!(search_pos >= 0)) {\n                  _context.next = 81;\n                  break;\n            ***REMOVED***\n\n                sblk = this.index.blocks[search_pos];\n                search_ts = sblk.block.ts;\n                search_bf = sblk.block.bf;\n                search_bsh = sblk.block.bsh;\n                search_prevbsh = sblk.block.prevbsh; //\n        ***REMOVED*** hey look, it's the common ancestor!\n        ***REMOVED***\n\n                if (!(search_bsh == lchain_prevbsh && search_bsh == nchain_prevbsh)) {\n                  _context.next = 65;\n                  break;\n            ***REMOVED***\n\n                shared_ancestor_pos_found = true;\n                shared_ancestor_pos = search_pos;\n                search_pos = -1; //\n        ***REMOVED*** keep looking\n        ***REMOVED***\n\n                _context.next = 79;\n                break;\n\n              case 65:\n                if (search_bsh == lchain_prevbsh) {\n                  lchain_len++;\n                  lchain_prevbsh = this.index.blocks[search_pos].block.prevbsh;\n                  lchain_bf = parseFloat(lchain_bf) + parseFloat(this.index.blocks[search_pos].returnBurnFeeValue());\n            ***REMOVED***\n\n                if (search_bsh == nchain_prevbsh) {\n                  nchain_prevbsh = this.index.blocks[search_pos].block.prevbsh;\n                  nchain_len++;\n                  nchain_bf = parseFloat(lchain_bf) + parseFloat(this.index.blocks[search_pos].returnBurnFeeValue());\n            ***REMOVED***\n\n                shared_ancestor_pos = search_pos;\n                search_pos--; //\n        ***REMOVED*** new chain completely disconnected\n        ***REMOVED***\n\n                if (!(shared_ancestor_pos == 1)) {\n                  _context.next = 74;\n                  break;\n            ***REMOVED***\n\n                if (!(nchain_prevbsh == \"\")) {\n                  _context.next = 74;\n                  break;\n            ***REMOVED***\n\n                _context.next = 73;\n                return this.addBlockToBlockchainSuccess(blk, pos, 0);\n\n              case 73:\n                return _context.abrupt(\"return\");\n\n              case 74:\n                if (!(shared_ancestor_pos == 0)) {\n                  _context.next = 79;\n                  break;\n            ***REMOVED***\n\n                if (!(nchain_prevbsh != lchain_prevbsh)) {\n                  _context.next = 79;\n                  break;\n            ***REMOVED***\n\n                _context.next = 78;\n                return this.addBlockToBlockchainSuccess(blk, pos, 0);\n\n              case 78:\n                return _context.abrupt(\"return\");\n\n              case 79:\n                _context.next = 53;\n                break;\n\n              case 81:\n        ***REMOVED***\n        ***REMOVED*** longest chain if more routing AND burning work\n        ***REMOVED***\n                if (nchain_len > lchain_len && nchain_bf >= lchain_bf && shared_ancestor_pos_found == true) {\n                  i_am_the_longest_chain = 1;\n            ***REMOVED***\n\n              case 82:\n                _context.next = 86;\n                break;\n\n              case 84:\n                console.log(\"edge case with unordered blocks...\"); //\n        ***REMOVED*** this catches an edge case that happens if we ask for blocks starting from\n        ***REMOVED*** id = 132, but the first block we RECEIVE is a later block in that chain,\n        ***REMOVED*** such as 135 or so.\n        ***REMOVED***\n        ***REMOVED*** in this case our blockchain class will treat the first block as the starting\n        ***REMOVED*** point and we run into issues unless we explicitly reset the blockchain to\n        ***REMOVED*** treat block 132 as the proper first block.\n        ***REMOVED***\n        ***REMOVED*** so we reset this to our first block and mark it as part of the longest chain\n        ***REMOVED*** the network will figure this out in time as further blocks build on it.\n        ***REMOVED***\n\n                if (blk.block.prevbsh == this.last_bsh && blk.block.prevbsh != \"\") {\n          ***REMOVED***\n          ***REMOVED*** reset later blocks\n          ***REMOVED***\n                  for (_h = pos + 1; _h < this.index.blocks.length; _h++) {\n                    this.bsh_lc_hmap[this.index.blocks[_h].block.bsh] = i_am_the_longest_chain;\n              ***REMOVED*** //\n          ***REMOVED*** onChainReorganization\n          ***REMOVED***\n\n\n                  this.onChainReorganization(this.index.blocks[h].block.id, this.index.blocks[h].returnHash(), 0);\n                  i_am_the_longest_chain = 1;\n            ***REMOVED***\n\n              case 86:\n        ***REMOVED***\n        ***REMOVED*** insert into LC hashmap\n        ***REMOVED***\n                this.bsh_lc_hmap[this.index.blocks[pos].bsh] = i_am_the_longest_chain; //\n        ***REMOVED*** update blockchain state variables depending\n        ***REMOVED***\n\n                if (i_am_the_longest_chain == 1) {\n                  this.last_bsh = this.index.blocks[pos].block.bsh;\n                  this.last_bf = this.index.blocks[pos].block.bf;\n                  this.last_ts = this.index.blocks[pos].block.ts;\n                  this.last_bid = this.index.blocks[pos].block.id;\n                  this.lc_pos = pos;\n                  this.lc_pos_set = true;\n            ***REMOVED*** //\n        ***REMOVED*** old and new chains\n        ***REMOVED***\n\n\n                new_hash_to_hunt_for = \"\";\n                old_hash_to_hunt_for = \"\";\n                new_block_hashes = [];\n                old_block_hashes = [];\n                min_block_idx = shared_ancestor_pos + 1;\n                max_block_idx = this.index.blocks.length - 1; //\n        ***REMOVED*** first block (lc = 0, need two blocks for chain)\n        ***REMOVED***\n\n                if (!(i_am_the_longest_chain == 1 && this.index.blocks.length == 1)) {\n                  _context.next = 99;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** block #1 needs hashmap\n        ***REMOVED***\n                for (i = 0; i < blk.transactions.length; i++) {\n                  this.app.shashmap.insert_new_transaction(blk, blk.transactions[i]);\n            ***REMOVED***\n\n                _context.next = 98;\n                return this.addBlockToBlockchainSuccess(blk, pos, 1);\n\n              case 98:\n                return _context.abrupt(\"return\");\n\n              case 99:\n        ***REMOVED***\n        ***REMOVED*** other blocks\n        ***REMOVED***\n                if (i_am_the_longest_chain == 1 && this.index.blocks.length > 0) {\n                  new_hash_to_hunt_for = blk.returnHash();\n                  old_hash_to_hunt_for = \"\";\n                  new_block_hashes = [];\n                  old_block_hashes = [];\n\n                  if (this.last_lc_pos != pos) {\n                    old_hash_to_hunt_for = this.index.blocks[this.last_lc_pos].block.bsh;\n              ***REMOVED*** //\n          ***REMOVED*** our new block builds on the longest chain\n          ***REMOVED***\n\n\n                  if (blk.block.prevbsh == old_hash_to_hunt_for) {\n                    new_block_hashes.push(new_hash_to_hunt_for);\n              ***REMOVED*** //\n          ***REMOVED*** we need to wind / unwind the chain\n          ***REMOVED***\n                  else {\n                      _min_block_idx = shared_ancestor_pos + 1;\n                      _max_block_idx = this.index.blocks.length - 1;\n\n                      for (_i = _max_block_idx; _i >= _min_block_idx; _i--) {\n                        if (this.index.blocks[_i].returnHash() == old_hash_to_hunt_for) {\n                          old_hash_to_hunt_for = this.index.blocks[_i].block.prevbsh;\n                          old_block_hashes.push(this.index.blocks[_i].returnHash());\n                    ***REMOVED***\n\n                        if (this.index.blocks[_i].returnHash() == new_hash_to_hunt_for) {\n                          new_hash_to_hunt_for = this.index.blocks[_i].block.prevbsh;\n                          new_block_hashes.push(this.index.blocks[_i].returnHash());\n                    ***REMOVED***\n                  ***REMOVED***\n\n                      old_block_hashes.reverse();\n                      new_block_hashes.reverse();\n                ***REMOVED***\n            ***REMOVED*** else {\n                  console.log(\"block is not on the longest chain...\");\n            ***REMOVED***\n\n                this.validate(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes);\n\n              case 101:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this);\n  ***REMOVED***));\n\n      function addBlockToBlockchain(_x) {\n        return _addBlockToBlockchain.apply(this, arguments);\n  ***REMOVED***\n\n      return addBlockToBlockchain;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"initialize\",\n    value: function () {\n      var _initialize = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n\n                if (this.app.options.blockchain) {\n                  this.last_bid = this.app.options.blockchain.last_bid;\n                  this.last_bsh = this.app.options.blockchain.last_bsh;\n                  this.last_ts = this.app.options.blockchain.last_ts;\n                  this.last_bf = this.app.options.blockchain.last_bf;\n                  this.genesis_ts = this.app.options.blockchain.genesis_ts;\n                  this.genesis_bid = this.app.options.blockchain.genesis_bid;\n                  this.genesis_period = this.app.options.blockchain.genesis_period;\n                  this.lowest_acceptable_ts = this.app.options.blockchain.lowest_acceptable_ts;\n                  this.lowest_acceptable_bsh = this.app.options.blockchain.lowest_acceptable_bsh;\n                  this.lowest_acceptable_bid = this.app.options.blockchain.lowest_acceptable_bid;\n            ***REMOVED***\n\n                _context2.next = 4;\n                return this.app.storage.loadBlocksFromDisk(this.genesis_period * 2);\n\n              case 4:\n                _context2.next = 9;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee2, this, [[0, 6]]);\n  ***REMOVED***));\n\n      function initialize() {\n        return _initialize.apply(this, arguments);\n  ***REMOVED***\n\n      return initialize;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"isFullySynced\",\n    value: function isFullySynced() {\n      var x = this.last_bid - this.genesis_period;\n\n      if (x < 0) {\n        return true;\n  ***REMOVED***\n\n      if (this.index.blocks.length >= this.genesis_period || x <= 0) {\n        if (x > this.lowest_acceptable_bid || x <= 0 && this.lowest_acceptable_bid == 1) {\n          return true;\n    ***REMOVED***\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"validate\",\n    value: function validate(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes) {\n      //\n      // insert to shashmap\n      //\n      for (var i = 0; i < blk.transactions.length; i++) {\n        this.app.shashmap.insert_new_transaction(blk, blk.transactions[i]);\n  ***REMOVED*** //\n      // unwind and wind\n      //\n\n\n      if (old_block_hashes.length > 0) {\n        this.unwindChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, 0, 0, old_block_hashes.length - 1);\n  ***REMOVED*** else {\n        this.windChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, 0, 0, 0);\n  ***REMOVED***\n\n      return;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"windChain\",\n    value: function () {\n      var _windChain = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, current_wind_index) {\n        var this_block_hash, block_validates, i, chain_to_unwind_hashes, _i2, new_blk, _i3, _chain_to_unwind_hashes, _i4;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this_block_hash = new_block_hashes[current_wind_index]; //\n        ***REMOVED*** this is the last block to add\n        ***REMOVED***\n\n                if (!(blk.returnHash() === this_block_hash)) {\n                  _context3.next = 29;\n                  break;\n            ***REMOVED***\n\n                _context3.next = 4;\n                return blk.validate();\n\n              case 4:\n                block_validates = _context3.sent;\n\n                if (!block_validates) {\n                  _context3.next = 12;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** we do not handle onChainReorganization for everything\n        ***REMOVED*** here as we do for older blocks. the reason for this is\n        ***REMOVED*** that the block is not yet saved to disk.\n        ***REMOVED***\n        ***REMOVED*** onChainReorganization is run on addBlockToBlockchainSuccess\n        ***REMOVED***\n        ***REMOVED***\n        ***REMOVED*** spend shashmap\n        ***REMOVED***\n                for (i = 0; i < blk.transactions.length; i++) {\n                  this.app.shashmap.spend_transaction(blk.transactions[i], blk.block.id);\n            ***REMOVED***\n\n                _context3.next = 9;\n                return this.addBlockToBlockchainSuccess(blk, pos, i_am_the_longest_chain, force);\n\n              case 9:\n                return _context3.abrupt(\"return\");\n\n              case 12:\n                if (!(current_wind_index == 0)) {\n                  _context3.next = 23;\n                  break;\n            ***REMOVED***\n\n                if (!(old_block_hashes.length > 0)) {\n                  _context3.next = 18;\n                  break;\n            ***REMOVED***\n\n                this.windChain(blk, pos, i_am_the_longest_chain, old_block_hashes, new_block_hashes, force, 1, 0);\n                return _context3.abrupt(\"return\");\n\n              case 18:\n                _context3.next = 20;\n                return this.addBlockToBlockchainFailure(blk, pos, i_am_the_longest_chain, force);\n\n              case 20:\n                return _context3.abrupt(\"return\");\n\n              case 21:\n                _context3.next = 27;\n                break;\n\n              case 23:\n        ***REMOVED***\n        ***REMOVED*** we need to unwind some of our previously\n        ***REMOVED*** added blocks from the new chain. so we\n        ***REMOVED*** swap our hashes to wind/unwind.\n        ***REMOVED***\n                chain_to_unwind_hashes = []; //\n        ***REMOVED*** remove previous added\n        ***REMOVED***\n\n                for (_i2 = current_wind_index; _i2 < new_block_hashes.length; _i2++) {\n                  chain_to_unwind_hashes.push(new_block_hashes[_i2]);\n            ***REMOVED*** //\n        ***REMOVED*** unwind NEW and wind OLD with resetting flag active\n        ***REMOVED***\n\n\n                this.unwindChain(blk, pos, i_am_the_longest_chain, old_block_hashes, chain_to_unwind_hashes, force, 1, chain_to_unwind_hashes.length);\n                return _context3.abrupt(\"return\");\n\n              case 27:\n                _context3.next = 53;\n                break;\n\n              case 29:\n                _context3.next = 31;\n                return this.returnBlockByHashFromDisk(this_block_hash);\n\n              case 31:\n                new_blk = _context3.sent;\n\n                if (new_blk == null) {\n          ***REMOVED***\n          ***REMOVED***\n          ***REMOVED***\n                  console.log(\"ERROR 620394: block does not exist on disk that should. terminating\");\n                  console.log(\"this block hash: \" + this_block_hash);\n                  console.log(\"NEW BLOCK HASHES: \" + JSON.stringify(new_block_hashes));\n                  console.log(\"OLD BLOCK HASHES: \" + JSON.stringify(old_block_hashes));\n                  process.exit();\n            ***REMOVED***\n\n                if (!new_blk.validate()) {\n                  _context3.next = 52;\n                  break;\n            ***REMOVED***\n\n                this.onChainReorganization(this_block_hash, new_blk.block.id, 1); //\n        ***REMOVED*** spend in shashmap\n        ***REMOVED***\n\n                for (_i3 = 0; _i3 < new_blk.transactions.length; _i3++) {\n                  shashmap.spend_transaction(new_blk.transactions[_i3], new_blk.block.id);\n            ***REMOVED***\n\n                if (!(current_wind_index == new_block_hashes.length - 1)) {\n                  _context3.next = 48;\n                  break;\n            ***REMOVED***\n\n                if (!(resetting_flag == 0)) {\n                  _context3.next = 43;\n                  break;\n            ***REMOVED***\n\n                _context3.next = 40;\n                return this.addBlockToBlockchainSuccess(blk, pos, i_am_the_longest_chain, force);\n\n              case 40:\n                return _context3.abrupt(\"return\");\n\n              case 43:\n                _context3.next = 45;\n                return this.addBlockToBlockchainFailure(blk, pos, i_am_the_longest_chain, force);\n\n              case 45:\n                return _context3.abrupt(\"return\");\n\n              case 46:\n                _context3.next = 50;\n                break;\n\n              case 48:\n                this.windChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, current_wind_index + 1);\n                return _context3.abrupt(\"return\");\n\n              case 50:\n                _context3.next = 53;\n                break;\n\n              case 52:\n                if (current_wind_index == 0) {\n                  this.windChain(blk, pos, i_am_the_longest_chain, old_block_hashes, // flipped\n                  [], force, 1, // reset as invalid\n                  0);\n            ***REMOVED*** else {\n          ***REMOVED***\n          ***REMOVED*** we need to unwind some of our previously\n          ***REMOVED*** added blocks from the new chain. so we\n          ***REMOVED*** swap our hashes to wind/unwind.\n          ***REMOVED***\n                  _chain_to_unwind_hashes = [];\n\n                  for (_i4 = current_wind_index; _i4 < new_block_hashes.length; _i4++) {\n                    _chain_to_unwind_hashes.push(new_block_hashes[h]);\n              ***REMOVED*** //\n          ***REMOVED*** unwind NEW and wind OLD, and set resetting_flag to 1\n          ***REMOVED***\n\n\n                  this.unwindChain(blk, pos, i_am_the_longest_chain, old_block_hashes, _chain_to_unwind_hashes, force, 1, _chain_to_unwind_hashes);\n            ***REMOVED***\n\n              case 53:\n              case \"end\":\n                return _context3.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee3, this);\n  ***REMOVED***));\n\n      function windChain(_x2, _x3, _x4, _x5, _x6, _x7, _x8, _x9) {\n        return _windChain.apply(this, arguments);\n  ***REMOVED***\n\n      return windChain;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"unwindChain\",\n    value: function () {\n      var _unwindChain = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, current_unwind_index) {\n        var old_blk;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(old_block_hashes.length > 0)) {\n                  _context4.next = 7;\n                  break;\n            ***REMOVED***\n\n                _context4.next = 3;\n                return this.returnBlockByHashFromDisk(old_block_hashes[current_unwind_index]);\n\n              case 3:\n                old_blk = _context4.sent;\n\n                if (old_blk == null) {\n          ***REMOVED***\n          ***REMOVED*** request missing block\n          ***REMOVED***\n                  console.log(\"ERROR 721058: cannot find block that should exist on disk...\");\n                  process.exit();\n            ***REMOVED*** //\n        ***REMOVED*** block or data is legit, so run on_chain_reorganization\n        ***REMOVED*** this should update the LC index as well\n\n\n                this.onChainReorganization(old_blk.returnHash(), old_blk.returnBlockId(), 0); //\n        ***REMOVED*** no more blocks to unwind\n        ***REMOVED***\n\n                this.windChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, 0);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee4, this);\n  ***REMOVED***));\n\n      function unwindChain(_x10, _x11, _x12, _x13, _x14, _x15, _x16, _x17) {\n        return _unwindChain.apply(this, arguments);\n  ***REMOVED***\n\n      return unwindChain;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnLastSharedBlockId\",\n    value: function returnLastSharedBlockId(fork_id, latest_known_block_id) {\n      // if there is no fork_id submitted, we backpedal 1 block to be safe\n      if (fork_id == null || fork_id == \"\") {\n        return 0;\n  ***REMOVED***\n\n      if (fork_id.length < 2) {\n        if (latest_known_block_id > 0) {\n          latest_known_block_id - 1;\n    ***REMOVED*** else {\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** // roll back latest known block id to known fork ID measurement point\n\n\n      for (var x = latest_known_block_id; x >= 0; x--) {\n        if (x % this.fork_id_mod == 0) {\n          latest_known_block_id = x;\n          x = -1;\n    ***REMOVED***\n  ***REMOVED***\n\n      var our_latest_bid = this.last_bid; // roll back until we have a match\n\n      for (var fii = 0; fii < fork_id.length / 2; fii++) {\n        var peer_fork_id_pair = fork_id.substring(2 * fii, 2 * fii + 2);\n        var our_fork_id_pair_blockid = latest_known_block_id;\n\n        if (fii == 0) {\n          our_fork_id_pair_blockid = latest_known_block_id - 0;\n    ***REMOVED***\n\n        if (fii == 1) {\n          our_fork_id_pair_blockid = latest_known_block_id - 10;\n    ***REMOVED***\n\n        if (fii == 2) {\n          our_fork_id_pair_blockid = latest_known_block_id - 20;\n    ***REMOVED***\n\n        if (fii == 3) {\n          our_fork_id_pair_blockid = latest_known_block_id - 30;\n    ***REMOVED***\n\n        if (fii == 4) {\n          our_fork_id_pair_blockid = latest_known_block_id - 40;\n    ***REMOVED***\n\n        if (fii == 5) {\n          our_fork_id_pair_blockid = latest_known_block_id - 50;\n    ***REMOVED***\n\n        if (fii == 6) {\n          our_fork_id_pair_blockid = latest_known_block_id - 75;\n    ***REMOVED***\n\n        if (fii == 7) {\n          our_fork_id_pair_blockid = latest_known_block_id - 100;\n    ***REMOVED***\n\n        if (fii == 8) {\n          our_fork_id_pair_blockid = latest_known_block_id - 200;\n    ***REMOVED***\n\n        if (fii == 9) {\n          our_fork_id_pair_blockid = latest_known_block_id - 500;\n    ***REMOVED***\n\n        if (fii == 10) {\n          our_fork_id_pair_blockid = latest_known_block_id - 1000;\n    ***REMOVED***\n\n        if (fii == 11) {\n          our_fork_id_pair_blockid = latest_known_block_id - 5000;\n    ***REMOVED***\n\n        if (fii == 12) {\n          our_fork_id_pair_blockid = latest_known_block_id - 10000;\n    ***REMOVED***\n\n        if (fii == 13) {\n          our_fork_id_pair_blockid = latest_known_block_id - 50000;\n    ***REMOVED***\n\n        if (our_latest_bid < our_fork_id_pair_blockid) {***REMOVED*** else {\n  ***REMOVED*** return hash by blockid\n          var tmpklr = this.returnHashByBlockId(our_fork_id_pair_blockid); // if we have not found a match, return 0 since we have\n  ***REMOVED*** irreconciliable forks, so we just give them everything\n  ***REMOVED*** in the expectation that one of our forks will eventually\n  ***REMOVED*** become the longest chain\n\n          if (tmpklr == \"\") {\n            return 0;\n      ***REMOVED***\n\n          var our_fork_id_pair = tmpklr.substring(0, 2); // if we have a match in fork ID at a position, treat this\n  ***REMOVED*** as the shared forkID\n\n          if (our_fork_id_pair == peer_fork_id_pair) {\n            return our_fork_id_pair_blockid;\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLongestChainIndexPosArray\",\n    value: function returnLongestChainIndexPosArray() {\n      var chainlength = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n\n      if (this.index.blocks.length == 0) {\n        return [];\n  ***REMOVED***\n\n      if (this.index.blocks.length < chainlength) {\n        chainlength = this.index.blocks.length;\n  ***REMOVED***\n\n      if (chainlength == 0) {\n        return [];\n  ***REMOVED***\n\n      var bchainIndex = [];\n      var chain_pos = this.lc_pos;\n      bchainIndex.push(chain_pos);\n\n      for (var z = 0; z < chainlength; z++) {\n        var prev_pos = chain_pos - 1;\n        var prev_found = 0;\n\n        if (prev_pos == -1) {\n          z = chainlength + 1;\n    ***REMOVED*** else {\n          while (prev_pos >= 0 && prev_found == 0) {\n            if (this.index.blocks[prev_pos].returnHash() == this.index.blocks[chain_pos].block.prevbsh) {\n              bchainIndex.push(prev_pos);\n              prev_found = 1;\n              chain_pos = prev_pos;\n        ***REMOVED*** else {\n              prev_pos--;\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return bchainIndex;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"updateForkId\",\n    value: function updateForkId(blk) {\n      if (blk == null) {\n        return this.fork_id;\n  ***REMOVED***\n\n      var base_bid = blk.block.id;\n      var fork_id = \"\";\n      var indexpos = this.index.blocks.length - 1; //\n      // roll back to consensus starting point for measuring\n      //\n\n      for (var x = base_bid; x >= 0; x--) {\n        if (x % this.fork_id_mod == 0) {\n          base_bid = x;\n          x = -1;\n    ***REMOVED***\n  ***REMOVED***\n\n      for (var i = 0, stop = 0; stop == 0 && i < this.genesis_period;) {\n        var checkpointblkid = base_bid - i;\n        indexpos = this.returnLongestChainIndexArray(checkpointblkid, indexpos);\n\n        if (indexpos == -1 || checkpointblkid < 0) {\n          stop = 1;\n    ***REMOVED*** else {\n          var th = this.index.hash[indexpos];\n          fork_id += th.substring(0, 2);\n    ***REMOVED*** //\n***REMOVED*** if this is edited, we have to\n***REMOVED*** also change the function\n***REMOVED***\n***REMOVED*** - returnLastSharedBlockId\n***REMOVED***\n\n\n        if (i == 10000) {\n          i = 50000;\n    ***REMOVED***\n\n        if (i == 5000) {\n          i = 10000;\n    ***REMOVED***\n\n        if (i == 1000) {\n          i = 5000;\n    ***REMOVED***\n\n        if (i == 500) {\n          i = 1000;\n    ***REMOVED***\n\n        if (i == 200) {\n          i = 500;\n    ***REMOVED***\n\n        if (i == 100) {\n          i = 200;\n    ***REMOVED***\n\n        if (i == 75) {\n          i = 100;\n    ***REMOVED***\n\n        if (i == 50) {\n          i = 75;\n    ***REMOVED***\n\n        if (i == 40) {\n          i = 50;\n    ***REMOVED***\n\n        if (i == 30) {\n          i = 40;\n    ***REMOVED***\n\n        if (i == 20) {\n          i = 30;\n    ***REMOVED***\n\n        if (i == 10) {\n          i = 20;\n    ***REMOVED***\n\n        if (i == 0) {\n          i = 10;\n    ***REMOVED***\n\n        if (i > this.genesis_period || i == 50000) {\n          stop = 1;\n    ***REMOVED***\n  ***REMOVED***\n\n      this.fork_id = fork_id;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"addBlockToBlockchainSuccess\",\n    value: function () {\n      var _addBlockToBlockchainSuccess = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(blk, pos, i_am_the_longest_chain) {\n        var force,\n            our_longest_chain,\n            i,\n            _blk,\n            _args5 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                force = _args5.length > 3 && _args5[3] !== undefined ? _args5[3] : false;\n                _context5.next = 3;\n                return this.app.storage.saveBlock(blk, i_am_the_longest_chain);\n\n              case 3:\n        ***REMOVED***\n        ***REMOVED*** reorganize THIS block\n        ***REMOVED***\n                if (i_am_the_longest_chain == 1) {\n                  this.app.wallet.resetExistingSlips(blk.block.id, blk.returnHash(), i_am_the_longest_chain);\n                  this.bsh_lc_hmap[blk.returnHash()] = 1;\n                  this.bid_bsh_hmap[blk.block.id] = blk.returnHash();\n                  this.lc_pos_set = true;\n                  this.lc_pos = pos;\n                  this.saveBlockchain(blk);\n            ***REMOVED*** //\n        ***REMOVED*** moved to subsequent processing\n        ***REMOVED***\n        ***REMOVED***\n        ***REMOVED*** update modules (with sync info) ?\n        ***REMOVED***\n        ***REMOVED***this.app.modules.updateBlockchainSync(blk.block.id, this.returnTargetBlockId());\n\n\n                this.saveBlockchain(); //\n        ***REMOVED*** cleanup\n        ***REMOVED***\n\n                this.app.mempool.removeBlockAndTransactions(blk); //\n        ***REMOVED*** propagate block\n        ***REMOVED***\n\n                this.app.network.propagateBlock(blk);\n\n                if (force) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** wallet process slips (if non forced)\n        ***REMOVED***\n                this.app.wallet.processPayments(blk, i_am_the_longest_chain); //\n        ***REMOVED*** pass control to the callback manager\n        ***REMOVED***\n\n                if (!(this.run_callbacks == 1)) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n                blk.affixCallbacks(0);\n\n                if (!(i_am_the_longest_chain == 1 && !force)) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n                our_longest_chain = this.returnLongestChainIndexPosArray(this.callback_limit);\n                i = 0;\n\n              case 14:\n                if (!(i < our_longest_chain.length && i < this.callback_limit)) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** run callbacks with TXS\n        ***REMOVED***\n                _blk = this.index.blocks[our_longest_chain[i]];\n\n                if (!(_blk != null)) {\n                  _context5.next = 19;\n                  break;\n            ***REMOVED***\n\n                _context5.next = 19;\n                return _blk.runCallbacks(i);\n\n              case 19:\n                i++;\n                _context5.next = 14;\n                break;\n\n              case 22:\n        ***REMOVED***\n        ***REMOVED*** permit addition of next block\n        ***REMOVED***\n                this.indexing_active = 0;\n\n                if (!force) {\n                  this.app.miner.startMining(blk);\n            ***REMOVED***\n\n              case 24:\n              case \"end\":\n                return _context5.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee5, this);\n  ***REMOVED***));\n\n      function addBlockToBlockchainSuccess(_x18, _x19, _x20) {\n        return _addBlockToBlockchainSuccess.apply(this, arguments);\n  ***REMOVED***\n\n      return addBlockToBlockchainSuccess;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"addBlockToBlockchainFailure\",\n    value: function () {\n      var _addBlockToBlockchainFailure = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6(blk, pos, i_am_the_longest_chain) {\n        var force,\n            oldblk,\n            _args6 = arguments;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                force = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : no;\n                console.log(\"FAILURE ADDING BLOCK: \" + blk.returnHash() + \" -- \" + pos + \" -- \" + i_am_the_longest_chain); //\n        ***REMOVED*** restore longest chain\n        ***REMOVED***\n\n                this.lc_pos = this.last_lc_pos;\n                this.onChainReorganization(blk.returnHash(), blk.block.id, 0);\n                delete this.bsh_lc_hmap[blk.returnHash()];\n                delete this.bsh_bid_hmap[blk.returnHash()];\n                delete this.bsh_ts_hmap[blk.returnHash()]; // reset miner\n\n                this.app.miner.stopMining();\n                oldblk = this.returnLatestBlock();\n\n                if (oldblk != null) {\n                  this.app.miner.startMining(oldblk);\n            ***REMOVED*** //\n        ***REMOVED*** remove bad everything\n        ***REMOVED***\n\n\n                this.app.mempool.removeBlockAndTransactions(blk); //\n        ***REMOVED*** resume normal operations\n        ***REMOVED***\n\n                this.indexing_active = 0;\n                return _context6.abrupt(\"return\", 1);\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee6, this);\n  ***REMOVED***));\n\n      function addBlockToBlockchainFailure(_x21, _x22, _x23) {\n        return _addBlockToBlockchainFailure.apply(this, arguments);\n  ***REMOVED***\n\n      return addBlockToBlockchainFailure;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"binaryInsert\",\n    value: function binaryInsert(list, item, compare, search) {\n      var start = 0;\n      var end = list.length;\n\n      while (start < end) {\n        var pos = start + end >> 1;\n        var cmp = compare(item, list[pos]);\n\n        if (cmp === 0) {\n          start = pos;\n          end = pos;\n          break;\n    ***REMOVED*** else if (cmp < 0) {\n          end = pos;\n    ***REMOVED*** else {\n          start = pos + 1;\n    ***REMOVED***\n  ***REMOVED***\n\n      if (!search) {\n        list.splice(start, 0, item);\n  ***REMOVED***\n\n      return start;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"onChainReorganization\",\n    value: function onChainReorganization(bsh, bid, lc) {\n      //\n      // update hashmap values\n      //\n      this.bsh_lc_hmap[bsh] = lc;\n\n      if (lc == 0) {\n        delete this.bid_bsh_hmap[bid];\n  ***REMOVED*** else {\n        this.bid_bsh_hmap[bid] = bsh;\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isHashIndexed\",\n    value: function isHashIndexed(hash) {\n      if (this.bsh_bid_hmap[hash] > 0) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLatestBlock\",\n    value: function returnLatestBlock() {\n      if (this.index.blocks.length == 0) {\n        return null;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos];\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLatestBlockHash\",\n    value: function returnLatestBlockHash() {\n      var blk = this.returnLatestBlock();\n\n      if (blk == null) {\n        return \"\";\n  ***REMOVED***\n\n      return blk.returnHash();\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLatestBlockTimestamp\",\n    value: function returnLatestBlockTimestamp() {\n      var blk = this.returnLatestBlock();\n\n      if (blk == null) {\n        return 0;\n  ***REMOVED***\n\n      if (blk.block == null) {\n        return 0;\n  ***REMOVED***\n\n      return blk.block.ts;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnBlockByHash\",\n    value: function returnBlockByHash(hash) {\n      if (this.isHashIndexed(hash)) {\n        for (var v = this.index.blocks.length - 1; v >= 0; v--) {\n          if (this.index.blocks[v].returnHash() == hash) {\n            return this.index.blocks[v];\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnBlockByHashFromDisk\",\n    value: function () {\n      var _returnBlockByHashFromDisk = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee7(hash) {\n        var v;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!this.isHashIndexed(hash)) {\n                  _context7.next = 11;\n                  break;\n            ***REMOVED***\n\n                v = this.index.blocks.length - 1;\n\n              case 2:\n                if (!(v >= 0)) {\n                  _context7.next = 11;\n                  break;\n            ***REMOVED***\n\n                if (!(this.index.blocks[v].returnHash() == hash)) {\n                  _context7.next = 8;\n                  break;\n            ***REMOVED***\n\n                if (!(this.index.blocks[v].transactions.length == 0)) {\n                  _context7.next = 8;\n                  break;\n            ***REMOVED***\n\n                _context7.next = 7;\n                return this.app.storage.loadBlockByHash(hash);\n\n              case 7:\n                return _context7.abrupt(\"return\", _context7.sent);\n\n              case 8:\n                v--;\n                _context7.next = 2;\n                break;\n\n              case 11:\n              case \"end\":\n                return _context7.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee7, this);\n  ***REMOVED***));\n\n      function returnBlockByHashFromDisk(_x24) {\n        return _returnBlockByHashFromDisk.apply(this, arguments);\n  ***REMOVED***\n\n      return returnBlockByHashFromDisk;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnBlockById\",\n    value: function () {\n      var _returnBlockById = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee8(bid) {\n        var mode,\n            hash,\n            v,\n            _args8 = arguments;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                mode = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : 0;\n        ***REMOVED***\n        ***REMOVED*** mode\n        ***REMOVED***\n        ***REMOVED*** 0 -- fetch block from memory / txs not needed\n        ***REMOVED*** 1 -- require transactions\n        ***REMOVED***\n                hash = this.bid_bsh_hmap[bid];\n\n                if (!(hash == undefined)) {\n                  _context8.next = 4;\n                  break;\n            ***REMOVED***\n\n                return _context8.abrupt(\"return\", null);\n\n              case 4:\n                if (!this.isHashIndexed(hash)) {\n                  _context8.next = 21;\n                  break;\n            ***REMOVED***\n\n                v = this.index.blocks.length - 1;\n\n              case 6:\n                if (!(v >= 0)) {\n                  _context8.next = 21;\n                  break;\n            ***REMOVED***\n\n                if (!(this.index.blocks[v].returnHash() == hash)) {\n                  _context8.next = 18;\n                  break;\n            ***REMOVED***\n\n                _context8.t0 = mode;\n                _context8.next = _context8.t0 === 0 ? 11 : _context8.t0 === 1 ? 12 : 17;\n                break;\n\n              case 11:\n                return _context8.abrupt(\"return\", this.index.blocks[v]);\n\n              case 12:\n                if (!(this.index.blocks[v].transactions.length == 0)) {\n                  _context8.next = 16;\n                  break;\n            ***REMOVED***\n\n                _context8.next = 15;\n                return this.app.storage.loadBlockByHash(hash);\n\n              case 15:\n                return _context8.abrupt(\"return\", _context8.sent);\n\n              case 16:\n                return _context8.abrupt(\"return\", this.index.blocks[v]);\n\n              case 17:\n                return _context8.abrupt(\"return\", this.index.blocks[v]);\n\n              case 18:\n                v--;\n                _context8.next = 6;\n                break;\n\n              case 21:\n              case \"end\":\n                return _context8.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee8, this);\n  ***REMOVED***));\n\n      function returnBlockById(_x25) {\n        return _returnBlockById.apply(this, arguments);\n  ***REMOVED***\n\n      return returnBlockById;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnMinTxId\",\n    value: function returnMinTxId() {\n      if (this.lc_pos == null) {\n        return 0;\n  ***REMOVED***\n\n      if (this.index.blocks[this.lc_pos].mintxid == undefined) {\n        return 0;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos].maxtxid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMaxTxId\",\n    value: function returnMaxTxId() {\n      if (this.lc_pos == null) {\n        return 0;\n  ***REMOVED***\n\n      if (this.index.blocks[this.lc_pos].maxtxid == undefined) {\n        return 0;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos].maxtxid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMinTxId\",\n    value: function returnMinTxId() {\n      if (this.lc_pos == null) {\n        return 0;\n  ***REMOVED***\n\n      if (this.index.blocks[this.lc_pos].mintxid == undefined) {\n        return 0;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos].maxtxid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"saveBlockchain\",\n    value: function saveBlockchain(blk) {\n      this.app.options.blockchain = Object.assign({***REMOVED***, this.app.options.blockchain);\n\n      if (blk == null) {\n        return;\n  ***REMOVED***\n\n      this.last_bsh = blk.returnHash();\n      this.last_bid = blk.block.id;\n      this.last_ts = blk.block.ts;\n      this.last_bf = blk.block.bf; //\n      // purge unnecessary data\n      //\n      //\n      // selective updates\n      //\n\n      if (blk.block.id % this.fork_id_mod == 0) {\n        this.fork_id = this.updateForkId();\n  ***REMOVED***\n\n      this.app.options.blockchain.last_bsh = this.last_bsh;\n      this.app.options.blockchain.last_bid = this.last_bid;\n      this.app.options.blockchain.last_ts = this.last_ts;\n      this.app.options.blockchain.last_bf = this.last_bf;\n      this.app.options.blockchain.genesis_ts = this.genesis_ts;\n      this.app.options.blockchain.genesis_bid = this.genesis_bid;\n      this.app.options.blockchain.genesis_period = this.genesis_period;\n      this.app.options.blockchain.lowest_acceptable_ts = this.lowest_acceptable_ts;\n      this.app.options.blockchain.lowest_acceptable_bsh = this.lowest_acceptable_bsh;\n      this.app.options.blockchain.lowest_acceptable_bid = this.lowest_acceptable_bid;\n***REMOVED***\n  ***REMOVED***]);\n\n  return Blockchain;\n***REMOVED***();\n\nmodule.exports = Blockchain;\n/* WEBPACK VAR INJECTION */***REMOVED***.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2FpdG8vYmxvY2tjaGFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zYWl0by9ibG9ja2NoYWluLmpzPzliMTgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2FpdG8gICAgPSByZXF1aXJlKCcuL3NhaXRvJyk7XG4vLyBjb25zdCBCaWcgICAgICA9IHJlcXVpcmUoJ2JpZy5qcycpO1xuXG5jbGFzcyBCbG9ja2NoYWluIHtcblxuICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICB0aGlzLmFwcCAgICAgICAgICAgICAgICAgICA9IGFwcCB8fCB7fTtcblxuICAgIHRoaXMuaW5kZXhcdFx0ICAgICBcdD0ge307XG4gICAgdGhpcy5pbmRleC5ibG9ja3NcdFx0PSBbXTtcblxuICAgIHRoaXMuYnNoX2xjX2htYXAgICAgICAgICAgIFx0PSBbXTtcbiAgICB0aGlzLmJzaF9iaWRfaG1hcCAgICAgICAgICBcdD0gW107XG4gICAgdGhpcy5iaWRfYnNoX2htYXAgICAgICAgICAgXHQ9IFtdO1xuICAgIHRoaXMuYnNoX3RzX2htYXAgICAgICAgICAgXHQ9IFtdO1xuXG4gICAgdGhpcy5sY19wb3Nfc2V0ICAgICAgICAgIFx0PSBmYWxzZVxuICAgIHRoaXMubGNfcG9zICAgICAgICAgICAgIFx0PSAwO1xuICAgIHRoaXMubGFzdF9sY19wb3NcdFx0PSAwO1xuXG4gICAgdGhpcy5ydW5fY2FsbGJhY2tzXHRcdD0gMTtcbiAgICB0aGlzLmNhbGxiYWNrX2xpbWl0XHRcdD0gNTA7XG5cbiAgICB0aGlzLmZvcmtfaWRcdFx0XHQ9IFwiXCI7XG4gICAgdGhpcy5mb3JrX2lkX21vZFx0XHQ9IDEwO1x0XHQvLyByZWdlbmVyYXRlIGV2ZXJ5IE4gYmxvY2tzXG5cbiAgICB0aGlzLmdlbmVzaXNfdHMgICAgICAgICAgICBcdD0gMDtcbiAgICB0aGlzLmdlbmVzaXNfYmlkICAgICAgICAgICBcdD0gMDtcbiAgICB0aGlzLmdlbmVzaXNfcGVyaW9kICAgICAgIFx0PSAxMDAwMDA7XG4gICAgLy90aGlzLmdlbmVzaXNfcGVyaW9kICAgICAgIFx0PSA2O1xuICAgIHRoaXMubGFzdF9ic2ggICAgICAgICAgICAgIFx0PSBcIlwiO1xuICAgIHRoaXMubGFzdF9iaWQgICAgICAgICAgICAgIFx0PSAwO1xuICAgIHRoaXMubGFzdF90cyAgICAgICAgICAgICAgIFx0PSAwO1xuICAgIHRoaXMubGFzdF9iZiAgICAgICAgICAgICAgXHQ9IDAuMDtcbiAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzICBcdD0gMDtcbiAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JzaCBcdD0gXCJcIjtcbiAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JpZFx0PSAwO1xuXG4gICAgdGhpcy5pbmRleGluZ19hY3RpdmUgICAgICAgICAgPSAwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBhZGRCbG9ja1RvQmxvY2tjaGFpbihibGssIGZvcmNlPWZhbHNlKSB7XG5cbmNvbnNvbGUubG9nKFwiXFxuXFxuIC4uLiBhZGRpbmcgYmxvY2sgXCIrYmxrLmJsb2NrLmlkK1wiOiBcIiArIGJsay5yZXR1cm5IYXNoKCkpO1xuXG4gICAgdGhpcy5pbmRleGluZ19hY3RpdmUgPSAxO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFNBTklUWSBDSEVDS1MgLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaWYgKGJsay5pc192YWxpZCA9PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDE3ODIzNDogYmxvY2sgaXMgbm90IHZhbGlkIHdoZW4gYWRkaW5nIHRvIGNoYWluLiB0ZXJtaW5hdGluZy4uLlwiKTtcbiAgICAgIHRoaXMuaW5kZXhpbmdfYWN0aXZlID0gMDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYmxrLmJsb2NrLnRzIDwgdGhpcy5nZW5lc2lzX3RzIHx8IGJsay5ibG9jay5pZCA8IHRoaXMuZ2VuZXNpc19iaWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNzkyODM3OiBibG9jayBpZCBwcmVjZWRlcyBnZW5lc2lzIHBlcmlvZC4gdGVybWluYXRpbmcuLi5cIik7XG4gICAgICB0aGlzLmluZGV4aW5nX2FjdGl2ZSA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNIYXNoSW5kZXhlZChibGsucmV0dXJuSGFzaCgpKSkge1xuICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1ODIwMzk6IGJsb2NrY2hhaW4gYWxyZWFkeSBjb250YWlucyB0aGlzIGJsb2NrIGhhc2guIHRlcm1pbmF0aW5nLi4uXCIpO1xuICAgICAgdGhpcy5pbmRleGluZ19hY3RpdmUgPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuXG4gICAgLy9cbiAgICAvLyBjcmVhdGUgcmVmZXJlbmNlIGZvciBwcmV2aW91cyBsY1xuICAgIC8vXG4gICAgdGhpcy5sYXN0X2xjX3BvcyA9IHRoaXMubGNfcG9zO1xuXG4gICAgLy9cbiAgICAvLyBwcmV2aW91cyBibG9jayBub3QgaW5kZXhlZCwgYnV0IGFjY2VwdGFibGVcbiAgICAvL1xuICAgIGlmIChibGsuYmxvY2sudHMgPCB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzKSB7XG4gICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID0gYmxrLmJsb2NrLnRzO1xuICAgIH1cblxuXG4gICAgLy9cbiAgICAvLyB0cmFjayBmaXJzdCBibG9ja1xuICAgIC8vXG4gICAgLy8gaWYgd2UgYXJlIGFkZGluZyBvdXIgZmlyc3QgYmxvY2ssIHdlIHNldCB0aGlzIGFzIG91ciBsb3dlc3RcbiAgICAvLyBhY2NlcHRhYmxlIHRzIHRvIGF2b2lkIHJlcXVlc3RpbmcgZWFybGllciBibG9ja3MgYWQgaW5maW5pdHVtXG4gICAgLy8gaW50byB0aGUgcGFzdC5cbiAgICAvL1xuICAgIC8vIGxvd2VzdCBhY2NlcHRhYmxlIGJpZCBtdXN0IGJlIHVwZGF0ZWQgc28gdGhhdCB3ZSBrbm93IHRoZVxuICAgIC8vIGVhcmxpZXN0IGJsb2NrIHdlIG5lZWQgdG8gd29ycnkgYWJvdXQgd2hlbiBoYW5kbGluZyBmdWxsIHNsaXBcbiAgICAvLyB2YWxpZGF0aW9uLlxuICAgIC8vXG4gICAgaWYgKHRoaXMubG93ZXN0X2FjY2VwdGFibGVfdHMgPT0gMCkge1xuXG4gICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JpZCA9IGJsay5ibG9jay5pZDtcbiAgICAgIHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYnNoID0gYmxrLnJldHVybkhhc2goKTtcblxuICAgICAgLy9cbiAgICAgIC8vICEhISEhISEhISEhISBCTE9DSyAhISEhISEhISEhISFcbiAgICAgIC8vXG4gICAgICAvL2lmICh0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID0gdGhpcy5sYXN0X3RzO1xuICAgICAgLy99XG5cbiAgICAgIGlmICh0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID09IDApIHtcbiAgICAgICAgdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV90cyA9IGJsay5ibG9jay50cztcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmICh0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID4gYmxrLmJsb2NrLnRzKSB7XG4gICAgICAgIGlmICghZm9yY2UpIHtcbiAgICAgICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID0gYmxrLmJsb2NrLnRzO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gZmV0Y2ggbWlzc2luZyBibG9ja3NcbiAgICAvL1xuICAgIGlmIChibGsuYmxvY2sudHMgPiB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzKSB7XG4gICAgICBpZiAoIXRoaXMuaXNIYXNoSW5kZXhlZChibGsuYmxvY2sucHJldmJzaCkpICB7XG4gICAgICAgIGlmICh0aGlzLmxjX3Bvc19zZXQgPT0gdHJ1ZSkge1xuICAgICAgICAgIGlmIChibGsuYmxvY2suaWQgPiAodGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdLmJpZCAtIHRoaXMuZ2VuZXNpc19wZXJpb2QpKSB7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gc2VuZCByZXF1ZXN0IGZvciBtaXNzaW5nIGJsb2NrXG4gICAgICAgICAgICAvL1xuXHQgICAgY29uc29sZS5sb2coXCJFUlJPUiAxNDgwMTk6IG1pc3NpbmcgYmxvY2tcIik7XG5cdCAgICBwcm9jZXNzLmV4aXQoKTtcblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBpbnNlcnQgaW5kZXhlcyAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgbGV0IHBvcyA9IHRoaXMuYmluYXJ5SW5zZXJ0KHRoaXMuaW5kZXguYmxvY2tzLCBibGssIChhLCBiKSA9PiB7IHJldHVybiBhLmJsb2NrLnRzIC0gYi5ibG9jay50czsgfSk7XG4gICAgdGhpcy5ic2hfYmlkX2htYXBbYmxrLnJldHVybkhhc2goKV0gPSBibGsuYmxvY2suaWQ7XG4gICAgdGhpcy5ic2hfdHNfaG1hcFtibGsucmV0dXJuSGFzaCgpXSA9IGJsay5ibG9jay50cztcbiAgICB0aGlzLmluZGV4LmJsb2Nrc1twb3NdID0gYmxrO1xuXG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBpZGVudGlmeSBsb25nZXN0IGNoYWluIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGxldCBpX2FtX3RoZV9sb25nZXN0X2NoYWluXHRcdD0gMDtcbiAgICBsZXQgc2hhcmVkX2FuY2VzdG9yX3Bvc1x0ICBcdD0gMDtcbiAgICBsZXQgc2hhcmVkX2FuY2VzdG9yX3Bvc19mb3VuZFx0PSBmYWxzZTtcblxuXG4gICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuXG4gICAgICB0aGlzLmxjX3BvcyA9IHBvcztcbiAgICAgIHRoaXMubGFzdF9ic2ggPSBibGsucmV0dXJuSGFzaCgpO1xuICAgICAgdGhpcy5sYXN0X2JpZCA9IGJsay5ibG9jay5pZDtcbiAgICAgIHRoaXMubGFzdF9iZiAgPSBibGsuYmxvY2suYmY7XG4gICAgICB0aGlzLmxhc3RfdHMgID0gYmxrLmJsb2NrLnRzO1xuXG4gICAgfVxuXG5cbiAgICBpZiAodGhpcy5sYXN0X2JzaCA9PSBibGsuYmxvY2sucHJldmJzaCAmJiB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGggPiAxKSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBsYXN0IGJsb2NrIGlzIGxvbmdlc3QgY2hhaW5cbiAgICAgIC8vXG4gICAgICBpZiAodGhpcy5ic2hfbGNfaG1hcFt0aGlzLmxhc3RfYnNoXSA9PSAxKSB7XG4gICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuICAgICAgICBzaGFyZWRfYW5jZXN0b3JfcG9zID0gdGhpcy5sYXN0X2xjX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIHRyYWNlIGJhY2sgdG8gZmluZCBzaGFyZWQgYW5jZXN0b3JcbiAgICAvL1xuICAgIGlmIChpX2FtX3RoZV9sb25nZXN0X2NoYWluID09IDApIHtcblxuICAgICAgaWYgKGJsay5ibG9jay5pZCA+PSB0aGlzLmluZGV4LmJsb2Nrc1t0aGlzLmxjX3Bvc10uYmxvY2suaWQpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBmaW5kIHRoZSBsYXN0IHNoYXJlZCBhbmNlc3RvclxuICAgICAgICAvL1xuICAgICAgICBsZXQgbGJsayA9IHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGNfcG9zXTtcbiAgICAgICAgbGV0IG5ibGsgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdO1xuXG4gICAgICAgIGlmIChibGsuYmxvY2suaWQgPT0gbGJsay5ibG9jay5pZCkge1xuICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJsay5ibG9jay5wcmV2YnNoID09IGxibGsuYmxvY2suYnNoKSB7XG4gICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBsZXQgbGNoYWluX3BvcyBcdFx0PSB0aGlzLmxjX3BvcztcbiAgICAgICAgICBsZXQgbmNoYWluX3BvcyBcdFx0PSBwb3M7XG4gICAgICAgICAgbGV0IGxjaGFpbl9sZW4gXHRcdD0gMDtcbiAgICAgICAgICBsZXQgbmNoYWluX2xlbiBcdFx0PSAwO1xuICAgICAgICAgIGxldCBsY2hhaW5fYmYgIFx0XHQ9IGxibGsuYmxvY2suYmY7XG4gICAgICAgICAgbGV0IG5jaGFpbl9iZiAgXHRcdD0gbmJsay5ibG9jay5iZjtcbiAgICAgICAgICBsZXQgbGNoYWluX3RzICBcdFx0PSBsYmxrLmJsb2NrLnRzO1xuICAgICAgICAgIGxldCBuY2hhaW5fdHMgIFx0XHQ9IG5ibGsuYmxvY2sudHM7XG4gICAgICAgICAgbGV0IGxjaGFpbl9wcmV2YnNoXHQ9IGxibGsuYmxvY2sucHJldmJzaDtcbiAgICAgICAgICBsZXQgbmNoYWluX3ByZXZic2hcdD0gbmJsay5ibG9jay5wcmV2YnNoO1xuXG4gICAgICAgICAgbGV0IHNlYXJjaF9wb3MgICAgICAgXHQ9IG51bGw7XG4gICAgICAgICAgbGV0IHNlYXJjaF9iZiAgICAgICAgXHQ9IG51bGw7XG4gICAgICAgICAgbGV0IHNlYXJjaF90cyAgICAgICAgXHQ9IG51bGw7XG4gICAgICAgICAgbGV0IHNlYXJjaF9ic2ggICAgICBcdD0gbnVsbDtcbiAgICAgICAgICBsZXQgc2VhcmNoX3ByZXZic2ggIFx0PSBudWxsO1xuXG4gICAgICAgICAgaWYgKG5jaGFpbl90cyA+PSBsY2hhaW5fdHMpIHtcbiAgICAgICAgICAgIHNlYXJjaF9wb3MgPSBuY2hhaW5fcG9zIC0gMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VhcmNoX3BvcyA9IGxjaGFpbl9wb3MgLSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHdoaWxlIChzZWFyY2hfcG9zID49IDApIHtcblxuICAgICAgICAgICAgbGV0IHNibGsgPSB0aGlzLmluZGV4LmJsb2Nrc1tzZWFyY2hfcG9zXTtcblxuICAgICAgICAgICAgc2VhcmNoX3RzXHQgICAgPSBzYmxrLmJsb2NrLnRzO1xuICAgICAgICAgICAgc2VhcmNoX2JmICAgICAgID0gc2Jsay5ibG9jay5iZjtcbiAgICAgICAgICAgIHNlYXJjaF9ic2ggICAgICA9IHNibGsuYmxvY2suYnNoO1xuICAgICAgICAgICAgc2VhcmNoX3ByZXZic2ggID0gc2Jsay5ibG9jay5wcmV2YnNoO1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gaGV5IGxvb2ssIGl0J3MgdGhlIGNvbW1vbiBhbmNlc3RvciFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoc2VhcmNoX2JzaCA9PSBsY2hhaW5fcHJldmJzaCAmJiBzZWFyY2hfYnNoID09IG5jaGFpbl9wcmV2YnNoKSB7XG4gICAgICAgICAgICAgIHNoYXJlZF9hbmNlc3Rvcl9wb3NfZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBzaGFyZWRfYW5jZXN0b3JfcG9zID0gc2VhcmNoX3BvcztcbiAgICAgICAgICAgICAgc2VhcmNoX3BvcyA9IC0xO1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8ga2VlcCBsb29raW5nXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICBpZiAoc2VhcmNoX2JzaCA9PSBsY2hhaW5fcHJldmJzaCkge1xuICAgICAgICAgICAgICAgIGxjaGFpbl9sZW4rKztcbiAgICAgICAgICAgICAgICBsY2hhaW5fcHJldmJzaCA9IHRoaXMuaW5kZXguYmxvY2tzW3NlYXJjaF9wb3NdLmJsb2NrLnByZXZic2g7XG4gICAgICAgICAgICAgICAgbGNoYWluX2JmID0gcGFyc2VGbG9hdChsY2hhaW5fYmYpICsgcGFyc2VGbG9hdCh0aGlzLmluZGV4LmJsb2Nrc1tzZWFyY2hfcG9zXS5yZXR1cm5CdXJuRmVlVmFsdWUoKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoc2VhcmNoX2JzaCA9PSBuY2hhaW5fcHJldmJzaCkge1xuICAgICAgICAgICAgICAgIG5jaGFpbl9wcmV2YnNoID0gdGhpcy5pbmRleC5ibG9ja3Nbc2VhcmNoX3Bvc10uYmxvY2sucHJldmJzaDtcbiAgICAgICAgICAgICAgICBuY2hhaW5fbGVuKys7XG4gICAgICAgICAgICAgICAgbmNoYWluX2JmID0gcGFyc2VGbG9hdChsY2hhaW5fYmYpICsgcGFyc2VGbG9hdCh0aGlzLmluZGV4LmJsb2Nrc1tzZWFyY2hfcG9zXS5yZXR1cm5CdXJuRmVlVmFsdWUoKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzaGFyZWRfYW5jZXN0b3JfcG9zID0gc2VhcmNoX3BvcztcbiAgICAgICAgICAgICAgc2VhcmNoX3Bvcy0tO1xuXG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIC8vIG5ldyBjaGFpbiBjb21wbGV0ZWx5IGRpc2Nvbm5lY3RlZFxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICBpZiAoc2hhcmVkX2FuY2VzdG9yX3BvcyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5jaGFpbl9wcmV2YnNoID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5TdWNjZXNzKGJsaywgcG9zLCAwKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNoYXJlZF9hbmNlc3Rvcl9wb3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChuY2hhaW5fcHJldmJzaCAhPSBsY2hhaW5fcHJldmJzaCkge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRCbG9ja1RvQmxvY2tjaGFpblN1Y2Nlc3MoYmxrLCBwb3MsIDApO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gbG9uZ2VzdCBjaGFpbiBpZiBtb3JlIHJvdXRpbmcgQU5EIGJ1cm5pbmcgd29ya1xuICAgICAgICAgIC8vXG4gICAgICAgICAgaWYgKG5jaGFpbl9sZW4gPiBsY2hhaW5fbGVuICYmIG5jaGFpbl9iZiA+PSBsY2hhaW5fYmYgJiYgc2hhcmVkX2FuY2VzdG9yX3Bvc19mb3VuZCA9PSB0cnVlKSB7XG4gICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcImVkZ2UgY2FzZSB3aXRoIHVub3JkZXJlZCBibG9ja3MuLi5cIik7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhpcyBjYXRjaGVzIGFuIGVkZ2UgY2FzZSB0aGF0IGhhcHBlbnMgaWYgd2UgYXNrIGZvciBibG9ja3Mgc3RhcnRpbmcgZnJvbVxuICAgICAgICAvLyBpZCA9IDEzMiwgYnV0IHRoZSBmaXJzdCBibG9jayB3ZSBSRUNFSVZFIGlzIGEgbGF0ZXIgYmxvY2sgaW4gdGhhdCBjaGFpbixcbiAgICAgICAgLy8gc3VjaCBhcyAxMzUgb3Igc28uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSBvdXIgYmxvY2tjaGFpbiBjbGFzcyB3aWxsIHRyZWF0IHRoZSBmaXJzdCBibG9jayBhcyB0aGUgc3RhcnRpbmdcbiAgICAgICAgLy8gcG9pbnQgYW5kIHdlIHJ1biBpbnRvIGlzc3VlcyB1bmxlc3Mgd2UgZXhwbGljaXRseSByZXNldCB0aGUgYmxvY2tjaGFpbiB0b1xuICAgICAgICAvLyB0cmVhdCBibG9jayAxMzIgYXMgdGhlIHByb3BlciBmaXJzdCBibG9jay5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gc28gd2UgcmVzZXQgdGhpcyB0byBvdXIgZmlyc3QgYmxvY2sgYW5kIG1hcmsgaXQgYXMgcGFydCBvZiB0aGUgbG9uZ2VzdCBjaGFpblxuICAgICAgICAvLyB0aGUgbmV0d29yayB3aWxsIGZpZ3VyZSB0aGlzIG91dCBpbiB0aW1lIGFzIGZ1cnRoZXIgYmxvY2tzIGJ1aWxkIG9uIGl0LlxuICAgICAgICAvL1xuICAgICAgICBpZiAoYmxrLmJsb2NrLnByZXZic2ggPT0gdGhpcy5sYXN0X2JzaCAmJiBibGsuYmxvY2sucHJldmJzaCAhPSBcIlwiKSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHJlc2V0IGxhdGVyIGJsb2Nrc1xuICAgICAgICAgIC8vXG4gICAgICAgICAgZm9yIChsZXQgaCA9IHBvcysxOyBoIDwgdGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoOyBoKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnNoX2xjX2htYXBbdGhpcy5pbmRleC5ibG9ja3NbaF0uYmxvY2suYnNoXSA9IGlfYW1fdGhlX2xvbmdlc3RfY2hhaW47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBvbkNoYWluUmVvcmdhbml6YXRpb25cbiAgICAgICAgICAvL1xuICAgICAgICAgIHRoaXMub25DaGFpblJlb3JnYW5pemF0aW9uKHRoaXMuaW5kZXguYmxvY2tzW2hdLmJsb2NrLmlkLCB0aGlzLmluZGV4LmJsb2Nrc1toXS5yZXR1cm5IYXNoKCksIDApO1xuICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gaW5zZXJ0IGludG8gTEMgaGFzaG1hcFxuICAgIC8vXG4gICAgdGhpcy5ic2hfbGNfaG1hcFt0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJzaF0gPSBpX2FtX3RoZV9sb25nZXN0X2NoYWluO1xuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgYmxvY2tjaGFpbiBzdGF0ZSB2YXJpYWJsZXMgZGVwZW5kaW5nXG4gICAgLy9cbiAgICBpZiAoaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiA9PSAxKSB7XG4gICAgICB0aGlzLmxhc3RfYnNoICA9IHRoaXMuaW5kZXguYmxvY2tzW3Bvc10uYmxvY2suYnNoO1xuICAgICAgdGhpcy5sYXN0X2JmICAgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJsb2NrLmJmO1xuICAgICAgdGhpcy5sYXN0X3RzICAgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJsb2NrLnRzO1xuICAgICAgdGhpcy5sYXN0X2JpZCAgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJsb2NrLmlkO1xuICAgICAgdGhpcy5sY19wb3MgPSBwb3M7XG4gICAgICB0aGlzLmxjX3Bvc19zZXQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gb2xkIGFuZCBuZXcgY2hhaW5zXG4gICAgLy9cbiAgICBsZXQgbmV3X2hhc2hfdG9faHVudF9mb3IgXHQ9IFwiXCI7XG4gICAgbGV0IG9sZF9oYXNoX3RvX2h1bnRfZm9yICBcdD0gXCJcIjtcbiAgICBsZXQgbmV3X2Jsb2NrX2hhc2hlcyAgICAgXHQ9IFtdO1xuICAgIGxldCBvbGRfYmxvY2tfaGFzaGVzXHQ9IFtdO1xuXG4gICAgbGV0IG1pbl9ibG9ja19pZHggPSBzaGFyZWRfYW5jZXN0b3JfcG9zICsgMTtcbiAgICBsZXQgbWF4X2Jsb2NrX2lkeCA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aC0xO1xuXG4gICAgLy9cbiAgICAvLyBmaXJzdCBibG9jayAobGMgPSAwLCBuZWVkIHR3byBibG9ja3MgZm9yIGNoYWluKVxuICAgIC8vXG4gICAgaWYgKGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPT0gMSAmJiB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGggPT0gMSkge1xuXG4gICAgICAvL1xuICAgICAgLy8gYmxvY2sgIzEgbmVlZHMgaGFzaG1hcFxuICAgICAgLy9cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxrLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmFwcC5zaGFzaG1hcC5pbnNlcnRfbmV3X3RyYW5zYWN0aW9uKGJsaywgYmxrLnRyYW5zYWN0aW9uc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5TdWNjZXNzKGJsaywgcG9zLCAxKTtcbiAgICAgIHJldHVybjtcblxuICAgIH1cblxuXG4gICAgLy9cbiAgICAvLyBvdGhlciBibG9ja3NcbiAgICAvL1xuICAgIGlmIChpX2FtX3RoZV9sb25nZXN0X2NoYWluID09IDEgJiYgdGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID4gMCkge1xuXG4gICAgICBuZXdfaGFzaF90b19odW50X2ZvciA9IGJsay5yZXR1cm5IYXNoKCk7XG4gICAgICBvbGRfaGFzaF90b19odW50X2ZvciA9IFwiXCI7XG4gICAgICBuZXdfYmxvY2tfaGFzaGVzICAgICA9IFtdO1xuICAgICAgb2xkX2Jsb2NrX2hhc2hlcyAgICAgPSBbXTtcbiAgICAgIGlmICh0aGlzLmxhc3RfbGNfcG9zICE9IHBvcykgeyBvbGRfaGFzaF90b19odW50X2ZvciA9IHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGFzdF9sY19wb3NdLmJsb2NrLmJzaDsgfVxuXG4gICAgICAvL1xuICAgICAgLy8gb3VyIG5ldyBibG9jayBidWlsZHMgb24gdGhlIGxvbmdlc3QgY2hhaW5cbiAgICAgIC8vXG4gICAgICBpZiAoYmxrLmJsb2NrLnByZXZic2ggPT0gb2xkX2hhc2hfdG9faHVudF9mb3IpIHtcbiAgICAgICAgbmV3X2Jsb2NrX2hhc2hlcy5wdXNoKG5ld19oYXNoX3RvX2h1bnRfZm9yKTtcbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIHdlIG5lZWQgdG8gd2luZCAvIHVud2luZCB0aGUgY2hhaW5cbiAgICAgIC8vXG4gICAgICBlbHNlIHtcblxuICAgICAgICBsZXQgbWluX2Jsb2NrX2lkeCA9IHNoYXJlZF9hbmNlc3Rvcl9wb3MgKyAxO1xuICAgICAgICBsZXQgbWF4X2Jsb2NrX2lkeCA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aCAtMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gbWF4X2Jsb2NrX2lkeDsgaSA+PSBtaW5fYmxvY2tfaWR4OyBpLS0pIHtcblxuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkgPT0gb2xkX2hhc2hfdG9faHVudF9mb3IpIHtcbiAgICAgICAgICAgIG9sZF9oYXNoX3RvX2h1bnRfZm9yID0gdGhpcy5pbmRleC5ibG9ja3NbaV0uYmxvY2sucHJldmJzaDtcbiAgICAgICAgICAgIG9sZF9ibG9ja19oYXNoZXMucHVzaCh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkgPT0gbmV3X2hhc2hfdG9faHVudF9mb3IpIHtcbiAgICAgICAgICAgIG5ld19oYXNoX3RvX2h1bnRfZm9yID0gdGhpcy5pbmRleC5ibG9ja3NbaV0uYmxvY2sucHJldmJzaDtcbiAgICAgICAgICAgIG5ld19ibG9ja19oYXNoZXMucHVzaCh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgb2xkX2Jsb2NrX2hhc2hlcy5yZXZlcnNlKCk7XG4gICAgICAgIG5ld19ibG9ja19oYXNoZXMucmV2ZXJzZSgpO1xuXG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJibG9jayBpcyBub3Qgb24gdGhlIGxvbmdlc3QgY2hhaW4uLi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZShcbiAgICAgIGJsayxcbiAgICAgIHBvcyxcbiAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICBuZXdfYmxvY2tfaGFzaGVzLFxuICAgICAgb2xkX2Jsb2NrX2hhc2hlc1xuICAgICk7XG5cbiAgfVxuXG5cblxuICBhc3luYyBpbml0aWFsaXplKCkge1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4pIHtcbiAgICAgICAgdGhpcy5sYXN0X2JpZFx0XHRcdD0gdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYmlkO1xuICAgICAgICB0aGlzLmxhc3RfYnNoXHRcdFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubGFzdF9ic2g7XG4gICAgICAgIHRoaXMubGFzdF90c1x0XHRcdD0gdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfdHM7XG4gICAgICAgIHRoaXMubGFzdF9iZlx0XHRcdD0gdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYmY7XG5cbiAgICAgICAgdGhpcy5nZW5lc2lzX3RzXHRcdFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4uZ2VuZXNpc190cztcbiAgICAgICAgdGhpcy5nZW5lc2lzX2JpZFx0XHQ9IHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX2JpZDtcbiAgICAgICAgdGhpcy5nZW5lc2lzX3BlcmlvZFx0XHQ9IHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX3BlcmlvZDtcbiAgICAgICAgdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV90c1x0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfdHM7XG4gICAgICAgIHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYnNoIFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfYnNoO1xuICAgICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JpZFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfYmlkO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja3NGcm9tRGlzayh0aGlzLmdlbmVzaXNfcGVyaW9kKjIpO1xuXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cblxuICB9XG5cblxuXG4gIGlzRnVsbHlTeW5jZWQoKSB7XG4gICAgbGV0IHggPSB0aGlzLmxhc3RfYmlkIC0gdGhpcy5nZW5lc2lzX3BlcmlvZDtcbiAgICBpZiAoeCA8IDApIHsgcmV0dXJuIHRydWU7IH1cbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID49IHRoaXMuZ2VuZXNpc19wZXJpb2QgfHwgeCA8PSAwKSB7XG4gICAgICBpZiAoeCA+IHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYmlkIHx8ICh4IDw9IDAgJiYgdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV9iaWQgPT0gMSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG5cblxuXG4gIHZhbGlkYXRlKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBuZXdfYmxvY2tfaGFzaGVzLCBvbGRfYmxvY2tfaGFzaGVzKSB7XG5cbiAgICAvL1xuICAgIC8vIGluc2VydCB0byBzaGFzaG1hcFxuICAgIC8vXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibGsudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmFwcC5zaGFzaG1hcC5pbnNlcnRfbmV3X3RyYW5zYWN0aW9uKGJsaywgYmxrLnRyYW5zYWN0aW9uc1tpXSk7XG4gICAgfVxuXG5cbiAgICAvL1xuICAgIC8vIHVud2luZCBhbmQgd2luZFxuICAgIC8vXG4gICAgaWYgKG9sZF9ibG9ja19oYXNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy51bndpbmRDaGFpbihcbiAgICAgICAgYmxrLFxuICAgICAgICBwb3MsXG4gICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICAgIG5ld19ibG9ja19oYXNoZXMsXG4gICAgICAgIG9sZF9ibG9ja19oYXNoZXMsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIG9sZF9ibG9ja19oYXNoZXMubGVuZ3RoLTFcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICBibGssXG4gICAgICAgIHBvcyxcbiAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgbmV3X2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgb2xkX2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuXG4gIH1cblxuICBhc3luYyB3aW5kQ2hhaW4oYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIG5ld19ibG9ja19oYXNoZXMsIG9sZF9ibG9ja19oYXNoZXMsIGZvcmNlLCByZXNldHRpbmdfZmxhZywgY3VycmVudF93aW5kX2luZGV4KSB7XG5cbiAgICBsZXQgdGhpc19ibG9ja19oYXNoID0gbmV3X2Jsb2NrX2hhc2hlc1tjdXJyZW50X3dpbmRfaW5kZXhdO1xuXG4gICAgLy9cbiAgICAvLyB0aGlzIGlzIHRoZSBsYXN0IGJsb2NrIHRvIGFkZFxuICAgIC8vXG4gICAgaWYgKGJsay5yZXR1cm5IYXNoKCkgPT09IHRoaXNfYmxvY2tfaGFzaCkge1xuXG4gICAgICBsZXQgYmxvY2tfdmFsaWRhdGVzID0gYXdhaXQgYmxrLnZhbGlkYXRlKCk7XG5cbiAgICAgIGlmIChibG9ja192YWxpZGF0ZXMpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBkbyBub3QgaGFuZGxlIG9uQ2hhaW5SZW9yZ2FuaXphdGlvbiBmb3IgZXZlcnl0aGluZ1xuICAgICAgICAvLyBoZXJlIGFzIHdlIGRvIGZvciBvbGRlciBibG9ja3MuIHRoZSByZWFzb24gZm9yIHRoaXMgaXNcbiAgICAgICAgLy8gdGhhdCB0aGUgYmxvY2sgaXMgbm90IHlldCBzYXZlZCB0byBkaXNrLlxuICAgICAgICAvL1xuICAgICAgICAvLyBvbkNoYWluUmVvcmdhbml6YXRpb24gaXMgcnVuIG9uIGFkZEJsb2NrVG9CbG9ja2NoYWluU3VjY2Vzc1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHNwZW5kIHNoYXNobWFwXG4gICAgICAgIC8vXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxrLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuYXBwLnNoYXNobWFwLnNwZW5kX3RyYW5zYWN0aW9uKGJsay50cmFuc2FjdGlvbnNbaV0sIGJsay5ibG9jay5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFkZEJsb2NrVG9CbG9ja2NoYWluU3VjY2VzcyhibGssIHBvcywgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiwgZm9yY2UpO1xuICAgICAgICByZXR1cm47XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhlIGJsb2NrIGRvZXMgbm90IHZhbGlkYXRlLCB1bndpbmRcbiAgICAgICAgLy9cbiAgICAgICAgaWYgKGN1cnJlbnRfd2luZF9pbmRleCA9PSAwKSB7XG5cbiAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBmaXJzdCBibG9jayB3ZSBoYXZlIHRyaWVkIHRvIGFkZFxuICAgICAgICAgIC8vIGFuZCBzbyB3ZSBjYW4ganVzdCByb2xsIG91dCB0aGUgb2xkZXIgY2hhaW5cbiAgICAgICAgICAvLyBhZ2FpbiBhcyBpdCBpcyBrbm93biBnb29kLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gbm90ZSB0aGF0IG9sZCBhbmQgbmV3IGhhc2hlcyBhcmUgc3dhcHBlZFxuICAgICAgICAgIC8vIGFuZCB0aGUgb2xkIGNoYWluIGlzIHNldCBhcyBudWxsIGJlY2F1c2VcbiAgICAgICAgICAvLyB3ZSB3b24ndCBtb3ZlIGJhY2sgdG8gaXQuIHdlIGFsc28gc2V0IHRoZVxuICAgICAgICAgIC8vIHJlc2V0dGluZ19mbGFnIHRvIDEgc28gd2Uga25vdyB0byBmb3JrXG4gICAgICAgICAgLy8gaW50byBhZGRCbG9ja1RvQmxvY2tjaGFpbkZhaWx1cmVcbiAgICAgICAgICAvL1xuICAgICAgICAgIGlmIChvbGRfYmxvY2tfaGFzaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICAgICAgICBibGssXG4gICAgICAgICAgICAgIHBvcyxcbiAgICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgICAgb2xkX2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgICAgICAgbmV3X2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5GYWlsdXJlKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBmb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHdlIG5lZWQgdG8gdW53aW5kIHNvbWUgb2Ygb3VyIHByZXZpb3VzbHlcbiAgICAgICAgICAvLyBhZGRlZCBibG9ja3MgZnJvbSB0aGUgbmV3IGNoYWluLiBzbyB3ZVxuICAgICAgICAgIC8vIHN3YXAgb3VyIGhhc2hlcyB0byB3aW5kL3Vud2luZC5cbiAgICAgICAgICAvL1xuICAgICAgICAgIGxldCBjaGFpbl90b191bndpbmRfaGFzaGVzID0gW107XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHJlbW92ZSBwcmV2aW91cyBhZGRlZFxuICAgICAgICAgIC8vXG4gICAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRfd2luZF9pbmRleDsgaSA8IG5ld19ibG9ja19oYXNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNoYWluX3RvX3Vud2luZF9oYXNoZXMucHVzaChuZXdfYmxvY2tfaGFzaGVzW2ldKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHVud2luZCBORVcgYW5kIHdpbmQgT0xEIHdpdGggcmVzZXR0aW5nIGZsYWcgYWN0aXZlXG4gICAgICAgICAgLy9cbiAgICAgICAgICB0aGlzLnVud2luZENoYWluKFxuICAgICAgICAgICAgYmxrLFxuICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgIG9sZF9ibG9ja19oYXNoZXMsXG4gICAgICAgICAgICBjaGFpbl90b191bndpbmRfaGFzaGVzLFxuICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgY2hhaW5fdG9fdW53aW5kX2hhc2hlcy5sZW5ndGgsXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcblxuICAgICAgbGV0IG5ld19ibGsgPSBhd2FpdCB0aGlzLnJldHVybkJsb2NrQnlIYXNoRnJvbURpc2sodGhpc19ibG9ja19oYXNoKTtcbiAgICAgIGlmIChuZXdfYmxrID09IG51bGwpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDYyMDM5NDogYmxvY2sgZG9lcyBub3QgZXhpc3Qgb24gZGlzayB0aGF0IHNob3VsZC4gdGVybWluYXRpbmdcIik7XG5jb25zb2xlLmxvZyhcInRoaXMgYmxvY2sgaGFzaDogXCIgKyB0aGlzX2Jsb2NrX2hhc2gpO1xuY29uc29sZS5sb2coXCJORVcgQkxPQ0sgSEFTSEVTOiBcIiArIEpTT04uc3RyaW5naWZ5KG5ld19ibG9ja19oYXNoZXMpKVxuY29uc29sZS5sb2coXCJPTEQgQkxPQ0sgSEFTSEVTOiBcIiArIEpTT04uc3RyaW5naWZ5KG9sZF9ibG9ja19oYXNoZXMpKVxuICAgICAgICBwcm9jZXNzLmV4aXQoKTtcblxuICAgICAgfVxuXG4gICAgICBpZiAobmV3X2Jsay52YWxpZGF0ZSgpKSB7XG5cbiAgICAgICAgdGhpcy5vbkNoYWluUmVvcmdhbml6YXRpb24odGhpc19ibG9ja19oYXNoLCBuZXdfYmxrLmJsb2NrLmlkLCAxKTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBzcGVuZCBpbiBzaGFzaG1hcFxuICAgICAgICAvL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld19ibGsudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc2hhc2htYXAuc3BlbmRfdHJhbnNhY3Rpb24obmV3X2Jsay50cmFuc2FjdGlvbnNbaV0sIG5ld19ibGsuYmxvY2suaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRfd2luZF9pbmRleCA9PSBuZXdfYmxvY2tfaGFzaGVzLmxlbmd0aC0xKSB7XG4gICAgICAgICAgaWYgKHJlc2V0dGluZ19mbGFnID09IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5TdWNjZXNzKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBmb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5GYWlsdXJlKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBmb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICAgICAgYmxrLFxuICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgIG5ld19ibG9ja19oYXNoZXMsXG4gICAgICAgICAgICBvbGRfYmxvY2tfaGFzaGVzLFxuICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICByZXNldHRpbmdfZmxhZyxcbiAgICAgICAgICAgIGN1cnJlbnRfd2luZF9pbmRleCsxLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGlmIChjdXJyZW50X3dpbmRfaW5kZXggPT0gMCkge1xuICAgICAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICAgICAgYmxrLFxuICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgIG9sZF9ibG9ja19oYXNoZXMsIC8vIGZsaXBwZWRcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAxLCAgICAgLy8gcmVzZXQgYXMgaW52YWxpZFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICApO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHdlIG5lZWQgdG8gdW53aW5kIHNvbWUgb2Ygb3VyIHByZXZpb3VzbHlcbiAgICAgICAgICAvLyBhZGRlZCBibG9ja3MgZnJvbSB0aGUgbmV3IGNoYWluLiBzbyB3ZVxuICAgICAgICAgIC8vIHN3YXAgb3VyIGhhc2hlcyB0byB3aW5kL3Vud2luZC5cbiAgICAgICAgICAvL1xuICAgICAgICAgIGxldCBjaGFpbl90b191bndpbmRfaGFzaGVzID0gW107XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudF93aW5kX2luZGV4OyBpIDwgbmV3X2Jsb2NrX2hhc2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY2hhaW5fdG9fdW53aW5kX2hhc2hlcy5wdXNoKG5ld19ibG9ja19oYXNoZXNbaF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gdW53aW5kIE5FVyBhbmQgd2luZCBPTEQsIGFuZCBzZXQgcmVzZXR0aW5nX2ZsYWcgdG8gMVxuICAgICAgICAgIC8vXG4gICAgICAgICAgdGhpcy51bndpbmRDaGFpbihcbiAgICAgICAgICAgIGJsayxcbiAgICAgICAgICAgIHBvcyxcbiAgICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICAgICAgICBvbGRfYmxvY2tfaGFzaGVzLFxuICAgICAgICAgICAgY2hhaW5fdG9fdW53aW5kX2hhc2hlcyxcbiAgICAgICAgICAgIGZvcmNlLFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIGNoYWluX3RvX3Vud2luZF9oYXNoZXNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW53aW5kQ2hhaW4oYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIG5ld19ibG9ja19oYXNoZXMsIG9sZF9ibG9ja19oYXNoZXMsIGZvcmNlLCByZXNldHRpbmdfZmxhZywgY3VycmVudF91bndpbmRfaW5kZXgpIHtcbiAgICBpZiAob2xkX2Jsb2NrX2hhc2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAvL1xuICAgICAgLy8gbG9hZCBvbGQgYmxvY2tcbiAgICAgIC8vXG4gICAgICBsZXQgb2xkX2JsayA9IGF3YWl0IHRoaXMucmV0dXJuQmxvY2tCeUhhc2hGcm9tRGlzayhvbGRfYmxvY2tfaGFzaGVzW2N1cnJlbnRfdW53aW5kX2luZGV4XSk7XG4gICAgICBpZiAob2xkX2JsayA9PSBudWxsKSB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gcmVxdWVzdCBtaXNzaW5nIGJsb2NrXG4gICAgICAgIC8vXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNzIxMDU4OiBjYW5ub3QgZmluZCBibG9jayB0aGF0IHNob3VsZCBleGlzdCBvbiBkaXNrLi4uXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoKTtcblxuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gYmxvY2sgb3IgZGF0YSBpcyBsZWdpdCwgc28gcnVuIG9uX2NoYWluX3Jlb3JnYW5pemF0aW9uXG4gICAgICAvLyB0aGlzIHNob3VsZCB1cGRhdGUgdGhlIExDIGluZGV4IGFzIHdlbGxcbiAgICAgIHRoaXMub25DaGFpblJlb3JnYW5pemF0aW9uKG9sZF9ibGsucmV0dXJuSGFzaCgpLCBvbGRfYmxrLnJldHVybkJsb2NrSWQoKSwgMCk7XG5cbiAgICAgIC8vXG4gICAgICAvLyBubyBtb3JlIGJsb2NrcyB0byB1bndpbmRcbiAgICAgIC8vXG4gICAgICB0aGlzLndpbmRDaGFpbihcbiAgICAgICAgYmxrLFxuICAgICAgICBwb3MsXG4gICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICAgIG5ld19ibG9ja19oYXNoZXMsXG4gICAgICAgIG9sZF9ibG9ja19oYXNoZXMsXG4gICAgICAgIGZvcmNlLFxuICAgICAgICByZXNldHRpbmdfZmxhZyxcbiAgICAgICAgMFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuXG5cbiAgcmV0dXJuTGFzdFNoYXJlZEJsb2NrSWQoZm9ya19pZCwgbGF0ZXN0X2tub3duX2Jsb2NrX2lkKSB7XG5cbiAgICAvLyBpZiB0aGVyZSBpcyBubyBmb3JrX2lkIHN1Ym1pdHRlZCwgd2UgYmFja3BlZGFsIDEgYmxvY2sgdG8gYmUgc2FmZVxuICAgIGlmIChmb3JrX2lkID09IG51bGwgfHwgZm9ya19pZCA9PSBcIlwiKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGZvcmtfaWQubGVuZ3RoIDwgMikgeyBpZiAobGF0ZXN0X2tub3duX2Jsb2NrX2lkID4gMCkgeyBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAxOyB9IGVsc2UgeyByZXR1cm4gMDsgfSB9XG5cbiAgICAvLyByb2xsIGJhY2sgbGF0ZXN0IGtub3duIGJsb2NrIGlkIHRvIGtub3duIGZvcmsgSUQgbWVhc3VyZW1lbnQgcG9pbnRcbiAgICBmb3IgKGxldCB4ID0gbGF0ZXN0X2tub3duX2Jsb2NrX2lkOyB4ID49IDA7IHgtLSkge1xuICAgICAgaWYgKHgldGhpcy5mb3JrX2lkX21vZCA9PSAwKSB7XG4gICAgICAgIGxhdGVzdF9rbm93bl9ibG9ja19pZCA9IHg7XG4gICAgICAgIHggPSAtMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgb3VyX2xhdGVzdF9iaWQgPSB0aGlzLmxhc3RfYmlkO1xuXG4gICAgLy8gcm9sbCBiYWNrIHVudGlsIHdlIGhhdmUgYSBtYXRjaFxuICAgIGZvciAobGV0IGZpaSA9IDA7IGZpaSA8IChmb3JrX2lkLmxlbmd0aC8yKTsgZmlpKyspIHtcblxuICAgICAgdmFyIHBlZXJfZm9ya19pZF9wYWlyID0gZm9ya19pZC5zdWJzdHJpbmcoKDIqZmlpKSwoMipmaWkpKzIpO1xuICAgICAgdmFyIG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZDtcblxuICAgICAgaWYgKGZpaSA9PSAwKSAgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAwOyB9XG4gICAgICBpZiAoZmlpID09IDEpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDEwOyB9XG4gICAgICBpZiAoZmlpID09IDIpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDIwOyB9XG4gICAgICBpZiAoZmlpID09IDMpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDMwOyB9XG4gICAgICBpZiAoZmlpID09IDQpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDQwOyB9XG4gICAgICBpZiAoZmlpID09IDUpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDUwOyB9XG4gICAgICBpZiAoZmlpID09IDYpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDc1OyB9XG4gICAgICBpZiAoZmlpID09IDcpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDEwMDsgfVxuICAgICAgaWYgKGZpaSA9PSA4KSAgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAyMDA7IH1cbiAgICAgIGlmIChmaWkgPT0gOSkgIHsgb3VyX2ZvcmtfaWRfcGFpcl9ibG9ja2lkID0gbGF0ZXN0X2tub3duX2Jsb2NrX2lkIC0gNTAwOyB9XG4gICAgICBpZiAoZmlpID09IDEwKSB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDEwMDA7IH1cbiAgICAgIGlmIChmaWkgPT0gMTEpIHsgb3VyX2ZvcmtfaWRfcGFpcl9ibG9ja2lkID0gbGF0ZXN0X2tub3duX2Jsb2NrX2lkIC0gNTAwMDsgfVxuICAgICAgaWYgKGZpaSA9PSAxMikgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAxMDAwMDsgfVxuICAgICAgaWYgKGZpaSA9PSAxMykgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSA1MDAwMDsgfVxuXG4gICAgICBpZiAob3VyX2xhdGVzdF9iaWQgPCBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQpIHt9IGVsc2Uge1xuXG4gICAgICAgIC8vIHJldHVybiBoYXNoIGJ5IGJsb2NraWRcbiAgICAgICAgdmFyIHRtcGtsciA9IHRoaXMucmV0dXJuSGFzaEJ5QmxvY2tJZChvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQpO1xuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgbm90IGZvdW5kIGEgbWF0Y2gsIHJldHVybiAwIHNpbmNlIHdlIGhhdmVcbiAgICAgICAgLy8gaXJyZWNvbmNpbGlhYmxlIGZvcmtzLCBzbyB3ZSBqdXN0IGdpdmUgdGhlbSBldmVyeXRoaW5nXG4gICAgICAgIC8vIGluIHRoZSBleHBlY3RhdGlvbiB0aGF0IG9uZSBvZiBvdXIgZm9ya3Mgd2lsbCBldmVudHVhbGx5XG4gICAgICAgIC8vIGJlY29tZSB0aGUgbG9uZ2VzdCBjaGFpblxuICAgICAgICBpZiAodG1wa2xyID09IFwiXCIpIHsgcmV0dXJuIDA7IH1cblxuICAgICAgICB2YXIgb3VyX2ZvcmtfaWRfcGFpciA9IHRtcGtsci5zdWJzdHJpbmcoMCwgMik7XG5cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIG1hdGNoIGluIGZvcmsgSUQgYXQgYSBwb3NpdGlvbiwgdHJlYXQgdGhpc1xuICAgICAgICAvLyBhcyB0aGUgc2hhcmVkIGZvcmtJRFxuICAgICAgICBpZiAob3VyX2ZvcmtfaWRfcGFpciA9PSBwZWVyX2ZvcmtfaWRfcGFpcikge1xuICAgICAgICAgIHJldHVybiBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuXG5cblxuICByZXR1cm5Mb25nZXN0Q2hhaW5JbmRleFBvc0FycmF5KGNoYWlubGVuZ3RoPTEwKSB7XG5cbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID09IDApIHsgcmV0dXJuIFtdOyB9XG4gICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aCA8IGNoYWlubGVuZ3RoKSB7IGNoYWlubGVuZ3RoID0gdGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoOyB9XG4gICAgaWYgKGNoYWlubGVuZ3RoID09IDApIHsgcmV0dXJuIFtdOyB9XG5cbiAgICB2YXIgYmNoYWluSW5kZXggPSBbXTtcbiAgICB2YXIgY2hhaW5fcG9zID0gdGhpcy5sY19wb3M7XG5cbiAgICBiY2hhaW5JbmRleC5wdXNoKGNoYWluX3Bvcyk7XG5cbiAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGNoYWlubGVuZ3RoOyB6KyspIHtcblxuICAgICAgdmFyIHByZXZfcG9zID0gY2hhaW5fcG9zLTE7XG4gICAgICB2YXIgcHJldl9mb3VuZCA9IDA7XG5cbiAgICAgIGlmIChwcmV2X3BvcyA9PSAtMSkge1xuICAgICAgICB6ID0gY2hhaW5sZW5ndGgrMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlIChwcmV2X3BvcyA+PSAwICYmIHByZXZfZm91bmQgPT0gMCkge1xuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1twcmV2X3Bvc10ucmV0dXJuSGFzaCgpID09IHRoaXMuaW5kZXguYmxvY2tzW2NoYWluX3Bvc10uYmxvY2sucHJldmJzaCkge1xuICAgICAgICAgICAgYmNoYWluSW5kZXgucHVzaChwcmV2X3Bvcyk7XG4gICAgICAgICAgICBwcmV2X2ZvdW5kID0gMTtcbiAgICAgICAgICAgIGNoYWluX3BvcyA9IHByZXZfcG9zO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmV2X3Bvcy0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYmNoYWluSW5kZXg7XG4gIH1cblxuXG5cbiAgdXBkYXRlRm9ya0lkKGJsaykge1xuXG4gICAgaWYgKGJsayA9PSBudWxsKSB7IHJldHVybiB0aGlzLmZvcmtfaWQ7IH1cblxuICAgIGxldCBiYXNlX2JpZFx0PSBibGsuYmxvY2suaWQ7XG4gICAgbGV0IGZvcmtfaWQgICA9IFwiXCI7XG4gICAgbGV0IGluZGV4cG9zICA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aC0xO1xuXG4gICAgLy9cbiAgICAvLyByb2xsIGJhY2sgdG8gY29uc2Vuc3VzIHN0YXJ0aW5nIHBvaW50IGZvciBtZWFzdXJpbmdcbiAgICAvL1xuICAgIGZvciAobGV0IHggPSBiYXNlX2JpZDsgeCA+PSAwOyB4LS0pIHtcbiAgICAgIGlmICh4JXRoaXMuZm9ya19pZF9tb2QgPT0gMCkge1xuICAgICAgICBiYXNlX2JpZCA9IHg7XG4gICAgICAgIHggPSAtMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMCwgc3RvcCA9IDA7IHN0b3AgPT0gMCAmJiBpIDwgdGhpcy5nZW5lc2lzX3BlcmlvZDspIHtcblxuICAgICAgbGV0IGNoZWNrcG9pbnRibGtpZCA9IGJhc2VfYmlkLWk7XG4gICAgICBpbmRleHBvcyA9IHRoaXMucmV0dXJuTG9uZ2VzdENoYWluSW5kZXhBcnJheShjaGVja3BvaW50YmxraWQsIGluZGV4cG9zKTtcblxuICAgICAgaWYgKGluZGV4cG9zID09IC0xIHx8IGNoZWNrcG9pbnRibGtpZCA8IDApIHsgc3RvcCA9IDE7IH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgdGggPSB0aGlzLmluZGV4Lmhhc2hbaW5kZXhwb3NdO1xuICAgICAgICBmb3JrX2lkICs9IHRoLnN1YnN0cmluZygwLDIpO1xuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gaWYgdGhpcyBpcyBlZGl0ZWQsIHdlIGhhdmUgdG9cbiAgICAgIC8vIGFsc28gY2hhbmdlIHRoZSBmdW5jdGlvblxuICAgICAgLy9cbiAgICAgIC8vIC0gcmV0dXJuTGFzdFNoYXJlZEJsb2NrSWRcbiAgICAgIC8vXG4gICAgICBpZiAoaSA9PSAxMDAwMCkgeyBpID0gNTAwMDA7IH1cbiAgICAgIGlmIChpID09IDUwMDApICB7IGkgPSAxMDAwMDsgfVxuICAgICAgaWYgKGkgPT0gMTAwMCkgIHsgaSA9IDUwMDA7IH1cbiAgICAgIGlmIChpID09IDUwMCkgICB7IGkgPSAxMDAwOyB9XG4gICAgICBpZiAoaSA9PSAyMDApICAgeyBpID0gNTAwOyB9XG4gICAgICBpZiAoaSA9PSAxMDApICAgeyBpID0gMjAwOyB9XG4gICAgICBpZiAoaSA9PSA3NSkgICAgeyBpID0gMTAwOyB9XG4gICAgICBpZiAoaSA9PSA1MCkgICAgeyBpID0gNzU7IH1cbiAgICAgIGlmIChpID09IDQwKSAgICB7IGkgPSA1MDsgfVxuICAgICAgaWYgKGkgPT0gMzApICAgIHsgaSA9IDQwOyB9XG4gICAgICBpZiAoaSA9PSAyMCkgICAgeyBpID0gMzA7IH1cbiAgICAgIGlmIChpID09IDEwKSAgICB7IGkgPSAyMDsgfVxuICAgICAgaWYgKGkgPT0gMCkgICAgIHsgaSA9IDEwOyB9XG5cbiAgICAgIGlmIChpID4gdGhpcy5nZW5lc2lzX3BlcmlvZCB8fCBpID09IDUwMDAwKSB7IHN0b3AgPSAxOyB9XG5cbiAgICB9XG5cbiAgICB0aGlzLmZvcmtfaWQgPSBmb3JrX2lkO1xuXG4gIH1cblxuICBhc3luYyBhZGRCbG9ja1RvQmxvY2tjaGFpblN1Y2Nlc3MoYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIGZvcmNlPWZhbHNlKSB7XG5cbiAgICAvL1xuICAgIC8vIHNhdmUgYmxvY2sgdG8gZGlza1xuICAgIC8vXG4gICAgYXdhaXQgdGhpcy5hcHAuc3RvcmFnZS5zYXZlQmxvY2soYmxrLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluKTtcblxuXG4gICAgLy9cbiAgICAvLyByZW9yZ2FuaXplIFRISVMgYmxvY2tcbiAgICAvL1xuICAgIGlmIChpX2FtX3RoZV9sb25nZXN0X2NoYWluID09IDEpIHtcblxuICAgICAgdGhpcy5hcHAud2FsbGV0LnJlc2V0RXhpc3RpbmdTbGlwcyhibGsuYmxvY2suaWQsIGJsay5yZXR1cm5IYXNoKCksIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4pO1xuICAgICAgdGhpcy5ic2hfbGNfaG1hcFtibGsucmV0dXJuSGFzaCgpXSA9IDE7XG4gICAgICB0aGlzLmJpZF9ic2hfaG1hcFtibGsuYmxvY2suaWRdID0gYmxrLnJldHVybkhhc2goKTtcblxuICAgICAgdGhpcy5sY19wb3Nfc2V0XHQ9IHRydWU7XG4gICAgICB0aGlzLmxjX3BvcyBcdD0gcG9zO1xuXG4gICAgICB0aGlzLnNhdmVCbG9ja2NoYWluKGJsayk7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBtb3ZlZCB0byBzdWJzZXF1ZW50IHByb2Nlc3NpbmdcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgbW9kdWxlcyAod2l0aCBzeW5jIGluZm8pID9cbiAgICAvL1xuICAgIC8vdGhpcy5hcHAubW9kdWxlcy51cGRhdGVCbG9ja2NoYWluU3luYyhibGsuYmxvY2suaWQsIHRoaXMucmV0dXJuVGFyZ2V0QmxvY2tJZCgpKTtcblxuICAgIHRoaXMuc2F2ZUJsb2NrY2hhaW4oKTtcblxuICAgIC8vXG4gICAgLy8gY2xlYW51cFxuICAgIC8vXG4gICAgdGhpcy5hcHAubWVtcG9vbC5yZW1vdmVCbG9ja0FuZFRyYW5zYWN0aW9ucyhibGspO1xuXG4gICAgLy9cbiAgICAvLyBwcm9wYWdhdGUgYmxvY2tcbiAgICAvL1xuICAgIHRoaXMuYXBwLm5ldHdvcmsucHJvcGFnYXRlQmxvY2soYmxrKTtcblxuICAgIGlmICghZm9yY2UpIHtcblxuICAgICAgLy9cbiAgICAgIC8vIHdhbGxldCBwcm9jZXNzIHNsaXBzIChpZiBub24gZm9yY2VkKVxuICAgICAgLy9cbiAgICAgIHRoaXMuYXBwLndhbGxldC5wcm9jZXNzUGF5bWVudHMoYmxrLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluKTtcblxuICAgICAgLy9cbiAgICAgIC8vIHBhc3MgY29udHJvbCB0byB0aGUgY2FsbGJhY2sgbWFuYWdlclxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLnJ1bl9jYWxsYmFja3MgPT0gMSkge1xuXG4gICAgICAgIGJsay5hZmZpeENhbGxiYWNrcygwKTtcblxuICAgICAgICBpZiAoaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiA9PSAxICYmICFmb3JjZSkge1xuXG4gICAgICAgICAgbGV0IG91cl9sb25nZXN0X2NoYWluID0gdGhpcy5yZXR1cm5Mb25nZXN0Q2hhaW5JbmRleFBvc0FycmF5KHRoaXMuY2FsbGJhY2tfbGltaXQpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3VyX2xvbmdlc3RfY2hhaW4ubGVuZ3RoICYmIGkgPCB0aGlzLmNhbGxiYWNrX2xpbWl0OyBpKyspIHtcblxuXHQgICAgLy9cblx0ICAgIC8vIHJ1biBjYWxsYmFja3Mgd2l0aCBUWFNcblx0ICAgIC8vXG4gICAgICAgICAgICBsZXQgYmxrID0gdGhpcy5pbmRleC5ibG9ja3Nbb3VyX2xvbmdlc3RfY2hhaW5baV1dO1xuICAgICAgICAgICAgaWYgKGJsayAhPSBudWxsKSB7XG5cbi8vICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGJsay5ydW5DYWxsYmFja3MoaSk7XG4vLyAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4vL1x0ICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MTIwOTogZXJyb3IgcnVubmluZyBjYWxsYmFja3MgXCIgKyBlcnIpO1xuLy9cdCAgICAgIH1cbiAgICBcdCAgICB9XG4gIFx0ICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gcGVybWl0IGFkZGl0aW9uIG9mIG5leHQgYmxvY2tcbiAgICAvL1xuICAgIHRoaXMuaW5kZXhpbmdfYWN0aXZlID0gMDtcblxuXG4gICAgaWYgKCFmb3JjZSkge1xuICAgICAgdGhpcy5hcHAubWluZXIuc3RhcnRNaW5pbmcoYmxrKTtcbiAgICB9XG5cbiAgfVxuXG5cblxuICBhc3luYyBhZGRCbG9ja1RvQmxvY2tjaGFpbkZhaWx1cmUoYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIGZvcmNlPW5vKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcIkZBSUxVUkUgQURESU5HIEJMT0NLOiBcIiArIGJsay5yZXR1cm5IYXNoKCkgKyBcIiAtLSBcIiArIHBvcyArIFwiIC0tIFwiICsgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbik7XG4gICAgLy9cbiAgICAvLyByZXN0b3JlIGxvbmdlc3QgY2hhaW5cbiAgICAvL1xuICAgIHRoaXMubGNfcG9zID0gdGhpcy5sYXN0X2xjX3BvcztcblxuICAgIHRoaXMub25DaGFpblJlb3JnYW5pemF0aW9uKGJsay5yZXR1cm5IYXNoKCksIGJsay5ibG9jay5pZCwgMCk7XG5cbiAgICBkZWxldGUgdGhpcy5ic2hfbGNfaG1hcFtibGsucmV0dXJuSGFzaCgpXTtcbiAgICBkZWxldGUgdGhpcy5ic2hfYmlkX2htYXBbYmxrLnJldHVybkhhc2goKV07XG4gICAgZGVsZXRlIHRoaXMuYnNoX3RzX2htYXBbYmxrLnJldHVybkhhc2goKV07XG5cblxuICAgIC8vIHJlc2V0IG1pbmVyXG4gICAgdGhpcy5hcHAubWluZXIuc3RvcE1pbmluZygpO1xuICAgIGxldCBvbGRibGsgPSB0aGlzLnJldHVybkxhdGVzdEJsb2NrKCk7XG4gICAgaWYgKG9sZGJsayAhPSBudWxsKSB7XG4gICAgICB0aGlzLmFwcC5taW5lci5zdGFydE1pbmluZyhvbGRibGspO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gcmVtb3ZlIGJhZCBldmVyeXRoaW5nXG4gICAgLy9cbiAgICB0aGlzLmFwcC5tZW1wb29sLnJlbW92ZUJsb2NrQW5kVHJhbnNhY3Rpb25zKGJsayk7XG5cbiAgICAvL1xuICAgIC8vIHJlc3VtZSBub3JtYWwgb3BlcmF0aW9uc1xuICAgIC8vXG4gICAgdGhpcy5pbmRleGluZ19hY3RpdmUgPSAwO1xuICAgIHJldHVybiAxO1xuXG4gIH1cblxuXG5cblxuXG4gIGJpbmFyeUluc2VydChsaXN0LCBpdGVtLCBjb21wYXJlLCBzZWFyY2gpIHtcblxuICAgIHZhciBzdGFydCA9IDA7XG4gICAgdmFyIGVuZCA9IGxpc3QubGVuZ3RoO1xuXG4gICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG5cbiAgICAgIHZhciBwb3MgPSAoc3RhcnQgKyBlbmQpID4+IDE7XG4gICAgICB2YXIgY21wID0gY29tcGFyZShpdGVtLCBsaXN0W3Bvc10pO1xuXG4gICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgIHN0YXJ0ID0gcG9zO1xuICAgICAgICBlbmQgPSBwb3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChjbXAgPCAwKSB7XG4gICAgICAgIGVuZCA9IHBvcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0ID0gcG9zICsgMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXNlYXJjaCkgeyBsaXN0LnNwbGljZShzdGFydCwgMCwgaXRlbSk7IH1cblxuICAgIHJldHVybiBzdGFydDtcbiAgfVxuXG5cbiAgb25DaGFpblJlb3JnYW5pemF0aW9uKGJzaCwgYmlkLCBsYykge1xuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgaGFzaG1hcCB2YWx1ZXNcbiAgICAvL1xuICAgIHRoaXMuYnNoX2xjX2htYXBbYnNoXSA9IGxjO1xuICAgIGlmIChsYyA9PSAwKSB7XG4gICAgICBkZWxldGUgdGhpcy5iaWRfYnNoX2htYXBbYmlkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5iaWRfYnNoX2htYXBbYmlkXSA9IGJzaDtcbiAgICB9XG5cbiAgfVxuXG4gIGlzSGFzaEluZGV4ZWQoaGFzaCkge1xuICAgIGlmICh0aGlzLmJzaF9iaWRfaG1hcFtoYXNoXSA+IDApIHsgcmV0dXJuIHRydWU7IH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm5MYXRlc3RCbG9jaygpIHtcbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID09IDApIHsgcmV0dXJuIG51bGw7IH1cbiAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdO1xuICB9XG5cbiAgcmV0dXJuTGF0ZXN0QmxvY2tIYXNoKCkge1xuICAgIGxldCBibGsgPSB0aGlzLnJldHVybkxhdGVzdEJsb2NrKCk7XG4gICAgaWYgKGJsayA9PSBudWxsKSB7IHJldHVybiBcIlwiOyB9XG4gICAgcmV0dXJuIGJsay5yZXR1cm5IYXNoKCk7XG4gIH1cblxuICByZXR1cm5MYXRlc3RCbG9ja1RpbWVzdGFtcCgpIHtcbiAgICBsZXQgYmxrID0gdGhpcy5yZXR1cm5MYXRlc3RCbG9jaygpO1xuICAgIGlmIChibGsgPT0gbnVsbCkgeyByZXR1cm4gMDsgfVxuICAgIGlmIChibGsuYmxvY2sgPT0gbnVsbCkgeyByZXR1cm4gMDsgfVxuICAgIHJldHVybiBibGsuYmxvY2sudHM7XG4gIH1cblxuXG5cbiAgcmV0dXJuQmxvY2tCeUhhc2goaGFzaCkge1xuICAgIGlmICh0aGlzLmlzSGFzaEluZGV4ZWQoaGFzaCkpIHtcbiAgICAgIGZvciAobGV0IHYgPSB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGgtMTsgdiA+PSAwOyB2LS0gKSB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t2XS5yZXR1cm5IYXNoKCkgPT0gaGFzaCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmJsb2Nrc1t2XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJldHVybkJsb2NrQnlIYXNoRnJvbURpc2soaGFzaCkge1xuICAgIGlmICh0aGlzLmlzSGFzaEluZGV4ZWQoaGFzaCkpIHtcbiAgICAgIGZvciAobGV0IHYgPSB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGgtMTsgdiA+PSAwOyB2LS0gKSB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t2XS5yZXR1cm5IYXNoKCkgPT0gaGFzaCkge1xuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t2XS50cmFuc2FjdGlvbnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja0J5SGFzaChoYXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyByZXR1cm5CbG9ja0J5SWQoYmlkLCBtb2RlPTApIHtcblxuICAgIC8vXG4gICAgLy8gbW9kZVxuICAgIC8vXG4gICAgLy8gMCAtLSBmZXRjaCBibG9jayBmcm9tIG1lbW9yeSAvIHR4cyBub3QgbmVlZGVkXG4gICAgLy8gMSAtLSByZXF1aXJlIHRyYW5zYWN0aW9uc1xuICAgIC8vXG4gICAgbGV0IGhhc2ggPSB0aGlzLmJpZF9ic2hfaG1hcFtiaWRdO1xuICAgIGlmIChoYXNoID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbnVsbDsgfVxuXG4gICAgaWYgKHRoaXMuaXNIYXNoSW5kZXhlZChoYXNoKSkge1xuICAgICAgZm9yIChsZXQgdiA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aC0xOyB2ID49IDA7IHYtLSApIHtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzW3ZdLnJldHVybkhhc2goKSA9PSBoYXNoKSB7XG4gICAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmJsb2Nrc1t2XTtcbiAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzW3ZdLnRyYW5zYWN0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja0J5SGFzaChoYXNoKTtcblx0ICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3Nbdl07XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3Nbdl07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuTWluVHhJZCgpIHtcbiAgICBpZiAodGhpcy5sY19wb3MgPT0gbnVsbCkgeyByZXR1cm4gMDsgfVxuICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t0aGlzLmxjX3Bvc10ubWludHhpZCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIDA7IH1cbiAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdLm1heHR4aWQ7XG4gIH1cblxuICByZXR1cm5NYXhUeElkKCkge1xuICAgIGlmICh0aGlzLmxjX3BvcyA9PSBudWxsKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGNfcG9zXS5tYXh0eGlkID09IHVuZGVmaW5lZCkgeyByZXR1cm4gMDsgfVxuICAgIHJldHVybiB0aGlzLmluZGV4LmJsb2Nrc1t0aGlzLmxjX3Bvc10ubWF4dHhpZDtcbiAgfVxuXG4gIHJldHVybk1pblR4SWQoKSB7XG4gICAgaWYgKHRoaXMubGNfcG9zID09IG51bGwpIHsgcmV0dXJuIDA7IH1cbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdLm1pbnR4aWQgPT0gdW5kZWZpbmVkKSB7IHJldHVybiAwOyB9XG4gICAgcmV0dXJuIHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGNfcG9zXS5tYXh0eGlkO1xuICB9XG5cblxuICBzYXZlQmxvY2tjaGFpbihibGspIHtcblxuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbik7XG5cbiAgICBpZiAoYmxrID09IG51bGwpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmxhc3RfYnNoID0gYmxrLnJldHVybkhhc2goKTtcbiAgICB0aGlzLmxhc3RfYmlkID0gYmxrLmJsb2NrLmlkO1xuICAgIHRoaXMubGFzdF90cyAgPSBibGsuYmxvY2sudHM7XG4gICAgdGhpcy5sYXN0X2JmICA9IGJsay5ibG9jay5iZjtcblxuICAgIC8vXG4gICAgLy8gcHVyZ2UgdW5uZWNlc3NhcnkgZGF0YVxuICAgIC8vXG5cbiAgICAvL1xuICAgIC8vIHNlbGVjdGl2ZSB1cGRhdGVzXG4gICAgLy9cbiAgICBpZiAoYmxrLmJsb2NrLmlkJXRoaXMuZm9ya19pZF9tb2QgPT0gMCkge1xuICAgICAgdGhpcy5mb3JrX2lkICA9IHRoaXMudXBkYXRlRm9ya0lkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYnNoXHRcdD0gdGhpcy5sYXN0X2JzaDtcbiAgICB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubGFzdF9iaWRcdFx0PSB0aGlzLmxhc3RfYmlkO1xuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5sYXN0X3RzXHRcdFx0PSB0aGlzLmxhc3RfdHM7XG4gICAgdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYmZcdFx0XHQ9IHRoaXMubGFzdF9iZjtcblxuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX3RzXHRcdD0gdGhpcy5nZW5lc2lzX3RzO1xuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX2JpZFx0XHQ9IHRoaXMuZ2VuZXNpc19iaWQ7XG4gICAgdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kXHRcdD0gdGhpcy5nZW5lc2lzX3BlcmlvZDtcbiAgICB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfdHNcdD0gdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV90cztcbiAgICB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfYnNoXHQ9IHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYnNoO1xuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5sb3dlc3RfYWNjZXB0YWJsZV9iaWRcdD0gdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV9iaWQ7XG5cbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gQmxvY2tjaGFpbjtcblxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFDQTtBQUNBOzs7O0FBSUE7Ozs7O0FBQ0E7QUFDQTs7OztBQUlBOzs7OztBQUNBO0FBQ0E7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7Ozs7QUFFQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOzs7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7OztBQUdBOzs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7Ozs7OztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQVVBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBRUE7Ozs7Ozs7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7QUFFQTtBQUNBOztBQURBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7O0FBT0E7Ozs7O0FBWUE7Ozs7O0FBQ0E7Ozs7O0FBWUE7QUFDQTs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7Ozs7Ozs7O0FBaUJBO0FBQ0E7O0FBREE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7Ozs7OztBQUNBO0FBQ0E7Ozs7OztBQUVBO0FBQ0E7Ozs7Ozs7OztBQUdBOzs7Ozs7OztBQWNBO0FBQ0E7QUFLQTtBQUdBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFVQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBOzs7Ozs7QUFDQTs7Ozs7O0FBSUE7QUFDQTs7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUlBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFFQTs7Ozs7Ozs7Ozs7QUFBQTs7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7O0FBREE7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7QUFHQTtBQUNBOztBQVZBOzs7OztBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0E7Ozs7Ozs7O0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBOzs7Ozs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQURBOzs7OztBQUNBOzs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7OztBQUpBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBOzs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFBQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBREE7Ozs7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQVpBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/saito/blockchain.js\n");
---
> eval("/* WEBPACK VAR INJECTION */(function(process) {function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nvar saito = __webpack_require__(/*! ./saito */ \"./lib/saito/saito.js\"); // const Big      = require('big.js');\n\n\nvar Blockchain =\n/*#__PURE__*/\nfunction () {\n  function Blockchain(app) {\n    _classCallCheck(this, Blockchain);\n\n    this.app = app || {***REMOVED***;\n    this.index = {***REMOVED***;\n    this.index.blocks = [];\n    this.bsh_lc_hmap = [];\n    this.bsh_bid_hmap = [];\n    this.bid_bsh_hmap = [];\n    this.bsh_ts_hmap = [];\n    this.lc_pos_set = false;\n    this.lc_pos = 0;\n    this.last_lc_pos = 0;\n    this.run_callbacks = 1;\n    this.callback_limit = 50;\n    this.fork_id = \"\";\n    this.fork_id_mod = 10; // regenerate every N blocks\n\n    this.genesis_ts = 0;\n    this.genesis_bid = 0; //this.genesis_period       \t= 100000;\n\n    this.genesis_period = 6;\n    this.last_bsh = \"\";\n    this.last_bid = 0;\n    this.last_ts = 0;\n    this.last_bf = 0.0;\n    this.lowest_acceptable_ts = 0;\n    this.lowest_acceptable_bsh = \"\";\n    this.lowest_acceptable_bid = 0;\n    this.indexing_active = 0;\n    return this;\n  ***REMOVED***\n\n  _createClass(Blockchain, [{\n    key: \"addBlockToBlockchain\",\n    value: function () {\n      var _addBlockToBlockchain = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(blk) {\n        var force,\n            pos,\n            i_am_the_longest_chain,\n            shared_ancestor_pos,\n            shared_ancestor_pos_found,\n            lblk,\n            nblk,\n            lchain_pos,\n            nchain_pos,\n            lchain_len,\n            nchain_len,\n            lchain_bf,\n            nchain_bf,\n            lchain_ts,\n            nchain_ts,\n            lchain_prevbsh,\n            nchain_prevbsh,\n            search_pos,\n            search_bf,\n            search_ts,\n            search_bsh,\n            search_prevbsh,\n            sblk,\n            _h,\n            new_hash_to_hunt_for,\n            old_hash_to_hunt_for,\n            new_block_hashes,\n            old_block_hashes,\n            min_block_idx,\n            max_block_idx,\n            i,\n            _min_block_idx,\n            _max_block_idx,\n            _i,\n            _args = arguments;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                force = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n                console.log(\"\\n\\n ... adding block \" + blk.block.id + \": \" + blk.returnHash());\n                this.indexing_active = 1; ///////////////////\n        ***REMOVED*** SANITY CHECKS //\n        ***REMOVED***/////////////////\n\n                if (!(blk.is_valid == 0)) {\n                  _context.next = 7;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 178234: block is not valid when adding to chain. terminating...\");\n                this.indexing_active = 0;\n                return _context.abrupt(\"return\");\n\n              case 7:\n                if (!(blk.block.ts < this.genesis_ts || blk.block.id < this.genesis_bid)) {\n                  _context.next = 11;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 792837: block id precedes genesis period. terminating...\");\n                this.indexing_active = 0;\n                return _context.abrupt(\"return\");\n\n              case 11:\n                if (!this.isHashIndexed(blk.returnHash())) {\n                  _context.next = 15;\n                  break;\n            ***REMOVED***\n\n                console.log(\"ERROR 582039: blockchain already contains this block hash. terminating...\");\n                this.indexing_active = 0;\n                return _context.abrupt(\"return\");\n\n              case 15:\n        ***REMOVED***\n        ***REMOVED*** create reference for previous lc\n        ***REMOVED***\n                this.last_lc_pos = this.lc_pos; //\n        ***REMOVED*** previous block not indexed, but acceptable\n        ***REMOVED***\n\n                if (blk.block.ts < this.lowest_acceptable_ts) {\n                  this.lowest_acceptable_ts = blk.block.ts;\n            ***REMOVED*** //\n        ***REMOVED*** track first block\n        ***REMOVED***\n        ***REMOVED*** if we are adding our first block, we set this as our lowest\n        ***REMOVED*** acceptable ts to avoid requesting earlier blocks ad infinitum\n        ***REMOVED*** into the past.\n        ***REMOVED***\n        ***REMOVED*** lowest acceptable bid must be updated so that we know the\n        ***REMOVED*** earliest block we need to worry about when handling full slip\n        ***REMOVED*** validation.\n        ***REMOVED***\n\n\n                if (this.lowest_acceptable_ts == 0) {\n                  this.lowest_acceptable_bid = blk.block.id;\n                  this.lowest_acceptable_bsh = blk.returnHash(); //\n          ***REMOVED*** !!!!!!!!!!!! BLOCK !!!!!!!!!!!!\n          ***REMOVED***\n          ***REMOVED***if (this.app.options.blockchain != null) {\n\n                  this.lowest_acceptable_ts = this.last_ts; //***REMOVED***\n\n                  if (this.lowest_acceptable_ts == 0) {\n                    this.lowest_acceptable_ts = blk.block.ts;\n              ***REMOVED***\n            ***REMOVED*** else {\n                  if (this.lowest_acceptable_ts > blk.block.ts) {\n                    if (!force) {\n                      this.lowest_acceptable_ts = blk.block.ts;\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** fetch missing blocks\n        ***REMOVED***\n\n\n                if (blk.block.ts > this.lowest_acceptable_ts) {\n                  if (!this.isHashIndexed(blk.block.prevbsh)) {\n                    if (this.lc_pos_set == true) {\n                      if (blk.block.id > this.index.blocks[this.lc_pos].bid - this.genesis_period) {\n                ***REMOVED***\n                ***REMOVED*** TODO\n                ***REMOVED***\n                ***REMOVED*** send request for missing block\n                ***REMOVED***\n                        console.log(\"ERROR 148019: missing block\");\n                        process.exit();\n                  ***REMOVED***\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED*** ////////////////////\n        ***REMOVED*** insert indexes //\n        ***REMOVED***//////////////////\n\n\n                pos = this.binaryInsert(this.index.blocks, blk, function (a, b) {\n                  return a.block.ts - b.block.ts;\n            ***REMOVED***);\n                this.bsh_bid_hmap[blk.returnHash()] = blk.block.id;\n                this.bsh_ts_hmap[blk.returnHash()] = blk.block.ts;\n                this.index.blocks[pos] = blk; ////////////////////////////\n        ***REMOVED*** identify longest chain //\n        ***REMOVED***//////////////////////////\n\n                i_am_the_longest_chain = 0;\n                shared_ancestor_pos = 0;\n                shared_ancestor_pos_found = false;\n\n                if (this.index.blocks.length == 1) {\n                  i_am_the_longest_chain = 1;\n                  this.lc_pos = pos;\n                  this.last_bsh = blk.returnHash();\n                  this.last_bid = blk.block.id;\n                  this.last_bf = blk.block.bf;\n                  this.last_ts = blk.block.ts;\n            ***REMOVED***\n\n                if (this.last_bsh == blk.block.prevbsh && this.index.blocks.length > 1) {\n          ***REMOVED***\n          ***REMOVED*** last block is longest chain\n          ***REMOVED***\n                  if (this.bsh_lc_hmap[this.last_bsh] == 1) {\n                    i_am_the_longest_chain = 1;\n                    shared_ancestor_pos = this.last_lc_pos;\n              ***REMOVED***\n            ***REMOVED*** //\n        ***REMOVED*** trace back to find shared ancestor\n        ***REMOVED***\n\n\n                if (!(i_am_the_longest_chain == 0)) {\n                  _context.next = 86;\n                  break;\n            ***REMOVED***\n\n                if (!(blk.block.id >= this.index.blocks[this.lc_pos].block.id)) {\n                  _context.next = 84;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** find the last shared ancestor\n        ***REMOVED***\n                lblk = this.index.blocks[this.lc_pos];\n                nblk = this.index.blocks[pos];\n\n                if (blk.block.id == lblk.block.id) {\n                  i_am_the_longest_chain = 1;\n            ***REMOVED***\n\n                if (!(blk.block.prevbsh == lblk.block.bsh)) {\n                  _context.next = 37;\n                  break;\n            ***REMOVED***\n\n                i_am_the_longest_chain = 1;\n                _context.next = 82;\n                break;\n\n              case 37:\n                lchain_pos = this.lc_pos;\n                nchain_pos = pos;\n                lchain_len = 0;\n                nchain_len = 0;\n                lchain_bf = lblk.block.bf;\n                nchain_bf = nblk.block.bf;\n                lchain_ts = lblk.block.ts;\n                nchain_ts = nblk.block.ts;\n                lchain_prevbsh = lblk.block.prevbsh;\n                nchain_prevbsh = nblk.block.prevbsh;\n                search_pos = null;\n                search_bf = null;\n                search_ts = null;\n                search_bsh = null;\n                search_prevbsh = null;\n\n                if (nchain_ts >= lchain_ts) {\n                  search_pos = nchain_pos - 1;\n            ***REMOVED*** else {\n                  search_pos = lchain_pos - 1;\n            ***REMOVED***\n\n              case 53:\n                if (!(search_pos >= 0)) {\n                  _context.next = 81;\n                  break;\n            ***REMOVED***\n\n                sblk = this.index.blocks[search_pos];\n                search_ts = sblk.block.ts;\n                search_bf = sblk.block.bf;\n                search_bsh = sblk.block.bsh;\n                search_prevbsh = sblk.block.prevbsh; //\n        ***REMOVED*** hey look, it's the common ancestor!\n        ***REMOVED***\n\n                if (!(search_bsh == lchain_prevbsh && search_bsh == nchain_prevbsh)) {\n                  _context.next = 65;\n                  break;\n            ***REMOVED***\n\n                shared_ancestor_pos_found = true;\n                shared_ancestor_pos = search_pos;\n                search_pos = -1; //\n        ***REMOVED*** keep looking\n        ***REMOVED***\n\n                _context.next = 79;\n                break;\n\n              case 65:\n                if (search_bsh == lchain_prevbsh) {\n                  lchain_len++;\n                  lchain_prevbsh = this.index.blocks[search_pos].block.prevbsh;\n                  lchain_bf = parseFloat(lchain_bf) + parseFloat(this.index.blocks[search_pos].returnBurnFeeValue());\n            ***REMOVED***\n\n                if (search_bsh == nchain_prevbsh) {\n                  nchain_prevbsh = this.index.blocks[search_pos].block.prevbsh;\n                  nchain_len++;\n                  nchain_bf = parseFloat(lchain_bf) + parseFloat(this.index.blocks[search_pos].returnBurnFeeValue());\n            ***REMOVED***\n\n                shared_ancestor_pos = search_pos;\n                search_pos--; //\n        ***REMOVED*** new chain completely disconnected\n        ***REMOVED***\n\n                if (!(shared_ancestor_pos == 1)) {\n                  _context.next = 74;\n                  break;\n            ***REMOVED***\n\n                if (!(nchain_prevbsh == \"\")) {\n                  _context.next = 74;\n                  break;\n            ***REMOVED***\n\n                _context.next = 73;\n                return this.addBlockToBlockchainSuccess(blk, pos, 0);\n\n              case 73:\n                return _context.abrupt(\"return\");\n\n              case 74:\n                if (!(shared_ancestor_pos == 0)) {\n                  _context.next = 79;\n                  break;\n            ***REMOVED***\n\n                if (!(nchain_prevbsh != lchain_prevbsh)) {\n                  _context.next = 79;\n                  break;\n            ***REMOVED***\n\n                _context.next = 78;\n                return this.addBlockToBlockchainSuccess(blk, pos, 0);\n\n              case 78:\n                return _context.abrupt(\"return\");\n\n              case 79:\n                _context.next = 53;\n                break;\n\n              case 81:\n        ***REMOVED***\n        ***REMOVED*** longest chain if more routing AND burning work\n        ***REMOVED***\n                if (nchain_len > lchain_len && nchain_bf >= lchain_bf && shared_ancestor_pos_found == true) {\n                  i_am_the_longest_chain = 1;\n            ***REMOVED***\n\n              case 82:\n                _context.next = 86;\n                break;\n\n              case 84:\n                console.log(\"edge case with unordered blocks...\"); //\n        ***REMOVED*** this catches an edge case that happens if we ask for blocks starting from\n        ***REMOVED*** id = 132, but the first block we RECEIVE is a later block in that chain,\n        ***REMOVED*** such as 135 or so.\n        ***REMOVED***\n        ***REMOVED*** in this case our blockchain class will treat the first block as the starting\n        ***REMOVED*** point and we run into issues unless we explicitly reset the blockchain to\n        ***REMOVED*** treat block 132 as the proper first block.\n        ***REMOVED***\n        ***REMOVED*** so we reset this to our first block and mark it as part of the longest chain\n        ***REMOVED*** the network will figure this out in time as further blocks build on it.\n        ***REMOVED***\n\n                if (blk.block.prevbsh == this.last_bsh && blk.block.prevbsh != \"\") {\n          ***REMOVED***\n          ***REMOVED*** reset later blocks\n          ***REMOVED***\n                  for (_h = pos + 1; _h < this.index.blocks.length; _h++) {\n                    this.bsh_lc_hmap[this.index.blocks[_h].block.bsh] = i_am_the_longest_chain;\n              ***REMOVED*** //\n          ***REMOVED*** onChainReorganization\n          ***REMOVED***\n\n\n                  this.onChainReorganization(this.index.blocks[h].block.id, this.index.blocks[h].returnHash(), 0);\n                  i_am_the_longest_chain = 1;\n            ***REMOVED***\n\n              case 86:\n        ***REMOVED***\n        ***REMOVED*** insert into LC hashmap\n        ***REMOVED***\n                this.bsh_lc_hmap[this.index.blocks[pos].bsh] = i_am_the_longest_chain; //\n        ***REMOVED*** update blockchain state variables depending\n        ***REMOVED***\n\n                if (i_am_the_longest_chain == 1) {\n                  this.last_bsh = this.index.blocks[pos].block.bsh;\n                  this.last_bf = this.index.blocks[pos].block.bf;\n                  this.last_ts = this.index.blocks[pos].block.ts;\n                  this.last_bid = this.index.blocks[pos].block.id;\n                  this.lc_pos = pos;\n                  this.lc_pos_set = true;\n            ***REMOVED*** //\n        ***REMOVED*** old and new chains\n        ***REMOVED***\n\n\n                new_hash_to_hunt_for = \"\";\n                old_hash_to_hunt_for = \"\";\n                new_block_hashes = [];\n                old_block_hashes = [];\n                min_block_idx = shared_ancestor_pos + 1;\n                max_block_idx = this.index.blocks.length - 1; //\n        ***REMOVED*** first block (lc = 0, need two blocks for chain)\n        ***REMOVED***\n\n                if (!(i_am_the_longest_chain == 1 && this.index.blocks.length == 1)) {\n                  _context.next = 99;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** block #1 needs hashmap\n        ***REMOVED***\n                for (i = 0; i < blk.transactions.length; i++) {\n                  this.app.shashmap.insert_new_transaction(blk, blk.transactions[i]);\n            ***REMOVED***\n\n                _context.next = 98;\n                return this.addBlockToBlockchainSuccess(blk, pos, 1);\n\n              case 98:\n                return _context.abrupt(\"return\");\n\n              case 99:\n        ***REMOVED***\n        ***REMOVED*** other blocks\n        ***REMOVED***\n                if (i_am_the_longest_chain == 1 && this.index.blocks.length > 0) {\n                  new_hash_to_hunt_for = blk.returnHash();\n                  old_hash_to_hunt_for = \"\";\n                  new_block_hashes = [];\n                  old_block_hashes = [];\n\n                  if (this.last_lc_pos != pos) {\n                    old_hash_to_hunt_for = this.index.blocks[this.last_lc_pos].block.bsh;\n              ***REMOVED*** //\n          ***REMOVED*** our new block builds on the longest chain\n          ***REMOVED***\n\n\n                  if (blk.block.prevbsh == old_hash_to_hunt_for) {\n                    new_block_hashes.push(new_hash_to_hunt_for);\n              ***REMOVED*** //\n          ***REMOVED*** we need to wind / unwind the chain\n          ***REMOVED***\n                  else {\n                      _min_block_idx = shared_ancestor_pos + 1;\n                      _max_block_idx = this.index.blocks.length - 1;\n\n                      for (_i = _max_block_idx; _i >= _min_block_idx; _i--) {\n                        if (this.index.blocks[_i].returnHash() == old_hash_to_hunt_for) {\n                          old_hash_to_hunt_for = this.index.blocks[_i].block.prevbsh;\n                          old_block_hashes.push(this.index.blocks[_i].returnHash());\n                    ***REMOVED***\n\n                        if (this.index.blocks[_i].returnHash() == new_hash_to_hunt_for) {\n                          new_hash_to_hunt_for = this.index.blocks[_i].block.prevbsh;\n                          new_block_hashes.push(this.index.blocks[_i].returnHash());\n                    ***REMOVED***\n                  ***REMOVED***\n\n                      old_block_hashes.reverse();\n                      new_block_hashes.reverse();\n                ***REMOVED***\n            ***REMOVED*** else {\n                  console.log(\"block is not on the longest chain...\");\n            ***REMOVED***\n\n                this.validate(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes);\n\n              case 101:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this);\n  ***REMOVED***));\n\n      function addBlockToBlockchain(_x) {\n        return _addBlockToBlockchain.apply(this, arguments);\n  ***REMOVED***\n\n      return addBlockToBlockchain;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"initialize\",\n    value: function () {\n      var _initialize = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n\n                if (this.app.options.blockchain) {\n                  this.last_bid = this.app.options.blockchain.last_bid;\n                  this.last_bsh = this.app.options.blockchain.last_bsh;\n                  this.last_ts = this.app.options.blockchain.last_ts;\n                  this.last_bf = this.app.options.blockchain.last_bf;\n                  this.genesis_ts = this.app.options.blockchain.genesis_ts;\n                  this.genesis_bid = this.app.options.blockchain.genesis_bid;\n                  this.genesis_period = this.app.options.blockchain.genesis_period;\n                  this.lowest_acceptable_ts = this.app.options.blockchain.lowest_acceptable_ts;\n                  this.lowest_acceptable_bsh = this.app.options.blockchain.lowest_acceptable_bsh;\n                  this.lowest_acceptable_bid = this.app.options.blockchain.lowest_acceptable_bid;\n            ***REMOVED***\n\n                _context2.next = 4;\n                return this.app.storage.loadBlocksFromDisk(this.genesis_period * 2);\n\n              case 4:\n                _context2.next = 9;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee2, this, [[0, 6]]);\n  ***REMOVED***));\n\n      function initialize() {\n        return _initialize.apply(this, arguments);\n  ***REMOVED***\n\n      return initialize;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"isFullySynced\",\n    value: function isFullySynced() {\n      var x = this.last_bid - this.genesis_period;\n\n      if (x < 0) {\n        return true;\n  ***REMOVED***\n\n      if (this.index.blocks.length >= this.genesis_period || x <= 0) {\n        if (x > this.lowest_acceptable_bid || x <= 0 && this.lowest_acceptable_bid == 1) {\n          return true;\n    ***REMOVED***\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"validate\",\n    value: function validate(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes) {\n      //\n      // insert to shashmap\n      //\n      for (var i = 0; i < blk.transactions.length; i++) {\n        this.app.shashmap.insert_new_transaction(blk, blk.transactions[i]);\n  ***REMOVED*** //\n      // unwind and wind\n      //\n\n\n      if (old_block_hashes.length > 0) {\n        this.unwindChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, 0, 0, old_block_hashes.length - 1);\n  ***REMOVED*** else {\n        this.windChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, 0, 0, 0);\n  ***REMOVED***\n\n      return;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"windChain\",\n    value: function () {\n      var _windChain = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, current_wind_index) {\n        var this_block_hash, block_validates, i, chain_to_unwind_hashes, _i2, new_blk, _i3, _chain_to_unwind_hashes, _i4;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this_block_hash = new_block_hashes[current_wind_index]; //\n        ***REMOVED*** this is the last block to add\n        ***REMOVED***\n\n                if (!(blk.returnHash() === this_block_hash)) {\n                  _context3.next = 29;\n                  break;\n            ***REMOVED***\n\n                _context3.next = 4;\n                return blk.validate();\n\n              case 4:\n                block_validates = _context3.sent;\n\n                if (!block_validates) {\n                  _context3.next = 12;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** we do not handle onChainReorganization for everything\n        ***REMOVED*** here as we do for older blocks. the reason for this is\n        ***REMOVED*** that the block is not yet saved to disk.\n        ***REMOVED***\n        ***REMOVED*** onChainReorganization is run on addBlockToBlockchainSuccess\n        ***REMOVED***\n        ***REMOVED***\n        ***REMOVED*** spend shashmap\n        ***REMOVED***\n                for (i = 0; i < blk.transactions.length; i++) {\n                  this.app.shashmap.spend_transaction(blk.transactions[i], blk.block.id);\n            ***REMOVED***\n\n                _context3.next = 9;\n                return this.addBlockToBlockchainSuccess(blk, pos, i_am_the_longest_chain, force);\n\n              case 9:\n                return _context3.abrupt(\"return\");\n\n              case 12:\n                if (!(current_wind_index == 0)) {\n                  _context3.next = 23;\n                  break;\n            ***REMOVED***\n\n                if (!(old_block_hashes.length > 0)) {\n                  _context3.next = 18;\n                  break;\n            ***REMOVED***\n\n                this.windChain(blk, pos, i_am_the_longest_chain, old_block_hashes, new_block_hashes, force, 1, 0);\n                return _context3.abrupt(\"return\");\n\n              case 18:\n                _context3.next = 20;\n                return this.addBlockToBlockchainFailure(blk, pos, i_am_the_longest_chain, force);\n\n              case 20:\n                return _context3.abrupt(\"return\");\n\n              case 21:\n                _context3.next = 27;\n                break;\n\n              case 23:\n        ***REMOVED***\n        ***REMOVED*** we need to unwind some of our previously\n        ***REMOVED*** added blocks from the new chain. so we\n        ***REMOVED*** swap our hashes to wind/unwind.\n        ***REMOVED***\n                chain_to_unwind_hashes = []; //\n        ***REMOVED*** remove previous added\n        ***REMOVED***\n\n                for (_i2 = current_wind_index; _i2 < new_block_hashes.length; _i2++) {\n                  chain_to_unwind_hashes.push(new_block_hashes[_i2]);\n            ***REMOVED*** //\n        ***REMOVED*** unwind NEW and wind OLD with resetting flag active\n        ***REMOVED***\n\n\n                this.unwindChain(blk, pos, i_am_the_longest_chain, old_block_hashes, chain_to_unwind_hashes, force, 1, chain_to_unwind_hashes.length);\n                return _context3.abrupt(\"return\");\n\n              case 27:\n                _context3.next = 53;\n                break;\n\n              case 29:\n                _context3.next = 31;\n                return this.returnBlockByHashFromDisk(this_block_hash);\n\n              case 31:\n                new_blk = _context3.sent;\n\n                if (new_blk == null) {\n          ***REMOVED***\n          ***REMOVED***\n          ***REMOVED***\n                  console.log(\"ERROR 620394: block does not exist on disk that should. terminating\");\n                  console.log(\"this block hash: \" + this_block_hash);\n                  console.log(\"NEW BLOCK HASHES: \" + JSON.stringify(new_block_hashes));\n                  console.log(\"OLD BLOCK HASHES: \" + JSON.stringify(old_block_hashes));\n                  process.exit();\n            ***REMOVED***\n\n                if (!new_blk.validate()) {\n                  _context3.next = 52;\n                  break;\n            ***REMOVED***\n\n                this.onChainReorganization(this_block_hash, new_blk.block.id, 1); //\n        ***REMOVED*** spend in shashmap\n        ***REMOVED***\n\n                for (_i3 = 0; _i3 < new_blk.transactions.length; _i3++) {\n                  shashmap.spend_transaction(new_blk.transactions[_i3], new_blk.block.id);\n            ***REMOVED***\n\n                if (!(current_wind_index == new_block_hashes.length - 1)) {\n                  _context3.next = 48;\n                  break;\n            ***REMOVED***\n\n                if (!(resetting_flag == 0)) {\n                  _context3.next = 43;\n                  break;\n            ***REMOVED***\n\n                _context3.next = 40;\n                return this.addBlockToBlockchainSuccess(blk, pos, i_am_the_longest_chain, force);\n\n              case 40:\n                return _context3.abrupt(\"return\");\n\n              case 43:\n                _context3.next = 45;\n                return this.addBlockToBlockchainFailure(blk, pos, i_am_the_longest_chain, force);\n\n              case 45:\n                return _context3.abrupt(\"return\");\n\n              case 46:\n                _context3.next = 50;\n                break;\n\n              case 48:\n                this.windChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, current_wind_index + 1);\n                return _context3.abrupt(\"return\");\n\n              case 50:\n                _context3.next = 53;\n                break;\n\n              case 52:\n                if (current_wind_index == 0) {\n                  this.windChain(blk, pos, i_am_the_longest_chain, old_block_hashes, // flipped\n                  [], force, 1, // reset as invalid\n                  0);\n            ***REMOVED*** else {\n          ***REMOVED***\n          ***REMOVED*** we need to unwind some of our previously\n          ***REMOVED*** added blocks from the new chain. so we\n          ***REMOVED*** swap our hashes to wind/unwind.\n          ***REMOVED***\n                  _chain_to_unwind_hashes = [];\n\n                  for (_i4 = current_wind_index; _i4 < new_block_hashes.length; _i4++) {\n                    _chain_to_unwind_hashes.push(new_block_hashes[h]);\n              ***REMOVED*** //\n          ***REMOVED*** unwind NEW and wind OLD, and set resetting_flag to 1\n          ***REMOVED***\n\n\n                  this.unwindChain(blk, pos, i_am_the_longest_chain, old_block_hashes, _chain_to_unwind_hashes, force, 1, _chain_to_unwind_hashes);\n            ***REMOVED***\n\n              case 53:\n              case \"end\":\n                return _context3.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee3, this);\n  ***REMOVED***));\n\n      function windChain(_x2, _x3, _x4, _x5, _x6, _x7, _x8, _x9) {\n        return _windChain.apply(this, arguments);\n  ***REMOVED***\n\n      return windChain;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"unwindChain\",\n    value: function () {\n      var _unwindChain = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, current_unwind_index) {\n        var old_blk;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(old_block_hashes.length > 0)) {\n                  _context4.next = 7;\n                  break;\n            ***REMOVED***\n\n                _context4.next = 3;\n                return this.returnBlockByHashFromDisk(old_block_hashes[current_unwind_index]);\n\n              case 3:\n                old_blk = _context4.sent;\n\n                if (old_blk == null) {\n          ***REMOVED***\n          ***REMOVED*** request missing block\n          ***REMOVED***\n                  console.log(\"ERROR 721058: cannot find block that should exist on disk...\");\n                  process.exit();\n            ***REMOVED*** //\n        ***REMOVED*** block or data is legit, so run on_chain_reorganization\n        ***REMOVED*** this should update the LC index as well\n\n\n                this.onChainReorganization(old_blk.returnHash(), old_blk.returnBlockId(), 0); //\n        ***REMOVED*** no more blocks to unwind\n        ***REMOVED***\n\n                this.windChain(blk, pos, i_am_the_longest_chain, new_block_hashes, old_block_hashes, force, resetting_flag, 0);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee4, this);\n  ***REMOVED***));\n\n      function unwindChain(_x10, _x11, _x12, _x13, _x14, _x15, _x16, _x17) {\n        return _unwindChain.apply(this, arguments);\n  ***REMOVED***\n\n      return unwindChain;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnLastSharedBlockId\",\n    value: function returnLastSharedBlockId(fork_id, latest_known_block_id) {\n      // if there is no fork_id submitted, we backpedal 1 block to be safe\n      if (fork_id == null || fork_id == \"\") {\n        return 0;\n  ***REMOVED***\n\n      if (fork_id.length < 2) {\n        if (latest_known_block_id > 0) {\n          latest_known_block_id - 1;\n    ***REMOVED*** else {\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** // roll back latest known block id to known fork ID measurement point\n\n\n      for (var x = latest_known_block_id; x >= 0; x--) {\n        if (x % this.fork_id_mod == 0) {\n          latest_known_block_id = x;\n          x = -1;\n    ***REMOVED***\n  ***REMOVED***\n\n      var our_latest_bid = this.last_bid; // roll back until we have a match\n\n      for (var fii = 0; fii < fork_id.length / 2; fii++) {\n        var peer_fork_id_pair = fork_id.substring(2 * fii, 2 * fii + 2);\n        var our_fork_id_pair_blockid = latest_known_block_id;\n\n        if (fii == 0) {\n          our_fork_id_pair_blockid = latest_known_block_id - 0;\n    ***REMOVED***\n\n        if (fii == 1) {\n          our_fork_id_pair_blockid = latest_known_block_id - 10;\n    ***REMOVED***\n\n        if (fii == 2) {\n          our_fork_id_pair_blockid = latest_known_block_id - 20;\n    ***REMOVED***\n\n        if (fii == 3) {\n          our_fork_id_pair_blockid = latest_known_block_id - 30;\n    ***REMOVED***\n\n        if (fii == 4) {\n          our_fork_id_pair_blockid = latest_known_block_id - 40;\n    ***REMOVED***\n\n        if (fii == 5) {\n          our_fork_id_pair_blockid = latest_known_block_id - 50;\n    ***REMOVED***\n\n        if (fii == 6) {\n          our_fork_id_pair_blockid = latest_known_block_id - 75;\n    ***REMOVED***\n\n        if (fii == 7) {\n          our_fork_id_pair_blockid = latest_known_block_id - 100;\n    ***REMOVED***\n\n        if (fii == 8) {\n          our_fork_id_pair_blockid = latest_known_block_id - 200;\n    ***REMOVED***\n\n        if (fii == 9) {\n          our_fork_id_pair_blockid = latest_known_block_id - 500;\n    ***REMOVED***\n\n        if (fii == 10) {\n          our_fork_id_pair_blockid = latest_known_block_id - 1000;\n    ***REMOVED***\n\n        if (fii == 11) {\n          our_fork_id_pair_blockid = latest_known_block_id - 5000;\n    ***REMOVED***\n\n        if (fii == 12) {\n          our_fork_id_pair_blockid = latest_known_block_id - 10000;\n    ***REMOVED***\n\n        if (fii == 13) {\n          our_fork_id_pair_blockid = latest_known_block_id - 50000;\n    ***REMOVED***\n\n        if (our_latest_bid < our_fork_id_pair_blockid) {***REMOVED*** else {\n  ***REMOVED*** return hash by blockid\n          var tmpklr = this.returnHashByBlockId(our_fork_id_pair_blockid); // if we have not found a match, return 0 since we have\n  ***REMOVED*** irreconciliable forks, so we just give them everything\n  ***REMOVED*** in the expectation that one of our forks will eventually\n  ***REMOVED*** become the longest chain\n\n          if (tmpklr == \"\") {\n            return 0;\n      ***REMOVED***\n\n          var our_fork_id_pair = tmpklr.substring(0, 2); // if we have a match in fork ID at a position, treat this\n  ***REMOVED*** as the shared forkID\n\n          if (our_fork_id_pair == peer_fork_id_pair) {\n            return our_fork_id_pair_blockid;\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLongestChainIndexPosArray\",\n    value: function returnLongestChainIndexPosArray() {\n      var chainlength = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n\n      if (this.index.blocks.length == 0) {\n        return [];\n  ***REMOVED***\n\n      if (this.index.blocks.length < chainlength) {\n        chainlength = this.index.blocks.length;\n  ***REMOVED***\n\n      if (chainlength == 0) {\n        return [];\n  ***REMOVED***\n\n      var bchainIndex = [];\n      var chain_pos = this.lc_pos;\n      bchainIndex.push(chain_pos);\n\n      for (var z = 0; z < chainlength; z++) {\n        var prev_pos = chain_pos - 1;\n        var prev_found = 0;\n\n        if (prev_pos == -1) {\n          z = chainlength + 1;\n    ***REMOVED*** else {\n          while (prev_pos >= 0 && prev_found == 0) {\n            if (this.index.blocks[prev_pos].returnHash() == this.index.blocks[chain_pos].block.prevbsh) {\n              bchainIndex.push(prev_pos);\n              prev_found = 1;\n              chain_pos = prev_pos;\n        ***REMOVED*** else {\n              prev_pos--;\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return bchainIndex;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"updateForkId\",\n    value: function updateForkId(blk) {\n      if (blk == null) {\n        return this.fork_id;\n  ***REMOVED***\n\n      var base_bid = blk.block.id;\n      var fork_id = \"\";\n      var indexpos = this.index.blocks.length - 1; //\n      // roll back to consensus starting point for measuring\n      //\n\n      for (var x = base_bid; x >= 0; x--) {\n        if (x % this.fork_id_mod == 0) {\n          base_bid = x;\n          x = -1;\n    ***REMOVED***\n  ***REMOVED***\n\n      for (var i = 0, stop = 0; stop == 0 && i < this.genesis_period;) {\n        var checkpointblkid = base_bid - i;\n        indexpos = this.returnLongestChainIndexArray(checkpointblkid, indexpos);\n\n        if (indexpos == -1 || checkpointblkid < 0) {\n          stop = 1;\n    ***REMOVED*** else {\n          var th = this.index.hash[indexpos];\n          fork_id += th.substring(0, 2);\n    ***REMOVED*** //\n***REMOVED*** if this is edited, we have to\n***REMOVED*** also change the function\n***REMOVED***\n***REMOVED*** - returnLastSharedBlockId\n***REMOVED***\n\n\n        if (i == 10000) {\n          i = 50000;\n    ***REMOVED***\n\n        if (i == 5000) {\n          i = 10000;\n    ***REMOVED***\n\n        if (i == 1000) {\n          i = 5000;\n    ***REMOVED***\n\n        if (i == 500) {\n          i = 1000;\n    ***REMOVED***\n\n        if (i == 200) {\n          i = 500;\n    ***REMOVED***\n\n        if (i == 100) {\n          i = 200;\n    ***REMOVED***\n\n        if (i == 75) {\n          i = 100;\n    ***REMOVED***\n\n        if (i == 50) {\n          i = 75;\n    ***REMOVED***\n\n        if (i == 40) {\n          i = 50;\n    ***REMOVED***\n\n        if (i == 30) {\n          i = 40;\n    ***REMOVED***\n\n        if (i == 20) {\n          i = 30;\n    ***REMOVED***\n\n        if (i == 10) {\n          i = 20;\n    ***REMOVED***\n\n        if (i == 0) {\n          i = 10;\n    ***REMOVED***\n\n        if (i > this.genesis_period || i == 50000) {\n          stop = 1;\n    ***REMOVED***\n  ***REMOVED***\n\n      this.fork_id = fork_id;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"addBlockToBlockchainSuccess\",\n    value: function () {\n      var _addBlockToBlockchainSuccess = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(blk, pos, i_am_the_longest_chain) {\n        var force,\n            our_longest_chain,\n            i,\n            _blk,\n            _args5 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                force = _args5.length > 3 && _args5[3] !== undefined ? _args5[3] : false;\n                _context5.next = 3;\n                return this.app.storage.saveBlock(blk, i_am_the_longest_chain);\n\n              case 3:\n        ***REMOVED***\n        ***REMOVED*** reorganize THIS block\n        ***REMOVED***\n                if (i_am_the_longest_chain == 1) {\n                  this.app.wallet.resetExistingSlips(blk.block.id, blk.returnHash(), i_am_the_longest_chain);\n                  this.bsh_lc_hmap[blk.returnHash()] = 1;\n                  this.bid_bsh_hmap[blk.block.id] = blk.returnHash();\n                  this.lc_pos_set = true;\n                  this.lc_pos = pos;\n                  this.saveBlockchain(blk);\n            ***REMOVED*** //\n        ***REMOVED*** moved to subsequent processing\n        ***REMOVED***\n        ***REMOVED***\n        ***REMOVED*** update modules (with sync info) ?\n        ***REMOVED***\n        ***REMOVED***this.app.modules.updateBlockchainSync(blk.block.id, this.returnTargetBlockId());\n\n\n                this.saveBlockchain(); //\n        ***REMOVED*** cleanup\n        ***REMOVED***\n\n                this.app.mempool.removeBlockAndTransactions(blk); //\n        ***REMOVED*** propagate block\n        ***REMOVED***\n\n                this.app.network.propagateBlock(blk);\n\n                if (force) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** wallet process slips (if non forced)\n        ***REMOVED***\n                this.app.wallet.processPayments(blk, i_am_the_longest_chain); //\n        ***REMOVED*** pass control to the callback manager\n        ***REMOVED***\n\n                if (!(this.run_callbacks == 1)) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n                blk.affixCallbacks(0);\n\n                if (!(i_am_the_longest_chain == 1 && !force)) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n                our_longest_chain = this.returnLongestChainIndexPosArray(this.callback_limit);\n                i = 0;\n\n              case 14:\n                if (!(i < our_longest_chain.length && i < this.callback_limit)) {\n                  _context5.next = 22;\n                  break;\n            ***REMOVED***\n\n        ***REMOVED***\n        ***REMOVED*** run callbacks with TXS\n        ***REMOVED***\n                _blk = this.index.blocks[our_longest_chain[i]];\n\n                if (!(_blk != null)) {\n                  _context5.next = 19;\n                  break;\n            ***REMOVED***\n\n                _context5.next = 19;\n                return _blk.runCallbacks(i);\n\n              case 19:\n                i++;\n                _context5.next = 14;\n                break;\n\n              case 22:\n        ***REMOVED***\n        ***REMOVED*** permit addition of next block\n        ***REMOVED***\n                this.indexing_active = 0;\n\n                if (!force) {\n                  this.app.miner.startMining(blk);\n            ***REMOVED***\n\n              case 24:\n              case \"end\":\n                return _context5.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee5, this);\n  ***REMOVED***));\n\n      function addBlockToBlockchainSuccess(_x18, _x19, _x20) {\n        return _addBlockToBlockchainSuccess.apply(this, arguments);\n  ***REMOVED***\n\n      return addBlockToBlockchainSuccess;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"addBlockToBlockchainFailure\",\n    value: function () {\n      var _addBlockToBlockchainFailure = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6(blk, pos, i_am_the_longest_chain) {\n        var force,\n            oldblk,\n            _args6 = arguments;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                force = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : no;\n                console.log(\"FAILURE ADDING BLOCK: \" + blk.returnHash() + \" -- \" + pos + \" -- \" + i_am_the_longest_chain); //\n        ***REMOVED*** restore longest chain\n        ***REMOVED***\n\n                this.lc_pos = this.last_lc_pos;\n                this.onChainReorganization(blk.returnHash(), blk.block.id, 0);\n                delete this.bsh_lc_hmap[blk.returnHash()];\n                delete this.bsh_bid_hmap[blk.returnHash()];\n                delete this.bsh_ts_hmap[blk.returnHash()]; // reset miner\n\n                this.app.miner.stopMining();\n                oldblk = this.returnLatestBlock();\n\n                if (oldblk != null) {\n                  this.app.miner.startMining(oldblk);\n            ***REMOVED*** //\n        ***REMOVED*** remove bad everything\n        ***REMOVED***\n\n\n                this.app.mempool.removeBlockAndTransactions(blk); //\n        ***REMOVED*** resume normal operations\n        ***REMOVED***\n\n                this.indexing_active = 0;\n                return _context6.abrupt(\"return\", 1);\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee6, this);\n  ***REMOVED***));\n\n      function addBlockToBlockchainFailure(_x21, _x22, _x23) {\n        return _addBlockToBlockchainFailure.apply(this, arguments);\n  ***REMOVED***\n\n      return addBlockToBlockchainFailure;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"binaryInsert\",\n    value: function binaryInsert(list, item, compare, search) {\n      var start = 0;\n      var end = list.length;\n\n      while (start < end) {\n        var pos = start + end >> 1;\n        var cmp = compare(item, list[pos]);\n\n        if (cmp === 0) {\n          start = pos;\n          end = pos;\n          break;\n    ***REMOVED*** else if (cmp < 0) {\n          end = pos;\n    ***REMOVED*** else {\n          start = pos + 1;\n    ***REMOVED***\n  ***REMOVED***\n\n      if (!search) {\n        list.splice(start, 0, item);\n  ***REMOVED***\n\n      return start;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"onChainReorganization\",\n    value: function onChainReorganization(bsh, bid, lc) {\n      //\n      // update hashmap values\n      //\n      this.bsh_lc_hmap[bsh] = lc;\n\n      if (lc == 0) {\n        delete this.bid_bsh_hmap[bid];\n  ***REMOVED*** else {\n        this.bid_bsh_hmap[bid] = bsh;\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isHashIndexed\",\n    value: function isHashIndexed(hash) {\n      if (this.bsh_bid_hmap[hash] > 0) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLatestBlock\",\n    value: function returnLatestBlock() {\n      if (this.index.blocks.length == 0) {\n        return null;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos];\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLatestBlockHash\",\n    value: function returnLatestBlockHash() {\n      var blk = this.returnLatestBlock();\n\n      if (blk == null) {\n        return \"\";\n  ***REMOVED***\n\n      return blk.returnHash();\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnLatestBlockTimestamp\",\n    value: function returnLatestBlockTimestamp() {\n      var blk = this.returnLatestBlock();\n\n      if (blk == null) {\n        return 0;\n  ***REMOVED***\n\n      if (blk.block == null) {\n        return 0;\n  ***REMOVED***\n\n      return blk.block.ts;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnBlockByHash\",\n    value: function returnBlockByHash(hash) {\n      if (this.isHashIndexed(hash)) {\n        for (var v = this.index.blocks.length - 1; v >= 0; v--) {\n          if (this.index.blocks[v].returnHash() == hash) {\n            return this.index.blocks[v];\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnBlockByHashFromDisk\",\n    value: function () {\n      var _returnBlockByHashFromDisk = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee7(hash) {\n        var v;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!this.isHashIndexed(hash)) {\n                  _context7.next = 11;\n                  break;\n            ***REMOVED***\n\n                v = this.index.blocks.length - 1;\n\n              case 2:\n                if (!(v >= 0)) {\n                  _context7.next = 11;\n                  break;\n            ***REMOVED***\n\n                if (!(this.index.blocks[v].returnHash() == hash)) {\n                  _context7.next = 8;\n                  break;\n            ***REMOVED***\n\n                if (!(this.index.blocks[v].transactions.length == 0)) {\n                  _context7.next = 8;\n                  break;\n            ***REMOVED***\n\n                _context7.next = 7;\n                return this.app.storage.loadBlockByHash(hash);\n\n              case 7:\n                return _context7.abrupt(\"return\", _context7.sent);\n\n              case 8:\n                v--;\n                _context7.next = 2;\n                break;\n\n              case 11:\n              case \"end\":\n                return _context7.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee7, this);\n  ***REMOVED***));\n\n      function returnBlockByHashFromDisk(_x24) {\n        return _returnBlockByHashFromDisk.apply(this, arguments);\n  ***REMOVED***\n\n      return returnBlockByHashFromDisk;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnBlockById\",\n    value: function () {\n      var _returnBlockById = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee8(bid) {\n        var mode,\n            hash,\n            v,\n            _args8 = arguments;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                mode = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : 0;\n        ***REMOVED***\n        ***REMOVED*** mode\n        ***REMOVED***\n        ***REMOVED*** 0 -- fetch block from memory / txs not needed\n        ***REMOVED*** 1 -- require transactions\n        ***REMOVED***\n                hash = this.bid_bsh_hmap[bid];\n\n                if (!(hash == undefined)) {\n                  _context8.next = 4;\n                  break;\n            ***REMOVED***\n\n                return _context8.abrupt(\"return\", null);\n\n              case 4:\n                if (!this.isHashIndexed(hash)) {\n                  _context8.next = 21;\n                  break;\n            ***REMOVED***\n\n                v = this.index.blocks.length - 1;\n\n              case 6:\n                if (!(v >= 0)) {\n                  _context8.next = 21;\n                  break;\n            ***REMOVED***\n\n                if (!(this.index.blocks[v].returnHash() == hash)) {\n                  _context8.next = 18;\n                  break;\n            ***REMOVED***\n\n                _context8.t0 = mode;\n                _context8.next = _context8.t0 === 0 ? 11 : _context8.t0 === 1 ? 12 : 17;\n                break;\n\n              case 11:\n                return _context8.abrupt(\"return\", this.index.blocks[v]);\n\n              case 12:\n                if (!(this.index.blocks[v].transactions.length == 0)) {\n                  _context8.next = 16;\n                  break;\n            ***REMOVED***\n\n                _context8.next = 15;\n                return this.app.storage.loadBlockByHash(hash);\n\n              case 15:\n                return _context8.abrupt(\"return\", _context8.sent);\n\n              case 16:\n                return _context8.abrupt(\"return\", this.index.blocks[v]);\n\n              case 17:\n                return _context8.abrupt(\"return\", this.index.blocks[v]);\n\n              case 18:\n                v--;\n                _context8.next = 6;\n                break;\n\n              case 21:\n              case \"end\":\n                return _context8.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee8, this);\n  ***REMOVED***));\n\n      function returnBlockById(_x25) {\n        return _returnBlockById.apply(this, arguments);\n  ***REMOVED***\n\n      return returnBlockById;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"returnMinTxId\",\n    value: function returnMinTxId() {\n      if (this.lc_pos == null) {\n        return 0;\n  ***REMOVED***\n\n      if (this.index.blocks[this.lc_pos].mintxid == undefined) {\n        return 0;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos].maxtxid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMaxTxId\",\n    value: function returnMaxTxId() {\n      if (this.lc_pos == null) {\n        return 0;\n  ***REMOVED***\n\n      if (this.index.blocks[this.lc_pos].maxtxid == undefined) {\n        return 0;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos].maxtxid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMinTxId\",\n    value: function returnMinTxId() {\n      if (this.lc_pos == null) {\n        return 0;\n  ***REMOVED***\n\n      if (this.index.blocks[this.lc_pos].mintxid == undefined) {\n        return 0;\n  ***REMOVED***\n\n      return this.index.blocks[this.lc_pos].maxtxid;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"saveBlockchain\",\n    value: function saveBlockchain(blk) {\n      this.app.options.blockchain = Object.assign({***REMOVED***, this.app.options.blockchain);\n\n      if (blk == null) {\n        return;\n  ***REMOVED***\n\n      this.last_bsh = blk.returnHash();\n      this.last_bid = blk.block.id;\n      this.last_ts = blk.block.ts;\n      this.last_bf = blk.block.bf; //\n      // purge unnecessary data\n      //\n      //\n      // selective updates\n      //\n\n      if (blk.block.id % this.fork_id_mod == 0) {\n        this.fork_id = this.updateForkId();\n  ***REMOVED***\n\n      this.app.options.blockchain.last_bsh = this.last_bsh;\n      this.app.options.blockchain.last_bid = this.last_bid;\n      this.app.options.blockchain.last_ts = this.last_ts;\n      this.app.options.blockchain.last_bf = this.last_bf;\n      this.app.options.blockchain.genesis_ts = this.genesis_ts;\n      this.app.options.blockchain.genesis_bid = this.genesis_bid;\n      this.app.options.blockchain.genesis_period = this.genesis_period;\n      this.app.options.blockchain.lowest_acceptable_ts = this.lowest_acceptable_ts;\n      this.app.options.blockchain.lowest_acceptable_bsh = this.lowest_acceptable_bsh;\n      this.app.options.blockchain.lowest_acceptable_bid = this.lowest_acceptable_bid;\n***REMOVED***\n  ***REMOVED***]);\n\n  return Blockchain;\n***REMOVED***();\n\nmodule.exports = Blockchain;\n/* WEBPACK VAR INJECTION */***REMOVED***.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2FpdG8vYmxvY2tjaGFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zYWl0by9ibG9ja2NoYWluLmpzPzliMTgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2FpdG8gICAgPSByZXF1aXJlKCcuL3NhaXRvJyk7XG4vLyBjb25zdCBCaWcgICAgICA9IHJlcXVpcmUoJ2JpZy5qcycpO1xuXG5jbGFzcyBCbG9ja2NoYWluIHtcblxuICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICB0aGlzLmFwcCAgICAgICAgICAgICAgICAgICA9IGFwcCB8fCB7fTtcblxuICAgIHRoaXMuaW5kZXhcdFx0ICAgICBcdD0ge307XG4gICAgdGhpcy5pbmRleC5ibG9ja3NcdFx0PSBbXTtcblxuICAgIHRoaXMuYnNoX2xjX2htYXAgICAgICAgICAgIFx0PSBbXTtcbiAgICB0aGlzLmJzaF9iaWRfaG1hcCAgICAgICAgICBcdD0gW107XG4gICAgdGhpcy5iaWRfYnNoX2htYXAgICAgICAgICAgXHQ9IFtdO1xuICAgIHRoaXMuYnNoX3RzX2htYXAgICAgICAgICAgXHQ9IFtdO1xuXG4gICAgdGhpcy5sY19wb3Nfc2V0ICAgICAgICAgIFx0PSBmYWxzZVxuICAgIHRoaXMubGNfcG9zICAgICAgICAgICAgIFx0PSAwO1xuICAgIHRoaXMubGFzdF9sY19wb3NcdFx0PSAwO1xuXG4gICAgdGhpcy5ydW5fY2FsbGJhY2tzXHRcdD0gMTtcbiAgICB0aGlzLmNhbGxiYWNrX2xpbWl0XHRcdD0gNTA7XG5cbiAgICB0aGlzLmZvcmtfaWRcdFx0XHQ9IFwiXCI7XG4gICAgdGhpcy5mb3JrX2lkX21vZFx0XHQ9IDEwO1x0XHQvLyByZWdlbmVyYXRlIGV2ZXJ5IE4gYmxvY2tzXG5cbiAgICB0aGlzLmdlbmVzaXNfdHMgICAgICAgICAgICBcdD0gMDtcbiAgICB0aGlzLmdlbmVzaXNfYmlkICAgICAgICAgICBcdD0gMDtcbiAgICAvL3RoaXMuZ2VuZXNpc19wZXJpb2QgICAgICAgXHQ9IDEwMDAwMDtcbiAgICB0aGlzLmdlbmVzaXNfcGVyaW9kICAgICAgIFx0PSA2O1xuICAgIHRoaXMubGFzdF9ic2ggICAgICAgICAgICAgIFx0PSBcIlwiO1xuICAgIHRoaXMubGFzdF9iaWQgICAgICAgICAgICAgIFx0PSAwO1xuICAgIHRoaXMubGFzdF90cyAgICAgICAgICAgICAgIFx0PSAwO1xuICAgIHRoaXMubGFzdF9iZiAgICAgICAgICAgICAgXHQ9IDAuMDtcbiAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzICBcdD0gMDtcbiAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JzaCBcdD0gXCJcIjtcbiAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JpZFx0PSAwO1xuXG4gICAgdGhpcy5pbmRleGluZ19hY3RpdmUgICAgICAgICAgPSAwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBhZGRCbG9ja1RvQmxvY2tjaGFpbihibGssIGZvcmNlPWZhbHNlKSB7XG5cbmNvbnNvbGUubG9nKFwiXFxuXFxuIC4uLiBhZGRpbmcgYmxvY2sgXCIrYmxrLmJsb2NrLmlkK1wiOiBcIiArIGJsay5yZXR1cm5IYXNoKCkpO1xuXG4gICAgdGhpcy5pbmRleGluZ19hY3RpdmUgPSAxO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFNBTklUWSBDSEVDS1MgLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaWYgKGJsay5pc192YWxpZCA9PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDE3ODIzNDogYmxvY2sgaXMgbm90IHZhbGlkIHdoZW4gYWRkaW5nIHRvIGNoYWluLiB0ZXJtaW5hdGluZy4uLlwiKTtcbiAgICAgIHRoaXMuaW5kZXhpbmdfYWN0aXZlID0gMDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYmxrLmJsb2NrLnRzIDwgdGhpcy5nZW5lc2lzX3RzIHx8IGJsay5ibG9jay5pZCA8IHRoaXMuZ2VuZXNpc19iaWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNzkyODM3OiBibG9jayBpZCBwcmVjZWRlcyBnZW5lc2lzIHBlcmlvZC4gdGVybWluYXRpbmcuLi5cIik7XG4gICAgICB0aGlzLmluZGV4aW5nX2FjdGl2ZSA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNIYXNoSW5kZXhlZChibGsucmV0dXJuSGFzaCgpKSkge1xuICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1ODIwMzk6IGJsb2NrY2hhaW4gYWxyZWFkeSBjb250YWlucyB0aGlzIGJsb2NrIGhhc2guIHRlcm1pbmF0aW5nLi4uXCIpO1xuICAgICAgdGhpcy5pbmRleGluZ19hY3RpdmUgPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuXG4gICAgLy9cbiAgICAvLyBjcmVhdGUgcmVmZXJlbmNlIGZvciBwcmV2aW91cyBsY1xuICAgIC8vXG4gICAgdGhpcy5sYXN0X2xjX3BvcyA9IHRoaXMubGNfcG9zO1xuXG4gICAgLy9cbiAgICAvLyBwcmV2aW91cyBibG9jayBub3QgaW5kZXhlZCwgYnV0IGFjY2VwdGFibGVcbiAgICAvL1xuICAgIGlmIChibGsuYmxvY2sudHMgPCB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzKSB7XG4gICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID0gYmxrLmJsb2NrLnRzO1xuICAgIH1cblxuXG4gICAgLy9cbiAgICAvLyB0cmFjayBmaXJzdCBibG9ja1xuICAgIC8vXG4gICAgLy8gaWYgd2UgYXJlIGFkZGluZyBvdXIgZmlyc3QgYmxvY2ssIHdlIHNldCB0aGlzIGFzIG91ciBsb3dlc3RcbiAgICAvLyBhY2NlcHRhYmxlIHRzIHRvIGF2b2lkIHJlcXVlc3RpbmcgZWFybGllciBibG9ja3MgYWQgaW5maW5pdHVtXG4gICAgLy8gaW50byB0aGUgcGFzdC5cbiAgICAvL1xuICAgIC8vIGxvd2VzdCBhY2NlcHRhYmxlIGJpZCBtdXN0IGJlIHVwZGF0ZWQgc28gdGhhdCB3ZSBrbm93IHRoZVxuICAgIC8vIGVhcmxpZXN0IGJsb2NrIHdlIG5lZWQgdG8gd29ycnkgYWJvdXQgd2hlbiBoYW5kbGluZyBmdWxsIHNsaXBcbiAgICAvLyB2YWxpZGF0aW9uLlxuICAgIC8vXG4gICAgaWYgKHRoaXMubG93ZXN0X2FjY2VwdGFibGVfdHMgPT0gMCkge1xuXG4gICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JpZCA9IGJsay5ibG9jay5pZDtcbiAgICAgIHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYnNoID0gYmxrLnJldHVybkhhc2goKTtcblxuICAgICAgLy9cbiAgICAgIC8vICEhISEhISEhISEhISBCTE9DSyAhISEhISEhISEhISFcbiAgICAgIC8vXG4gICAgICAvL2lmICh0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID0gdGhpcy5sYXN0X3RzO1xuICAgICAgLy99XG5cbiAgICAgIGlmICh0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID09IDApIHtcbiAgICAgICAgdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV90cyA9IGJsay5ibG9jay50cztcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmICh0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID4gYmxrLmJsb2NrLnRzKSB7XG4gICAgICAgIGlmICghZm9yY2UpIHtcbiAgICAgICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzID0gYmxrLmJsb2NrLnRzO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gZmV0Y2ggbWlzc2luZyBibG9ja3NcbiAgICAvL1xuICAgIGlmIChibGsuYmxvY2sudHMgPiB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX3RzKSB7XG4gICAgICBpZiAoIXRoaXMuaXNIYXNoSW5kZXhlZChibGsuYmxvY2sucHJldmJzaCkpICB7XG4gICAgICAgIGlmICh0aGlzLmxjX3Bvc19zZXQgPT0gdHJ1ZSkge1xuICAgICAgICAgIGlmIChibGsuYmxvY2suaWQgPiAodGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdLmJpZCAtIHRoaXMuZ2VuZXNpc19wZXJpb2QpKSB7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gc2VuZCByZXF1ZXN0IGZvciBtaXNzaW5nIGJsb2NrXG4gICAgICAgICAgICAvL1xuXHQgICAgY29uc29sZS5sb2coXCJFUlJPUiAxNDgwMTk6IG1pc3NpbmcgYmxvY2tcIik7XG5cdCAgICBwcm9jZXNzLmV4aXQoKTtcblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBpbnNlcnQgaW5kZXhlcyAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgbGV0IHBvcyA9IHRoaXMuYmluYXJ5SW5zZXJ0KHRoaXMuaW5kZXguYmxvY2tzLCBibGssIChhLCBiKSA9PiB7IHJldHVybiBhLmJsb2NrLnRzIC0gYi5ibG9jay50czsgfSk7XG4gICAgdGhpcy5ic2hfYmlkX2htYXBbYmxrLnJldHVybkhhc2goKV0gPSBibGsuYmxvY2suaWQ7XG4gICAgdGhpcy5ic2hfdHNfaG1hcFtibGsucmV0dXJuSGFzaCgpXSA9IGJsay5ibG9jay50cztcbiAgICB0aGlzLmluZGV4LmJsb2Nrc1twb3NdID0gYmxrO1xuXG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBpZGVudGlmeSBsb25nZXN0IGNoYWluIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGxldCBpX2FtX3RoZV9sb25nZXN0X2NoYWluXHRcdD0gMDtcbiAgICBsZXQgc2hhcmVkX2FuY2VzdG9yX3Bvc1x0ICBcdD0gMDtcbiAgICBsZXQgc2hhcmVkX2FuY2VzdG9yX3Bvc19mb3VuZFx0PSBmYWxzZTtcblxuXG4gICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuXG4gICAgICB0aGlzLmxjX3BvcyA9IHBvcztcbiAgICAgIHRoaXMubGFzdF9ic2ggPSBibGsucmV0dXJuSGFzaCgpO1xuICAgICAgdGhpcy5sYXN0X2JpZCA9IGJsay5ibG9jay5pZDtcbiAgICAgIHRoaXMubGFzdF9iZiAgPSBibGsuYmxvY2suYmY7XG4gICAgICB0aGlzLmxhc3RfdHMgID0gYmxrLmJsb2NrLnRzO1xuXG4gICAgfVxuXG5cbiAgICBpZiAodGhpcy5sYXN0X2JzaCA9PSBibGsuYmxvY2sucHJldmJzaCAmJiB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGggPiAxKSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBsYXN0IGJsb2NrIGlzIGxvbmdlc3QgY2hhaW5cbiAgICAgIC8vXG4gICAgICBpZiAodGhpcy5ic2hfbGNfaG1hcFt0aGlzLmxhc3RfYnNoXSA9PSAxKSB7XG4gICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuICAgICAgICBzaGFyZWRfYW5jZXN0b3JfcG9zID0gdGhpcy5sYXN0X2xjX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIHRyYWNlIGJhY2sgdG8gZmluZCBzaGFyZWQgYW5jZXN0b3JcbiAgICAvL1xuICAgIGlmIChpX2FtX3RoZV9sb25nZXN0X2NoYWluID09IDApIHtcblxuICAgICAgaWYgKGJsay5ibG9jay5pZCA+PSB0aGlzLmluZGV4LmJsb2Nrc1t0aGlzLmxjX3Bvc10uYmxvY2suaWQpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBmaW5kIHRoZSBsYXN0IHNoYXJlZCBhbmNlc3RvclxuICAgICAgICAvL1xuICAgICAgICBsZXQgbGJsayA9IHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGNfcG9zXTtcbiAgICAgICAgbGV0IG5ibGsgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdO1xuXG4gICAgICAgIGlmIChibGsuYmxvY2suaWQgPT0gbGJsay5ibG9jay5pZCkge1xuICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJsay5ibG9jay5wcmV2YnNoID09IGxibGsuYmxvY2suYnNoKSB7XG4gICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBsZXQgbGNoYWluX3BvcyBcdFx0PSB0aGlzLmxjX3BvcztcbiAgICAgICAgICBsZXQgbmNoYWluX3BvcyBcdFx0PSBwb3M7XG4gICAgICAgICAgbGV0IGxjaGFpbl9sZW4gXHRcdD0gMDtcbiAgICAgICAgICBsZXQgbmNoYWluX2xlbiBcdFx0PSAwO1xuICAgICAgICAgIGxldCBsY2hhaW5fYmYgIFx0XHQ9IGxibGsuYmxvY2suYmY7XG4gICAgICAgICAgbGV0IG5jaGFpbl9iZiAgXHRcdD0gbmJsay5ibG9jay5iZjtcbiAgICAgICAgICBsZXQgbGNoYWluX3RzICBcdFx0PSBsYmxrLmJsb2NrLnRzO1xuICAgICAgICAgIGxldCBuY2hhaW5fdHMgIFx0XHQ9IG5ibGsuYmxvY2sudHM7XG4gICAgICAgICAgbGV0IGxjaGFpbl9wcmV2YnNoXHQ9IGxibGsuYmxvY2sucHJldmJzaDtcbiAgICAgICAgICBsZXQgbmNoYWluX3ByZXZic2hcdD0gbmJsay5ibG9jay5wcmV2YnNoO1xuXG4gICAgICAgICAgbGV0IHNlYXJjaF9wb3MgICAgICAgXHQ9IG51bGw7XG4gICAgICAgICAgbGV0IHNlYXJjaF9iZiAgICAgICAgXHQ9IG51bGw7XG4gICAgICAgICAgbGV0IHNlYXJjaF90cyAgICAgICAgXHQ9IG51bGw7XG4gICAgICAgICAgbGV0IHNlYXJjaF9ic2ggICAgICBcdD0gbnVsbDtcbiAgICAgICAgICBsZXQgc2VhcmNoX3ByZXZic2ggIFx0PSBudWxsO1xuXG4gICAgICAgICAgaWYgKG5jaGFpbl90cyA+PSBsY2hhaW5fdHMpIHtcbiAgICAgICAgICAgIHNlYXJjaF9wb3MgPSBuY2hhaW5fcG9zIC0gMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VhcmNoX3BvcyA9IGxjaGFpbl9wb3MgLSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHdoaWxlIChzZWFyY2hfcG9zID49IDApIHtcblxuICAgICAgICAgICAgbGV0IHNibGsgPSB0aGlzLmluZGV4LmJsb2Nrc1tzZWFyY2hfcG9zXTtcblxuICAgICAgICAgICAgc2VhcmNoX3RzXHQgICAgPSBzYmxrLmJsb2NrLnRzO1xuICAgICAgICAgICAgc2VhcmNoX2JmICAgICAgID0gc2Jsay5ibG9jay5iZjtcbiAgICAgICAgICAgIHNlYXJjaF9ic2ggICAgICA9IHNibGsuYmxvY2suYnNoO1xuICAgICAgICAgICAgc2VhcmNoX3ByZXZic2ggID0gc2Jsay5ibG9jay5wcmV2YnNoO1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gaGV5IGxvb2ssIGl0J3MgdGhlIGNvbW1vbiBhbmNlc3RvciFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoc2VhcmNoX2JzaCA9PSBsY2hhaW5fcHJldmJzaCAmJiBzZWFyY2hfYnNoID09IG5jaGFpbl9wcmV2YnNoKSB7XG4gICAgICAgICAgICAgIHNoYXJlZF9hbmNlc3Rvcl9wb3NfZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBzaGFyZWRfYW5jZXN0b3JfcG9zID0gc2VhcmNoX3BvcztcbiAgICAgICAgICAgICAgc2VhcmNoX3BvcyA9IC0xO1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8ga2VlcCBsb29raW5nXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICBpZiAoc2VhcmNoX2JzaCA9PSBsY2hhaW5fcHJldmJzaCkge1xuICAgICAgICAgICAgICAgIGxjaGFpbl9sZW4rKztcbiAgICAgICAgICAgICAgICBsY2hhaW5fcHJldmJzaCA9IHRoaXMuaW5kZXguYmxvY2tzW3NlYXJjaF9wb3NdLmJsb2NrLnByZXZic2g7XG4gICAgICAgICAgICAgICAgbGNoYWluX2JmID0gcGFyc2VGbG9hdChsY2hhaW5fYmYpICsgcGFyc2VGbG9hdCh0aGlzLmluZGV4LmJsb2Nrc1tzZWFyY2hfcG9zXS5yZXR1cm5CdXJuRmVlVmFsdWUoKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoc2VhcmNoX2JzaCA9PSBuY2hhaW5fcHJldmJzaCkge1xuICAgICAgICAgICAgICAgIG5jaGFpbl9wcmV2YnNoID0gdGhpcy5pbmRleC5ibG9ja3Nbc2VhcmNoX3Bvc10uYmxvY2sucHJldmJzaDtcbiAgICAgICAgICAgICAgICBuY2hhaW5fbGVuKys7XG4gICAgICAgICAgICAgICAgbmNoYWluX2JmID0gcGFyc2VGbG9hdChsY2hhaW5fYmYpICsgcGFyc2VGbG9hdCh0aGlzLmluZGV4LmJsb2Nrc1tzZWFyY2hfcG9zXS5yZXR1cm5CdXJuRmVlVmFsdWUoKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzaGFyZWRfYW5jZXN0b3JfcG9zID0gc2VhcmNoX3BvcztcbiAgICAgICAgICAgICAgc2VhcmNoX3Bvcy0tO1xuXG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIC8vIG5ldyBjaGFpbiBjb21wbGV0ZWx5IGRpc2Nvbm5lY3RlZFxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICBpZiAoc2hhcmVkX2FuY2VzdG9yX3BvcyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5jaGFpbl9wcmV2YnNoID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5TdWNjZXNzKGJsaywgcG9zLCAwKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNoYXJlZF9hbmNlc3Rvcl9wb3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChuY2hhaW5fcHJldmJzaCAhPSBsY2hhaW5fcHJldmJzaCkge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRCbG9ja1RvQmxvY2tjaGFpblN1Y2Nlc3MoYmxrLCBwb3MsIDApO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gbG9uZ2VzdCBjaGFpbiBpZiBtb3JlIHJvdXRpbmcgQU5EIGJ1cm5pbmcgd29ya1xuICAgICAgICAgIC8vXG4gICAgICAgICAgaWYgKG5jaGFpbl9sZW4gPiBsY2hhaW5fbGVuICYmIG5jaGFpbl9iZiA+PSBsY2hhaW5fYmYgJiYgc2hhcmVkX2FuY2VzdG9yX3Bvc19mb3VuZCA9PSB0cnVlKSB7XG4gICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcImVkZ2UgY2FzZSB3aXRoIHVub3JkZXJlZCBibG9ja3MuLi5cIik7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhpcyBjYXRjaGVzIGFuIGVkZ2UgY2FzZSB0aGF0IGhhcHBlbnMgaWYgd2UgYXNrIGZvciBibG9ja3Mgc3RhcnRpbmcgZnJvbVxuICAgICAgICAvLyBpZCA9IDEzMiwgYnV0IHRoZSBmaXJzdCBibG9jayB3ZSBSRUNFSVZFIGlzIGEgbGF0ZXIgYmxvY2sgaW4gdGhhdCBjaGFpbixcbiAgICAgICAgLy8gc3VjaCBhcyAxMzUgb3Igc28uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSBvdXIgYmxvY2tjaGFpbiBjbGFzcyB3aWxsIHRyZWF0IHRoZSBmaXJzdCBibG9jayBhcyB0aGUgc3RhcnRpbmdcbiAgICAgICAgLy8gcG9pbnQgYW5kIHdlIHJ1biBpbnRvIGlzc3VlcyB1bmxlc3Mgd2UgZXhwbGljaXRseSByZXNldCB0aGUgYmxvY2tjaGFpbiB0b1xuICAgICAgICAvLyB0cmVhdCBibG9jayAxMzIgYXMgdGhlIHByb3BlciBmaXJzdCBibG9jay5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gc28gd2UgcmVzZXQgdGhpcyB0byBvdXIgZmlyc3QgYmxvY2sgYW5kIG1hcmsgaXQgYXMgcGFydCBvZiB0aGUgbG9uZ2VzdCBjaGFpblxuICAgICAgICAvLyB0aGUgbmV0d29yayB3aWxsIGZpZ3VyZSB0aGlzIG91dCBpbiB0aW1lIGFzIGZ1cnRoZXIgYmxvY2tzIGJ1aWxkIG9uIGl0LlxuICAgICAgICAvL1xuICAgICAgICBpZiAoYmxrLmJsb2NrLnByZXZic2ggPT0gdGhpcy5sYXN0X2JzaCAmJiBibGsuYmxvY2sucHJldmJzaCAhPSBcIlwiKSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHJlc2V0IGxhdGVyIGJsb2Nrc1xuICAgICAgICAgIC8vXG4gICAgICAgICAgZm9yIChsZXQgaCA9IHBvcysxOyBoIDwgdGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoOyBoKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnNoX2xjX2htYXBbdGhpcy5pbmRleC5ibG9ja3NbaF0uYmxvY2suYnNoXSA9IGlfYW1fdGhlX2xvbmdlc3RfY2hhaW47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBvbkNoYWluUmVvcmdhbml6YXRpb25cbiAgICAgICAgICAvL1xuICAgICAgICAgIHRoaXMub25DaGFpblJlb3JnYW5pemF0aW9uKHRoaXMuaW5kZXguYmxvY2tzW2hdLmJsb2NrLmlkLCB0aGlzLmluZGV4LmJsb2Nrc1toXS5yZXR1cm5IYXNoKCksIDApO1xuICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPSAxO1xuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gaW5zZXJ0IGludG8gTEMgaGFzaG1hcFxuICAgIC8vXG4gICAgdGhpcy5ic2hfbGNfaG1hcFt0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJzaF0gPSBpX2FtX3RoZV9sb25nZXN0X2NoYWluO1xuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgYmxvY2tjaGFpbiBzdGF0ZSB2YXJpYWJsZXMgZGVwZW5kaW5nXG4gICAgLy9cbiAgICBpZiAoaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiA9PSAxKSB7XG4gICAgICB0aGlzLmxhc3RfYnNoICA9IHRoaXMuaW5kZXguYmxvY2tzW3Bvc10uYmxvY2suYnNoO1xuICAgICAgdGhpcy5sYXN0X2JmICAgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJsb2NrLmJmO1xuICAgICAgdGhpcy5sYXN0X3RzICAgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJsb2NrLnRzO1xuICAgICAgdGhpcy5sYXN0X2JpZCAgPSB0aGlzLmluZGV4LmJsb2Nrc1twb3NdLmJsb2NrLmlkO1xuICAgICAgdGhpcy5sY19wb3MgPSBwb3M7XG4gICAgICB0aGlzLmxjX3Bvc19zZXQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gb2xkIGFuZCBuZXcgY2hhaW5zXG4gICAgLy9cbiAgICBsZXQgbmV3X2hhc2hfdG9faHVudF9mb3IgXHQ9IFwiXCI7XG4gICAgbGV0IG9sZF9oYXNoX3RvX2h1bnRfZm9yICBcdD0gXCJcIjtcbiAgICBsZXQgbmV3X2Jsb2NrX2hhc2hlcyAgICAgXHQ9IFtdO1xuICAgIGxldCBvbGRfYmxvY2tfaGFzaGVzXHQ9IFtdO1xuXG4gICAgbGV0IG1pbl9ibG9ja19pZHggPSBzaGFyZWRfYW5jZXN0b3JfcG9zICsgMTtcbiAgICBsZXQgbWF4X2Jsb2NrX2lkeCA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aC0xO1xuXG4gICAgLy9cbiAgICAvLyBmaXJzdCBibG9jayAobGMgPSAwLCBuZWVkIHR3byBibG9ja3MgZm9yIGNoYWluKVxuICAgIC8vXG4gICAgaWYgKGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4gPT0gMSAmJiB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGggPT0gMSkge1xuXG4gICAgICAvL1xuICAgICAgLy8gYmxvY2sgIzEgbmVlZHMgaGFzaG1hcFxuICAgICAgLy9cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxrLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmFwcC5zaGFzaG1hcC5pbnNlcnRfbmV3X3RyYW5zYWN0aW9uKGJsaywgYmxrLnRyYW5zYWN0aW9uc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5TdWNjZXNzKGJsaywgcG9zLCAxKTtcbiAgICAgIHJldHVybjtcblxuICAgIH1cblxuXG4gICAgLy9cbiAgICAvLyBvdGhlciBibG9ja3NcbiAgICAvL1xuICAgIGlmIChpX2FtX3RoZV9sb25nZXN0X2NoYWluID09IDEgJiYgdGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID4gMCkge1xuXG4gICAgICBuZXdfaGFzaF90b19odW50X2ZvciA9IGJsay5yZXR1cm5IYXNoKCk7XG4gICAgICBvbGRfaGFzaF90b19odW50X2ZvciA9IFwiXCI7XG4gICAgICBuZXdfYmxvY2tfaGFzaGVzICAgICA9IFtdO1xuICAgICAgb2xkX2Jsb2NrX2hhc2hlcyAgICAgPSBbXTtcbiAgICAgIGlmICh0aGlzLmxhc3RfbGNfcG9zICE9IHBvcykgeyBvbGRfaGFzaF90b19odW50X2ZvciA9IHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGFzdF9sY19wb3NdLmJsb2NrLmJzaDsgfVxuXG4gICAgICAvL1xuICAgICAgLy8gb3VyIG5ldyBibG9jayBidWlsZHMgb24gdGhlIGxvbmdlc3QgY2hhaW5cbiAgICAgIC8vXG4gICAgICBpZiAoYmxrLmJsb2NrLnByZXZic2ggPT0gb2xkX2hhc2hfdG9faHVudF9mb3IpIHtcbiAgICAgICAgbmV3X2Jsb2NrX2hhc2hlcy5wdXNoKG5ld19oYXNoX3RvX2h1bnRfZm9yKTtcbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIHdlIG5lZWQgdG8gd2luZCAvIHVud2luZCB0aGUgY2hhaW5cbiAgICAgIC8vXG4gICAgICBlbHNlIHtcblxuICAgICAgICBsZXQgbWluX2Jsb2NrX2lkeCA9IHNoYXJlZF9hbmNlc3Rvcl9wb3MgKyAxO1xuICAgICAgICBsZXQgbWF4X2Jsb2NrX2lkeCA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aCAtMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gbWF4X2Jsb2NrX2lkeDsgaSA+PSBtaW5fYmxvY2tfaWR4OyBpLS0pIHtcblxuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkgPT0gb2xkX2hhc2hfdG9faHVudF9mb3IpIHtcbiAgICAgICAgICAgIG9sZF9oYXNoX3RvX2h1bnRfZm9yID0gdGhpcy5pbmRleC5ibG9ja3NbaV0uYmxvY2sucHJldmJzaDtcbiAgICAgICAgICAgIG9sZF9ibG9ja19oYXNoZXMucHVzaCh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkgPT0gbmV3X2hhc2hfdG9faHVudF9mb3IpIHtcbiAgICAgICAgICAgIG5ld19oYXNoX3RvX2h1bnRfZm9yID0gdGhpcy5pbmRleC5ibG9ja3NbaV0uYmxvY2sucHJldmJzaDtcbiAgICAgICAgICAgIG5ld19ibG9ja19oYXNoZXMucHVzaCh0aGlzLmluZGV4LmJsb2Nrc1tpXS5yZXR1cm5IYXNoKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgb2xkX2Jsb2NrX2hhc2hlcy5yZXZlcnNlKCk7XG4gICAgICAgIG5ld19ibG9ja19oYXNoZXMucmV2ZXJzZSgpO1xuXG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJibG9jayBpcyBub3Qgb24gdGhlIGxvbmdlc3QgY2hhaW4uLi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZShcbiAgICAgIGJsayxcbiAgICAgIHBvcyxcbiAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICBuZXdfYmxvY2tfaGFzaGVzLFxuICAgICAgb2xkX2Jsb2NrX2hhc2hlc1xuICAgICk7XG5cbiAgfVxuXG5cblxuICBhc3luYyBpbml0aWFsaXplKCkge1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4pIHtcbiAgICAgICAgdGhpcy5sYXN0X2JpZFx0XHRcdD0gdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYmlkO1xuICAgICAgICB0aGlzLmxhc3RfYnNoXHRcdFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubGFzdF9ic2g7XG4gICAgICAgIHRoaXMubGFzdF90c1x0XHRcdD0gdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfdHM7XG4gICAgICAgIHRoaXMubGFzdF9iZlx0XHRcdD0gdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYmY7XG5cbiAgICAgICAgdGhpcy5nZW5lc2lzX3RzXHRcdFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4uZ2VuZXNpc190cztcbiAgICAgICAgdGhpcy5nZW5lc2lzX2JpZFx0XHQ9IHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX2JpZDtcbiAgICAgICAgdGhpcy5nZW5lc2lzX3BlcmlvZFx0XHQ9IHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX3BlcmlvZDtcbiAgICAgICAgdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV90c1x0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfdHM7XG4gICAgICAgIHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYnNoIFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfYnNoO1xuICAgICAgICB0aGlzLmxvd2VzdF9hY2NlcHRhYmxlX2JpZFx0PSB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfYmlkO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja3NGcm9tRGlzayh0aGlzLmdlbmVzaXNfcGVyaW9kKjIpO1xuXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cblxuICB9XG5cblxuXG4gIGlzRnVsbHlTeW5jZWQoKSB7XG4gICAgbGV0IHggPSB0aGlzLmxhc3RfYmlkIC0gdGhpcy5nZW5lc2lzX3BlcmlvZDtcbiAgICBpZiAoeCA8IDApIHsgcmV0dXJuIHRydWU7IH1cbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID49IHRoaXMuZ2VuZXNpc19wZXJpb2QgfHwgeCA8PSAwKSB7XG4gICAgICBpZiAoeCA+IHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYmlkIHx8ICh4IDw9IDAgJiYgdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV9iaWQgPT0gMSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG5cblxuXG4gIHZhbGlkYXRlKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBuZXdfYmxvY2tfaGFzaGVzLCBvbGRfYmxvY2tfaGFzaGVzKSB7XG5cbiAgICAvL1xuICAgIC8vIGluc2VydCB0byBzaGFzaG1hcFxuICAgIC8vXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibGsudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmFwcC5zaGFzaG1hcC5pbnNlcnRfbmV3X3RyYW5zYWN0aW9uKGJsaywgYmxrLnRyYW5zYWN0aW9uc1tpXSk7XG4gICAgfVxuXG5cbiAgICAvL1xuICAgIC8vIHVud2luZCBhbmQgd2luZFxuICAgIC8vXG4gICAgaWYgKG9sZF9ibG9ja19oYXNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy51bndpbmRDaGFpbihcbiAgICAgICAgYmxrLFxuICAgICAgICBwb3MsXG4gICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICAgIG5ld19ibG9ja19oYXNoZXMsXG4gICAgICAgIG9sZF9ibG9ja19oYXNoZXMsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIG9sZF9ibG9ja19oYXNoZXMubGVuZ3RoLTFcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICBibGssXG4gICAgICAgIHBvcyxcbiAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgbmV3X2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgb2xkX2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuXG4gIH1cblxuICBhc3luYyB3aW5kQ2hhaW4oYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIG5ld19ibG9ja19oYXNoZXMsIG9sZF9ibG9ja19oYXNoZXMsIGZvcmNlLCByZXNldHRpbmdfZmxhZywgY3VycmVudF93aW5kX2luZGV4KSB7XG5cbiAgICBsZXQgdGhpc19ibG9ja19oYXNoID0gbmV3X2Jsb2NrX2hhc2hlc1tjdXJyZW50X3dpbmRfaW5kZXhdO1xuXG4gICAgLy9cbiAgICAvLyB0aGlzIGlzIHRoZSBsYXN0IGJsb2NrIHRvIGFkZFxuICAgIC8vXG4gICAgaWYgKGJsay5yZXR1cm5IYXNoKCkgPT09IHRoaXNfYmxvY2tfaGFzaCkge1xuXG4gICAgICBsZXQgYmxvY2tfdmFsaWRhdGVzID0gYXdhaXQgYmxrLnZhbGlkYXRlKCk7XG5cbiAgICAgIGlmIChibG9ja192YWxpZGF0ZXMpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBkbyBub3QgaGFuZGxlIG9uQ2hhaW5SZW9yZ2FuaXphdGlvbiBmb3IgZXZlcnl0aGluZ1xuICAgICAgICAvLyBoZXJlIGFzIHdlIGRvIGZvciBvbGRlciBibG9ja3MuIHRoZSByZWFzb24gZm9yIHRoaXMgaXNcbiAgICAgICAgLy8gdGhhdCB0aGUgYmxvY2sgaXMgbm90IHlldCBzYXZlZCB0byBkaXNrLlxuICAgICAgICAvL1xuICAgICAgICAvLyBvbkNoYWluUmVvcmdhbml6YXRpb24gaXMgcnVuIG9uIGFkZEJsb2NrVG9CbG9ja2NoYWluU3VjY2Vzc1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHNwZW5kIHNoYXNobWFwXG4gICAgICAgIC8vXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxrLnRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuYXBwLnNoYXNobWFwLnNwZW5kX3RyYW5zYWN0aW9uKGJsay50cmFuc2FjdGlvbnNbaV0sIGJsay5ibG9jay5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFkZEJsb2NrVG9CbG9ja2NoYWluU3VjY2VzcyhibGssIHBvcywgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiwgZm9yY2UpO1xuICAgICAgICByZXR1cm47XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhlIGJsb2NrIGRvZXMgbm90IHZhbGlkYXRlLCB1bndpbmRcbiAgICAgICAgLy9cbiAgICAgICAgaWYgKGN1cnJlbnRfd2luZF9pbmRleCA9PSAwKSB7XG5cbiAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBmaXJzdCBibG9jayB3ZSBoYXZlIHRyaWVkIHRvIGFkZFxuICAgICAgICAgIC8vIGFuZCBzbyB3ZSBjYW4ganVzdCByb2xsIG91dCB0aGUgb2xkZXIgY2hhaW5cbiAgICAgICAgICAvLyBhZ2FpbiBhcyBpdCBpcyBrbm93biBnb29kLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gbm90ZSB0aGF0IG9sZCBhbmQgbmV3IGhhc2hlcyBhcmUgc3dhcHBlZFxuICAgICAgICAgIC8vIGFuZCB0aGUgb2xkIGNoYWluIGlzIHNldCBhcyBudWxsIGJlY2F1c2VcbiAgICAgICAgICAvLyB3ZSB3b24ndCBtb3ZlIGJhY2sgdG8gaXQuIHdlIGFsc28gc2V0IHRoZVxuICAgICAgICAgIC8vIHJlc2V0dGluZ19mbGFnIHRvIDEgc28gd2Uga25vdyB0byBmb3JrXG4gICAgICAgICAgLy8gaW50byBhZGRCbG9ja1RvQmxvY2tjaGFpbkZhaWx1cmVcbiAgICAgICAgICAvL1xuICAgICAgICAgIGlmIChvbGRfYmxvY2tfaGFzaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICAgICAgICBibGssXG4gICAgICAgICAgICAgIHBvcyxcbiAgICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgICAgb2xkX2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgICAgICAgbmV3X2Jsb2NrX2hhc2hlcyxcbiAgICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5GYWlsdXJlKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBmb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHdlIG5lZWQgdG8gdW53aW5kIHNvbWUgb2Ygb3VyIHByZXZpb3VzbHlcbiAgICAgICAgICAvLyBhZGRlZCBibG9ja3MgZnJvbSB0aGUgbmV3IGNoYWluLiBzbyB3ZVxuICAgICAgICAgIC8vIHN3YXAgb3VyIGhhc2hlcyB0byB3aW5kL3Vud2luZC5cbiAgICAgICAgICAvL1xuICAgICAgICAgIGxldCBjaGFpbl90b191bndpbmRfaGFzaGVzID0gW107XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHJlbW92ZSBwcmV2aW91cyBhZGRlZFxuICAgICAgICAgIC8vXG4gICAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRfd2luZF9pbmRleDsgaSA8IG5ld19ibG9ja19oYXNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNoYWluX3RvX3Vud2luZF9oYXNoZXMucHVzaChuZXdfYmxvY2tfaGFzaGVzW2ldKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHVud2luZCBORVcgYW5kIHdpbmQgT0xEIHdpdGggcmVzZXR0aW5nIGZsYWcgYWN0aXZlXG4gICAgICAgICAgLy9cbiAgICAgICAgICB0aGlzLnVud2luZENoYWluKFxuICAgICAgICAgICAgYmxrLFxuICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgIG9sZF9ibG9ja19oYXNoZXMsXG4gICAgICAgICAgICBjaGFpbl90b191bndpbmRfaGFzaGVzLFxuICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgY2hhaW5fdG9fdW53aW5kX2hhc2hlcy5sZW5ndGgsXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcblxuICAgICAgbGV0IG5ld19ibGsgPSBhd2FpdCB0aGlzLnJldHVybkJsb2NrQnlIYXNoRnJvbURpc2sodGhpc19ibG9ja19oYXNoKTtcbiAgICAgIGlmIChuZXdfYmxrID09IG51bGwpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDYyMDM5NDogYmxvY2sgZG9lcyBub3QgZXhpc3Qgb24gZGlzayB0aGF0IHNob3VsZC4gdGVybWluYXRpbmdcIik7XG5jb25zb2xlLmxvZyhcInRoaXMgYmxvY2sgaGFzaDogXCIgKyB0aGlzX2Jsb2NrX2hhc2gpO1xuY29uc29sZS5sb2coXCJORVcgQkxPQ0sgSEFTSEVTOiBcIiArIEpTT04uc3RyaW5naWZ5KG5ld19ibG9ja19oYXNoZXMpKVxuY29uc29sZS5sb2coXCJPTEQgQkxPQ0sgSEFTSEVTOiBcIiArIEpTT04uc3RyaW5naWZ5KG9sZF9ibG9ja19oYXNoZXMpKVxuICAgICAgICBwcm9jZXNzLmV4aXQoKTtcblxuICAgICAgfVxuXG4gICAgICBpZiAobmV3X2Jsay52YWxpZGF0ZSgpKSB7XG5cbiAgICAgICAgdGhpcy5vbkNoYWluUmVvcmdhbml6YXRpb24odGhpc19ibG9ja19oYXNoLCBuZXdfYmxrLmJsb2NrLmlkLCAxKTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBzcGVuZCBpbiBzaGFzaG1hcFxuICAgICAgICAvL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld19ibGsudHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc2hhc2htYXAuc3BlbmRfdHJhbnNhY3Rpb24obmV3X2Jsay50cmFuc2FjdGlvbnNbaV0sIG5ld19ibGsuYmxvY2suaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRfd2luZF9pbmRleCA9PSBuZXdfYmxvY2tfaGFzaGVzLmxlbmd0aC0xKSB7XG4gICAgICAgICAgaWYgKHJlc2V0dGluZ19mbGFnID09IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5TdWNjZXNzKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBmb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQmxvY2tUb0Jsb2NrY2hhaW5GYWlsdXJlKGJsaywgcG9zLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluLCBmb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICAgICAgYmxrLFxuICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgIG5ld19ibG9ja19oYXNoZXMsXG4gICAgICAgICAgICBvbGRfYmxvY2tfaGFzaGVzLFxuICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICByZXNldHRpbmdfZmxhZyxcbiAgICAgICAgICAgIGN1cnJlbnRfd2luZF9pbmRleCsxLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGlmIChjdXJyZW50X3dpbmRfaW5kZXggPT0gMCkge1xuICAgICAgICAgIHRoaXMud2luZENoYWluKFxuICAgICAgICAgICAgYmxrLFxuICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbixcbiAgICAgICAgICAgIG9sZF9ibG9ja19oYXNoZXMsIC8vIGZsaXBwZWRcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAxLCAgICAgLy8gcmVzZXQgYXMgaW52YWxpZFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICApO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHdlIG5lZWQgdG8gdW53aW5kIHNvbWUgb2Ygb3VyIHByZXZpb3VzbHlcbiAgICAgICAgICAvLyBhZGRlZCBibG9ja3MgZnJvbSB0aGUgbmV3IGNoYWluLiBzbyB3ZVxuICAgICAgICAgIC8vIHN3YXAgb3VyIGhhc2hlcyB0byB3aW5kL3Vud2luZC5cbiAgICAgICAgICAvL1xuICAgICAgICAgIGxldCBjaGFpbl90b191bndpbmRfaGFzaGVzID0gW107XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudF93aW5kX2luZGV4OyBpIDwgbmV3X2Jsb2NrX2hhc2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY2hhaW5fdG9fdW53aW5kX2hhc2hlcy5wdXNoKG5ld19ibG9ja19oYXNoZXNbaF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gdW53aW5kIE5FVyBhbmQgd2luZCBPTEQsIGFuZCBzZXQgcmVzZXR0aW5nX2ZsYWcgdG8gMVxuICAgICAgICAgIC8vXG4gICAgICAgICAgdGhpcy51bndpbmRDaGFpbihcbiAgICAgICAgICAgIGJsayxcbiAgICAgICAgICAgIHBvcyxcbiAgICAgICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICAgICAgICBvbGRfYmxvY2tfaGFzaGVzLFxuICAgICAgICAgICAgY2hhaW5fdG9fdW53aW5kX2hhc2hlcyxcbiAgICAgICAgICAgIGZvcmNlLFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIGNoYWluX3RvX3Vud2luZF9oYXNoZXNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW53aW5kQ2hhaW4oYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIG5ld19ibG9ja19oYXNoZXMsIG9sZF9ibG9ja19oYXNoZXMsIGZvcmNlLCByZXNldHRpbmdfZmxhZywgY3VycmVudF91bndpbmRfaW5kZXgpIHtcbiAgICBpZiAob2xkX2Jsb2NrX2hhc2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAvL1xuICAgICAgLy8gbG9hZCBvbGQgYmxvY2tcbiAgICAgIC8vXG4gICAgICBsZXQgb2xkX2JsayA9IGF3YWl0IHRoaXMucmV0dXJuQmxvY2tCeUhhc2hGcm9tRGlzayhvbGRfYmxvY2tfaGFzaGVzW2N1cnJlbnRfdW53aW5kX2luZGV4XSk7XG4gICAgICBpZiAob2xkX2JsayA9PSBudWxsKSB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gcmVxdWVzdCBtaXNzaW5nIGJsb2NrXG4gICAgICAgIC8vXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNzIxMDU4OiBjYW5ub3QgZmluZCBibG9jayB0aGF0IHNob3VsZCBleGlzdCBvbiBkaXNrLi4uXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoKTtcblxuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gYmxvY2sgb3IgZGF0YSBpcyBsZWdpdCwgc28gcnVuIG9uX2NoYWluX3Jlb3JnYW5pemF0aW9uXG4gICAgICAvLyB0aGlzIHNob3VsZCB1cGRhdGUgdGhlIExDIGluZGV4IGFzIHdlbGxcbiAgICAgIHRoaXMub25DaGFpblJlb3JnYW5pemF0aW9uKG9sZF9ibGsucmV0dXJuSGFzaCgpLCBvbGRfYmxrLnJldHVybkJsb2NrSWQoKSwgMCk7XG5cbiAgICAgIC8vXG4gICAgICAvLyBubyBtb3JlIGJsb2NrcyB0byB1bndpbmRcbiAgICAgIC8vXG4gICAgICB0aGlzLndpbmRDaGFpbihcbiAgICAgICAgYmxrLFxuICAgICAgICBwb3MsXG4gICAgICAgIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sXG4gICAgICAgIG5ld19ibG9ja19oYXNoZXMsXG4gICAgICAgIG9sZF9ibG9ja19oYXNoZXMsXG4gICAgICAgIGZvcmNlLFxuICAgICAgICByZXNldHRpbmdfZmxhZyxcbiAgICAgICAgMFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuXG5cbiAgcmV0dXJuTGFzdFNoYXJlZEJsb2NrSWQoZm9ya19pZCwgbGF0ZXN0X2tub3duX2Jsb2NrX2lkKSB7XG5cbiAgICAvLyBpZiB0aGVyZSBpcyBubyBmb3JrX2lkIHN1Ym1pdHRlZCwgd2UgYmFja3BlZGFsIDEgYmxvY2sgdG8gYmUgc2FmZVxuICAgIGlmIChmb3JrX2lkID09IG51bGwgfHwgZm9ya19pZCA9PSBcIlwiKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGZvcmtfaWQubGVuZ3RoIDwgMikgeyBpZiAobGF0ZXN0X2tub3duX2Jsb2NrX2lkID4gMCkgeyBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAxOyB9IGVsc2UgeyByZXR1cm4gMDsgfSB9XG5cbiAgICAvLyByb2xsIGJhY2sgbGF0ZXN0IGtub3duIGJsb2NrIGlkIHRvIGtub3duIGZvcmsgSUQgbWVhc3VyZW1lbnQgcG9pbnRcbiAgICBmb3IgKGxldCB4ID0gbGF0ZXN0X2tub3duX2Jsb2NrX2lkOyB4ID49IDA7IHgtLSkge1xuICAgICAgaWYgKHgldGhpcy5mb3JrX2lkX21vZCA9PSAwKSB7XG4gICAgICAgIGxhdGVzdF9rbm93bl9ibG9ja19pZCA9IHg7XG4gICAgICAgIHggPSAtMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgb3VyX2xhdGVzdF9iaWQgPSB0aGlzLmxhc3RfYmlkO1xuXG4gICAgLy8gcm9sbCBiYWNrIHVudGlsIHdlIGhhdmUgYSBtYXRjaFxuICAgIGZvciAobGV0IGZpaSA9IDA7IGZpaSA8IChmb3JrX2lkLmxlbmd0aC8yKTsgZmlpKyspIHtcblxuICAgICAgdmFyIHBlZXJfZm9ya19pZF9wYWlyID0gZm9ya19pZC5zdWJzdHJpbmcoKDIqZmlpKSwoMipmaWkpKzIpO1xuICAgICAgdmFyIG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZDtcblxuICAgICAgaWYgKGZpaSA9PSAwKSAgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAwOyB9XG4gICAgICBpZiAoZmlpID09IDEpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDEwOyB9XG4gICAgICBpZiAoZmlpID09IDIpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDIwOyB9XG4gICAgICBpZiAoZmlpID09IDMpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDMwOyB9XG4gICAgICBpZiAoZmlpID09IDQpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDQwOyB9XG4gICAgICBpZiAoZmlpID09IDUpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDUwOyB9XG4gICAgICBpZiAoZmlpID09IDYpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDc1OyB9XG4gICAgICBpZiAoZmlpID09IDcpICB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDEwMDsgfVxuICAgICAgaWYgKGZpaSA9PSA4KSAgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAyMDA7IH1cbiAgICAgIGlmIChmaWkgPT0gOSkgIHsgb3VyX2ZvcmtfaWRfcGFpcl9ibG9ja2lkID0gbGF0ZXN0X2tub3duX2Jsb2NrX2lkIC0gNTAwOyB9XG4gICAgICBpZiAoZmlpID09IDEwKSB7IG91cl9mb3JrX2lkX3BhaXJfYmxvY2tpZCA9IGxhdGVzdF9rbm93bl9ibG9ja19pZCAtIDEwMDA7IH1cbiAgICAgIGlmIChmaWkgPT0gMTEpIHsgb3VyX2ZvcmtfaWRfcGFpcl9ibG9ja2lkID0gbGF0ZXN0X2tub3duX2Jsb2NrX2lkIC0gNTAwMDsgfVxuICAgICAgaWYgKGZpaSA9PSAxMikgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSAxMDAwMDsgfVxuICAgICAgaWYgKGZpaSA9PSAxMykgeyBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQgPSBsYXRlc3Rfa25vd25fYmxvY2tfaWQgLSA1MDAwMDsgfVxuXG4gICAgICBpZiAob3VyX2xhdGVzdF9iaWQgPCBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQpIHt9IGVsc2Uge1xuXG4gICAgICAgIC8vIHJldHVybiBoYXNoIGJ5IGJsb2NraWRcbiAgICAgICAgdmFyIHRtcGtsciA9IHRoaXMucmV0dXJuSGFzaEJ5QmxvY2tJZChvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQpO1xuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgbm90IGZvdW5kIGEgbWF0Y2gsIHJldHVybiAwIHNpbmNlIHdlIGhhdmVcbiAgICAgICAgLy8gaXJyZWNvbmNpbGlhYmxlIGZvcmtzLCBzbyB3ZSBqdXN0IGdpdmUgdGhlbSBldmVyeXRoaW5nXG4gICAgICAgIC8vIGluIHRoZSBleHBlY3RhdGlvbiB0aGF0IG9uZSBvZiBvdXIgZm9ya3Mgd2lsbCBldmVudHVhbGx5XG4gICAgICAgIC8vIGJlY29tZSB0aGUgbG9uZ2VzdCBjaGFpblxuICAgICAgICBpZiAodG1wa2xyID09IFwiXCIpIHsgcmV0dXJuIDA7IH1cblxuICAgICAgICB2YXIgb3VyX2ZvcmtfaWRfcGFpciA9IHRtcGtsci5zdWJzdHJpbmcoMCwgMik7XG5cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIG1hdGNoIGluIGZvcmsgSUQgYXQgYSBwb3NpdGlvbiwgdHJlYXQgdGhpc1xuICAgICAgICAvLyBhcyB0aGUgc2hhcmVkIGZvcmtJRFxuICAgICAgICBpZiAob3VyX2ZvcmtfaWRfcGFpciA9PSBwZWVyX2ZvcmtfaWRfcGFpcikge1xuICAgICAgICAgIHJldHVybiBvdXJfZm9ya19pZF9wYWlyX2Jsb2NraWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuXG5cblxuICByZXR1cm5Mb25nZXN0Q2hhaW5JbmRleFBvc0FycmF5KGNoYWlubGVuZ3RoPTEwKSB7XG5cbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID09IDApIHsgcmV0dXJuIFtdOyB9XG4gICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aCA8IGNoYWlubGVuZ3RoKSB7IGNoYWlubGVuZ3RoID0gdGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoOyB9XG4gICAgaWYgKGNoYWlubGVuZ3RoID09IDApIHsgcmV0dXJuIFtdOyB9XG5cbiAgICB2YXIgYmNoYWluSW5kZXggPSBbXTtcbiAgICB2YXIgY2hhaW5fcG9zID0gdGhpcy5sY19wb3M7XG5cbiAgICBiY2hhaW5JbmRleC5wdXNoKGNoYWluX3Bvcyk7XG5cbiAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGNoYWlubGVuZ3RoOyB6KyspIHtcblxuICAgICAgdmFyIHByZXZfcG9zID0gY2hhaW5fcG9zLTE7XG4gICAgICB2YXIgcHJldl9mb3VuZCA9IDA7XG5cbiAgICAgIGlmIChwcmV2X3BvcyA9PSAtMSkge1xuICAgICAgICB6ID0gY2hhaW5sZW5ndGgrMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlIChwcmV2X3BvcyA+PSAwICYmIHByZXZfZm91bmQgPT0gMCkge1xuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1twcmV2X3Bvc10ucmV0dXJuSGFzaCgpID09IHRoaXMuaW5kZXguYmxvY2tzW2NoYWluX3Bvc10uYmxvY2sucHJldmJzaCkge1xuICAgICAgICAgICAgYmNoYWluSW5kZXgucHVzaChwcmV2X3Bvcyk7XG4gICAgICAgICAgICBwcmV2X2ZvdW5kID0gMTtcbiAgICAgICAgICAgIGNoYWluX3BvcyA9IHByZXZfcG9zO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmV2X3Bvcy0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYmNoYWluSW5kZXg7XG4gIH1cblxuXG5cbiAgdXBkYXRlRm9ya0lkKGJsaykge1xuXG4gICAgaWYgKGJsayA9PSBudWxsKSB7IHJldHVybiB0aGlzLmZvcmtfaWQ7IH1cblxuICAgIGxldCBiYXNlX2JpZFx0PSBibGsuYmxvY2suaWQ7XG4gICAgbGV0IGZvcmtfaWQgICA9IFwiXCI7XG4gICAgbGV0IGluZGV4cG9zICA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aC0xO1xuXG4gICAgLy9cbiAgICAvLyByb2xsIGJhY2sgdG8gY29uc2Vuc3VzIHN0YXJ0aW5nIHBvaW50IGZvciBtZWFzdXJpbmdcbiAgICAvL1xuICAgIGZvciAobGV0IHggPSBiYXNlX2JpZDsgeCA+PSAwOyB4LS0pIHtcbiAgICAgIGlmICh4JXRoaXMuZm9ya19pZF9tb2QgPT0gMCkge1xuICAgICAgICBiYXNlX2JpZCA9IHg7XG4gICAgICAgIHggPSAtMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMCwgc3RvcCA9IDA7IHN0b3AgPT0gMCAmJiBpIDwgdGhpcy5nZW5lc2lzX3BlcmlvZDspIHtcblxuICAgICAgbGV0IGNoZWNrcG9pbnRibGtpZCA9IGJhc2VfYmlkLWk7XG4gICAgICBpbmRleHBvcyA9IHRoaXMucmV0dXJuTG9uZ2VzdENoYWluSW5kZXhBcnJheShjaGVja3BvaW50YmxraWQsIGluZGV4cG9zKTtcblxuICAgICAgaWYgKGluZGV4cG9zID09IC0xIHx8IGNoZWNrcG9pbnRibGtpZCA8IDApIHsgc3RvcCA9IDE7IH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgdGggPSB0aGlzLmluZGV4Lmhhc2hbaW5kZXhwb3NdO1xuICAgICAgICBmb3JrX2lkICs9IHRoLnN1YnN0cmluZygwLDIpO1xuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gaWYgdGhpcyBpcyBlZGl0ZWQsIHdlIGhhdmUgdG9cbiAgICAgIC8vIGFsc28gY2hhbmdlIHRoZSBmdW5jdGlvblxuICAgICAgLy9cbiAgICAgIC8vIC0gcmV0dXJuTGFzdFNoYXJlZEJsb2NrSWRcbiAgICAgIC8vXG4gICAgICBpZiAoaSA9PSAxMDAwMCkgeyBpID0gNTAwMDA7IH1cbiAgICAgIGlmIChpID09IDUwMDApICB7IGkgPSAxMDAwMDsgfVxuICAgICAgaWYgKGkgPT0gMTAwMCkgIHsgaSA9IDUwMDA7IH1cbiAgICAgIGlmIChpID09IDUwMCkgICB7IGkgPSAxMDAwOyB9XG4gICAgICBpZiAoaSA9PSAyMDApICAgeyBpID0gNTAwOyB9XG4gICAgICBpZiAoaSA9PSAxMDApICAgeyBpID0gMjAwOyB9XG4gICAgICBpZiAoaSA9PSA3NSkgICAgeyBpID0gMTAwOyB9XG4gICAgICBpZiAoaSA9PSA1MCkgICAgeyBpID0gNzU7IH1cbiAgICAgIGlmIChpID09IDQwKSAgICB7IGkgPSA1MDsgfVxuICAgICAgaWYgKGkgPT0gMzApICAgIHsgaSA9IDQwOyB9XG4gICAgICBpZiAoaSA9PSAyMCkgICAgeyBpID0gMzA7IH1cbiAgICAgIGlmIChpID09IDEwKSAgICB7IGkgPSAyMDsgfVxuICAgICAgaWYgKGkgPT0gMCkgICAgIHsgaSA9IDEwOyB9XG5cbiAgICAgIGlmIChpID4gdGhpcy5nZW5lc2lzX3BlcmlvZCB8fCBpID09IDUwMDAwKSB7IHN0b3AgPSAxOyB9XG5cbiAgICB9XG5cbiAgICB0aGlzLmZvcmtfaWQgPSBmb3JrX2lkO1xuXG4gIH1cblxuICBhc3luYyBhZGRCbG9ja1RvQmxvY2tjaGFpblN1Y2Nlc3MoYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIGZvcmNlPWZhbHNlKSB7XG5cbiAgICAvL1xuICAgIC8vIHNhdmUgYmxvY2sgdG8gZGlza1xuICAgIC8vXG4gICAgYXdhaXQgdGhpcy5hcHAuc3RvcmFnZS5zYXZlQmxvY2soYmxrLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluKTtcblxuXG4gICAgLy9cbiAgICAvLyByZW9yZ2FuaXplIFRISVMgYmxvY2tcbiAgICAvL1xuICAgIGlmIChpX2FtX3RoZV9sb25nZXN0X2NoYWluID09IDEpIHtcblxuICAgICAgdGhpcy5hcHAud2FsbGV0LnJlc2V0RXhpc3RpbmdTbGlwcyhibGsuYmxvY2suaWQsIGJsay5yZXR1cm5IYXNoKCksIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4pO1xuICAgICAgdGhpcy5ic2hfbGNfaG1hcFtibGsucmV0dXJuSGFzaCgpXSA9IDE7XG4gICAgICB0aGlzLmJpZF9ic2hfaG1hcFtibGsuYmxvY2suaWRdID0gYmxrLnJldHVybkhhc2goKTtcblxuICAgICAgdGhpcy5sY19wb3Nfc2V0XHQ9IHRydWU7XG4gICAgICB0aGlzLmxjX3BvcyBcdD0gcG9zO1xuXG4gICAgICB0aGlzLnNhdmVCbG9ja2NoYWluKGJsayk7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBtb3ZlZCB0byBzdWJzZXF1ZW50IHByb2Nlc3NpbmdcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgbW9kdWxlcyAod2l0aCBzeW5jIGluZm8pID9cbiAgICAvL1xuICAgIC8vdGhpcy5hcHAubW9kdWxlcy51cGRhdGVCbG9ja2NoYWluU3luYyhibGsuYmxvY2suaWQsIHRoaXMucmV0dXJuVGFyZ2V0QmxvY2tJZCgpKTtcblxuICAgIHRoaXMuc2F2ZUJsb2NrY2hhaW4oKTtcblxuICAgIC8vXG4gICAgLy8gY2xlYW51cFxuICAgIC8vXG4gICAgdGhpcy5hcHAubWVtcG9vbC5yZW1vdmVCbG9ja0FuZFRyYW5zYWN0aW9ucyhibGspO1xuXG4gICAgLy9cbiAgICAvLyBwcm9wYWdhdGUgYmxvY2tcbiAgICAvL1xuICAgIHRoaXMuYXBwLm5ldHdvcmsucHJvcGFnYXRlQmxvY2soYmxrKTtcblxuICAgIGlmICghZm9yY2UpIHtcblxuICAgICAgLy9cbiAgICAgIC8vIHdhbGxldCBwcm9jZXNzIHNsaXBzIChpZiBub24gZm9yY2VkKVxuICAgICAgLy9cbiAgICAgIHRoaXMuYXBwLndhbGxldC5wcm9jZXNzUGF5bWVudHMoYmxrLCBpX2FtX3RoZV9sb25nZXN0X2NoYWluKTtcblxuICAgICAgLy9cbiAgICAgIC8vIHBhc3MgY29udHJvbCB0byB0aGUgY2FsbGJhY2sgbWFuYWdlclxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLnJ1bl9jYWxsYmFja3MgPT0gMSkge1xuXG4gICAgICAgIGJsay5hZmZpeENhbGxiYWNrcygwKTtcblxuICAgICAgICBpZiAoaV9hbV90aGVfbG9uZ2VzdF9jaGFpbiA9PSAxICYmICFmb3JjZSkge1xuXG4gICAgICAgICAgbGV0IG91cl9sb25nZXN0X2NoYWluID0gdGhpcy5yZXR1cm5Mb25nZXN0Q2hhaW5JbmRleFBvc0FycmF5KHRoaXMuY2FsbGJhY2tfbGltaXQpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3VyX2xvbmdlc3RfY2hhaW4ubGVuZ3RoICYmIGkgPCB0aGlzLmNhbGxiYWNrX2xpbWl0OyBpKyspIHtcblxuXHQgICAgLy9cblx0ICAgIC8vIHJ1biBjYWxsYmFja3Mgd2l0aCBUWFNcblx0ICAgIC8vXG4gICAgICAgICAgICBsZXQgYmxrID0gdGhpcy5pbmRleC5ibG9ja3Nbb3VyX2xvbmdlc3RfY2hhaW5baV1dO1xuICAgICAgICAgICAgaWYgKGJsayAhPSBudWxsKSB7XG5cbi8vICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGJsay5ydW5DYWxsYmFja3MoaSk7XG4vLyAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4vL1x0ICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MTIwOTogZXJyb3IgcnVubmluZyBjYWxsYmFja3MgXCIgKyBlcnIpO1xuLy9cdCAgICAgIH1cbiAgICBcdCAgICB9XG4gIFx0ICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gcGVybWl0IGFkZGl0aW9uIG9mIG5leHQgYmxvY2tcbiAgICAvL1xuICAgIHRoaXMuaW5kZXhpbmdfYWN0aXZlID0gMDtcblxuXG4gICAgaWYgKCFmb3JjZSkge1xuICAgICAgdGhpcy5hcHAubWluZXIuc3RhcnRNaW5pbmcoYmxrKTtcbiAgICB9XG5cbiAgfVxuXG5cblxuICBhc3luYyBhZGRCbG9ja1RvQmxvY2tjaGFpbkZhaWx1cmUoYmxrLCBwb3MsIGlfYW1fdGhlX2xvbmdlc3RfY2hhaW4sIGZvcmNlPW5vKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcIkZBSUxVUkUgQURESU5HIEJMT0NLOiBcIiArIGJsay5yZXR1cm5IYXNoKCkgKyBcIiAtLSBcIiArIHBvcyArIFwiIC0tIFwiICsgaV9hbV90aGVfbG9uZ2VzdF9jaGFpbik7XG4gICAgLy9cbiAgICAvLyByZXN0b3JlIGxvbmdlc3QgY2hhaW5cbiAgICAvL1xuICAgIHRoaXMubGNfcG9zID0gdGhpcy5sYXN0X2xjX3BvcztcblxuICAgIHRoaXMub25DaGFpblJlb3JnYW5pemF0aW9uKGJsay5yZXR1cm5IYXNoKCksIGJsay5ibG9jay5pZCwgMCk7XG5cbiAgICBkZWxldGUgdGhpcy5ic2hfbGNfaG1hcFtibGsucmV0dXJuSGFzaCgpXTtcbiAgICBkZWxldGUgdGhpcy5ic2hfYmlkX2htYXBbYmxrLnJldHVybkhhc2goKV07XG4gICAgZGVsZXRlIHRoaXMuYnNoX3RzX2htYXBbYmxrLnJldHVybkhhc2goKV07XG5cblxuICAgIC8vIHJlc2V0IG1pbmVyXG4gICAgdGhpcy5hcHAubWluZXIuc3RvcE1pbmluZygpO1xuICAgIGxldCBvbGRibGsgPSB0aGlzLnJldHVybkxhdGVzdEJsb2NrKCk7XG4gICAgaWYgKG9sZGJsayAhPSBudWxsKSB7XG4gICAgICB0aGlzLmFwcC5taW5lci5zdGFydE1pbmluZyhvbGRibGspO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gcmVtb3ZlIGJhZCBldmVyeXRoaW5nXG4gICAgLy9cbiAgICB0aGlzLmFwcC5tZW1wb29sLnJlbW92ZUJsb2NrQW5kVHJhbnNhY3Rpb25zKGJsayk7XG5cbiAgICAvL1xuICAgIC8vIHJlc3VtZSBub3JtYWwgb3BlcmF0aW9uc1xuICAgIC8vXG4gICAgdGhpcy5pbmRleGluZ19hY3RpdmUgPSAwO1xuICAgIHJldHVybiAxO1xuXG4gIH1cblxuXG5cblxuXG4gIGJpbmFyeUluc2VydChsaXN0LCBpdGVtLCBjb21wYXJlLCBzZWFyY2gpIHtcblxuICAgIHZhciBzdGFydCA9IDA7XG4gICAgdmFyIGVuZCA9IGxpc3QubGVuZ3RoO1xuXG4gICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG5cbiAgICAgIHZhciBwb3MgPSAoc3RhcnQgKyBlbmQpID4+IDE7XG4gICAgICB2YXIgY21wID0gY29tcGFyZShpdGVtLCBsaXN0W3Bvc10pO1xuXG4gICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgIHN0YXJ0ID0gcG9zO1xuICAgICAgICBlbmQgPSBwb3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChjbXAgPCAwKSB7XG4gICAgICAgIGVuZCA9IHBvcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0ID0gcG9zICsgMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXNlYXJjaCkgeyBsaXN0LnNwbGljZShzdGFydCwgMCwgaXRlbSk7IH1cblxuICAgIHJldHVybiBzdGFydDtcbiAgfVxuXG5cbiAgb25DaGFpblJlb3JnYW5pemF0aW9uKGJzaCwgYmlkLCBsYykge1xuXG4gICAgLy9cbiAgICAvLyB1cGRhdGUgaGFzaG1hcCB2YWx1ZXNcbiAgICAvL1xuICAgIHRoaXMuYnNoX2xjX2htYXBbYnNoXSA9IGxjO1xuICAgIGlmIChsYyA9PSAwKSB7XG4gICAgICBkZWxldGUgdGhpcy5iaWRfYnNoX2htYXBbYmlkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5iaWRfYnNoX2htYXBbYmlkXSA9IGJzaDtcbiAgICB9XG5cbiAgfVxuXG4gIGlzSGFzaEluZGV4ZWQoaGFzaCkge1xuICAgIGlmICh0aGlzLmJzaF9iaWRfaG1hcFtoYXNoXSA+IDApIHsgcmV0dXJuIHRydWU7IH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm5MYXRlc3RCbG9jaygpIHtcbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3MubGVuZ3RoID09IDApIHsgcmV0dXJuIG51bGw7IH1cbiAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdO1xuICB9XG5cbiAgcmV0dXJuTGF0ZXN0QmxvY2tIYXNoKCkge1xuICAgIGxldCBibGsgPSB0aGlzLnJldHVybkxhdGVzdEJsb2NrKCk7XG4gICAgaWYgKGJsayA9PSBudWxsKSB7IHJldHVybiBcIlwiOyB9XG4gICAgcmV0dXJuIGJsay5yZXR1cm5IYXNoKCk7XG4gIH1cblxuICByZXR1cm5MYXRlc3RCbG9ja1RpbWVzdGFtcCgpIHtcbiAgICBsZXQgYmxrID0gdGhpcy5yZXR1cm5MYXRlc3RCbG9jaygpO1xuICAgIGlmIChibGsgPT0gbnVsbCkgeyByZXR1cm4gMDsgfVxuICAgIGlmIChibGsuYmxvY2sgPT0gbnVsbCkgeyByZXR1cm4gMDsgfVxuICAgIHJldHVybiBibGsuYmxvY2sudHM7XG4gIH1cblxuXG5cbiAgcmV0dXJuQmxvY2tCeUhhc2goaGFzaCkge1xuICAgIGlmICh0aGlzLmlzSGFzaEluZGV4ZWQoaGFzaCkpIHtcbiAgICAgIGZvciAobGV0IHYgPSB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGgtMTsgdiA+PSAwOyB2LS0gKSB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t2XS5yZXR1cm5IYXNoKCkgPT0gaGFzaCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmJsb2Nrc1t2XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJldHVybkJsb2NrQnlIYXNoRnJvbURpc2soaGFzaCkge1xuICAgIGlmICh0aGlzLmlzSGFzaEluZGV4ZWQoaGFzaCkpIHtcbiAgICAgIGZvciAobGV0IHYgPSB0aGlzLmluZGV4LmJsb2Nrcy5sZW5ndGgtMTsgdiA+PSAwOyB2LS0gKSB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t2XS5yZXR1cm5IYXNoKCkgPT0gaGFzaCkge1xuICAgICAgICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t2XS50cmFuc2FjdGlvbnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja0J5SGFzaChoYXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyByZXR1cm5CbG9ja0J5SWQoYmlkLCBtb2RlPTApIHtcblxuICAgIC8vXG4gICAgLy8gbW9kZVxuICAgIC8vXG4gICAgLy8gMCAtLSBmZXRjaCBibG9jayBmcm9tIG1lbW9yeSAvIHR4cyBub3QgbmVlZGVkXG4gICAgLy8gMSAtLSByZXF1aXJlIHRyYW5zYWN0aW9uc1xuICAgIC8vXG4gICAgbGV0IGhhc2ggPSB0aGlzLmJpZF9ic2hfaG1hcFtiaWRdO1xuICAgIGlmIChoYXNoID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbnVsbDsgfVxuXG4gICAgaWYgKHRoaXMuaXNIYXNoSW5kZXhlZChoYXNoKSkge1xuICAgICAgZm9yIChsZXQgdiA9IHRoaXMuaW5kZXguYmxvY2tzLmxlbmd0aC0xOyB2ID49IDA7IHYtLSApIHtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzW3ZdLnJldHVybkhhc2goKSA9PSBoYXNoKSB7XG4gICAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmJsb2Nrc1t2XTtcbiAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzW3ZdLnRyYW5zYWN0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLmxvYWRCbG9ja0J5SGFzaChoYXNoKTtcblx0ICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3Nbdl07XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3Nbdl07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuTWluVHhJZCgpIHtcbiAgICBpZiAodGhpcy5sY19wb3MgPT0gbnVsbCkgeyByZXR1cm4gMDsgfVxuICAgIGlmICh0aGlzLmluZGV4LmJsb2Nrc1t0aGlzLmxjX3Bvc10ubWludHhpZCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIDA7IH1cbiAgICByZXR1cm4gdGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdLm1heHR4aWQ7XG4gIH1cblxuICByZXR1cm5NYXhUeElkKCkge1xuICAgIGlmICh0aGlzLmxjX3BvcyA9PSBudWxsKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGNfcG9zXS5tYXh0eGlkID09IHVuZGVmaW5lZCkgeyByZXR1cm4gMDsgfVxuICAgIHJldHVybiB0aGlzLmluZGV4LmJsb2Nrc1t0aGlzLmxjX3Bvc10ubWF4dHhpZDtcbiAgfVxuXG4gIHJldHVybk1pblR4SWQoKSB7XG4gICAgaWYgKHRoaXMubGNfcG9zID09IG51bGwpIHsgcmV0dXJuIDA7IH1cbiAgICBpZiAodGhpcy5pbmRleC5ibG9ja3NbdGhpcy5sY19wb3NdLm1pbnR4aWQgPT0gdW5kZWZpbmVkKSB7IHJldHVybiAwOyB9XG4gICAgcmV0dXJuIHRoaXMuaW5kZXguYmxvY2tzW3RoaXMubGNfcG9zXS5tYXh0eGlkO1xuICB9XG5cblxuICBzYXZlQmxvY2tjaGFpbihibGspIHtcblxuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbik7XG5cbiAgICBpZiAoYmxrID09IG51bGwpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmxhc3RfYnNoID0gYmxrLnJldHVybkhhc2goKTtcbiAgICB0aGlzLmxhc3RfYmlkID0gYmxrLmJsb2NrLmlkO1xuICAgIHRoaXMubGFzdF90cyAgPSBibGsuYmxvY2sudHM7XG4gICAgdGhpcy5sYXN0X2JmICA9IGJsay5ibG9jay5iZjtcblxuICAgIC8vXG4gICAgLy8gcHVyZ2UgdW5uZWNlc3NhcnkgZGF0YVxuICAgIC8vXG5cbiAgICAvL1xuICAgIC8vIHNlbGVjdGl2ZSB1cGRhdGVzXG4gICAgLy9cbiAgICBpZiAoYmxrLmJsb2NrLmlkJXRoaXMuZm9ya19pZF9tb2QgPT0gMCkge1xuICAgICAgdGhpcy5mb3JrX2lkICA9IHRoaXMudXBkYXRlRm9ya0lkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYnNoXHRcdD0gdGhpcy5sYXN0X2JzaDtcbiAgICB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubGFzdF9iaWRcdFx0PSB0aGlzLmxhc3RfYmlkO1xuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5sYXN0X3RzXHRcdFx0PSB0aGlzLmxhc3RfdHM7XG4gICAgdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmxhc3RfYmZcdFx0XHQ9IHRoaXMubGFzdF9iZjtcblxuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX3RzXHRcdD0gdGhpcy5nZW5lc2lzX3RzO1xuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5nZW5lc2lzX2JpZFx0XHQ9IHRoaXMuZ2VuZXNpc19iaWQ7XG4gICAgdGhpcy5hcHAub3B0aW9ucy5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kXHRcdD0gdGhpcy5nZW5lc2lzX3BlcmlvZDtcbiAgICB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfdHNcdD0gdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV90cztcbiAgICB0aGlzLmFwcC5vcHRpb25zLmJsb2NrY2hhaW4ubG93ZXN0X2FjY2VwdGFibGVfYnNoXHQ9IHRoaXMubG93ZXN0X2FjY2VwdGFibGVfYnNoO1xuICAgIHRoaXMuYXBwLm9wdGlvbnMuYmxvY2tjaGFpbi5sb3dlc3RfYWNjZXB0YWJsZV9iaWRcdD0gdGhpcy5sb3dlc3RfYWNjZXB0YWJsZV9iaWQ7XG5cbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gQmxvY2tjaGFpbjtcblxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFDQTtBQUNBOzs7O0FBSUE7Ozs7O0FBQ0E7QUFDQTs7OztBQUlBOzs7OztBQUNBO0FBQ0E7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7Ozs7QUFFQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOzs7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7OztBQUdBOzs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7Ozs7OztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQVVBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBRUE7Ozs7Ozs7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7QUFFQTtBQUNBOztBQURBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7O0FBT0E7Ozs7O0FBWUE7Ozs7O0FBQ0E7Ozs7O0FBWUE7QUFDQTs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7Ozs7Ozs7O0FBaUJBO0FBQ0E7O0FBREE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7Ozs7OztBQUNBO0FBQ0E7Ozs7OztBQUVBO0FBQ0E7Ozs7Ozs7OztBQUdBOzs7Ozs7OztBQWNBO0FBQ0E7QUFLQTtBQUdBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFVQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBOzs7Ozs7QUFDQTs7Ozs7O0FBSUE7QUFDQTs7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUlBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFFQTs7Ozs7Ozs7Ozs7QUFBQTs7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOzs7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7O0FBREE7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7QUFHQTtBQUNBOztBQVZBOzs7OztBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0E7Ozs7Ozs7O0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBOzs7Ozs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQURBOzs7OztBQUNBOzs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7OztBQUpBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBOzs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFBQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBREE7Ozs7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQVpBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/saito/blockchain.js\n");
655c655
< eval("function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nvar Big = __webpack_require__(/*! big.js */ \"./node_modules/big.js/big.js\");\n\nvar saito = __webpack_require__(/*! ./saito */ \"./lib/saito/saito.js\");\n/**\n * Transaction Constructor\n * @param {****REMOVED*** txobj\n */\n\n\nvar Transaction =\n/*#__PURE__*/\nfunction () {\n  function Transaction() {\n    var txobj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, Transaction);\n\n    /////////////////////////\n    // consensus variables //\n    /////////////////////////\n    this.transaction = {***REMOVED***;\n    this.transaction.id = 1;\n    this.transaction.from = [];\n    this.transaction.to = [];\n    this.transaction.ts = new Date().getTime();\n    this.transaction.sig = \"\"; // sig of tx\n\n    this.transaction.ver = 1.0;\n    this.transaction.path = [];\n    this.transaction.type = 0; //\n    // TYPES\n    //\n    // 0 = normal output\n    // 1 = golden ticket\n    // 2 = fee transaction\n    // 3 = vip transaction\n    // 4 = staking transaction\n    // 5 = rebroadcast tx\n    //\n    // 4 = golden chunk)\n    //# 6 = staking\n    //\n    // 0 = normal\n    // 1 = golden ticket\n    // 2 = fee transaction\n    // 3 = rebroadcasting\n    // 4 = VIP rebroadcast\n    // 5 = floating coinbase / golden chunk\n    // 6 = staking pending rebroadcast\n    // 7 = staking current\n\n    this.transaction.msg = {***REMOVED***;\n    this.transaction.ps = 0;\n    this.fees_total = \"\";\n    this.work_available_to_me = \"\";\n    this.work_available_to_creator = \"\";\n    this.work_cumulative = \"0.0\"; // cumulative fees, inc. fees in this reflect\n    // how much this transaction carries in the\n    // weight of the block. we use this to find\n    // the winning node in the block for the\n    // routing payment. i.e. this measures the\n    // cumulative weight of the usable fees that\n    // are behind the transactions.\n\n    this.dmsg = \"\";\n    this.size = 0;\n    this.is_valid = 1;\n    this.atr_trapdoor = \"00000000000000000000000000000000000000000000\"; //this.atr_trapdoor\t\t   = \"y3GL6Agn4ZkF2z8RhmQXkYY6GTaKXgDFoDdKRcoDjY2X\";\n\n    this.atr_rebroadcasting_limit = 10; // < 10 SAITO no rebroadcasting\n\n    if (txobj != null) {\n      try {\n        this.transaction = txobj;\n        this.transaction.from = this.transaction.from.map(function (slip) {\n          var add = slip.add,\n              amt = slip.amt,\n              type = slip.type,\n              bid = slip.bid,\n              tid = slip.tid,\n              sid = slip.sid,\n              bsh = slip.bsh;\n          return new saito.slip(add, amt, type, bid, tid, sid, bsh);\n    ***REMOVED***);\n        this.transaction.to = this.transaction.to.map(function (slip) {\n          var add = slip.add,\n              amt = slip.amt,\n              type = slip.type,\n              bid = slip.bid,\n              tid = slip.tid,\n              sid = slip.sid,\n              bsh = slip.bsh;\n          return new saito.slip(add, amt, type, bid, tid, sid, bsh);\n    ***REMOVED***);\n  ***REMOVED*** catch (err) {\n        this.is_valid = 0;\n  ***REMOVED***\n***REMOVED***\n\n    return this;\n  ***REMOVED***\n\n  _createClass(Transaction, [{\n    key: \"clone\",\n    value: function clone() {\n      return Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"generateRebroadcastTransaction\",\n    value: function generateRebroadcastTransaction(tid, sid) {\n      var avg_fee = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n\n      if (this.transaction.to.length == 0) {\n        return null;\n  ***REMOVED***\n\n      var newtx = new saito.transaction();\n      newtx.transaction.sig = this.transaction.sig;\n      newtx.transaction.msg = {***REMOVED***;\n      newtx.transaction.ts = new Date().getTime();\n      var fee = Big(avg_fee);\n\n      if (avg_fee == 0) {\n        fee = Big(2);\n  ***REMOVED*** //////////////////\n      // rebroadcasts //\n      //////////////////\n\n\n      if (this.transaction.type == 4) {\n        fee = Big(0);\n  ***REMOVED***\n\n      if (this.transaction.type == 0 || this.transaction.type == 1 || this.transaction.type == 2 || this.transaction.type == 3 || this.transaction.type == 4 || this.transaction.type == 5) {\n        newtx.transaction.type = 5;\n\n        if (this.transaction.msg.loop == undefined) {\n          newtx.transaction.msg.loop = 1;\n    ***REMOVED*** else {\n          newtx.transaction.msg.loop = this.transaction.msg.loop + 1;\n    ***REMOVED***\n\n        var amt = Big(this.transaction.to[sid].amt).minus(fee);\n\n        if (amt.lt(0)) {\n          fee = Big(this.transaction.to[sid].amt);\n          amt = Big(0);\n    ***REMOVED***\n\n        if (this.transaction.msg.tx != undefined) {\n          newtx.transaction.msg.tx = this.transaction.msg.tx;\n    ***REMOVED*** else {\n          newtx.transaction.msg.tx = JSON.stringify(this.transaction);\n    ***REMOVED***\n\n        var from = new saito.slip(this.transaction.to[sid].add, this.transaction.to[sid].amt, 5);\n        from.tid = tid;\n        from.sid = sid;\n        var to = new saito.slip(this.transaction.to[sid].add, amt.toFixed(8), 5);\n        var fees = new saito.slip(this.atr_trapdoor, fee.toFixed(8));\n        fees.sid = 1;\n        newtx.transaction.from.push(from);\n        newtx.transaction.to.push(to);\n        newtx.transaction.to.push(fees);\n  ***REMOVED***\n      /****\n      \n  ***REMOVED***////////////////\n  ***REMOVED*** golden chunk //\n  ***REMOVED***////////////////\n          if (this.transaction.type == 5) {\n      \n            newtx.transaction.type = this.transaction.type;\n      \n    ***REMOVED*** calculate fee\n    ***REMOVED***\n    ***REMOVED*** average fee * 10\n    ***REMOVED***\n            var fee = Big(Big(avg_fee).times(10).toFixed(8));\n      \n    ***REMOVED***\n    ***REMOVED*** minimum of 20\n    ***REMOVED***\n            if (fee.lt(20)) { fee = Big(20); ***REMOVED***\n            var amt = Big(this.transaction.to[sid].amt).minus(fee);\n            if (amt.lt(0)) {\n              fee = Big(this.transaction.to[sid].amt);\n              amt = Big(0);\n        ***REMOVED***\n      \n            if (this.transaction.msg.tx != undefined) {\n              newtx.transaction.msg.tx = this.transaction.msg.tx;\n        ***REMOVED*** else {\n              newtx.transaction.msg.tx = JSON.stringify(this.transaction);\n        ***REMOVED***\n      \n            var from = new saito.slip(this.transaction.to[sid].add, this.transaction.to[sid].amt, 5);\n                from.tid = tid;\n                from.sid = sid;\n            var to   = new saito.slip(this.transaction.to[sid].add, amt.toFixed(8), 5);\n            var fees = new saito.slip(this.atr_trapdoor_address, fee.toFixed(8));\n            fees.sid = 1;\n      \n            newtx.transaction.from.push(from);\n            newtx.transaction.to.push(to);\n            newtx.transaction.to.push(fees);   // this ensures fee falls into money supply\n      \n      ***REMOVED***\n      ****/\n\n\n      return newtx;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isFrom\",\n    value: function isFrom(senderPublicKey) {\n      if (this.returnSlipsFrom(senderPublicKey).length != 0) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isTo\",\n    value: function isTo(receiverPublicKey) {\n      if (this.returnSlipsTo(receiverPublicKey).length > 0) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isGoldenTicket\",\n    value: function isGoldenTicket() {\n      if (this.transaction.type == 1) {\n        return 1;\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isRebroadcast\",\n    value: function isRebroadcast(oldblk, newblk, sid) {\n      //\n      // Golden Chunk transactions must point to the trapdoor address in order to be considered valid\n      //\n      //if (this.transaction.to[sid].add  == this.atr_trapdoor) {\n      //  if (this.transaction.to[sid].type == 5) { return true; ***REMOVED***\n      //  return false;\n      //***REMOVED***\n      // vip transactions always rebroadcast\n      if (this.transaction.type == 3) {\n        return true;\n  ***REMOVED*** // everything else requires money\n\n\n      if (this.transaction.to.length == 0) {\n        return false;\n  ***REMOVED***\n\n      if (this.transaction.to[sid] == undefined) {\n        return false;\n  ***REMOVED***\n\n      if (Big(this.transaction.to[sid].amt).gt(this.atr_rebroadcasting_limit)) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"involvesPublicKey\",\n    value: function involvesPublicKey(publickey) {\n      var slips = this.returnSlipsToAndFrom(publickey);\n\n      if (slips.to.length > 0 || slips.from.length > 0) {\n        return 1;\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnPaymentTo\",\n    value: function returnPaymentTo(publickey) {\n      var slips = this.returnSlipsToAndFrom(publickey);\n      var x = Big(0.0);\n\n      for (var v = 0; v < slips.to.length; v++) {\n        if (slips.to[v].add === publickey) {\n          x = x.plus(Big(slips.to[v].amt));\n    ***REMOVED***\n  ***REMOVED***\n\n      return x.toFixed(8).replace(/0+$/, '').replace(/\\.$/, '\\.0');\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSlipsFrom\",\n    value: function returnSlipsFrom(fromAddress) {\n      var x = [];\n\n      if (this.transaction.from != null) {\n        for (var v = 0; v < this.transaction.from.length; v++) {\n          if (this.transaction.from[v].add === fromAddress) {\n            x.push(this.transaction.from[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return x;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSlipsToAndFrom\",\n    value: function returnSlipsToAndFrom(theAddress) {\n      var x = {***REMOVED***;\n      x.from = [];\n      x.to = [];\n\n      if (this.transaction.from != null) {\n        for (var v = 0; v < this.transaction.from.length; v++) {\n          if (this.transaction.from[v].add === theAddress) {\n            x.from.push(this.transaction.from[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      if (this.transaction.to != null) {\n        for (var v = 0; v < this.transaction.to.length; v++) {\n          if (this.transaction.to[v].add === theAddress) {\n            x.to.push(this.transaction.to[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return x;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSlipsTo\",\n    value: function returnSlipsTo(toAddress) {\n      var x = [];\n\n      if (this.transaction.to != null) {\n        for (var v = 0; v < this.transaction.to.length; v++) {\n          if (this.transaction.to[v].add === toAddress) {\n            x.push(this.transaction.to[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return x;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"decryptMessage\",\n    value: function decryptMessage(app) {\n      try {\n        this.dmsg = app.keys.decryptMessage(this.transaction.from[0].add, this.transaction.msg);\n  ***REMOVED*** catch (e) {***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMessage\",\n    value: function returnMessage() {\n      if (this.dmsg != \"\") {\n        return this.dmsg;\n  ***REMOVED***\n\n      return this.transaction.msg;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSignature\",\n    value: function returnSignature(app) {\n      if (this.transaction.sig != \"\") {\n        return this.transaction.sig;\n  ***REMOVED***\n\n      this.transaction.sig = app.wallet.signMessage(this.returnSignatureSource(app));\n      return this.transaction.sig;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSignatureSource\",\n    value: function returnSignatureSource(app) {\n      // return this.transaction.sig;\n      return \"\".concat(this.transaction.ts).concat(this.transaction.ps).concat(this.transaction.type);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFees\",\n    value: function returnFees(app) {\n      if (this.fees_total == \"\") {\n***REMOVED***\n***REMOVED*** sum inputs\n***REMOVED***\n        var inputs = Big(0.0);\n\n        if (this.transaction.from != null) {\n          for (var v = 0; v < this.transaction.from.length; v++) {\n            inputs = inputs.plus(Big(this.transaction.from[v].amt));\n      ***REMOVED***\n    ***REMOVED*** //\n***REMOVED*** sum outputs\n***REMOVED***\n\n\n        var outputs = Big(0.0);\n\n        for (var _v = 0; _v < this.transaction.to.length; _v++) {\n  ***REMOVED***\n  ***REMOVED*** only count non-gt transaction outputs\n  ***REMOVED***\n          if (this.transaction.to[_v].type != 1 && this.transaction.to[_v].type != 2) {\n            outputs = outputs.plus(Big(this.transaction.to[_v].amt));\n      ***REMOVED***\n    ***REMOVED***\n\n        var tx_fees = inputs.minus(outputs);\n        this.fees_total = tx_fees.toFixed(8);\n  ***REMOVED***\n\n      return this.fees_total;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnRoutingWorkAvailable\",\n    value: function returnRoutingWorkAvailable(app) {\n      var publickey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var uf = Big(this.returnFees(app));\n\n      for (var i = 0; i < this.transaction.path.length; i++) {\n        var d = 1;\n\n        for (var j = i; j > 0; j--) {\n          d = d * 2;\n    ***REMOVED***\n\n        uf = uf.div(d);\n  ***REMOVED***\n\n      return uf.toFixed(8);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"validate\",\n    value: function validate(app) {\n      var bid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (app.BROWSER == 1 || app.SPVMODE == 1) {\n        return true;\n  ***REMOVED***\n\n      if (this.is_valid == 0) {\n        return false;\n  ***REMOVED*** /////////////////////////////////\n      // min one sender and receiver //\n      /////////////////////////////////\n\n\n      if (this.transaction.from.length < 1) {\n        console.log(\"ERROR 329380: no from address in transaction\");\n        return false;\n  ***REMOVED***\n\n      if (this.transaction.to.length < 1) {\n        console.log(\"ERROR 183092: no to address in transaction\");\n        return false;\n  ***REMOVED*** //////////////////////////\n      // no negative payments //\n      //////////////////////////\n\n\n      var total_from = Big(0.0); //\n      // all transactions SAVE fee transactions (which introduce \n      // new tokens) need to balance (tokens in must match tokens\n      // out.\n      //\n\n      if (this.transaction.type != 2) {\n        for (var i = 0; i < this.transaction.from.length; i++) {\n          total_from = total_from.plus(Big(this.transaction.from[i].amt));\n\n          if (total_from.lt(0)) {\n            console.log(\"ERROR 240812: negative payment in transaction from slip\");\n            return 0;\n      ***REMOVED***\n    ***REMOVED***\n\n        var total_to = Big(0.0);\n\n        for (var _i = 0; _i < this.transaction.to.length; _i++) {\n          total_to = total_to.plus(Big(this.transaction.to[_i].amt));\n\n          if (total_to.lt(0)) {\n            console.log(\"ERROR 672939: negative payment in transaction to slip\");\n            return 0;\n      ***REMOVED***\n    ***REMOVED***\n\n        if (total_to.gt(total_from)) {\n          console.log(\"ERROR 672939: negative payment to slips > from slips\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** else {***REMOVED*** //\n      // fee transactions are the single type of transaction that can introduce\n      // new tokens into circulation. they are thus except from the above check\n      ////////////////////\n      // slips validate //\n      ////////////////////\n      //\n      // we ignore transactions types that will not have normal inputs (i.e. block-created)\n      //\n      //   2 = fee transactions\n      //   3 = vip transactions\n      //\n\n\n      if (this.transaction.type != 2 && this.transaction.type != 3 && this.transaction.type != 5) {\n        for (var _i2 = 0; _i2 < this.transaction.from.length; _i2++) {\n  ***REMOVED***\n  ***REMOVED*** first we check all of the FROM slips are valid\n  ***REMOVED***\n          if (Big(this.transaction.from[_i2].amt).gt(0)) {\n            if (this.transaction.from[_i2].bid < bid - app.blockchain.genesis_period) {\n              console.log(\"ERROR 570030: transaction tries to spend outdated input...\");\n              this.is_valid = 0;\n              return false;\n        ***REMOVED*** //\n    ***REMOVED*** check is spending longest chain\n    ***REMOVED***\n\n\n            if (this.transaction.from[_i2].bsh != \"\") {\n              if (app.blockchain.bsh_lc_hmap[this.transaction.from[_i2].bsh] != 1) {\n                console.log(\"ERROR 185013: transaction tries to spend outdated input...\");\n                this.is_valid = 0;\n                return false;\n          ***REMOVED***\n        ***REMOVED*** //\n    ***REMOVED*** check in shashmap\n    ***REMOVED***\n\n\n            if (!app.shashmap.validate_slip(this.transaction.from[_i2].returnSignatureSource(), bid)) {\n              console.log(\"ERROR 570130: cannot validate inputs with shashmap...\");\n              this.is_valid = 0;\n              return false;\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED*** //\n      // now we verify the message contents tx-type by tx-type\n      //\n\n\n      if (this.transaction.type == 0) {\n        if (!app.crypto.verifyMessage(this.returnSignatureSource(app), this.transaction.sig, this.transaction.from[0].add)) {\n          console.log(\"ERROR 137102: signature on normal transaction does not verify\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** ////////////////////\n      // golden tickets //\n      ////////////////////\n\n\n      if (this.transaction.type == 1) {\n        if (!app.crypto.verifyMessage(this.returnSignatureSource(app), this.transaction.sig, this.transaction.from[0].add)) {\n          console.log(\"ERROR 134102: signature on golden ticket does not validate\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** /////////////////////\n      // fee transaction //\n      /////////////////////\n\n\n      if (this.transaction.type == 2) {\n        if (!app.crypto.verifyMessage(this.returnSignatureSource(app), this.transaction.sig, this.transaction.from[0].add)) {\n          console.log(\"ERROR 374302: signature on fee transaction does not validate\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** //////////////////////\n      // vip transactions //\n      //////////////////////\n\n\n      if (this.transaction.type == 3) {\n        if (!app.crypto.verifyMessage(this.returnSignatureSource(app), this.transaction.sig, this.transaction.from[0].add)) {\n          console.log(\"ERROR 137102: signature on vip transactions does not validate\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** //////////////////////////\n      // staking transactions //\n      //////////////////////////\n\n\n      if (this.transaction.type == 4) {***REMOVED*** ///////////////////////////\n      // rebroadcast txs (atr) //\n      ///////////////////////////\n\n\n      if (this.transaction.type == 5) {\n***REMOVED***      try {\n        var txjson = this.transaction.msg.tx;\n        var tx_to_check = new saito.transaction(JSON.parse(txjson));\n        var sig_source_to_check = tx_to_check.returnSignatureSource(app);\n        var sig_to_check = this.transaction.sig;\n\n        if (!app.crypto.verifyMessage(sig_source_to_check, sig_to_check, tx_to_check.transaction.from[0].add)) {\n          console.log(\"ERROR 137102: signature on rebroadcast transaction is invalid\");\n          return 0;\n    ***REMOVED*** //  ***REMOVED*** catch (err) {\n***REMOVED***          console.log(\"ERROR 578203: malformed rebroadcast transaction (original tx missing?)\");\n***REMOVED***          return 0;\n***REMOVED***  ***REMOVED***\n\n  ***REMOVED***\n\n      if (this.transaction.type == 6) {***REMOVED***\n\n      if (this.transaction.type == 7) {***REMOVED***\n\n      return true;\n***REMOVED***\n  ***REMOVED***]);\n\n  return Transaction;\n***REMOVED***();\n\nmodule.exports = Transaction;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2FpdG8vdHJhbnNhY3Rpb24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2FpdG8vdHJhbnNhY3Rpb24uanM/MDQzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBCaWcgICAgICA9IHJlcXVpcmUoJ2JpZy5qcycpO1xuY29uc3Qgc2FpdG8gICAgPSByZXF1aXJlKCcuL3NhaXRvJyk7XG5cbi8qKlxuICogVHJhbnNhY3Rpb24gQ29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Kn0gdHhvYmpcbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuXG4gIGNvbnN0cnVjdG9yKHR4b2JqPW51bGwpIHtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBjb25zZW5zdXMgdmFyaWFibGVzIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHRoaXMudHJhbnNhY3Rpb24gICAgICAgICAgICAgICA9IHt9O1xuICAgIHRoaXMudHJhbnNhY3Rpb24uaWQgICAgICAgICAgICA9IDE7XG4gICAgdGhpcy50cmFuc2FjdGlvbi5mcm9tICAgICAgICAgID0gW107XG4gICAgdGhpcy50cmFuc2FjdGlvbi50byAgICAgICAgICAgID0gW107XG4gICAgdGhpcy50cmFuc2FjdGlvbi50cyAgICAgICAgICAgID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdGhpcy50cmFuc2FjdGlvbi5zaWcgICAgICAgICAgID0gXCJcIjsgIC8vIHNpZyBvZiB0eFxuICAgIHRoaXMudHJhbnNhY3Rpb24udmVyICAgICAgICAgICA9IDEuMDtcbiAgICB0aGlzLnRyYW5zYWN0aW9uLnBhdGggICAgICAgICAgPSBbXTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgICAgICAgICAgPSAwO1xuXG5cdCAgICAvL1xuXHQgICAgLy8gVFlQRVNcblx0ICAgIC8vXG5cdCAgICAvLyAwID0gbm9ybWFsIG91dHB1dFxuXHQgICAgLy8gMSA9IGdvbGRlbiB0aWNrZXRcblx0ICAgIC8vIDIgPSBmZWUgdHJhbnNhY3Rpb25cblx0ICAgIC8vIDMgPSB2aXAgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIC8vIDQgPSBzdGFraW5nIHRyYW5zYWN0aW9uXG5cdCAgICAvLyA1ID0gcmVicm9hZGNhc3QgdHhcbiAgICAgICAgICAgIC8vXG5cdCAgICAvLyA0ID0gZ29sZGVuIGNodW5rKVxuXHQgICAgLy8jIDYgPSBzdGFraW5nXG5cdCAgICAvL1xuXG5cdFx0XHRcdFx0IC8vIDAgPSBub3JtYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxID0gZ29sZGVuIHRpY2tldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIgPSBmZWUgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAzID0gcmVicm9hZGNhc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA0ID0gVklQIHJlYnJvYWRjYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gNSA9IGZsb2F0aW5nIGNvaW5iYXNlIC8gZ29sZGVuIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gNiA9IHN0YWtpbmcgcGVuZGluZyByZWJyb2FkY2FzdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDcgPSBzdGFraW5nIGN1cnJlbnRcbiAgICB0aGlzLnRyYW5zYWN0aW9uLm1zZyAgICAgICAgICAgPSB7fTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uLnBzICAgICAgICAgICAgPSAwO1xuXG4gICAgdGhpcy5mZWVzX3RvdGFsXHRcdCA9IFwiXCI7XG4gICAgdGhpcy53b3JrX2F2YWlsYWJsZV90b19tZVx0ID0gXCJcIjtcbiAgICB0aGlzLndvcmtfYXZhaWxhYmxlX3RvX2NyZWF0b3IgPSBcIlwiO1xuICAgIHRoaXMud29ya19jdW11bGF0aXZlIFx0XHQgPSBcIjAuMFwiO1xuICAgIFx0XHRcdFx0ICAgICAgICAgIC8vIGN1bXVsYXRpdmUgZmVlcywgaW5jLiBmZWVzIGluIHRoaXMgcmVmbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaG93IG11Y2ggdGhpcyB0cmFuc2FjdGlvbiBjYXJyaWVzIGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2VpZ2h0IG9mIHRoZSBibG9jay4gd2UgdXNlIHRoaXMgdG8gZmluZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHdpbm5pbmcgbm9kZSBpbiB0aGUgYmxvY2sgZm9yIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm91dGluZyBwYXltZW50LiBpLmUuIHRoaXMgbWVhc3VyZXMgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdW11bGF0aXZlIHdlaWdodCBvZiB0aGUgdXNhYmxlIGZlZXMgdGhhdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJlIGJlaGluZCB0aGUgdHJhbnNhY3Rpb25zLlxuXG4gICAgdGhpcy5kbXNnXHRcdFx0ICAgPSBcIlwiO1xuICAgIHRoaXMuc2l6ZSAgICAgICAgICAgICAgICAgICAgICA9IDA7XG4gICAgdGhpcy5pc192YWxpZCAgICAgICAgICAgICAgICAgID0gMTtcblxuICAgIHRoaXMuYXRyX3RyYXBkb29yXHRcdCAgID0gXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiO1xuICAgIC8vdGhpcy5hdHJfdHJhcGRvb3JcdFx0ICAgPSBcInkzR0w2QWduNFprRjJ6OFJobVFYa1lZNkdUYUtYZ0RGb0RkS1Jjb0RqWTJYXCI7XG4gICAgdGhpcy5hdHJfcmVicm9hZGNhc3RpbmdfbGltaXQgID0gMTA7ICAvLyA8IDEwIFNBSVRPIG5vIHJlYnJvYWRjYXN0aW5nXG5cbiAgICBpZiAodHhvYmogIT0gbnVsbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbiA9IHR4b2JqO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLmZyb20gPSB0aGlzLnRyYW5zYWN0aW9uLmZyb20ubWFwKHNsaXAgPT4ge1xuICAgICAgICAgIGxldCB7YWRkLGFtdCx0eXBlLGJpZCx0aWQsc2lkLGJzaH0gPSBzbGlwO1xuICAgICAgICAgIHJldHVybiBuZXcgc2FpdG8uc2xpcChhZGQsYW10LHR5cGUsYmlkLHRpZCxzaWQsYnNoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi50byA9IHRoaXMudHJhbnNhY3Rpb24udG8ubWFwKHNsaXAgPT4ge1xuICAgICAgICAgIGxldCB7YWRkLGFtdCx0eXBlLGJpZCx0aWQsc2lkLGJzaH0gPSBzbGlwO1xuICAgICAgICAgIHJldHVybiBuZXcgc2FpdG8uc2xpcChhZGQsYW10LHR5cGUsYmlkLHRpZCxzaWQsYnNoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmlzX3ZhbGlkID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykpLCB0aGlzKVxuICB9XG5cbiAgZ2VuZXJhdGVSZWJyb2FkY2FzdFRyYW5zYWN0aW9uKHRpZCwgc2lkLCBhdmdfZmVlPTIpIHtcblxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aCA9PSAwKSB7IHJldHVybiBudWxsOyB9XG5cbiAgICB2YXIgbmV3dHggPSBuZXcgc2FpdG8udHJhbnNhY3Rpb24oKTtcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5zaWcgPSB0aGlzLnRyYW5zYWN0aW9uLnNpZztcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cgPSB7fTtcbiAgICBuZXd0eC50cmFuc2FjdGlvbi50cyAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgIHZhciBmZWUgPSBCaWcoYXZnX2ZlZSk7XG4gICAgaWYgKGF2Z19mZWUgPT0gMCkgeyBmZWUgPSBCaWcoMik7IH1cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gcmVicm9hZGNhc3RzIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA0KSB7IGZlZSA9IEJpZygwKTsgfVxuICAgIGlmIChcbiAgICAgIHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAwIHx8IFxuICAgICAgdGhpcy50cmFuc2FjdGlvbi50eXBlID09IDEgfHwgXG4gICAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMiB8fCBcbiAgICAgIHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAzIHx8IFxuICAgICAgdGhpcy50cmFuc2FjdGlvbi50eXBlID09IDQgfHwgXG4gICAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gNSkge1xuXG4gICAgICBuZXd0eC50cmFuc2FjdGlvbi50eXBlID0gNTtcbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLm1zZy5sb29wID09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubG9vcCA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubG9vcCA9IHRoaXMudHJhbnNhY3Rpb24ubXNnLmxvb3ArMTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFtdCA9IEJpZyh0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYW10KS5taW51cyhmZWUpO1xuICAgICAgaWYgKGFtdC5sdCgwKSkge1xuICAgICAgICBmZWUgPSBCaWcodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFtdCk7XG4gICAgICAgIGFtdCA9IEJpZygwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24ubXNnLnR4ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cudHggPSB0aGlzLnRyYW5zYWN0aW9uLm1zZy50eDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy50eCA9IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNhY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICBsZXQgZnJvbSA9IG5ldyBzYWl0by5zbGlwKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hZGQsIHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hbXQsIDUpO1xuICAgICAgICAgIGZyb20udGlkID0gdGlkO1xuICAgICAgICAgIGZyb20uc2lkID0gc2lkO1xuICAgICAgbGV0IHRvICAgPSBuZXcgc2FpdG8uc2xpcCh0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYWRkLCBhbXQudG9GaXhlZCg4KSwgNSk7XG4gICAgICBsZXQgZmVlcyA9IG5ldyBzYWl0by5zbGlwKHRoaXMuYXRyX3RyYXBkb29yLCBmZWUudG9GaXhlZCg4KSk7XG4gICAgICBmZWVzLnNpZCA9IDE7XG5cbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLmZyb20ucHVzaChmcm9tKTtcbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLnRvLnB1c2godG8pO1xuICAgICAgbmV3dHgudHJhbnNhY3Rpb24udG8ucHVzaChmZWVzKTtcblxuICAgIH1cblxuXG4vKioqKlxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gZ29sZGVuIGNodW5rIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA1KSB7XG5cbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLnR5cGUgPSB0aGlzLnRyYW5zYWN0aW9uLnR5cGU7XG5cbiAgICAgIC8vIGNhbGN1bGF0ZSBmZWVcbiAgICAgIC8vXG4gICAgICAvLyBhdmVyYWdlIGZlZSAqIDEwXG4gICAgICAvL1xuICAgICAgdmFyIGZlZSA9IEJpZyhCaWcoYXZnX2ZlZSkudGltZXMoMTApLnRvRml4ZWQoOCkpO1xuXG4gICAgICAvL1xuICAgICAgLy8gbWluaW11bSBvZiAyMFxuICAgICAgLy9cbiAgICAgIGlmIChmZWUubHQoMjApKSB7IGZlZSA9IEJpZygyMCk7IH1cbiAgICAgIHZhciBhbXQgPSBCaWcodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFtdCkubWludXMoZmVlKTtcbiAgICAgIGlmIChhbXQubHQoMCkpIHtcbiAgICAgICAgZmVlID0gQmlnKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hbXQpO1xuICAgICAgICBhbXQgPSBCaWcoMCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLm1zZy50eCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnR4ID0gdGhpcy50cmFuc2FjdGlvbi5tc2cudHg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cudHggPSBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYW5zYWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZyb20gPSBuZXcgc2FpdG8uc2xpcCh0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYWRkLCB0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYW10LCA1KTtcbiAgICAgICAgICBmcm9tLnRpZCA9IHRpZDtcbiAgICAgICAgICBmcm9tLnNpZCA9IHNpZDtcbiAgICAgIHZhciB0byAgID0gbmV3IHNhaXRvLnNsaXAodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFkZCwgYW10LnRvRml4ZWQoOCksIDUpO1xuICAgICAgdmFyIGZlZXMgPSBuZXcgc2FpdG8uc2xpcCh0aGlzLmF0cl90cmFwZG9vcl9hZGRyZXNzLCBmZWUudG9GaXhlZCg4KSk7XG4gICAgICBmZWVzLnNpZCA9IDE7XG5cbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLmZyb20ucHVzaChmcm9tKTtcbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLnRvLnB1c2godG8pO1xuICAgICAgbmV3dHgudHJhbnNhY3Rpb24udG8ucHVzaChmZWVzKTsgICAvLyB0aGlzIGVuc3VyZXMgZmVlIGZhbGxzIGludG8gbW9uZXkgc3VwcGx5XG5cbiAgICB9XG4qKioqL1xuXG4gICAgcmV0dXJuIG5ld3R4O1xuICB9XG5cblxuXG5cblxuICBpc0Zyb20oc2VuZGVyUHVibGljS2V5KSB7XG4gICAgaWYgKHRoaXMucmV0dXJuU2xpcHNGcm9tKHNlbmRlclB1YmxpY0tleSkubGVuZ3RoICE9IDApIHsgcmV0dXJuIHRydWU7IH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc1RvKHJlY2VpdmVyUHVibGljS2V5KSB7XG4gICAgaWYgKHRoaXMucmV0dXJuU2xpcHNUbyhyZWNlaXZlclB1YmxpY0tleSkubGVuZ3RoID4gMCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzR29sZGVuVGlja2V0KCkge1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMSkgeyByZXR1cm4gMTsgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaXNSZWJyb2FkY2FzdChvbGRibGssIG5ld2Jsaywgc2lkKSB7XG5cbiAgICAvL1xuICAgIC8vIEdvbGRlbiBDaHVuayB0cmFuc2FjdGlvbnMgbXVzdCBwb2ludCB0byB0aGUgdHJhcGRvb3IgYWRkcmVzcyBpbiBvcmRlciB0byBiZSBjb25zaWRlcmVkIHZhbGlkXG4gICAgLy9cbiAgICAvL2lmICh0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYWRkICA9PSB0aGlzLmF0cl90cmFwZG9vcikge1xuICAgIC8vICBpZiAodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLnR5cGUgPT0gNSkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIC8vICByZXR1cm4gZmFsc2U7XG4gICAgLy99XG5cbiAgICAvLyB2aXAgdHJhbnNhY3Rpb25zIGFsd2F5cyByZWJyb2FkY2FzdFxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMykgICAgICB7IHJldHVybiB0cnVlOyB9XG5cbiAgICAvLyBldmVyeXRoaW5nIGVsc2UgcmVxdWlyZXMgbW9uZXlcbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50by5sZW5ndGggPT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdID09IHVuZGVmaW5lZCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAoQmlnKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hbXQpLmd0KHRoaXMuYXRyX3JlYnJvYWRjYXN0aW5nX2xpbWl0KSkgeyByZXR1cm4gdHJ1ZTsgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIH1cblxuXG4gIGludm9sdmVzUHVibGljS2V5KHB1YmxpY2tleSkge1xuICAgIGxldCBzbGlwcyA9IHRoaXMucmV0dXJuU2xpcHNUb0FuZEZyb20ocHVibGlja2V5KTtcbiAgICBpZiAoc2xpcHMudG8ubGVuZ3RoID4gMCB8fCBzbGlwcy5mcm9tLmxlbmd0aCA+IDApIHsgcmV0dXJuIDE7IH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVyblBheW1lbnRUbyhwdWJsaWNrZXkpIHtcbiAgICBsZXQgc2xpcHMgPSB0aGlzLnJldHVyblNsaXBzVG9BbmRGcm9tKHB1YmxpY2tleSk7XG4gICAgbGV0IHggPSBCaWcoMC4wKTtcbiAgICBmb3IgKHZhciB2ID0gMDsgdiA8IHNsaXBzLnRvLmxlbmd0aDsgdisrKSB7XG4gICAgICBpZiAoc2xpcHMudG9bdl0uYWRkID09PSBwdWJsaWNrZXkpIHsgeCA9IHgucGx1cyhCaWcoc2xpcHMudG9bdl0uYW10KSk7IH1cbiAgICB9XG4gICAgcmV0dXJuIHgudG9GaXhlZCg4KS5yZXBsYWNlKC8wKyQvLCcnKS5yZXBsYWNlKC9cXC4kLywnXFwuMCcpO1xuICB9XG5cbiAgcmV0dXJuU2xpcHNGcm9tKGZyb21BZGRyZXNzKSB7XG4gICAgdmFyIHggPSBbXTtcbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5mcm9tICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwgdGhpcy50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb21bdl0uYWRkID09PSBmcm9tQWRkcmVzcykgeyB4LnB1c2godGhpcy50cmFuc2FjdGlvbi5mcm9tW3ZdKTsgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geDtcbiAgfVxuXG4gIHJldHVyblNsaXBzVG9BbmRGcm9tKHRoZUFkZHJlc3MpIHtcbiAgICB2YXIgeCA9IHt9O1xuICAgIHguZnJvbSA9IFtdO1xuICAgIHgudG8gPSBbXTtcbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5mcm9tICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwgdGhpcy50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb21bdl0uYWRkID09PSB0aGVBZGRyZXNzKSB7IHguZnJvbS5wdXNoKHRoaXMudHJhbnNhY3Rpb24uZnJvbVt2XSk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG8gIT0gbnVsbCkge1xuICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCB0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvW3ZdLmFkZCA9PT0gdGhlQWRkcmVzcykgeyB4LnRvLnB1c2godGhpcy50cmFuc2FjdGlvbi50b1t2XSk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICByZXR1cm5TbGlwc1RvKHRvQWRkcmVzcykge1xuICAgIHZhciB4ID0gW107XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG8gIT0gbnVsbCkge1xuICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCB0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvW3ZdLmFkZCA9PT0gdG9BZGRyZXNzKSB7IHgucHVzaCh0aGlzLnRyYW5zYWN0aW9uLnRvW3ZdKTsgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geDtcbiAgfVxuXG4gIGRlY3J5cHRNZXNzYWdlKGFwcCkge1xuICAgIHRyeSB7IHRoaXMuZG1zZyA9IGFwcC5rZXlzLmRlY3J5cHRNZXNzYWdlKHRoaXMudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQsIHRoaXMudHJhbnNhY3Rpb24ubXNnKTsgfSBjYXRjaCAoZSkge31cbiAgfVxuXG4gIHJldHVybk1lc3NhZ2UoKSB7XG4gICAgaWYgKHRoaXMuZG1zZyAhPSBcIlwiKSB7IHJldHVybiB0aGlzLmRtc2c7IH1cbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5tc2c7XG4gIH1cblxuICByZXR1cm5TaWduYXR1cmUoYXBwKSB7XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uc2lnICE9IFwiXCIpIHsgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc2lnOyB9XG4gICAgdGhpcy50cmFuc2FjdGlvbi5zaWcgPSBhcHAud2FsbGV0LnNpZ25NZXNzYWdlKHRoaXMucmV0dXJuU2lnbmF0dXJlU291cmNlKGFwcCkpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnNpZztcbiAgfVxuXG4gIHJldHVyblNpZ25hdHVyZVNvdXJjZShhcHApIHtcbiAgICAvLyByZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zaWc7XG4gICAgcmV0dXJuIGAke3RoaXMudHJhbnNhY3Rpb24udHN9JHt0aGlzLnRyYW5zYWN0aW9uLnBzfSR7dGhpcy50cmFuc2FjdGlvbi50eXBlfWA7XG4gIH1cblxuICByZXR1cm5GZWVzKGFwcCkge1xuXG4gICAgaWYgKHRoaXMuZmVlc190b3RhbCA9PSBcIlwiKSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBzdW0gaW5wdXRzXG4gICAgICAvL1xuICAgICAgbGV0IGlucHV0cyA9IEJpZygwLjApO1xuICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uZnJvbSAhPSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IHYgPSAwOyB2IDwgdGhpcy50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgdisrKSB7XG4gICAgICAgICAgaW5wdXRzID0gaW5wdXRzLnBsdXMoQmlnKHRoaXMudHJhbnNhY3Rpb24uZnJvbVt2XS5hbXQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gc3VtIG91dHB1dHNcbiAgICAgIC8vXG4gICAgICBsZXQgb3V0cHV0cyA9IEJpZygwLjApO1xuICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCB0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aDsgdisrKSB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gb25seSBjb3VudCBub24tZ3QgdHJhbnNhY3Rpb24gb3V0cHV0c1xuICAgICAgICAvL1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50b1t2XS50eXBlICE9IDEgJiYgdGhpcy50cmFuc2FjdGlvbi50b1t2XS50eXBlICE9IDIpIHtcbiAgICAgICAgICBvdXRwdXRzID0gb3V0cHV0cy5wbHVzKEJpZyh0aGlzLnRyYW5zYWN0aW9uLnRvW3ZdLmFtdCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCB0eF9mZWVzID0gaW5wdXRzLm1pbnVzKG91dHB1dHMpO1xuICAgICAgdGhpcy5mZWVzX3RvdGFsID0gdHhfZmVlcy50b0ZpeGVkKDgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmZlZXNfdG90YWw7XG4gIH1cblxuXG4gIHJldHVyblJvdXRpbmdXb3JrQXZhaWxhYmxlKGFwcCwgcHVibGlja2V5PVwiXCIpIHtcblxuICAgIGxldCB1ZiA9ICBCaWcodGhpcy5yZXR1cm5GZWVzKGFwcCkpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9uLnBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBkID0gMTtcbiAgICAgIGZvciAobGV0IGogPSBpOyBqID4gMDsgai0tKSB7IGQgPSBkKjI7IH1cbiAgICAgIHVmID0gdWYuZGl2KGQpO1xuICAgIH1cblxuICAgIHJldHVybiB1Zi50b0ZpeGVkKDgpO1xuXG4gIH1cblxuXG5cblxuXG4gIHZhbGlkYXRlKGFwcCwgYmlkPTApIHtcblxuICAgIGlmIChhcHAuQlJPV1NFUiA9PSAxIHx8IGFwcC5TUFZNT0RFID09IDEpIHsgcmV0dXJuIHRydWU7IH1cblxuICAgIGlmICh0aGlzLmlzX3ZhbGlkID09IDApIHsgcmV0dXJuIGZhbHNlOyB9XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIG1pbiBvbmUgc2VuZGVyIGFuZCByZWNlaXZlciAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb20ubGVuZ3RoIDwgMSkge1xuICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAzMjkzODA6IG5vIGZyb20gYWRkcmVzcyBpbiB0cmFuc2FjdGlvblwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG8ubGVuZ3RoIDwgMSkge1xuICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAxODMwOTI6IG5vIHRvIGFkZHJlc3MgaW4gdHJhbnNhY3Rpb25cIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBubyBuZWdhdGl2ZSBwYXltZW50cyAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgbGV0IHRvdGFsX2Zyb20gPSBCaWcoMC4wKTtcblxuXG4gICAgLy9cbiAgICAvLyBhbGwgdHJhbnNhY3Rpb25zIFNBVkUgZmVlIHRyYW5zYWN0aW9ucyAod2hpY2ggaW50cm9kdWNlIFxuICAgIC8vIG5ldyB0b2tlbnMpIG5lZWQgdG8gYmFsYW5jZSAodG9rZW5zIGluIG11c3QgbWF0Y2ggdG9rZW5zXG4gICAgLy8gb3V0LlxuICAgIC8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSAhPSAyKSB7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRvdGFsX2Zyb20gPSB0b3RhbF9mcm9tLnBsdXMoQmlnKHRoaXMudHJhbnNhY3Rpb24uZnJvbVtpXS5hbXQpKTtcbiAgICAgICAgaWYgKHRvdGFsX2Zyb20ubHQoMCkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDI0MDgxMjogbmVnYXRpdmUgcGF5bWVudCBpbiB0cmFuc2FjdGlvbiBmcm9tIHNsaXBcIik7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB0b3RhbF90byA9IEJpZygwLjApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRvdGFsX3RvID0gdG90YWxfdG8ucGx1cyhCaWcodGhpcy50cmFuc2FjdGlvbi50b1tpXS5hbXQpKTtcbiAgICAgICAgaWYgKHRvdGFsX3RvLmx0KDApKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA2NzI5Mzk6IG5lZ2F0aXZlIHBheW1lbnQgaW4gdHJhbnNhY3Rpb24gdG8gc2xpcFwiKTtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodG90YWxfdG8uZ3QodG90YWxfZnJvbSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA2NzI5Mzk6IG5lZ2F0aXZlIHBheW1lbnQgdG8gc2xpcHMgPiBmcm9tIHNsaXBzXCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBmZWUgdHJhbnNhY3Rpb25zIGFyZSB0aGUgc2luZ2xlIHR5cGUgb2YgdHJhbnNhY3Rpb24gdGhhdCBjYW4gaW50cm9kdWNlXG4gICAgICAvLyBuZXcgdG9rZW5zIGludG8gY2lyY3VsYXRpb24uIHRoZXkgYXJlIHRodXMgZXhjZXB0IGZyb20gdGhlIGFib3ZlIGNoZWNrXG5cbiAgICB9XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gc2xpcHMgdmFsaWRhdGUgLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vXG4gICAgLy8gd2UgaWdub3JlIHRyYW5zYWN0aW9ucyB0eXBlcyB0aGF0IHdpbGwgbm90IGhhdmUgbm9ybWFsIGlucHV0cyAoaS5lLiBibG9jay1jcmVhdGVkKVxuICAgIC8vXG4gICAgLy8gICAyID0gZmVlIHRyYW5zYWN0aW9uc1xuICAgIC8vICAgMyA9IHZpcCB0cmFuc2FjdGlvbnNcbiAgICAvL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgIT0gMiAmJiB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgIT0gMyAmJiB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgIT0gNSkge1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGZpcnN0IHdlIGNoZWNrIGFsbCBvZiB0aGUgRlJPTSBzbGlwcyBhcmUgdmFsaWRcbiAgICAgICAgLy9cbiAgICAgICAgaWYgKEJpZyh0aGlzLnRyYW5zYWN0aW9uLmZyb21baV0uYW10KS5ndCgwKSkge1xuXG4gICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uZnJvbVtpXS5iaWQgPCAoYmlkLWFwcC5ibG9ja2NoYWluLmdlbmVzaXNfcGVyaW9kKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1NzAwMzA6IHRyYW5zYWN0aW9uIHRyaWVzIHRvIHNwZW5kIG91dGRhdGVkIGlucHV0Li4uXCIpO1xuICAgIFx0ICAgIHRoaXMuaXNfdmFsaWQgPSAwO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gY2hlY2sgaXMgc3BlbmRpbmcgbG9uZ2VzdCBjaGFpblxuICAgICAgICAgIC8vXG4gICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uZnJvbVtpXS5ic2ggIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGFwcC5ibG9ja2NoYWluLmJzaF9sY19obWFwW3RoaXMudHJhbnNhY3Rpb24uZnJvbVtpXS5ic2hdICE9IDEpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAxODUwMTM6IHRyYW5zYWN0aW9uIHRyaWVzIHRvIHNwZW5kIG91dGRhdGVkIGlucHV0Li4uXCIpO1xuICBcdCAgICAgIHRoaXMuaXNfdmFsaWQgPSAwO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG5cdCAgLy9cblx0ICAvLyBjaGVjayBpbiBzaGFzaG1hcFxuXHQgIC8vXG4gICAgICAgICAgaWYgKCFhcHAuc2hhc2htYXAudmFsaWRhdGVfc2xpcCh0aGlzLnRyYW5zYWN0aW9uLmZyb21baV0ucmV0dXJuU2lnbmF0dXJlU291cmNlKCksIGJpZCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTcwMTMwOiBjYW5ub3QgdmFsaWRhdGUgaW5wdXRzIHdpdGggc2hhc2htYXAuLi5cIik7XG4gICAgICAgICAgICB0aGlzLmlzX3ZhbGlkID0gMDtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vXG4gICAgLy8gbm93IHdlIHZlcmlmeSB0aGUgbWVzc2FnZSBjb250ZW50cyB0eC10eXBlIGJ5IHR4LXR5cGVcbiAgICAvL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMCkge1xuXG4gICAgICBpZiAoIWFwcC5jcnlwdG8udmVyaWZ5TWVzc2FnZSh0aGlzLnJldHVyblNpZ25hdHVyZVNvdXJjZShhcHApLCB0aGlzLnRyYW5zYWN0aW9uLnNpZywgdGhpcy50cmFuc2FjdGlvbi5mcm9tWzBdLmFkZCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAxMzcxMDI6IHNpZ25hdHVyZSBvbiBub3JtYWwgdHJhbnNhY3Rpb24gZG9lcyBub3QgdmVyaWZ5XCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gZ29sZGVuIHRpY2tldHMgLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMSkgeyBcblxuICAgICAgaWYgKCFhcHAuY3J5cHRvLnZlcmlmeU1lc3NhZ2UodGhpcy5yZXR1cm5TaWduYXR1cmVTb3VyY2UoYXBwKSwgdGhpcy50cmFuc2FjdGlvbi5zaWcsIHRoaXMudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMTM0MTAyOiBzaWduYXR1cmUgb24gZ29sZGVuIHRpY2tldCBkb2VzIG5vdCB2YWxpZGF0ZVwiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBmZWUgdHJhbnNhY3Rpb24gLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50eXBlID09IDIpIHsgXG5cbiAgICAgIGlmICghYXBwLmNyeXB0by52ZXJpZnlNZXNzYWdlKHRoaXMucmV0dXJuU2lnbmF0dXJlU291cmNlKGFwcCksIHRoaXMudHJhbnNhY3Rpb24uc2lnLCB0aGlzLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDM3NDMwMjogc2lnbmF0dXJlIG9uIGZlZSB0cmFuc2FjdGlvbiBkb2VzIG5vdCB2YWxpZGF0ZVwiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICB9XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyB2aXAgdHJhbnNhY3Rpb25zIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMykgeyBcblxuICAgICAgaWYgKCFhcHAuY3J5cHRvLnZlcmlmeU1lc3NhZ2UodGhpcy5yZXR1cm5TaWduYXR1cmVTb3VyY2UoYXBwKSwgdGhpcy50cmFuc2FjdGlvbi5zaWcsIHRoaXMudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMTM3MTAyOiBzaWduYXR1cmUgb24gdmlwIHRyYW5zYWN0aW9ucyBkb2VzIG5vdCB2YWxpZGF0ZVwiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIHN0YWtpbmcgdHJhbnNhY3Rpb25zIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50eXBlID09IDQpIHtcblxuICAgIH1cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gcmVicm9hZGNhc3QgdHhzIChhdHIpIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA1KSB7XG5cbi8vICAgICAgdHJ5IHtcblxuICAgICAgICBsZXQgdHhqc29uXHRcdFx0PSB0aGlzLnRyYW5zYWN0aW9uLm1zZy50eDtcbiAgICAgICAgbGV0IHR4X3RvX2NoZWNrIFx0XHQ9IG5ldyBzYWl0by50cmFuc2FjdGlvbihKU09OLnBhcnNlKHR4anNvbikpO1xuICAgICAgICBsZXQgc2lnX3NvdXJjZV90b19jaGVja1x0PSB0eF90b19jaGVjay5yZXR1cm5TaWduYXR1cmVTb3VyY2UoYXBwKTtcbiAgICAgICAgbGV0IHNpZ190b19jaGVjayBcdFx0PSB0aGlzLnRyYW5zYWN0aW9uLnNpZztcblxuICAgICAgICBpZiAoIWFwcC5jcnlwdG8udmVyaWZ5TWVzc2FnZShzaWdfc291cmNlX3RvX2NoZWNrLCBzaWdfdG9fY2hlY2ssIHR4X3RvX2NoZWNrLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMTM3MTAyOiBzaWduYXR1cmUgb24gcmVicm9hZGNhc3QgdHJhbnNhY3Rpb24gaXMgaW52YWxpZFwiKTtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuLy8gICAgICB9IGNhdGNoIChlcnIpIHtcbi8vICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTc4MjAzOiBtYWxmb3JtZWQgcmVicm9hZGNhc3QgdHJhbnNhY3Rpb24gKG9yaWdpbmFsIHR4IG1pc3Npbmc/KVwiKTtcbi8vICAgICAgICAgIHJldHVybiAwO1xuLy8gICAgICB9XG5cbiAgICB9XG5cblxuXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA2KSB7XG4gICAgfVxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gNykge1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb247XG5cblxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFBQTtBQUVBOzs7Ozs7QUFJQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0Q0E7QUFDQTs7O0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/saito/transaction.js\n");
---
> eval("function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nvar Big = __webpack_require__(/*! big.js */ \"./node_modules/big.js/big.js\");\n\nvar saito = __webpack_require__(/*! ./saito */ \"./lib/saito/saito.js\");\n/**\n * Transaction Constructor\n * @param {****REMOVED*** txobj\n */\n\n\nvar Transaction =\n/*#__PURE__*/\nfunction () {\n  function Transaction() {\n    var txobj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, Transaction);\n\n    /////////////////////////\n    // consensus variables //\n    /////////////////////////\n    this.transaction = {***REMOVED***;\n    this.transaction.id = 1;\n    this.transaction.from = [];\n    this.transaction.to = [];\n    this.transaction.ts = new Date().getTime();\n    this.transaction.sig = \"\"; // sig of tx\n\n    this.transaction.ver = 1.0;\n    this.transaction.path = [];\n    this.transaction.type = 0; //\n    // TYPES\n    //\n    // 0 = normal output\n    // 1 = golden ticket\n    // 2 = fee transaction\n    // 3 = vip transaction\n    // 4 = staking transaction\n    // 5 = rebroadcast tx\n    //\n    // 6 = rebroadcast staking pending\n    // 7 = rebroadcast staking current\n    // 8 = golden chunk\n    //\n\n    this.transaction.msg = {***REMOVED***;\n    this.transaction.ps = 0;\n    this.fees_total = \"\";\n    this.work_available_to_me = \"\";\n    this.work_available_to_creator = \"\";\n    this.work_cumulative = \"0.0\"; // cumulative fees, inc. fees in this reflect\n    // how much this transaction carries in the\n    // weight of the block. we use this to find\n    // the winning node in the block for the\n    // routing payment. i.e. this measures the\n    // cumulative weight of the usable fees that\n    // are behind the transactions.\n\n    this.dmsg = \"\";\n    this.size = 0;\n    this.is_valid = 1;\n    this.atr_trapdoor = \"00000000000000000000000000000000000000000000\";\n    this.atr_rebroadcasting_limit = 10; // < 10 SAITO no rebroadcasting\n\n    if (txobj != null) {\n      try {\n        this.transaction = txobj;\n        this.transaction.from = this.transaction.from.map(function (slip) {\n          var add = slip.add,\n              amt = slip.amt,\n              type = slip.type,\n              bid = slip.bid,\n              tid = slip.tid,\n              sid = slip.sid,\n              bsh = slip.bsh;\n          return new saito.slip(add, amt, type, bid, tid, sid, bsh);\n    ***REMOVED***);\n        this.transaction.to = this.transaction.to.map(function (slip) {\n          var add = slip.add,\n              amt = slip.amt,\n              type = slip.type,\n              bid = slip.bid,\n              tid = slip.tid,\n              sid = slip.sid,\n              bsh = slip.bsh;\n          return new saito.slip(add, amt, type, bid, tid, sid, bsh);\n    ***REMOVED***);\n  ***REMOVED*** catch (err) {\n        this.is_valid = 0;\n  ***REMOVED***\n***REMOVED***\n\n    return this;\n  ***REMOVED***\n\n  _createClass(Transaction, [{\n    key: \"clone\",\n    value: function clone() {\n      return Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"generateRebroadcastTransaction\",\n    value: function generateRebroadcastTransaction(creator, tid, sid) {\n      var avg_fee = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 2;\n\n      if (this.transaction.to.length == 0) {\n        return null;\n  ***REMOVED***\n\n      var newtx = new saito.transaction();\n      newtx.transaction.sig = this.transaction.sig;\n      newtx.transaction.ts = this.transaction.ts;\n      newtx.transaction.msg = {***REMOVED***;\n      var fee = Big(avg_fee);\n\n      if (avg_fee == 0) {\n        fee = Big(2);\n  ***REMOVED*** //////////////////\n      // rebroadcasts //\n      //////////////////\n\n\n      if (this.transaction.type == 3) {\n        fee = Big(0);\n  ***REMOVED***\n\n      if (this.transaction.type == 0 || this.transaction.type == 1 || this.transaction.type == 2 || this.transaction.type == 3 || this.transaction.type == 4 || this.transaction.type == 5 || this.transaction.type == 6 || this.transaction.type == 7) {\n        newtx.transaction.type = 5; //\n***REMOVED*** vip transactions stay VIP transactions\n***REMOVED***\n\n        if (this.transaction.type == 3) {\n          newtx.transaction.type = 3;\n    ***REMOVED*** //\n***REMOVED*** staking transactions marked current or pending\n***REMOVED***\n\n\n        if (this.transaction.type == 4) {\n          newtx.transaction.type = 6;\n    ***REMOVED*** //\n***REMOVED*** keep track of how many times we have rebroadcast\n***REMOVED***\n\n\n        if (this.transaction.msg.loop == undefined) {\n          newtx.transaction.msg.loop = 1;\n    ***REMOVED*** else {\n          newtx.transaction.msg.loop = this.transaction.msg.loop + 1;\n    ***REMOVED*** //\n***REMOVED*** \n***REMOVED***\n\n\n        var amt = Big(this.transaction.to[sid].amt).minus(fee);\n\n        if (amt.lt(0)) {\n          fee = Big(this.transaction.to[sid].amt);\n          amt = Big(0);\n    ***REMOVED*** //\n***REMOVED*** attach the original transaction\n***REMOVED***\n\n\n        if (this.transaction.msg.tx != undefined) {\n          newtx.transaction.msg.tx = this.transaction.msg.tx;\n    ***REMOVED*** else {\n          newtx.transaction.msg.tx = JSON.stringify(this.transaction);\n    ***REMOVED***\n\n        var from = new saito.slip(creator, this.transaction.to[sid].amt, 5);\n        from.tid = tid;\n        from.sid = sid;\n        var to = new saito.slip(this.transaction.to[sid].add, amt.toFixed(8), 5);\n        var fees = new saito.slip(this.atr_trapdoor, fee.toFixed(8));\n        fees.sid = 1;\n        newtx.transaction.from.push(from);\n        newtx.transaction.to.push(to);\n\n        if (fee.gt(0)) {\n          newtx.transaction.to.push(fees);\n    ***REMOVED***\n  ***REMOVED***\n      /****\n      \n  ***REMOVED***////////////////\n  ***REMOVED*** golden chunk //\n  ***REMOVED***////////////////\n          if (this.transaction.type == 5) {\n      \n            newtx.transaction.type = this.transaction.type;\n      \n    ***REMOVED*** calculate fee\n    ***REMOVED***\n    ***REMOVED*** average fee * 10\n    ***REMOVED***\n            var fee = Big(Big(avg_fee).times(10).toFixed(8));\n      \n    ***REMOVED***\n    ***REMOVED*** minimum of 20\n    ***REMOVED***\n            if (fee.lt(20)) { fee = Big(20); ***REMOVED***\n            var amt = Big(this.transaction.to[sid].amt).minus(fee);\n            if (amt.lt(0)) {\n              fee = Big(this.transaction.to[sid].amt);\n              amt = Big(0);\n        ***REMOVED***\n      \n            if (this.transaction.msg.tx != undefined) {\n              newtx.transaction.msg.tx = this.transaction.msg.tx;\n        ***REMOVED*** else {\n              newtx.transaction.msg.tx = JSON.stringify(this.transaction);\n        ***REMOVED***\n      \n            var from = new saito.slip(this.transaction.to[sid].add, this.transaction.to[sid].amt, 5);\n                from.tid = tid;\n                from.sid = sid;\n            var to   = new saito.slip(this.transaction.to[sid].add, amt.toFixed(8), 5);\n            var fees = new saito.slip(this.atr_trapdoor_address, fee.toFixed(8));\n            fees.sid = 1;\n      \n            newtx.transaction.from.push(from);\n            newtx.transaction.to.push(to);\n            newtx.transaction.to.push(fees);   // this ensures fee falls into money supply\n      \n      ***REMOVED***\n      ****/\n\n\n      return newtx;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isFrom\",\n    value: function isFrom(senderPublicKey) {\n      if (this.returnSlipsFrom(senderPublicKey).length != 0) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isTo\",\n    value: function isTo(receiverPublicKey) {\n      if (this.returnSlipsTo(receiverPublicKey).length > 0) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isGoldenTicket\",\n    value: function isGoldenTicket() {\n      if (this.transaction.type == 1) {\n        return 1;\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"isRebroadcast\",\n    value: function isRebroadcast(oldblk, newblk, sid) {\n      //\n      // Golden Chunk transactions must point to the trapdoor address in order to be considered valid\n      //\n      //if (this.transaction.to[sid].add  == this.atr_trapdoor) {\n      //  if (this.transaction.to[sid].type == 5) { return true; ***REMOVED***\n      //  return false;\n      //***REMOVED***\n      // vip transactions always rebroadcast\n      if (this.transaction.type == 3) {\n        return true;\n  ***REMOVED*** // everything else requires money\n\n\n      if (this.transaction.to.length == 0) {\n        return false;\n  ***REMOVED***\n\n      if (this.transaction.to[sid] == undefined) {\n        return false;\n  ***REMOVED***\n\n      if (Big(this.transaction.to[sid].amt).gt(this.atr_rebroadcasting_limit)) {\n        return true;\n  ***REMOVED***\n\n      return false;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"involvesPublicKey\",\n    value: function involvesPublicKey(publickey) {\n      var slips = this.returnSlipsToAndFrom(publickey);\n\n      if (slips.to.length > 0 || slips.from.length > 0) {\n        return 1;\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnPaymentTo\",\n    value: function returnPaymentTo(publickey) {\n      var slips = this.returnSlipsToAndFrom(publickey);\n      var x = Big(0.0);\n\n      for (var v = 0; v < slips.to.length; v++) {\n        if (slips.to[v].add === publickey) {\n          x = x.plus(Big(slips.to[v].amt));\n    ***REMOVED***\n  ***REMOVED***\n\n      return x.toFixed(8).replace(/0+$/, '').replace(/\\.$/, '\\.0');\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSlipsFrom\",\n    value: function returnSlipsFrom(fromAddress) {\n      var x = [];\n\n      if (this.transaction.from != null) {\n        for (var v = 0; v < this.transaction.from.length; v++) {\n          if (this.transaction.from[v].add === fromAddress) {\n            x.push(this.transaction.from[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return x;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSlipsToAndFrom\",\n    value: function returnSlipsToAndFrom(theAddress) {\n      var x = {***REMOVED***;\n      x.from = [];\n      x.to = [];\n\n      if (this.transaction.from != null) {\n        for (var v = 0; v < this.transaction.from.length; v++) {\n          if (this.transaction.from[v].add === theAddress) {\n            x.from.push(this.transaction.from[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      if (this.transaction.to != null) {\n        for (var v = 0; v < this.transaction.to.length; v++) {\n          if (this.transaction.to[v].add === theAddress) {\n            x.to.push(this.transaction.to[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return x;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSlipsTo\",\n    value: function returnSlipsTo(toAddress) {\n      var x = [];\n\n      if (this.transaction.to != null) {\n        for (var v = 0; v < this.transaction.to.length; v++) {\n          if (this.transaction.to[v].add === toAddress) {\n            x.push(this.transaction.to[v]);\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***\n\n      return x;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"decryptMessage\",\n    value: function decryptMessage(app) {\n      try {\n        this.dmsg = app.keys.decryptMessage(this.transaction.from[0].add, this.transaction.msg);\n  ***REMOVED*** catch (e) {***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnMessage\",\n    value: function returnMessage() {\n      if (this.dmsg != \"\") {\n        return this.dmsg;\n  ***REMOVED***\n\n      return this.transaction.msg;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSignature\",\n    value: function returnSignature(app) {\n      if (this.transaction.sig != \"\") {\n        return this.transaction.sig;\n  ***REMOVED***\n\n      this.transaction.sig = app.wallet.signMessage(this.returnSignatureSource(app));\n      return this.transaction.sig;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnSignatureSource\",\n    value: function returnSignatureSource(app) {\n      // return this.transaction.sig;\n      return \"\".concat(this.transaction.ts).concat(this.transaction.ps).concat(this.transaction.type);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnFees\",\n    value: function returnFees(app) {\n      if (this.fees_total == \"\") {\n***REMOVED***\n***REMOVED*** sum inputs\n***REMOVED***\n        var inputs = Big(0.0);\n\n        if (this.transaction.from != null) {\n          for (var v = 0; v < this.transaction.from.length; v++) {\n            inputs = inputs.plus(Big(this.transaction.from[v].amt));\n      ***REMOVED***\n    ***REMOVED*** //\n***REMOVED*** sum outputs\n***REMOVED***\n\n\n        var outputs = Big(0.0);\n\n        for (var _v = 0; _v < this.transaction.to.length; _v++) {\n  ***REMOVED***\n  ***REMOVED*** only count non-gt transaction outputs\n  ***REMOVED***\n          if (this.transaction.to[_v].type != 1 && this.transaction.to[_v].type != 2) {\n            outputs = outputs.plus(Big(this.transaction.to[_v].amt));\n      ***REMOVED***\n    ***REMOVED***\n\n        var tx_fees = inputs.minus(outputs);\n        this.fees_total = tx_fees.toFixed(8);\n  ***REMOVED***\n\n      return this.fees_total;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"returnRoutingWorkAvailable\",\n    value: function returnRoutingWorkAvailable(app) {\n      var publickey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var uf = Big(this.returnFees(app));\n\n      for (var i = 0; i < this.transaction.path.length; i++) {\n        var d = 1;\n\n        for (var j = i; j > 0; j--) {\n          d = d * 2;\n    ***REMOVED***\n\n        uf = uf.div(d);\n  ***REMOVED***\n\n      return uf.toFixed(8);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"validate\",\n    value: function validate(app) {\n      var bid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (app.BROWSER == 1 || app.SPVMODE == 1) {\n        return true;\n  ***REMOVED***\n\n      if (this.is_valid == 0) {\n        return false;\n  ***REMOVED*** /////////////////////////////////\n      // min one sender and receiver //\n      /////////////////////////////////\n\n\n      if (this.transaction.from.length < 1) {\n        console.log(\"ERROR 329380: no from address in transaction\");\n        return false;\n  ***REMOVED***\n\n      if (this.transaction.to.length < 1) {\n        console.log(\"ERROR 183092: no to address in transaction\");\n        return false;\n  ***REMOVED*** //////////////////////////\n      // no negative payments //\n      //////////////////////////\n      //\n      // all transactions SAVE fee transactions (which introduce \n      // new tokens) need to balance (tokens in must match or be\n      // less than tokens out.\n      //\n\n\n      var total_from = Big(0.0);\n\n      if (this.transaction.type != 2) {\n        for (var i = 0; i < this.transaction.from.length; i++) {\n          total_from = total_from.plus(Big(this.transaction.from[i].amt));\n\n          if (total_from.lt(0)) {\n            console.log(\"ERROR 240812: negative payment in transaction from slip\");\n            return 0;\n      ***REMOVED***\n    ***REMOVED***\n\n        var total_to = Big(0.0);\n\n        for (var _i = 0; _i < this.transaction.to.length; _i++) {\n          total_to = total_to.plus(Big(this.transaction.to[_i].amt));\n\n          if (total_to.lt(0)) {\n            console.log(\"ERROR 672939: negative payment in transaction to slip\");\n            return 0;\n      ***REMOVED***\n    ***REMOVED***\n\n        if (total_to.gt(total_from)) {\n          console.log(\"ERROR 672939: negative payment to slips > from slips\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** else {***REMOVED*** //\n      // fee transactions are the single type of transaction that can introduce\n      // new tokens into circulation. they are thus except from the above check\n      //\n      /////////////////////////\n      // from slips validate //\n      /////////////////////////\n      //\n      // we ignore transactions types without normal FROM inputs:\n      //\n      //   2 = fee transactions\n      //   3 = vip transactions\n      //   5 = rebroadcast txs\n      //\n\n\n      if (this.transaction.type != 2 && this.transaction.type != 3 && this.transaction.type != 5) {\n        for (var _i2 = 0; _i2 < this.transaction.from.length; _i2++) {\n          if (Big(this.transaction.from[_i2].amt).gt(0)) {\n    ***REMOVED***\n    ***REMOVED*** within genesis period\n    ***REMOVED***\n            if (this.transaction.from[_i2].bid < bid - app.blockchain.genesis_period) {\n              console.log(\"ERROR 570030: transaction tries to spend outdated input...\");\n              this.is_valid = 0;\n              return false;\n        ***REMOVED*** //\n    ***REMOVED*** spends longest chain\n    ***REMOVED***\n\n\n            if (this.transaction.from[_i2].bsh != \"\") {\n              if (app.blockchain.bsh_lc_hmap[this.transaction.from[_i2].bsh] != 1) {\n                console.log(\"ERROR 185013: transaction tries to spend outdated input...\");\n                this.is_valid = 0;\n                return false;\n          ***REMOVED***\n        ***REMOVED*** //\n    ***REMOVED*** unspent in shashmap\n    ***REMOVED***\n\n\n            if (!app.shashmap.validate_slip(this.transaction.from[_i2].returnSignatureSource(), bid)) {\n              console.log(\"ERROR 570130: cannot validate inputs with shashmap...\");\n              this.is_valid = 0;\n              return false;\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED*** ///////////////////////\n      // Verify Signatures //\n      ///////////////////////\n      //\n      // the signature of the transaction should match the sender of the transaction \n      // for all transactions that originate from users. Transactions created by the \n      // block producer are handled in the next check.\n      //\n      // normal transactions\t(0)\n      // golden ticket solutions\t(1)\n      // staking transactions     (4)\n      //\n\n\n      if (this.transaction.type == 0 || this.transaction.type == 1 || this.transaction.type == 4) {\n        if (!app.crypto.verifyMessage(this.returnSignatureSource(app), this.transaction.sig, this.transaction.from[0].add)) {\n          console.log(\"ERROR 141502: signature on normal transaction does not verify\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** ///////////////////////\n      // Verify Signatures //\n      ///////////////////////\n      //\n      // all transactions produced by the block producer must be signed by the\n      // block producer.\n      //\n      // fee transaction\t\t(2)\n      //\n\n\n      if (this.transaction.type == 2) {\n        if (!app.crypto.verifyMessage(this.returnSignatureSource(app), this.transaction.sig, this.transaction.from[0].add)) {\n          console.log(\"ERROR 374302: signature on 2/3/5/6/7 transaction does not validate\");\n          console.log(JSON.stringify(this.transaction));\n          return 0;\n    ***REMOVED***\n  ***REMOVED*** ///////////////////////\n      // Verify Signatures //\n      ///////////////////////\n      //\n      // all VIP transactions must be from the original genesis key, either originally signed or signed REBROADCAST tx\n      //\n      // vip transactions\t\t(3)\n      //\n\n\n      if (this.transaction.type == 3) {***REMOVED*** //\n      // not implemented yet\n      //\n      //\n      //\n      //\n      //\n      ///////////////////////\n      // Verify Signatures //\n      ///////////////////////\n      //\n      // validate transactions within transactions\n      //\n      // rebroadcast transactions (5)\n      // rebroadcast staking pending (6)\n      // rebroadcast staking current (7)\n      //\n      // the sending address and TID must also CLAIM to be the same as the original sender, even through \n      // the sig will not validate as it is copied over from the inner transaction.\n      //\n\n\n      if (this.transaction.type == 5 || this.transaction.type == 6 || this.transaction.type == 7) {\n***REMOVED***\n          var txjson = this.transaction.msg.tx;\n          var tx_to_check = new saito.transaction(JSON.parse(txjson));\n          var sig_source_to_check = tx_to_check.returnSignatureSource(app);\n          var sig_to_check = this.transaction.sig;\n\n          if (this.transaction.from[0].add != tx_to_check.transaction.from[0].add) {\n            console.log(\"ERROR 582230: sending address changed in rebroadcast transaction\");\n            console.log(\"OLD: \" + JSON.stringify(tx_to_check.transaction));\n            console.log(\"NEW: \" + JSON.stringify(this.transaction));\n            return 0;\n      ***REMOVED***\n\n          if (this.transaction.from[0].add != tx_to_check.transaction.from[0].add) {\n            console.log(\"ERROR 137104: sending address changed in rebroadcast transaction\");\n            console.log(\"OLD: \" + JSON.stringify(tx_to_check.transaction));\n            console.log(\"NEW: \" + JSON.stringify(this.transaction));\n            return 0;\n      ***REMOVED***\n\n          if (!app.crypto.verifyMessage(sig_source_to_check, sig_to_check, tx_to_check.transaction.from[0].add)) {\n            console.log(\"ERROR 137109: signature on original tx in rebroadcast transaction is invalid\");\n            return 0;\n      ***REMOVED***\n    ***REMOVED*** catch (err) {\n          console.log(\"ERROR 578203: malformed rebroadcast transaction (original tx missing?)\");\n          return 0;\n    ***REMOVED***\n  ***REMOVED***\n\n      return true;\n***REMOVED***\n  ***REMOVED***]);\n\n  return Transaction;\n***REMOVED***();\n\nmodule.exports = Transaction;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2FpdG8vdHJhbnNhY3Rpb24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2FpdG8vdHJhbnNhY3Rpb24uanM/MDQzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBCaWcgICAgICA9IHJlcXVpcmUoJ2JpZy5qcycpO1xuY29uc3Qgc2FpdG8gICAgPSByZXF1aXJlKCcuL3NhaXRvJyk7XG5cbi8qKlxuICogVHJhbnNhY3Rpb24gQ29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Kn0gdHhvYmpcbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuXG4gIGNvbnN0cnVjdG9yKHR4b2JqPW51bGwpIHtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBjb25zZW5zdXMgdmFyaWFibGVzIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHRoaXMudHJhbnNhY3Rpb24gICAgICAgICAgICAgICA9IHt9O1xuICAgIHRoaXMudHJhbnNhY3Rpb24uaWQgICAgICAgICAgICA9IDE7XG4gICAgdGhpcy50cmFuc2FjdGlvbi5mcm9tICAgICAgICAgID0gW107XG4gICAgdGhpcy50cmFuc2FjdGlvbi50byAgICAgICAgICAgID0gW107XG4gICAgdGhpcy50cmFuc2FjdGlvbi50cyAgICAgICAgICAgID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdGhpcy50cmFuc2FjdGlvbi5zaWcgICAgICAgICAgID0gXCJcIjsgIC8vIHNpZyBvZiB0eFxuICAgIHRoaXMudHJhbnNhY3Rpb24udmVyICAgICAgICAgICA9IDEuMDtcbiAgICB0aGlzLnRyYW5zYWN0aW9uLnBhdGggICAgICAgICAgPSBbXTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgICAgICAgICAgPSAwO1xuXG5cdCAgICAvL1xuXHQgICAgLy8gVFlQRVNcblx0ICAgIC8vXG5cdCAgICAvLyAwID0gbm9ybWFsIG91dHB1dFxuXHQgICAgLy8gMSA9IGdvbGRlbiB0aWNrZXRcblx0ICAgIC8vIDIgPSBmZWUgdHJhbnNhY3Rpb25cblx0ICAgIC8vIDMgPSB2aXAgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIC8vIDQgPSBzdGFraW5nIHRyYW5zYWN0aW9uXG5cdCAgICAvLyA1ID0gcmVicm9hZGNhc3QgdHhcblx0ICAgIC8vXG5cdCAgICAvLyA2ID0gcmVicm9hZGNhc3Qgc3Rha2luZyBwZW5kaW5nXG5cdCAgICAvLyA3ID0gcmVicm9hZGNhc3Qgc3Rha2luZyBjdXJyZW50XG5cdCAgICAvLyA4ID0gZ29sZGVuIGNodW5rXG5cdCAgICAvL1xuXG4gICAgdGhpcy50cmFuc2FjdGlvbi5tc2cgICAgICAgICAgID0ge307XG4gICAgdGhpcy50cmFuc2FjdGlvbi5wcyAgICAgICAgICAgID0gMDtcblxuICAgIHRoaXMuZmVlc190b3RhbFx0XHQgICA9IFwiXCI7XG4gICAgdGhpcy53b3JrX2F2YWlsYWJsZV90b19tZVx0ICAgPSBcIlwiO1xuICAgIHRoaXMud29ya19hdmFpbGFibGVfdG9fY3JlYXRvciA9IFwiXCI7XG4gICAgdGhpcy53b3JrX2N1bXVsYXRpdmUgXHQgICA9IFwiMC4wXCI7XG4gICAgXHRcdFx0XHQgICAgICAgICAgLy8gY3VtdWxhdGl2ZSBmZWVzLCBpbmMuIGZlZXMgaW4gdGhpcyByZWZsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBob3cgbXVjaCB0aGlzIHRyYW5zYWN0aW9uIGNhcnJpZXMgaW4gdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZWlnaHQgb2YgdGhlIGJsb2NrLiB3ZSB1c2UgdGhpcyB0byBmaW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgd2lubmluZyBub2RlIGluIHRoZSBibG9jayBmb3IgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3V0aW5nIHBheW1lbnQuIGkuZS4gdGhpcyBtZWFzdXJlcyB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1bXVsYXRpdmUgd2VpZ2h0IG9mIHRoZSB1c2FibGUgZmVlcyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcmUgYmVoaW5kIHRoZSB0cmFuc2FjdGlvbnMuXG5cbiAgICB0aGlzLmRtc2dcdFx0XHQgICA9IFwiXCI7XG4gICAgdGhpcy5zaXplICAgICAgICAgICAgICAgICAgICAgID0gMDtcbiAgICB0aGlzLmlzX3ZhbGlkICAgICAgICAgICAgICAgICAgPSAxO1xuXG4gICAgdGhpcy5hdHJfdHJhcGRvb3JcdFx0ICAgPSBcIjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCI7XG4gICAgdGhpcy5hdHJfcmVicm9hZGNhc3RpbmdfbGltaXQgID0gMTA7ICAvLyA8IDEwIFNBSVRPIG5vIHJlYnJvYWRjYXN0aW5nXG5cbiAgICBpZiAodHhvYmogIT0gbnVsbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbiA9IHR4b2JqO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLmZyb20gPSB0aGlzLnRyYW5zYWN0aW9uLmZyb20ubWFwKHNsaXAgPT4ge1xuICAgICAgICAgIGxldCB7YWRkLGFtdCx0eXBlLGJpZCx0aWQsc2lkLGJzaH0gPSBzbGlwO1xuICAgICAgICAgIHJldHVybiBuZXcgc2FpdG8uc2xpcChhZGQsYW10LHR5cGUsYmlkLHRpZCxzaWQsYnNoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi50byA9IHRoaXMudHJhbnNhY3Rpb24udG8ubWFwKHNsaXAgPT4ge1xuICAgICAgICAgIGxldCB7YWRkLGFtdCx0eXBlLGJpZCx0aWQsc2lkLGJzaH0gPSBzbGlwO1xuICAgICAgICAgIHJldHVybiBuZXcgc2FpdG8uc2xpcChhZGQsYW10LHR5cGUsYmlkLHRpZCxzaWQsYnNoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmlzX3ZhbGlkID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykpLCB0aGlzKVxuICB9XG5cblxuXG5cbiAgZ2VuZXJhdGVSZWJyb2FkY2FzdFRyYW5zYWN0aW9uKGNyZWF0b3IsIHRpZCwgc2lkLCBhdmdfZmVlPTIpIHtcblxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aCA9PSAwKSB7IHJldHVybiBudWxsOyB9XG5cbiAgICB2YXIgbmV3dHggPSBuZXcgc2FpdG8udHJhbnNhY3Rpb24oKTtcblxuICAgIG5ld3R4LnRyYW5zYWN0aW9uLnNpZyA9IHRoaXMudHJhbnNhY3Rpb24uc2lnO1xuICAgIG5ld3R4LnRyYW5zYWN0aW9uLnRzID0gdGhpcy50cmFuc2FjdGlvbi50cztcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cgPSB7fTtcblxuICAgIHZhciBmZWUgPSBCaWcoYXZnX2ZlZSk7XG4gICAgaWYgKGF2Z19mZWUgPT0gMCkgeyBmZWUgPSBCaWcoMik7IH1cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIHJlYnJvYWRjYXN0cyAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMykgeyBmZWUgPSBCaWcoMCk7IH1cbiAgICBpZiAoXG4gICAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMCB8fCBcbiAgICAgIHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAxIHx8IFxuICAgICAgdGhpcy50cmFuc2FjdGlvbi50eXBlID09IDIgfHwgXG4gICAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gMyB8fCBcbiAgICAgIHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA0IHx8IFxuICAgICAgdGhpcy50cmFuc2FjdGlvbi50eXBlID09IDUgfHwgXG4gICAgICB0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gNiB8fCBcbiAgICAgIHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA3KSB7XG5cbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLnR5cGUgPSA1O1xuXG4gICAgICAvL1xuICAgICAgLy8gdmlwIHRyYW5zYWN0aW9ucyBzdGF5IFZJUCB0cmFuc2FjdGlvbnNcbiAgICAgIC8vXG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50eXBlID09IDMpIHsgbmV3dHgudHJhbnNhY3Rpb24udHlwZSA9IDM7IH1cbiAgICAgIC8vXG4gICAgICAvLyBzdGFraW5nIHRyYW5zYWN0aW9ucyBtYXJrZWQgY3VycmVudCBvciBwZW5kaW5nXG4gICAgICAvL1xuICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA0KSB7IG5ld3R4LnRyYW5zYWN0aW9uLnR5cGUgPSA2OyB9XG5cblxuICAgICAgLy9cbiAgICAgIC8vIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgdGltZXMgd2UgaGF2ZSByZWJyb2FkY2FzdFxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLm1zZy5sb29wID09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubG9vcCA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubG9vcCA9IHRoaXMudHJhbnNhY3Rpb24ubXNnLmxvb3ArMTtcbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIFxuICAgICAgLy9cbiAgICAgIHZhciBhbXQgPSBCaWcodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFtdCkubWludXMoZmVlKTtcbiAgICAgIGlmIChhbXQubHQoMCkpIHtcbiAgICAgICAgZmVlID0gQmlnKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hbXQpO1xuICAgICAgICBhbXQgPSBCaWcoMCk7XG4gICAgICB9XG5cblxuICAgICAgLy9cbiAgICAgIC8vIGF0dGFjaCB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25cbiAgICAgIC8vXG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5tc2cudHggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy50eCA9IHRoaXMudHJhbnNhY3Rpb24ubXNnLnR4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnR4ID0gSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGxldCBmcm9tID0gbmV3IHNhaXRvLnNsaXAoY3JlYXRvciwgdGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFtdCwgNSk7XG4gICAgICAgICAgZnJvbS50aWQgPSB0aWQ7XG4gICAgICAgICAgZnJvbS5zaWQgPSBzaWQ7XG4gICAgICBsZXQgdG8gICA9IG5ldyBzYWl0by5zbGlwKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hZGQsIGFtdC50b0ZpeGVkKDgpLCA1KTtcbiAgICAgIGxldCBmZWVzID0gbmV3IHNhaXRvLnNsaXAodGhpcy5hdHJfdHJhcGRvb3IsIGZlZS50b0ZpeGVkKDgpKTtcbiAgICAgIGZlZXMuc2lkID0gMTtcblxuICAgICAgbmV3dHgudHJhbnNhY3Rpb24uZnJvbS5wdXNoKGZyb20pO1xuICAgICAgbmV3dHgudHJhbnNhY3Rpb24udG8ucHVzaCh0byk7XG4gICAgICBpZiAoZmVlLmd0KDApKSB7XG4gICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLnRvLnB1c2goZmVlcyk7XG4gICAgICB9XG5cbiAgICB9XG5cblxuLyoqKipcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIGdvbGRlbiBjaHVuayAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgPT0gNSkge1xuXG4gICAgICBuZXd0eC50cmFuc2FjdGlvbi50eXBlID0gdGhpcy50cmFuc2FjdGlvbi50eXBlO1xuXG4gICAgICAvLyBjYWxjdWxhdGUgZmVlXG4gICAgICAvL1xuICAgICAgLy8gYXZlcmFnZSBmZWUgKiAxMFxuICAgICAgLy9cbiAgICAgIHZhciBmZWUgPSBCaWcoQmlnKGF2Z19mZWUpLnRpbWVzKDEwKS50b0ZpeGVkKDgpKTtcblxuICAgICAgLy9cbiAgICAgIC8vIG1pbmltdW0gb2YgMjBcbiAgICAgIC8vXG4gICAgICBpZiAoZmVlLmx0KDIwKSkgeyBmZWUgPSBCaWcoMjApOyB9XG4gICAgICB2YXIgYW10ID0gQmlnKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hbXQpLm1pbnVzKGZlZSk7XG4gICAgICBpZiAoYW10Lmx0KDApKSB7XG4gICAgICAgIGZlZSA9IEJpZyh0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYW10KTtcbiAgICAgICAgYW10ID0gQmlnKDApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5tc2cudHggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy50eCA9IHRoaXMudHJhbnNhY3Rpb24ubXNnLnR4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnR4ID0gSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHZhciBmcm9tID0gbmV3IHNhaXRvLnNsaXAodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFkZCwgdGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFtdCwgNSk7XG4gICAgICAgICAgZnJvbS50aWQgPSB0aWQ7XG4gICAgICAgICAgZnJvbS5zaWQgPSBzaWQ7XG4gICAgICB2YXIgdG8gICA9IG5ldyBzYWl0by5zbGlwKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS5hZGQsIGFtdC50b0ZpeGVkKDgpLCA1KTtcbiAgICAgIHZhciBmZWVzID0gbmV3IHNhaXRvLnNsaXAodGhpcy5hdHJfdHJhcGRvb3JfYWRkcmVzcywgZmVlLnRvRml4ZWQoOCkpO1xuICAgICAgZmVlcy5zaWQgPSAxO1xuXG4gICAgICBuZXd0eC50cmFuc2FjdGlvbi5mcm9tLnB1c2goZnJvbSk7XG4gICAgICBuZXd0eC50cmFuc2FjdGlvbi50by5wdXNoKHRvKTtcbiAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLnRvLnB1c2goZmVlcyk7ICAgLy8gdGhpcyBlbnN1cmVzIGZlZSBmYWxscyBpbnRvIG1vbmV5IHN1cHBseVxuXG4gICAgfVxuKioqKi9cblxuICAgIHJldHVybiBuZXd0eDtcbiAgfVxuXG5cblxuXG5cbiAgaXNGcm9tKHNlbmRlclB1YmxpY0tleSkge1xuICAgIGlmICh0aGlzLnJldHVyblNsaXBzRnJvbShzZW5kZXJQdWJsaWNLZXkpLmxlbmd0aCAhPSAwKSB7IHJldHVybiB0cnVlOyB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNUbyhyZWNlaXZlclB1YmxpY0tleSkge1xuICAgIGlmICh0aGlzLnJldHVyblNsaXBzVG8ocmVjZWl2ZXJQdWJsaWNLZXkpLmxlbmd0aCA+IDApIHsgcmV0dXJuIHRydWU7IH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc0dvbGRlblRpY2tldCgpIHtcbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50eXBlID09IDEpIHsgcmV0dXJuIDE7IH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGlzUmVicm9hZGNhc3Qob2xkYmxrLCBuZXdibGssIHNpZCkge1xuXG4gICAgLy9cbiAgICAvLyBHb2xkZW4gQ2h1bmsgdHJhbnNhY3Rpb25zIG11c3QgcG9pbnQgdG8gdGhlIHRyYXBkb29yIGFkZHJlc3MgaW4gb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZFxuICAgIC8vXG4gICAgLy9pZiAodGhpcy50cmFuc2FjdGlvbi50b1tzaWRdLmFkZCAgPT0gdGhpcy5hdHJfdHJhcGRvb3IpIHtcbiAgICAvLyAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXS50eXBlID09IDUpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAvLyAgcmV0dXJuIGZhbHNlO1xuICAgIC8vfVxuXG4gICAgLy8gdmlwIHRyYW5zYWN0aW9ucyBhbHdheXMgcmVicm9hZGNhc3RcbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50eXBlID09IDMpICAgICAgeyByZXR1cm4gdHJ1ZTsgfVxuXG4gICAgLy8gZXZlcnl0aGluZyBlbHNlIHJlcXVpcmVzIG1vbmV5XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG8ubGVuZ3RoID09IDApIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG9bc2lkXSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKEJpZyh0aGlzLnRyYW5zYWN0aW9uLnRvW3NpZF0uYW10KS5ndCh0aGlzLmF0cl9yZWJyb2FkY2FzdGluZ19saW1pdCkpIHsgcmV0dXJuIHRydWU7IH1cblxuICAgIHJldHVybiBmYWxzZTtcblxuICB9XG5cblxuICBpbnZvbHZlc1B1YmxpY0tleShwdWJsaWNrZXkpIHtcbiAgICBsZXQgc2xpcHMgPSB0aGlzLnJldHVyblNsaXBzVG9BbmRGcm9tKHB1YmxpY2tleSk7XG4gICAgaWYgKHNsaXBzLnRvLmxlbmd0aCA+IDAgfHwgc2xpcHMuZnJvbS5sZW5ndGggPiAwKSB7IHJldHVybiAxOyB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICByZXR1cm5QYXltZW50VG8ocHVibGlja2V5KSB7XG4gICAgbGV0IHNsaXBzID0gdGhpcy5yZXR1cm5TbGlwc1RvQW5kRnJvbShwdWJsaWNrZXkpO1xuICAgIGxldCB4ID0gQmlnKDAuMCk7XG4gICAgZm9yICh2YXIgdiA9IDA7IHYgPCBzbGlwcy50by5sZW5ndGg7IHYrKykge1xuICAgICAgaWYgKHNsaXBzLnRvW3ZdLmFkZCA9PT0gcHVibGlja2V5KSB7IHggPSB4LnBsdXMoQmlnKHNsaXBzLnRvW3ZdLmFtdCkpOyB9XG4gICAgfVxuICAgIHJldHVybiB4LnRvRml4ZWQoOCkucmVwbGFjZSgvMCskLywnJykucmVwbGFjZSgvXFwuJC8sJ1xcLjAnKTtcbiAgfVxuXG4gIHJldHVyblNsaXBzRnJvbShmcm9tQWRkcmVzcykge1xuICAgIHZhciB4ID0gW107XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uZnJvbSAhPSBudWxsKSB7XG4gICAgICBmb3IgKHZhciB2ID0gMDsgdiA8IHRoaXMudHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IHYrKykge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5mcm9tW3ZdLmFkZCA9PT0gZnJvbUFkZHJlc3MpIHsgeC5wdXNoKHRoaXMudHJhbnNhY3Rpb24uZnJvbVt2XSk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICByZXR1cm5TbGlwc1RvQW5kRnJvbSh0aGVBZGRyZXNzKSB7XG4gICAgdmFyIHggPSB7fTtcbiAgICB4LmZyb20gPSBbXTtcbiAgICB4LnRvID0gW107XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uZnJvbSAhPSBudWxsKSB7XG4gICAgICBmb3IgKHZhciB2ID0gMDsgdiA8IHRoaXMudHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IHYrKykge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5mcm9tW3ZdLmFkZCA9PT0gdGhlQWRkcmVzcykgeyB4LmZyb20ucHVzaCh0aGlzLnRyYW5zYWN0aW9uLmZyb21bdl0pOyB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwgdGhpcy50cmFuc2FjdGlvbi50by5sZW5ndGg7IHYrKykge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50b1t2XS5hZGQgPT09IHRoZUFkZHJlc3MpIHsgeC50by5wdXNoKHRoaXMudHJhbnNhY3Rpb24udG9bdl0pOyB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4O1xuICB9XG5cbiAgcmV0dXJuU2xpcHNUbyh0b0FkZHJlc3MpIHtcbiAgICB2YXIgeCA9IFtdO1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwgdGhpcy50cmFuc2FjdGlvbi50by5sZW5ndGg7IHYrKykge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50b1t2XS5hZGQgPT09IHRvQWRkcmVzcykgeyB4LnB1c2godGhpcy50cmFuc2FjdGlvbi50b1t2XSk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICBkZWNyeXB0TWVzc2FnZShhcHApIHtcbiAgICB0cnkgeyB0aGlzLmRtc2cgPSBhcHAua2V5cy5kZWNyeXB0TWVzc2FnZSh0aGlzLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkLCB0aGlzLnRyYW5zYWN0aW9uLm1zZyk7IH0gY2F0Y2ggKGUpIHt9XG4gIH1cblxuICByZXR1cm5NZXNzYWdlKCkge1xuICAgIGlmICh0aGlzLmRtc2cgIT0gXCJcIikgeyByZXR1cm4gdGhpcy5kbXNnOyB9XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24ubXNnO1xuICB9XG5cbiAgcmV0dXJuU2lnbmF0dXJlKGFwcCkge1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnNpZyAhPSBcIlwiKSB7IHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnNpZzsgfVxuICAgIHRoaXMudHJhbnNhY3Rpb24uc2lnID0gYXBwLndhbGxldC5zaWduTWVzc2FnZSh0aGlzLnJldHVyblNpZ25hdHVyZVNvdXJjZShhcHApKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zaWc7XG4gIH1cblxuICByZXR1cm5TaWduYXR1cmVTb3VyY2UoYXBwKSB7XG4gICAgLy8gcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc2lnO1xuICAgIHJldHVybiBgJHt0aGlzLnRyYW5zYWN0aW9uLnRzfSR7dGhpcy50cmFuc2FjdGlvbi5wc30ke3RoaXMudHJhbnNhY3Rpb24udHlwZX1gO1xuICB9XG5cbiAgcmV0dXJuRmVlcyhhcHApIHtcblxuICAgIGlmICh0aGlzLmZlZXNfdG90YWwgPT0gXCJcIikge1xuXG4gICAgICAvL1xuICAgICAgLy8gc3VtIGlucHV0c1xuICAgICAgLy9cbiAgICAgIGxldCBpbnB1dHMgPSBCaWcoMC4wKTtcbiAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb20gIT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCB2ID0gMDsgdiA8IHRoaXMudHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IHYrKykge1xuICAgICAgICAgIGlucHV0cyA9IGlucHV0cy5wbHVzKEJpZyh0aGlzLnRyYW5zYWN0aW9uLmZyb21bdl0uYW10KSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIHN1bSBvdXRwdXRzXG4gICAgICAvL1xuICAgICAgbGV0IG91dHB1dHMgPSBCaWcoMC4wKTtcbiAgICAgIGZvciAobGV0IHYgPSAwOyB2IDwgdGhpcy50cmFuc2FjdGlvbi50by5sZW5ndGg7IHYrKykge1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIG9ubHkgY291bnQgbm9uLWd0IHRyYW5zYWN0aW9uIG91dHB1dHNcbiAgICAgICAgLy9cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udG9bdl0udHlwZSAhPSAxICYmIHRoaXMudHJhbnNhY3Rpb24udG9bdl0udHlwZSAhPSAyKSB7XG4gICAgICAgICAgb3V0cHV0cyA9IG91dHB1dHMucGx1cyhCaWcodGhpcy50cmFuc2FjdGlvbi50b1t2XS5hbXQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgdHhfZmVlcyA9IGlucHV0cy5taW51cyhvdXRwdXRzKTtcbiAgICAgIHRoaXMuZmVlc190b3RhbCA9IHR4X2ZlZXMudG9GaXhlZCg4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mZWVzX3RvdGFsO1xuICB9XG5cblxuICByZXR1cm5Sb3V0aW5nV29ya0F2YWlsYWJsZShhcHAsIHB1YmxpY2tleT1cIlwiKSB7XG5cbiAgICBsZXQgdWYgPSAgQmlnKHRoaXMucmV0dXJuRmVlcyhhcHApKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbi5wYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZCA9IDE7XG4gICAgICBmb3IgKGxldCBqID0gaTsgaiA+IDA7IGotLSkgeyBkID0gZCoyOyB9XG4gICAgICB1ZiA9IHVmLmRpdihkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdWYudG9GaXhlZCg4KTtcblxuICB9XG5cblxuXG5cblxuICB2YWxpZGF0ZShhcHAsIGJpZD0wKSB7XG5cbiAgICBpZiAoYXBwLkJST1dTRVIgPT0gMSB8fCBhcHAuU1BWTU9ERSA9PSAxKSB7IHJldHVybiB0cnVlOyB9XG5cbiAgICBpZiAodGhpcy5pc192YWxpZCA9PSAwKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBtaW4gb25lIHNlbmRlciBhbmQgcmVjZWl2ZXIgLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aCA8IDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMzI5MzgwOiBubyBmcm9tIGFkZHJlc3MgaW4gdHJhbnNhY3Rpb25cIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnRvLmxlbmd0aCA8IDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgMTgzMDkyOiBubyB0byBhZGRyZXNzIGluIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gbm8gbmVnYXRpdmUgcGF5bWVudHMgLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vXG4gICAgLy8gYWxsIHRyYW5zYWN0aW9ucyBTQVZFIGZlZSB0cmFuc2FjdGlvbnMgKHdoaWNoIGludHJvZHVjZSBcbiAgICAvLyBuZXcgdG9rZW5zKSBuZWVkIHRvIGJhbGFuY2UgKHRva2VucyBpbiBtdXN0IG1hdGNoIG9yIGJlXG4gICAgLy8gbGVzcyB0aGFuIHRva2VucyBvdXQuXG4gICAgLy9cbiAgICBsZXQgdG90YWxfZnJvbSA9IEJpZygwLjApO1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLnR5cGUgIT0gMikge1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJhbnNhY3Rpb24uZnJvbS5sZW5ndGg7IGkrKykge1xuICAgICAgICB0b3RhbF9mcm9tID0gdG90YWxfZnJvbS5wbHVzKEJpZyh0aGlzLnRyYW5zYWN0aW9uLmZyb21baV0uYW10KSk7XG4gICAgICAgIGlmICh0b3RhbF9mcm9tLmx0KDApKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAyNDA4MTI6IG5lZ2F0aXZlIHBheW1lbnQgaW4gdHJhbnNhY3Rpb24gZnJvbSBzbGlwXCIpO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdG90YWxfdG8gPSBCaWcoMC4wKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbi50by5sZW5ndGg7IGkrKykge1xuICAgICAgICB0b3RhbF90byA9IHRvdGFsX3RvLnBsdXMoQmlnKHRoaXMudHJhbnNhY3Rpb24udG9baV0uYW10KSk7XG4gICAgICAgIGlmICh0b3RhbF90by5sdCgwKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNjcyOTM5OiBuZWdhdGl2ZSBwYXltZW50IGluIHRyYW5zYWN0aW9uIHRvIHNsaXBcIik7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRvdGFsX3RvLmd0KHRvdGFsX2Zyb20pKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNjcyOTM5OiBuZWdhdGl2ZSBwYXltZW50IHRvIHNsaXBzID4gZnJvbSBzbGlwc1wiKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAvL1xuICAgICAgLy8gZmVlIHRyYW5zYWN0aW9ucyBhcmUgdGhlIHNpbmdsZSB0eXBlIG9mIHRyYW5zYWN0aW9uIHRoYXQgY2FuIGludHJvZHVjZVxuICAgICAgLy8gbmV3IHRva2VucyBpbnRvIGNpcmN1bGF0aW9uLiB0aGV5IGFyZSB0aHVzIGV4Y2VwdCBmcm9tIHRoZSBhYm92ZSBjaGVja1xuICAgICAgLy9cblxuICAgIH1cblxuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gZnJvbSBzbGlwcyB2YWxpZGF0ZSAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvL1xuICAgIC8vIHdlIGlnbm9yZSB0cmFuc2FjdGlvbnMgdHlwZXMgd2l0aG91dCBub3JtYWwgRlJPTSBpbnB1dHM6XG4gICAgLy9cbiAgICAvLyAgIDIgPSBmZWUgdHJhbnNhY3Rpb25zXG4gICAgLy8gICAzID0gdmlwIHRyYW5zYWN0aW9uc1xuICAgIC8vICAgNSA9IHJlYnJvYWRjYXN0IHR4c1xuICAgIC8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSAhPSAyICYmIHRoaXMudHJhbnNhY3Rpb24udHlwZSAhPSAzICYmIHRoaXMudHJhbnNhY3Rpb24udHlwZSAhPSA1KSB7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmFuc2FjdGlvbi5mcm9tLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgaWYgKEJpZyh0aGlzLnRyYW5zYWN0aW9uLmZyb21baV0uYW10KS5ndCgwKSkge1xuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyB3aXRoaW4gZ2VuZXNpcyBwZXJpb2RcbiAgICAgICAgICAvL1xuICAgICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb21baV0uYmlkIDwgKGJpZC1hcHAuYmxvY2tjaGFpbi5nZW5lc2lzX3BlcmlvZCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTcwMDMwOiB0cmFuc2FjdGlvbiB0cmllcyB0byBzcGVuZCBvdXRkYXRlZCBpbnB1dC4uLlwiKTtcbiAgICBcdCAgICB0aGlzLmlzX3ZhbGlkID0gMDtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHNwZW5kcyBsb25nZXN0IGNoYWluXG4gICAgICAgICAgLy9cbiAgICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5mcm9tW2ldLmJzaCAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoYXBwLmJsb2NrY2hhaW4uYnNoX2xjX2htYXBbdGhpcy50cmFuc2FjdGlvbi5mcm9tW2ldLmJzaF0gIT0gMSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDE4NTAxMzogdHJhbnNhY3Rpb24gdHJpZXMgdG8gc3BlbmQgb3V0ZGF0ZWQgaW5wdXQuLi5cIik7XG4gIFx0ICAgICAgdGhpcy5pc192YWxpZCA9IDA7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cblx0ICAvL1xuXHQgIC8vIHVuc3BlbnQgaW4gc2hhc2htYXBcblx0ICAvL1xuICAgICAgICAgIGlmICghYXBwLnNoYXNobWFwLnZhbGlkYXRlX3NsaXAodGhpcy50cmFuc2FjdGlvbi5mcm9tW2ldLnJldHVyblNpZ25hdHVyZVNvdXJjZSgpLCBiaWQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIDU3MDEzMDogY2Fubm90IHZhbGlkYXRlIGlucHV0cyB3aXRoIHNoYXNobWFwLi4uXCIpO1xuICAgICAgICAgICAgdGhpcy5pc192YWxpZCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFZlcmlmeSBTaWduYXR1cmVzIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvL1xuICAgIC8vIHRoZSBzaWduYXR1cmUgb2YgdGhlIHRyYW5zYWN0aW9uIHNob3VsZCBtYXRjaCB0aGUgc2VuZGVyIG9mIHRoZSB0cmFuc2FjdGlvbiBcbiAgICAvLyBmb3IgYWxsIHRyYW5zYWN0aW9ucyB0aGF0IG9yaWdpbmF0ZSBmcm9tIHVzZXJzLiBUcmFuc2FjdGlvbnMgY3JlYXRlZCBieSB0aGUgXG4gICAgLy8gYmxvY2sgcHJvZHVjZXIgYXJlIGhhbmRsZWQgaW4gdGhlIG5leHQgY2hlY2suXG4gICAgLy9cbiAgICAvLyBub3JtYWwgdHJhbnNhY3Rpb25zXHQoMClcbiAgICAvLyBnb2xkZW4gdGlja2V0IHNvbHV0aW9uc1x0KDEpXG4gICAgLy8gc3Rha2luZyB0cmFuc2FjdGlvbnMgICAgICg0KVxuICAgIC8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAwIHx8IHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAxIHx8IHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSA0KSB7XG4gICAgICBpZiAoIWFwcC5jcnlwdG8udmVyaWZ5TWVzc2FnZSh0aGlzLnJldHVyblNpZ25hdHVyZVNvdXJjZShhcHApLCB0aGlzLnRyYW5zYWN0aW9uLnNpZywgdGhpcy50cmFuc2FjdGlvbi5mcm9tWzBdLmFkZCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAxNDE1MDI6IHNpZ25hdHVyZSBvbiBub3JtYWwgdHJhbnNhY3Rpb24gZG9lcyBub3QgdmVyaWZ5XCIpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFZlcmlmeSBTaWduYXR1cmVzIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvL1xuICAgIC8vIGFsbCB0cmFuc2FjdGlvbnMgcHJvZHVjZWQgYnkgdGhlIGJsb2NrIHByb2R1Y2VyIG11c3QgYmUgc2lnbmVkIGJ5IHRoZVxuICAgIC8vIGJsb2NrIHByb2R1Y2VyLlxuICAgIC8vXG4gICAgLy8gZmVlIHRyYW5zYWN0aW9uXHRcdCgyKVxuICAgIC8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAyKSB7XG4gICAgICBpZiAoIWFwcC5jcnlwdG8udmVyaWZ5TWVzc2FnZSh0aGlzLnJldHVyblNpZ25hdHVyZVNvdXJjZShhcHApLCB0aGlzLnRyYW5zYWN0aW9uLnNpZywgdGhpcy50cmFuc2FjdGlvbi5mcm9tWzBdLmFkZCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAzNzQzMDI6IHNpZ25hdHVyZSBvbiAyLzMvNS82LzcgdHJhbnNhY3Rpb24gZG9lcyBub3QgdmFsaWRhdGVcIik7XG5jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBWZXJpZnkgU2lnbmF0dXJlcyAvL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy9cbiAgICAvLyBhbGwgVklQIHRyYW5zYWN0aW9ucyBtdXN0IGJlIGZyb20gdGhlIG9yaWdpbmFsIGdlbmVzaXMga2V5LCBlaXRoZXIgb3JpZ2luYWxseSBzaWduZWQgb3Igc2lnbmVkIFJFQlJPQURDQVNUIHR4XG4gICAgLy9cbiAgICAvLyB2aXAgdHJhbnNhY3Rpb25zXHRcdCgzKVxuICAgIC8vXG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb24udHlwZSA9PSAzKSB7XG5cbi8vXG4vLyBub3QgaW1wbGVtZW50ZWQgeWV0XG4vL1xuLy9cbi8vXG4vL1xuLy9cblxuICAgIH1cblxuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFZlcmlmeSBTaWduYXR1cmVzIC8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvL1xuICAgIC8vIHZhbGlkYXRlIHRyYW5zYWN0aW9ucyB3aXRoaW4gdHJhbnNhY3Rpb25zXG4gICAgLy9cbiAgICAvLyByZWJyb2FkY2FzdCB0cmFuc2FjdGlvbnMgKDUpXG4gICAgLy8gcmVicm9hZGNhc3Qgc3Rha2luZyBwZW5kaW5nICg2KVxuICAgIC8vIHJlYnJvYWRjYXN0IHN0YWtpbmcgY3VycmVudCAoNylcbiAgICAvL1xuICAgIC8vIHRoZSBzZW5kaW5nIGFkZHJlc3MgYW5kIFRJRCBtdXN0IGFsc28gQ0xBSU0gdG8gYmUgdGhlIHNhbWUgYXMgdGhlIG9yaWdpbmFsIHNlbmRlciwgZXZlbiB0aHJvdWdoIFxuICAgIC8vIHRoZSBzaWcgd2lsbCBub3QgdmFsaWRhdGUgYXMgaXQgaXMgY29waWVkIG92ZXIgZnJvbSB0aGUgaW5uZXIgdHJhbnNhY3Rpb24uXG4gICAgLy9cbiAgICBpZiAodGhpcy50cmFuc2FjdGlvbi50eXBlID09IDUgfHwgdGhpcy50cmFuc2FjdGlvbi50eXBlID09IDYgfHwgdGhpcy50cmFuc2FjdGlvbi50eXBlID09IDcpIHtcblxuICAgICAgdHJ5IHtcblxuICAgICAgICBsZXQgdHhqc29uXHRcdFx0PSB0aGlzLnRyYW5zYWN0aW9uLm1zZy50eDtcbiAgICAgICAgbGV0IHR4X3RvX2NoZWNrIFx0XHQ9IG5ldyBzYWl0by50cmFuc2FjdGlvbihKU09OLnBhcnNlKHR4anNvbikpO1xuICAgICAgICBsZXQgc2lnX3NvdXJjZV90b19jaGVja1x0XHQ9IHR4X3RvX2NoZWNrLnJldHVyblNpZ25hdHVyZVNvdXJjZShhcHApO1xuICAgICAgICBsZXQgc2lnX3RvX2NoZWNrIFx0XHQ9IHRoaXMudHJhbnNhY3Rpb24uc2lnO1xuXG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkICE9IHR4X3RvX2NoZWNrLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiA1ODIyMzA6IHNlbmRpbmcgYWRkcmVzcyBjaGFuZ2VkIGluIHJlYnJvYWRjYXN0IHRyYW5zYWN0aW9uXCIpO1xuY29uc29sZS5sb2coXCJPTEQ6IFwiICsgSlNPTi5zdHJpbmdpZnkodHhfdG9fY2hlY2sudHJhbnNhY3Rpb24pKTtcbmNvbnNvbGUubG9nKFwiTkVXOiBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgICByZXR1cm4gMDtcblx0fVxuXG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkICE9IHR4X3RvX2NoZWNrLnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAxMzcxMDQ6IHNlbmRpbmcgYWRkcmVzcyBjaGFuZ2VkIGluIHJlYnJvYWRjYXN0IHRyYW5zYWN0aW9uXCIpO1xuY29uc29sZS5sb2coXCJPTEQ6IFwiICsgSlNPTi5zdHJpbmdpZnkodHhfdG9fY2hlY2sudHJhbnNhY3Rpb24pKTtcbmNvbnNvbGUubG9nKFwiTkVXOiBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgICByZXR1cm4gMDtcblx0fVxuXG4gICAgICAgIGlmICghYXBwLmNyeXB0by52ZXJpZnlNZXNzYWdlKHNpZ19zb3VyY2VfdG9fY2hlY2ssIHNpZ190b19jaGVjaywgdHhfdG9fY2hlY2sudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiAxMzcxMDk6IHNpZ25hdHVyZSBvbiBvcmlnaW5hbCB0eCBpbiByZWJyb2FkY2FzdCB0cmFuc2FjdGlvbiBpcyBpbnZhbGlkXCIpO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgNTc4MjAzOiBtYWxmb3JtZWQgcmVicm9hZGNhc3QgdHJhbnNhY3Rpb24gKG9yaWdpbmFsIHR4IG1pc3Npbmc/KVwiKTtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgIH1cblxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxufVxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbjtcblxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBRUE7Ozs7OztBQUlBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQVVBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0Q0E7QUFDQTs7O0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/saito/transaction.js\n");
722c722
< eval("module.exports = HeaderDropdownTemplate = function HeaderDropdownTemplate() {\n  return \"\\n    <div class=\\\"header-dropdown\\\" style=\\\"display: none\\\">\\n      <div class=\\\"header-dropdown-modules\\\">\\n        <ul>\\n          <a href=\\\"/arcade\\\"><li>Arcade</li></a>\\n          <a href=\\\"/chat\\\"><li>Chat</li></a>\\n          <a href=\\\"/email\\\"><li>Email</li></a>\\n          <a href=\\\"/forum\\\"><li>Forum</li></a>\\n        </ul>\\n      </div>\\n      <div class=\\\"header-dropdown-settings\\\">\\n        <ul>\\n          <li id=\\\"header-dropdown-reset-wallet\\\">Reset Wallet</li>\\n          <li id=\\\"header-dropdown-load-wallet\\\">Load Wallet</li>\\n          <li>Settings</li>\\n        </ul>\\n      </div>\\n    </div>\\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvdWkvaGVhZGVyL2hlYWRlci1kcm9wZG93bi50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi91aS9oZWFkZXIvaGVhZGVyLWRyb3Bkb3duLnRlbXBsYXRlLmpzP2RmMWUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBIZWFkZXJEcm9wZG93blRlbXBsYXRlID0gKCkgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItZHJvcGRvd25cIiBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItZHJvcGRvd24tbW9kdWxlc1wiPlxuICAgICAgICA8dWw+XG4gICAgICAgICAgPGEgaHJlZj1cIi9hcmNhZGVcIj48bGk+QXJjYWRlPC9saT48L2E+XG4gICAgICAgICAgPGEgaHJlZj1cIi9jaGF0XCI+PGxpPkNoYXQ8L2xpPjwvYT5cbiAgICAgICAgICA8YSBocmVmPVwiL2VtYWlsXCI+PGxpPkVtYWlsPC9saT48L2E+XG4gICAgICAgICAgPGEgaHJlZj1cIi9mb3J1bVwiPjxsaT5Gb3J1bTwvbGk+PC9hPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyLWRyb3Bkb3duLXNldHRpbmdzXCI+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICA8bGkgaWQ9XCJoZWFkZXItZHJvcGRvd24tcmVzZXQtd2FsbGV0XCI+UmVzZXQgV2FsbGV0PC9saT5cbiAgICAgICAgICA8bGkgaWQ9XCJoZWFkZXItZHJvcGRvd24tbG9hZC13YWxsZXRcIj5Mb2FkIFdhbGxldDwvbGk+XG4gICAgICAgICAgPGxpPlNldHRpbmdzPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQW1CQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/ui/header/header-dropdown.template.js\n");
---
> eval("module.exports = HeaderDropdownTemplate = function HeaderDropdownTemplate() {\n  return \"\\n    <div class=\\\"header-dropdown\\\" style=\\\"display: none\\\">\\n      <div class=\\\"header-dropdown-modules\\\">\\n        <ul>\\n          <a href=\\\"/arcade\\\"><li>Arcade</li></a>\\n          <a href=\\\"/chat\\\"><li>Chat</li></a>\\n          <a href=\\\"/email\\\"><li>Email</li></a>\\n          <a href=\\\"/forum\\\"><li>Forum</li></a>\\n        </ul>\\n      </div>\\n      <div class=\\\"header-dropdown-settings\\\">\\n        <ul>\\n          <li id=\\\"header-dropdown-reset-wallet\\\">Reset Wallet</li>\\n          <li id=\\\"header-dropdown-load-wallet\\\">Load Wallet</li>\\n          <li>Settings</li>\\n          <a href=\\\"/qrscanner\\\"><li>Scan QR</li></a>\\n        </ul>\\n      </div>\\n    </div>\\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvdWkvaGVhZGVyL2hlYWRlci1kcm9wZG93bi50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi91aS9oZWFkZXIvaGVhZGVyLWRyb3Bkb3duLnRlbXBsYXRlLmpzP2RmMWUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBIZWFkZXJEcm9wZG93blRlbXBsYXRlID0gKCkgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItZHJvcGRvd25cIiBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItZHJvcGRvd24tbW9kdWxlc1wiPlxuICAgICAgICA8dWw+XG4gICAgICAgICAgPGEgaHJlZj1cIi9hcmNhZGVcIj48bGk+QXJjYWRlPC9saT48L2E+XG4gICAgICAgICAgPGEgaHJlZj1cIi9jaGF0XCI+PGxpPkNoYXQ8L2xpPjwvYT5cbiAgICAgICAgICA8YSBocmVmPVwiL2VtYWlsXCI+PGxpPkVtYWlsPC9saT48L2E+XG4gICAgICAgICAgPGEgaHJlZj1cIi9mb3J1bVwiPjxsaT5Gb3J1bTwvbGk+PC9hPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyLWRyb3Bkb3duLXNldHRpbmdzXCI+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICA8bGkgaWQ9XCJoZWFkZXItZHJvcGRvd24tcmVzZXQtd2FsbGV0XCI+UmVzZXQgV2FsbGV0PC9saT5cbiAgICAgICAgICA8bGkgaWQ9XCJoZWFkZXItZHJvcGRvd24tbG9hZC13YWxsZXRcIj5Mb2FkIFdhbGxldDwvbGk+XG4gICAgICAgICAgPGxpPlNldHRpbmdzPC9saT5cbiAgICAgICAgICA8YSBocmVmPVwiL3Fyc2Nhbm5lclwiPjxsaT5TY2FuIFFSPC9saT48L2E+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFvQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/ui/header/header-dropdown.template.js\n");
755c755
< eval("var map = {\n\t\"./appstore/lib/email-appspace/registry-appspace\": \"./mods/appstore/lib/email-appspace/registry-appspace.js\",\n\t\"./appstore/lib/email-appspace/registry-appspace.js\": \"./mods/appstore/lib/email-appspace/registry-appspace.js\",\n\t\"./appstore/lib/email-appspace/registry-appspace.template\": \"./mods/appstore/lib/email-appspace/registry-appspace.template.js\",\n\t\"./appstore/lib/email-appspace/registry-appspace.template.js\": \"./mods/appstore/lib/email-appspace/registry-appspace.template.js\",\n\t\"./appstore/registry\": \"./mods/appstore/registry.js\",\n\t\"./appstore/registry.js\": \"./mods/appstore/registry.js\",\n\t\"./appstore/sql/modules.sql\": \"./appstore/sql/modules.sql\",\n\t\"./appstore/sql/reviews.sql\": \"./appstore/sql/reviews.sql\",\n\t\"./appstore/web/index.html\": \"./appstore/web/index.html\",\n\t\"./appstore/web/style.css\": \"./appstore/web/style.css\",\n\t\"./arcade/arcade\": \"./mods/arcade/arcade.js\",\n\t\"./arcade/arcade.js\": \"./mods/arcade/arcade.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar.js\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template.js\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-game.template\": \"./mods/arcade/lib/arcade-main/arcade-game.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-game.template.js\": \"./mods/arcade/lib/arcade-main/arcade-game.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-gamelist-row.template\": \"./mods/arcade/lib/arcade-main/arcade-gamelist-row.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-gamelist-row.template.js\": \"./mods/arcade/lib/arcade-main/arcade-gamelist-row.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader\": \"./mods/arcade/lib/arcade-main/arcade-loader.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader.js\": \"./mods/arcade/lib/arcade-main/arcade-loader.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader.template\": \"./mods/arcade/lib/arcade-main/arcade-loader.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader.template.js\": \"./mods/arcade/lib/arcade-main/arcade-loader.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-main\": \"./mods/arcade/lib/arcade-main/arcade-main.js\",\n\t\"./arcade/lib/arcade-main/arcade-main.js\": \"./mods/arcade/lib/arcade-main/arcade-main.js\",\n\t\"./arcade/lib/arcade-main/arcade-main.template\": \"./mods/arcade/lib/arcade-main/arcade-main.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-main.template.js\": \"./mods/arcade/lib/arcade-main/arcade-main.template.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar.js\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template.js\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template.js\",\n\t\"./arcade/sql/games.sql\": \"./arcade/sql/games.sql\",\n\t\"./arcade/sql/gamestate.sql\": \"./arcade/sql/gamestate.sql\",\n\t\"./arcade/web/index.html\": \"./arcade/web/index.html\",\n\t\"./arcade/web/style.css\": \"./arcade/web/style.css\",\n\t\"./archive/archive\": \"./mods/archive/archive.js\",\n\t\"./archive/archive.js\": \"./mods/archive/archive.js\",\n\t\"./archive/sql/txs.sql\": \"./archive/sql/txs.sql\",\n\t\"./archive/web/index.html\": \"./archive/web/index.html\",\n\t\"./archive/web/script\": \"./mods/archive/web/script.js\",\n\t\"./archive/web/script.js\": \"./mods/archive/web/script.js\",\n\t\"./archive/web/style.css\": \"./archive/web/style.css\",\n\t\"./chat/chat\": \"./mods/chat/chat.js\",\n\t\"./chat/chat.js\": \"./mods/chat/chat.js\",\n\t\"./chat/lib/chatgroup\": \"./mods/chat/lib/chatgroup.js\",\n\t\"./chat/lib/chatgroup.js\": \"./mods/chat/lib/chatgroup.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box\": \"./mods/chat/lib/email-chat/chat-box/chat-box.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box-message-container.template\": \"./mods/chat/lib/email-chat/chat-box/chat-box-message-container.template.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box-message-container.template.js\": \"./mods/chat/lib/email-chat/chat-box/chat-box-message-container.template.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box.js\": \"./mods/chat/lib/email-chat/chat-box/chat-box.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box.template\": \"./mods/chat/lib/email-chat/chat-box/chat-box.template.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box.template.js\": \"./mods/chat/lib/email-chat/chat-box/chat-box.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list\": \"./mods/chat/lib/email-chat/chat-list/chat-list.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list-row.template\": \"./mods/chat/lib/email-chat/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list-row.template.js\": \"./mods/chat/lib/email-chat/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list.js\": \"./mods/chat/lib/email-chat/chat-list/chat-list.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list.template\": \"./mods/chat/lib/email-chat/chat-list/chat-list.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list.template.js\": \"./mods/chat/lib/email-chat/chat-list/chat-list.template.js\",\n\t\"./chat/lib/email-chat/chat-manager/chat-manager\": \"./mods/chat/lib/email-chat/chat-manager/chat-manager.js\",\n\t\"./chat/lib/email-chat/chat-manager/chat-manager.js\": \"./mods/chat/lib/email-chat/chat-manager/chat-manager.js\",\n\t\"./chat/lib/email-chat/email-chat\": \"./mods/chat/lib/email-chat/email-chat.js\",\n\t\"./chat/lib/email-chat/email-chat.js\": \"./mods/chat/lib/email-chat/email-chat.js\",\n\t\"./chat/lib/email-chat/email-chat.template\": \"./mods/chat/lib/email-chat/email-chat.template.js\",\n\t\"./chat/lib/email-chat/email-chat.template.js\": \"./mods/chat/lib/email-chat/email-chat.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-list/chat-list\": \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-list/chat-list-row.template\": \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js\": \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-list/chat-list.js\": \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-list/chat-list.template\": \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-list/chat-list.template.js\": \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room-header.template\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room-message.template\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room.js\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room.template\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.template.js\",\n\t\"./chat/lib/this-needs-refactoring/chat-room/chat-room.template.js\": \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.template.js\",\n\t\"./chat/sql/records.sql\": \"./chat/sql/records.sql\",\n\t\"./chat/sql/rooms.sql\": \"./chat/sql/rooms.sql\",\n\t\"./chat/web/css/email-chat.css\": \"./chat/web/css/email-chat.css\",\n\t\"./chat/web/img/chat_header.png\": \"./chat/web/img/chat_header.png\",\n\t\"./chat/web/index.html\": \"./chat/web/index.html\",\n\t\"./chat/web/script\": \"./mods/chat/web/script.js\",\n\t\"./chat/web/script.js\": \"./mods/chat/web/script.js\",\n\t\"./chat/web/style.css\": \"./chat/web/style.css\",\n\t\"./debug/debug\": \"./mods/debug/debug.js\",\n\t\"./debug/debug.js\": \"./mods/debug/debug.js\",\n\t\"./debug/lib/email-appspace/debug-appspace\": \"./mods/debug/lib/email-appspace/debug-appspace.js\",\n\t\"./debug/lib/email-appspace/debug-appspace.js\": \"./mods/debug/lib/email-appspace/debug-appspace.js\",\n\t\"./debug/lib/email-appspace/debug-appspace.template\": \"./mods/debug/lib/email-appspace/debug-appspace.template.js\",\n\t\"./debug/lib/email-appspace/debug-appspace.template.js\": \"./mods/debug/lib/email-appspace/debug-appspace.template.js\",\n\t\"./design/design\": \"./mods/design/design.js\",\n\t\"./design/design.js\": \"./mods/design/design.js\",\n\t\"./design/lib/email-appspace/design-appspace\": \"./mods/design/lib/email-appspace/design-appspace.js\",\n\t\"./design/lib/email-appspace/design-appspace.js\": \"./mods/design/lib/email-appspace/design-appspace.js\",\n\t\"./design/lib/email-appspace/design-appspace.template\": \"./mods/design/lib/email-appspace/design-appspace.template.js\",\n\t\"./design/lib/email-appspace/design-appspace.template.js\": \"./mods/design/lib/email-appspace/design-appspace.template.js\",\n\t\"./design/web/index.html\": \"./design/web/index.html\",\n\t\"./email/email\": \"./mods/email/email.js\",\n\t\"./email/email.js\": \"./mods/email/email.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace.js\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace.template\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.template.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace.template.js\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.template.js\",\n\t\"./email/lib/email-main/email-body/email-body\": \"./mods/email/lib/email-main/email-body/email-body.js\",\n\t\"./email/lib/email-main/email-body/email-body.js\": \"./mods/email/lib/email-main/email-body/email-body.js\",\n\t\"./email/lib/email-main/email-body/email-body.template\": \"./mods/email/lib/email-main/email-body/email-body.template.js\",\n\t\"./email/lib/email-main/email-body/email-body.template.js\": \"./mods/email/lib/email-main/email-body/email-body.template.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail.js\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail.template\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.template.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail.template.js\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.template.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form\": \"./mods/email/lib/email-main/email-body/email-form/email-form.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form.js\": \"./mods/email/lib/email-main/email-body/email-form/email-form.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form.template\": \"./mods/email/lib/email-main/email-body/email-form/email-form.template.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form.template.js\": \"./mods/email/lib/email-main/email-body/email-form/email-form.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list\": \"./mods/email/lib/email-main/email-body/email-list/email-list.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list-row.template\": \"./mods/email/lib/email-main/email-body/email-list/email-list-row.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list-row.template.js\": \"./mods/email/lib/email-main/email-body/email-list/email-list-row.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list.js\": \"./mods/email/lib/email-main/email-body/email-list/email-list.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list.template\": \"./mods/email/lib/email-main/email-body/email-list/email-list.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list.template.js\": \"./mods/email/lib/email-main/email-body/email-list/email-list.template.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header.js\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header.js\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header.template\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header.template.js\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-header\": \"./mods/email/lib/email-main/email-header/email-header.js\",\n\t\"./email/lib/email-main/email-header/email-header.js\": \"./mods/email/lib/email-main/email-header/email-header.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\",\n\t\"./email/lib/email-main/email-main\": \"./mods/email/lib/email-main/email-main.js\",\n\t\"./email/lib/email-main/email-main.js\": \"./mods/email/lib/email-main/email-main.js\",\n\t\"./email/lib/email-main/email-main.template\": \"./mods/email/lib/email-main/email-main.template.js\",\n\t\"./email/lib/email-main/email-main.template.js\": \"./mods/email/lib/email-main/email-main.template.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu\": \"./mods/email/lib/email-sidebar/email-bars-menu.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu.js\": \"./mods/email/lib/email-sidebar/email-bars-menu.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu.template\": \"./mods/email/lib/email-sidebar/email-bars-menu.template.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu.template.js\": \"./mods/email/lib/email-sidebar/email-bars-menu.template.js\",\n\t\"./email/lib/email-sidebar/email-chat\": \"./mods/email/lib/email-sidebar/email-chat.js\",\n\t\"./email/lib/email-sidebar/email-chat.js\": \"./mods/email/lib/email-sidebar/email-chat.js\",\n\t\"./email/lib/email-sidebar/email-chat.template\": \"./mods/email/lib/email-sidebar/email-chat.template.js\",\n\t\"./email/lib/email-sidebar/email-chat.template.js\": \"./mods/email/lib/email-sidebar/email-chat.template.js\",\n\t\"./email/lib/email-sidebar/email-controls\": \"./mods/email/lib/email-sidebar/email-controls.js\",\n\t\"./email/lib/email-sidebar/email-controls.js\": \"./mods/email/lib/email-sidebar/email-controls.js\",\n\t\"./email/lib/email-sidebar/email-controls.template\": \"./mods/email/lib/email-sidebar/email-controls.template.js\",\n\t\"./email/lib/email-sidebar/email-controls.template.js\": \"./mods/email/lib/email-sidebar/email-controls.template.js\",\n\t\"./email/lib/email-sidebar/email-sidebar\": \"./mods/email/lib/email-sidebar/email-sidebar.js\",\n\t\"./email/lib/email-sidebar/email-sidebar.js\": \"./mods/email/lib/email-sidebar/email-sidebar.js\",\n\t\"./email/lib/email-sidebar/email-sidebar.template\": \"./mods/email/lib/email-sidebar/email-sidebar.template.js\",\n\t\"./email/lib/email-sidebar/email-sidebar.template.js\": \"./mods/email/lib/email-sidebar/email-sidebar.template.js\",\n\t\"./email/web/index.html\": \"./email/web/index.html\",\n\t\"./email/web/style.css\": \"./email/web/style.css\",\n\t\"./encrypt/encrypt\": \"./mods/encrypt/encrypt.js\",\n\t\"./encrypt/encrypt.js\": \"./mods/encrypt/encrypt.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace.js\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace.template\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace.template.js\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\",\n\t\"./explorer/explorer\": \"./mods/explorer/explorer.js\",\n\t\"./explorer/explorer.js\": \"./mods/explorer/explorer.js\",\n\t\"./explorer/sql/transactions.sql\": \"./explorer/sql/transactions.sql\",\n\t\"./explorer/web/style.css\": \"./explorer/web/style.css\",\n\t\"./faucet/faucet\": \"./mods/faucet/faucet.js\",\n\t\"./faucet/faucet.js\": \"./mods/faucet/faucet.js\",\n\t\"./hospital/hospital\": \"./mods/hospital/hospital.js\",\n\t\"./hospital/hospital.js\": \"./mods/hospital/hospital.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace\": \"./mods/hospital/lib/email-appspace/hospital-appspace.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace.js\": \"./mods/hospital/lib/email-appspace/hospital-appspace.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace.template\": \"./mods/hospital/lib/email-appspace/hospital-appspace.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace.template.js\": \"./mods/hospital/lib/email-appspace/hospital-appspace.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-history\": \"./mods/hospital/lib/email-appspace/hospital-history.js\",\n\t\"./hospital/lib/email-appspace/hospital-history.js\": \"./mods/hospital/lib/email-appspace/hospital-history.js\",\n\t\"./hospital/lib/email-appspace/hospital-history.template\": \"./mods/hospital/lib/email-appspace/hospital-history.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-history.template.js\": \"./mods/hospital/lib/email-appspace/hospital-history.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile\": \"./mods/hospital/lib/email-appspace/hospital-profile.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile.js\": \"./mods/hospital/lib/email-appspace/hospital-profile.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile.template\": \"./mods/hospital/lib/email-appspace/hospital-profile.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile.template.js\": \"./mods/hospital/lib/email-appspace/hospital-profile.template.js\",\n\t\"./hospital/web/css/email-appspace.css\": \"./hospital/web/css/email-appspace.css\",\n\t\"./hospital/web/img/splash.jpg\": \"./hospital/web/img/splash.jpg\",\n\t\"./poker/BUGS.txt\": \"./poker/BUGS.txt\",\n\t\"./poker/license/LICENSE.txt\": \"./poker/license/LICENSE.txt\",\n\t\"./poker/poker\": \"./mods/poker/poker.js\",\n\t\"./poker/poker.js\": \"./mods/poker/poker.js\",\n\t\"./poker/web/img/cards/C1.png\": \"./poker/web/img/cards/C1.png\",\n\t\"./poker/web/img/cards/C10.png\": \"./poker/web/img/cards/C10.png\",\n\t\"./poker/web/img/cards/C11.png\": \"./poker/web/img/cards/C11.png\",\n\t\"./poker/web/img/cards/C12.png\": \"./poker/web/img/cards/C12.png\",\n\t\"./poker/web/img/cards/C13.png\": \"./poker/web/img/cards/C13.png\",\n\t\"./poker/web/img/cards/C2.png\": \"./poker/web/img/cards/C2.png\",\n\t\"./poker/web/img/cards/C3.png\": \"./poker/web/img/cards/C3.png\",\n\t\"./poker/web/img/cards/C4.png\": \"./poker/web/img/cards/C4.png\",\n\t\"./poker/web/img/cards/C5.png\": \"./poker/web/img/cards/C5.png\",\n\t\"./poker/web/img/cards/C6.png\": \"./poker/web/img/cards/C6.png\",\n\t\"./poker/web/img/cards/C7.png\": \"./poker/web/img/cards/C7.png\",\n\t\"./poker/web/img/cards/C8.png\": \"./poker/web/img/cards/C8.png\",\n\t\"./poker/web/img/cards/C9.png\": \"./poker/web/img/cards/C9.png\",\n\t\"./poker/web/img/cards/D1.png\": \"./poker/web/img/cards/D1.png\",\n\t\"./poker/web/img/cards/D10.png\": \"./poker/web/img/cards/D10.png\",\n\t\"./poker/web/img/cards/D11.png\": \"./poker/web/img/cards/D11.png\",\n\t\"./poker/web/img/cards/D12.png\": \"./poker/web/img/cards/D12.png\",\n\t\"./poker/web/img/cards/D13.png\": \"./poker/web/img/cards/D13.png\",\n\t\"./poker/web/img/cards/D2.png\": \"./poker/web/img/cards/D2.png\",\n\t\"./poker/web/img/cards/D3.png\": \"./poker/web/img/cards/D3.png\",\n\t\"./poker/web/img/cards/D4.png\": \"./poker/web/img/cards/D4.png\",\n\t\"./poker/web/img/cards/D5.png\": \"./poker/web/img/cards/D5.png\",\n\t\"./poker/web/img/cards/D6.png\": \"./poker/web/img/cards/D6.png\",\n\t\"./poker/web/img/cards/D7.png\": \"./poker/web/img/cards/D7.png\",\n\t\"./poker/web/img/cards/D8.png\": \"./poker/web/img/cards/D8.png\",\n\t\"./poker/web/img/cards/D9.png\": \"./poker/web/img/cards/D9.png\",\n\t\"./poker/web/img/cards/H1.png\": \"./poker/web/img/cards/H1.png\",\n\t\"./poker/web/img/cards/H10.png\": \"./poker/web/img/cards/H10.png\",\n\t\"./poker/web/img/cards/H11.png\": \"./poker/web/img/cards/H11.png\",\n\t\"./poker/web/img/cards/H12.png\": \"./poker/web/img/cards/H12.png\",\n\t\"./poker/web/img/cards/H13.png\": \"./poker/web/img/cards/H13.png\",\n\t\"./poker/web/img/cards/H2.png\": \"./poker/web/img/cards/H2.png\",\n\t\"./poker/web/img/cards/H3.png\": \"./poker/web/img/cards/H3.png\",\n\t\"./poker/web/img/cards/H4.png\": \"./poker/web/img/cards/H4.png\",\n\t\"./poker/web/img/cards/H5.png\": \"./poker/web/img/cards/H5.png\",\n\t\"./poker/web/img/cards/H6.png\": \"./poker/web/img/cards/H6.png\",\n\t\"./poker/web/img/cards/H7.png\": \"./poker/web/img/cards/H7.png\",\n\t\"./poker/web/img/cards/H8.png\": \"./poker/web/img/cards/H8.png\",\n\t\"./poker/web/img/cards/H9.png\": \"./poker/web/img/cards/H9.png\",\n\t\"./poker/web/img/cards/README.txt\": \"./poker/web/img/cards/README.txt\",\n\t\"./poker/web/img/cards/S1.png\": \"./poker/web/img/cards/S1.png\",\n\t\"./poker/web/img/cards/S10.png\": \"./poker/web/img/cards/S10.png\",\n\t\"./poker/web/img/cards/S11.png\": \"./poker/web/img/cards/S11.png\",\n\t\"./poker/web/img/cards/S12.png\": \"./poker/web/img/cards/S12.png\",\n\t\"./poker/web/img/cards/S13.png\": \"./poker/web/img/cards/S13.png\",\n\t\"./poker/web/img/cards/S2.png\": \"./poker/web/img/cards/S2.png\",\n\t\"./poker/web/img/cards/S3.png\": \"./poker/web/img/cards/S3.png\",\n\t\"./poker/web/img/cards/S4.png\": \"./poker/web/img/cards/S4.png\",\n\t\"./poker/web/img/cards/S5.png\": \"./poker/web/img/cards/S5.png\",\n\t\"./poker/web/img/cards/S6.png\": \"./poker/web/img/cards/S6.png\",\n\t\"./poker/web/img/cards/S7.png\": \"./poker/web/img/cards/S7.png\",\n\t\"./poker/web/img/cards/S8.png\": \"./poker/web/img/cards/S8.png\",\n\t\"./poker/web/img/cards/S9.png\": \"./poker/web/img/cards/S9.png\",\n\t\"./poker/web/img/cards/aces.png\": \"./poker/web/img/cards/aces.png\",\n\t\"./poker/web/img/cards/back_cards-07.png\": \"./poker/web/img/cards/back_cards-07.png\",\n\t\"./poker/web/img/cards/blue_back.png\": \"./poker/web/img/cards/blue_back.png\",\n\t\"./poker/web/img/cards/gray_back.png\": \"./poker/web/img/cards/gray_back.png\",\n\t\"./poker/web/img/cards/green_back.png\": \"./poker/web/img/cards/green_back.png\",\n\t\"./poker/web/img/cards/honor_clubs.png\": \"./poker/web/img/cards/honor_clubs.png\",\n\t\"./poker/web/img/cards/honor_diamond.png\": \"./poker/web/img/cards/honor_diamond.png\",\n\t\"./poker/web/img/cards/honor_heart-14.png\": \"./poker/web/img/cards/honor_heart-14.png\",\n\t\"./poker/web/img/cards/honors_spade-14.png\": \"./poker/web/img/cards/honors_spade-14.png\",\n\t\"./poker/web/img/cards/purple_back.png\": \"./poker/web/img/cards/purple_back.png\",\n\t\"./poker/web/img/cards/red_back.png\": \"./poker/web/img/cards/red_back.png\",\n\t\"./poker/web/img/cards/yellow_back.png\": \"./poker/web/img/cards/yellow_back.png\",\n\t\"./poker/web/img/gameboard.jpg\": \"./poker/web/img/gameboard.jpg\",\n\t\"./poker/web/img/poker.jpg\": \"./poker/web/img/poker.jpg\",\n\t\"./poker/web/index.html\": \"./poker/web/index.html\",\n\t\"./poker/web/script\": \"./mods/poker/web/script.js\",\n\t\"./poker/web/script.js\": \"./mods/poker/web/script.js\",\n\t\"./poker/web/style.css\": \"./poker/web/style.css\",\n\t\"./pwa-saito\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add.js\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add.template\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.template.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add.template.js\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list-row.template\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list-row.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list-row.template.js\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list-row.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list.js\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list.template\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list.template.js\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-footer.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-footer.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-footer.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-footer.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-header.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-header.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-header.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-header.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-message.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-message.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-message.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-message.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.template.js\",\n\t\"./pwa-saito/chat-ui/chat-ui\": \"./mods/pwa-saito/chat-ui/chat-ui.js\",\n\t\"./pwa-saito/chat-ui/chat-ui.js\": \"./mods/pwa-saito/chat-ui/chat-ui.js\",\n\t\"./pwa-saito/components/footer/navbar\": \"./mods/pwa-saito/components/footer/navbar.js\",\n\t\"./pwa-saito/components/footer/navbar.js\": \"./mods/pwa-saito/components/footer/navbar.js\",\n\t\"./pwa-saito/components/footer/navbar.template\": \"./mods/pwa-saito/components/footer/navbar.template.js\",\n\t\"./pwa-saito/components/footer/navbar.template.js\": \"./mods/pwa-saito/components/footer/navbar.template.js\",\n\t\"./pwa-saito/components/header/home-header\": \"./mods/pwa-saito/components/header/home-header.js\",\n\t\"./pwa-saito/components/header/home-header.js\": \"./mods/pwa-saito/components/header/home-header.js\",\n\t\"./pwa-saito/components/header/home-header.template\": \"./mods/pwa-saito/components/header/home-header.template.js\",\n\t\"./pwa-saito/components/header/home-header.template.js\": \"./mods/pwa-saito/components/header/home-header.template.js\",\n\t\"./pwa-saito/index\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/index.js\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/src/app\": \"./mods/pwa-saito/src/app.js\",\n\t\"./pwa-saito/src/app.js\": \"./mods/pwa-saito/src/app.js\",\n\t\"./qrscanner/lib/scanner\": \"./mods/qrscanner/lib/scanner.js\",\n\t\"./qrscanner/lib/scanner.js\": \"./mods/qrscanner/lib/scanner.js\",\n\t\"./qrscanner/qrscanner\": \"./mods/qrscanner/qrscanner.js\",\n\t\"./qrscanner/qrscanner.js\": \"./mods/qrscanner/qrscanner.js\",\n\t\"./qrscanner/qrscanner.template\": \"./mods/qrscanner/qrscanner.template.js\",\n\t\"./qrscanner/qrscanner.template.js\": \"./mods/qrscanner/qrscanner.template.js\",\n\t\"./qrscanner/web/index.html\": \"./qrscanner/web/index.html\",\n\t\"./registry/lib/email-appspace/registry-appspace\": \"./mods/registry/lib/email-appspace/registry-appspace.js\",\n\t\"./registry/lib/email-appspace/registry-appspace.js\": \"./mods/registry/lib/email-appspace/registry-appspace.js\",\n\t\"./registry/lib/email-appspace/registry-appspace.template\": \"./mods/registry/lib/email-appspace/registry-appspace.template.js\",\n\t\"./registry/lib/email-appspace/registry-appspace.template.js\": \"./mods/registry/lib/email-appspace/registry-appspace.template.js\",\n\t\"./registry/registry\": \"./mods/registry/registry.js\",\n\t\"./registry/registry.js\": \"./mods/registry/registry.js\",\n\t\"./registry/sql/records.sql\": \"./registry/sql/records.sql\",\n\t\"./registry/web/index.html\": \"./registry/web/index.html\",\n\t\"./registry/web/style.css\": \"./registry/web/style.css\",\n\t\"./settings/lib/email-appspace/settings-appspace\": \"./mods/settings/lib/email-appspace/settings-appspace.js\",\n\t\"./settings/lib/email-appspace/settings-appspace.js\": \"./mods/settings/lib/email-appspace/settings-appspace.js\",\n\t\"./settings/lib/email-appspace/settings-appspace.template\": \"./mods/settings/lib/email-appspace/settings-appspace.template.js\",\n\t\"./settings/lib/email-appspace/settings-appspace.template.js\": \"./mods/settings/lib/email-appspace/settings-appspace.template.js\",\n\t\"./settings/settings\": \"./mods/settings/settings.js\",\n\t\"./settings/settings.js\": \"./mods/settings/settings.js\",\n\t\"./settings/web/style.css\": \"./settings/web/style.css\",\n\t\"./wallet/lib/wallet.template\": \"./mods/wallet/lib/wallet.template.js\",\n\t\"./wallet/lib/wallet.template.js\": \"./mods/wallet/lib/wallet.template.js\",\n\t\"./wallet/wallet\": \"./mods/wallet/wallet.js\",\n\t\"./wallet/wallet.js\": \"./mods/wallet/wallet.js\",\n\t\"./wordblocks/web/img/arcade.jpg\": \"./wordblocks/web/img/arcade.jpg\",\n\t\"./wordblocks/web/img/reload.png\": \"./wordblocks/web/img/reload.png\",\n\t\"./wordblocks/web/index.html\": \"./wordblocks/web/index.html\",\n\t\"./wordblocks/web/script\": \"./mods/wordblocks/web/script.js\",\n\t\"./wordblocks/web/script.js\": \"./mods/wordblocks/web/script.js\",\n\t\"./wordblocks/web/style.css\": \"./wordblocks/web/style.css\",\n\t\"./wordblocks/wordblocks\": \"./mods/wordblocks/wordblocks.js\",\n\t\"./wordblocks/wordblocks.js\": \"./mods/wordblocks/wordblocks.js\"\n***REMOVED***;\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n***REMOVED***\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t***REMOVED***\n\treturn map[req];\n***REMOVED***\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n***REMOVED***;\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./mods sync recursive ^\\\\.\\\\/.*$\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzIHN5bmMgcmVjdXJzaXZlIF5cXC5cXC8uKiQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzIHN5bmMgXlxcLlxcLy4qJD9jMDQ0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBtYXAgPSB7XG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2VcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UuanNcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9yZWdpc3RyeVwiOiBcIi4vbW9kcy9hcHBzdG9yZS9yZWdpc3RyeS5qc1wiLFxuXHRcIi4vYXBwc3RvcmUvcmVnaXN0cnkuanNcIjogXCIuL21vZHMvYXBwc3RvcmUvcmVnaXN0cnkuanNcIixcblx0XCIuL2FwcHN0b3JlL3NxbC9tb2R1bGVzLnNxbFwiOiBcIi4vYXBwc3RvcmUvc3FsL21vZHVsZXMuc3FsXCIsXG5cdFwiLi9hcHBzdG9yZS9zcWwvcmV2aWV3cy5zcWxcIjogXCIuL2FwcHN0b3JlL3NxbC9yZXZpZXdzLnNxbFwiLFxuXHRcIi4vYXBwc3RvcmUvd2ViL2luZGV4Lmh0bWxcIjogXCIuL2FwcHN0b3JlL3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9hcHBzdG9yZS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9hcHBzdG9yZS93ZWIvc3R5bGUuY3NzXCIsXG5cdFwiLi9hcmNhZGUvYXJjYWRlXCI6IFwiLi9tb2RzL2FyY2FkZS9hcmNhZGUuanNcIixcblx0XCIuL2FyY2FkZS9hcmNhZGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2FyY2FkZS5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXJcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXIuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLWxlZnQtc2lkZWJhci9hcmNhZGUtbGVmdC1zaWRlYmFyLmpzXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLWxlZnQtc2lkZWJhci9hcmNhZGUtbGVmdC1zaWRlYmFyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1sZWZ0LXNpZGViYXIvYXJjYWRlLWxlZnQtc2lkZWJhci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1sZWZ0LXNpZGViYXIvYXJjYWRlLWxlZnQtc2lkZWJhci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXIudGVtcGxhdGUuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLWdhbWUudGVtcGxhdGVcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1nYW1lLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1nYW1lbGlzdC1yb3cudGVtcGxhdGVcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1nYW1lbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXJcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXIuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXIudGVtcGxhdGVcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1tYWluXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLW1haW4uanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLW1haW4uanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbWFpbi5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbWFpbi50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1tYWluLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1tYWluLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLW1haW4udGVtcGxhdGUuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLXJpZ2h0LXNpZGViYXIvYXJjYWRlLXJpZ2h0LXNpZGViYXJcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtcmlnaHQtc2lkZWJhci9hcmNhZGUtcmlnaHQtc2lkZWJhci5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtcmlnaHQtc2lkZWJhci9hcmNhZGUtcmlnaHQtc2lkZWJhci5qc1wiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1yaWdodC1zaWRlYmFyL2FyY2FkZS1yaWdodC1zaWRlYmFyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1yaWdodC1zaWRlYmFyL2FyY2FkZS1yaWdodC1zaWRlYmFyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLXJpZ2h0LXNpZGViYXIvYXJjYWRlLXJpZ2h0LXNpZGViYXIudGVtcGxhdGUuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLXJpZ2h0LXNpZGViYXIvYXJjYWRlLXJpZ2h0LXNpZGViYXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtcmlnaHQtc2lkZWJhci9hcmNhZGUtcmlnaHQtc2lkZWJhci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vYXJjYWRlL3NxbC9nYW1lcy5zcWxcIjogXCIuL2FyY2FkZS9zcWwvZ2FtZXMuc3FsXCIsXG5cdFwiLi9hcmNhZGUvc3FsL2dhbWVzdGF0ZS5zcWxcIjogXCIuL2FyY2FkZS9zcWwvZ2FtZXN0YXRlLnNxbFwiLFxuXHRcIi4vYXJjYWRlL3dlYi9pbmRleC5odG1sXCI6IFwiLi9hcmNhZGUvd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL2FyY2FkZS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9hcmNhZGUvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vYXJjaGl2ZS9hcmNoaXZlXCI6IFwiLi9tb2RzL2FyY2hpdmUvYXJjaGl2ZS5qc1wiLFxuXHRcIi4vYXJjaGl2ZS9hcmNoaXZlLmpzXCI6IFwiLi9tb2RzL2FyY2hpdmUvYXJjaGl2ZS5qc1wiLFxuXHRcIi4vYXJjaGl2ZS9zcWwvdHhzLnNxbFwiOiBcIi4vYXJjaGl2ZS9zcWwvdHhzLnNxbFwiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvaW5kZXguaHRtbFwiOiBcIi4vYXJjaGl2ZS93ZWIvaW5kZXguaHRtbFwiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvc2NyaXB0XCI6IFwiLi9tb2RzL2FyY2hpdmUvd2ViL3NjcmlwdC5qc1wiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvc2NyaXB0LmpzXCI6IFwiLi9tb2RzL2FyY2hpdmUvd2ViL3NjcmlwdC5qc1wiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9hcmNoaXZlL3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL2NoYXQvY2hhdFwiOiBcIi4vbW9kcy9jaGF0L2NoYXQuanNcIixcblx0XCIuL2NoYXQvY2hhdC5qc1wiOiBcIi4vbW9kcy9jaGF0L2NoYXQuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXRncm91cFwiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0Z3JvdXAuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXRncm91cC5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0Z3JvdXAuanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3hcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC1tZXNzYWdlLWNvbnRhaW5lci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LW1lc3NhZ2UtY29udGFpbmVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LW1lc3NhZ2UtY29udGFpbmVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3guanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdFwiOiBcIi4vbW9kcy9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3QuanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3QuanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGUuanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbWFuYWdlci9jaGF0LW1hbmFnZXJcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LW1hbmFnZXIvY2hhdC1tYW5hZ2VyLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbWFuYWdlci9jaGF0LW1hbmFnZXIuanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LW1hbmFnZXIvY2hhdC1tYW5hZ2VyLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2VtYWlsLWNoYXRcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2VtYWlsLWNoYXQuanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2VtYWlsLWNoYXQudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2VtYWlsLWNoYXQudGVtcGxhdGUuanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtbGlzdC9jaGF0LWxpc3RcIjogXCIuL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCIsXG5cdFwiLi9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tXCI6IFwiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20tZm9vdGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20tZm9vdGVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20taGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20uanNcIixcblx0XCIuL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvc3FsL3JlY29yZHMuc3FsXCI6IFwiLi9jaGF0L3NxbC9yZWNvcmRzLnNxbFwiLFxuXHRcIi4vY2hhdC9zcWwvcm9vbXMuc3FsXCI6IFwiLi9jaGF0L3NxbC9yb29tcy5zcWxcIixcblx0XCIuL2NoYXQvd2ViL2Nzcy9lbWFpbC1jaGF0LmNzc1wiOiBcIi4vY2hhdC93ZWIvY3NzL2VtYWlsLWNoYXQuY3NzXCIsXG5cdFwiLi9jaGF0L3dlYi9pbWcvY2hhdF9oZWFkZXIucG5nXCI6IFwiLi9jaGF0L3dlYi9pbWcvY2hhdF9oZWFkZXIucG5nXCIsXG5cdFwiLi9jaGF0L3dlYi9pbmRleC5odG1sXCI6IFwiLi9jaGF0L3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9jaGF0L3dlYi9zY3JpcHRcIjogXCIuL21vZHMvY2hhdC93ZWIvc2NyaXB0LmpzXCIsXG5cdFwiLi9jaGF0L3dlYi9zY3JpcHQuanNcIjogXCIuL21vZHMvY2hhdC93ZWIvc2NyaXB0LmpzXCIsXG5cdFwiLi9jaGF0L3dlYi9zdHlsZS5jc3NcIjogXCIuL2NoYXQvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vZGVidWcvZGVidWdcIjogXCIuL21vZHMvZGVidWcvZGVidWcuanNcIixcblx0XCIuL2RlYnVnL2RlYnVnLmpzXCI6IFwiLi9tb2RzL2RlYnVnL2RlYnVnLmpzXCIsXG5cdFwiLi9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2VcIjogXCIuL21vZHMvZGVidWcvbGliL2VtYWlsLWFwcHNwYWNlL2RlYnVnLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UuanNcIjogXCIuL21vZHMvZGVidWcvbGliL2VtYWlsLWFwcHNwYWNlL2RlYnVnLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvZGVidWcvbGliL2VtYWlsLWFwcHNwYWNlL2RlYnVnLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZGVidWcvbGliL2VtYWlsLWFwcHNwYWNlL2RlYnVnLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9kZXNpZ24vZGVzaWduXCI6IFwiLi9tb2RzL2Rlc2lnbi9kZXNpZ24uanNcIixcblx0XCIuL2Rlc2lnbi9kZXNpZ24uanNcIjogXCIuL21vZHMvZGVzaWduL2Rlc2lnbi5qc1wiLFxuXHRcIi4vZGVzaWduL2xpYi9lbWFpbC1hcHBzcGFjZS9kZXNpZ24tYXBwc3BhY2VcIjogXCIuL21vZHMvZGVzaWduL2xpYi9lbWFpbC1hcHBzcGFjZS9kZXNpZ24tYXBwc3BhY2UuanNcIixcblx0XCIuL2Rlc2lnbi9saWIvZW1haWwtYXBwc3BhY2UvZGVzaWduLWFwcHNwYWNlLmpzXCI6IFwiLi9tb2RzL2Rlc2lnbi9saWIvZW1haWwtYXBwc3BhY2UvZGVzaWduLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9kZXNpZ24vbGliL2VtYWlsLWFwcHNwYWNlL2Rlc2lnbi1hcHBzcGFjZS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9kZXNpZ24vbGliL2VtYWlsLWFwcHNwYWNlL2Rlc2lnbi1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZGVzaWduL2xpYi9lbWFpbC1hcHBzcGFjZS9kZXNpZ24tYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZGVzaWduL2xpYi9lbWFpbC1hcHBzcGFjZS9kZXNpZ24tYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2Rlc2lnbi93ZWIvaW5kZXguaHRtbFwiOiBcIi4vZGVzaWduL3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9lbWFpbC9lbWFpbFwiOiBcIi4vbW9kcy9lbWFpbC9lbWFpbC5qc1wiLFxuXHRcIi4vZW1haWwvZW1haWwuanNcIjogXCIuL21vZHMvZW1haWwvZW1haWwuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYXBwc3BhY2UvZW1haWwtYXBwc3BhY2VcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1hcHBzcGFjZS9lbWFpbC1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1hcHBzcGFjZS9lbWFpbC1hcHBzcGFjZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWFwcHNwYWNlL2VtYWlsLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWFwcHNwYWNlL2VtYWlsLWFwcHNwYWNlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYXBwc3BhY2UvZW1haWwtYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYXBwc3BhY2UvZW1haWwtYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1hcHBzcGFjZS9lbWFpbC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5XCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYm9keS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYm9keS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYm9keS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYm9keS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZGV0YWlsL2VtYWlsLWRldGFpbC5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZGV0YWlsL2VtYWlsLWRldGFpbC5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZGV0YWlsL2VtYWlsLWRldGFpbC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZGV0YWlsL2VtYWlsLWRldGFpbC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1mb3JtL2VtYWlsLWZvcm1cIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1mb3JtL2VtYWlsLWZvcm0uanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZm9ybS9lbWFpbC1mb3JtLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZm9ybS9lbWFpbC1mb3JtLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWZvcm0vZW1haWwtZm9ybS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWZvcm0vZW1haWwtZm9ybS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1mb3JtL2VtYWlsLWZvcm0udGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1mb3JtL2VtYWlsLWZvcm0udGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0XCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC1yb3cudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3QudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3QudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlclwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlclwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXJcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyL2VtYWlsLWZvcm0taGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaGVhZGVyXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1oZWFkZXIuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWhlYWRlci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXJcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLW1haW5cIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtbWFpbi5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtbWFpbi5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1tYWluLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1tYWluLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLW1haW4udGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLW1haW4udGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtbWFpbi50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51XCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWJhcnMtbWVudS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWJhcnMtbWVudS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWJhcnMtbWVudS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWJhcnMtbWVudS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY2hhdFwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jaGF0LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jaGF0LmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNoYXQuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNoYXQudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY2hhdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY2hhdC50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jaGF0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jb250cm9sc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jb250cm9scy5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY29udHJvbHMuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY29udHJvbHMuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNvbnRyb2xzLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNvbnRyb2xzLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jb250cm9scy50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jb250cm9scy50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtc2lkZWJhclwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1zaWRlYmFyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1zaWRlYmFyLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLXNpZGViYXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLXNpZGViYXIudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtc2lkZWJhci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtc2lkZWJhci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1zaWRlYmFyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC93ZWIvaW5kZXguaHRtbFwiOiBcIi4vZW1haWwvd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL2VtYWlsL3dlYi9zdHlsZS5jc3NcIjogXCIuL2VtYWlsL3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL2VuY3J5cHQvZW5jcnlwdFwiOiBcIi4vbW9kcy9lbmNyeXB0L2VuY3J5cHQuanNcIixcblx0XCIuL2VuY3J5cHQvZW5jcnlwdC5qc1wiOiBcIi4vbW9kcy9lbmNyeXB0L2VuY3J5cHQuanNcIixcblx0XCIuL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2VcIjogXCIuL21vZHMvZW5jcnlwdC9saWIvZW1haWwtYXBwc3BhY2UvZW5jcnlwdC1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vZW5jcnlwdC9saWIvZW1haWwtYXBwc3BhY2UvZW5jcnlwdC1hcHBzcGFjZS5qc1wiOiBcIi4vbW9kcy9lbmNyeXB0L2xpYi9lbWFpbC1hcHBzcGFjZS9lbmNyeXB0LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9lbmNyeXB0L2xpYi9lbWFpbC1hcHBzcGFjZS9lbmNyeXB0LWFwcHNwYWNlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW5jcnlwdC9saWIvZW1haWwtYXBwc3BhY2UvZW5jcnlwdC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZXhwbG9yZXIvZXhwbG9yZXJcIjogXCIuL21vZHMvZXhwbG9yZXIvZXhwbG9yZXIuanNcIixcblx0XCIuL2V4cGxvcmVyL2V4cGxvcmVyLmpzXCI6IFwiLi9tb2RzL2V4cGxvcmVyL2V4cGxvcmVyLmpzXCIsXG5cdFwiLi9leHBsb3Jlci9zcWwvdHJhbnNhY3Rpb25zLnNxbFwiOiBcIi4vZXhwbG9yZXIvc3FsL3RyYW5zYWN0aW9ucy5zcWxcIixcblx0XCIuL2V4cGxvcmVyL3dlYi9zdHlsZS5jc3NcIjogXCIuL2V4cGxvcmVyL3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL2ZhdWNldC9mYXVjZXRcIjogXCIuL21vZHMvZmF1Y2V0L2ZhdWNldC5qc1wiLFxuXHRcIi4vZmF1Y2V0L2ZhdWNldC5qc1wiOiBcIi4vbW9kcy9mYXVjZXQvZmF1Y2V0LmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9ob3NwaXRhbFwiOiBcIi4vbW9kcy9ob3NwaXRhbC9ob3NwaXRhbC5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvaG9zcGl0YWwuanNcIjogXCIuL21vZHMvaG9zcGl0YWwvaG9zcGl0YWwuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZVwiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtYXBwc3BhY2UuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS5qc1wiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtYXBwc3BhY2UuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1oaXN0b3J5XCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1oaXN0b3J5LmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtaGlzdG9yeS5qc1wiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtaGlzdG9yeS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWhpc3RvcnkudGVtcGxhdGVcIjogXCIuL21vZHMvaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWhpc3RvcnkudGVtcGxhdGUuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1oaXN0b3J5LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1oaXN0b3J5LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtcHJvZmlsZVwiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtcHJvZmlsZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLXByb2ZpbGUuanNcIjogXCIuL21vZHMvaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLXByb2ZpbGUuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1wcm9maWxlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1wcm9maWxlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtcHJvZmlsZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtcHJvZmlsZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvd2ViL2Nzcy9lbWFpbC1hcHBzcGFjZS5jc3NcIjogXCIuL2hvc3BpdGFsL3dlYi9jc3MvZW1haWwtYXBwc3BhY2UuY3NzXCIsXG5cdFwiLi9ob3NwaXRhbC93ZWIvaW1nL3NwbGFzaC5qcGdcIjogXCIuL2hvc3BpdGFsL3dlYi9pbWcvc3BsYXNoLmpwZ1wiLFxuXHRcIi4vcG9rZXIvQlVHUy50eHRcIjogXCIuL3Bva2VyL0JVR1MudHh0XCIsXG5cdFwiLi9wb2tlci9saWNlbnNlL0xJQ0VOU0UudHh0XCI6IFwiLi9wb2tlci9saWNlbnNlL0xJQ0VOU0UudHh0XCIsXG5cdFwiLi9wb2tlci9wb2tlclwiOiBcIi4vbW9kcy9wb2tlci9wb2tlci5qc1wiLFxuXHRcIi4vcG9rZXIvcG9rZXIuanNcIjogXCIuL21vZHMvcG9rZXIvcG9rZXIuanNcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzEucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMTAucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxMC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzExLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMTEucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxMi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzEyLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMTMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxMy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzIucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MyLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M0LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DNC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzUucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M1LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DNi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzYucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M3LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DNy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzgucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M4LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DOS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzkucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDEwLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMTAucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxMS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDExLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMTIucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxMi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDEzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMTMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QyLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ENC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDQucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q1LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ENS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDYucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q2LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ENy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDcucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q4LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EOC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDkucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q5LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDEucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gxMC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDEwLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMTEucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gxMS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDEyLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMTIucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gxMy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDEzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDIucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDQucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g0LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9INS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDUucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g2LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9INi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDcucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g3LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IOC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDgucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g5LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IOS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUkVBRE1FLnR4dFwiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9SRUFETUUudHh0XCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzEwLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMTAucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxMS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzExLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMTIucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxMi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzEzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMTMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MyLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TNC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzQucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M1LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TNS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzYucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M2LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TNy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzcucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M4LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TOC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzkucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M5LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9hY2VzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9hY2VzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9iYWNrX2NhcmRzLTA3LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9iYWNrX2NhcmRzLTA3LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ibHVlX2JhY2sucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2JsdWVfYmFjay5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvZ3JheV9iYWNrLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ncmF5X2JhY2sucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2dyZWVuX2JhY2sucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2dyZWVuX2JhY2sucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2hvbm9yX2NsdWJzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ob25vcl9jbHVicy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvaG9ub3JfZGlhbW9uZC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvaG9ub3JfZGlhbW9uZC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvaG9ub3JfaGVhcnQtMTQucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2hvbm9yX2hlYXJ0LTE0LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ob25vcnNfc3BhZGUtMTQucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2hvbm9yc19zcGFkZS0xNC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvcHVycGxlX2JhY2sucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL3B1cnBsZV9iYWNrLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9yZWRfYmFjay5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvcmVkX2JhY2sucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL3llbGxvd19iYWNrLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy95ZWxsb3dfYmFjay5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvZ2FtZWJvYXJkLmpwZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9nYW1lYm9hcmQuanBnXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL3Bva2VyLmpwZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9wb2tlci5qcGdcIixcblx0XCIuL3Bva2VyL3dlYi9pbmRleC5odG1sXCI6IFwiLi9wb2tlci93ZWIvaW5kZXguaHRtbFwiLFxuXHRcIi4vcG9rZXIvd2ViL3NjcmlwdFwiOiBcIi4vbW9kcy9wb2tlci93ZWIvc2NyaXB0LmpzXCIsXG5cdFwiLi9wb2tlci93ZWIvc2NyaXB0LmpzXCI6IFwiLi9tb2RzL3Bva2VyL3dlYi9zY3JpcHQuanNcIixcblx0XCIuL3Bva2VyL3dlYi9zdHlsZS5jc3NcIjogXCIuL3Bva2VyL3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL3B3YS1zYWl0b1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vaW5kZXguanNcIixcblx0XCIuL3B3YS1zYWl0by9cIjogXCIuL21vZHMvcHdhLXNhaXRvL2luZGV4LmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWFkZC9jaGF0LWFkZFwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWFkZC9jaGF0LWFkZC5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1hZGQvY2hhdC1hZGQuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1hZGQvY2hhdC1hZGQuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtYWRkL2NoYXQtYWRkLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtYWRkL2NoYXQtYWRkLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWFkZC9jaGF0LWFkZC50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWFkZC9jaGF0LWFkZC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdFwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3QuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdC5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb21cIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGVcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20tZm9vdGVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20tZm9vdGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20uanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtdWlcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC11aS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC11aS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXVpLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY29tcG9uZW50cy9mb290ZXIvbmF2YmFyXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2Zvb3Rlci9uYXZiYXIuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2Zvb3Rlci9uYXZiYXIuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NvbXBvbmVudHMvZm9vdGVyL25hdmJhci5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NvbXBvbmVudHMvZm9vdGVyL25hdmJhci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY29tcG9uZW50cy9mb290ZXIvbmF2YmFyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY29tcG9uZW50cy9mb290ZXIvbmF2YmFyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2Zvb3Rlci9uYXZiYXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlclwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY29tcG9uZW50cy9oZWFkZXIvaG9tZS1oZWFkZXIuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY29tcG9uZW50cy9oZWFkZXIvaG9tZS1oZWFkZXIuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY29tcG9uZW50cy9oZWFkZXIvaG9tZS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY29tcG9uZW50cy9oZWFkZXIvaG9tZS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9pbmRleFwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vaW5kZXguanNcIixcblx0XCIuL3B3YS1zYWl0by9pbmRleC5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vaW5kZXguanNcIixcblx0XCIuL3B3YS1zYWl0by9zcmMvYXBwXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9zcmMvYXBwLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vc3JjL2FwcC5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vc3JjL2FwcC5qc1wiLFxuXHRcIi4vcXJzY2FubmVyL2xpYi9zY2FubmVyXCI6IFwiLi9tb2RzL3Fyc2Nhbm5lci9saWIvc2Nhbm5lci5qc1wiLFxuXHRcIi4vcXJzY2FubmVyL2xpYi9zY2FubmVyLmpzXCI6IFwiLi9tb2RzL3Fyc2Nhbm5lci9saWIvc2Nhbm5lci5qc1wiLFxuXHRcIi4vcXJzY2FubmVyL3Fyc2Nhbm5lclwiOiBcIi4vbW9kcy9xcnNjYW5uZXIvcXJzY2FubmVyLmpzXCIsXG5cdFwiLi9xcnNjYW5uZXIvcXJzY2FubmVyLmpzXCI6IFwiLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanNcIixcblx0XCIuL3Fyc2Nhbm5lci9xcnNjYW5uZXIudGVtcGxhdGVcIjogXCIuL21vZHMvcXJzY2FubmVyL3Fyc2Nhbm5lci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcXJzY2FubmVyL3Fyc2Nhbm5lci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9xcnNjYW5uZXIvcXJzY2FubmVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9xcnNjYW5uZXIvd2ViL2luZGV4Lmh0bWxcIjogXCIuL3Fyc2Nhbm5lci93ZWIvaW5kZXguaHRtbFwiLFxuXHRcIi4vcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlXCI6IFwiLi9tb2RzL3JlZ2lzdHJ5L2xpYi9lbWFpbC1hcHBzcGFjZS9yZWdpc3RyeS1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCI6IFwiLi9tb2RzL3JlZ2lzdHJ5L2xpYi9lbWFpbC1hcHBzcGFjZS9yZWdpc3RyeS1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3JlZ2lzdHJ5L2xpYi9lbWFpbC1hcHBzcGFjZS9yZWdpc3RyeS1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3JlZ2lzdHJ5L2xpYi9lbWFpbC1hcHBzcGFjZS9yZWdpc3RyeS1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcmVnaXN0cnkvcmVnaXN0cnlcIjogXCIuL21vZHMvcmVnaXN0cnkvcmVnaXN0cnkuanNcIixcblx0XCIuL3JlZ2lzdHJ5L3JlZ2lzdHJ5LmpzXCI6IFwiLi9tb2RzL3JlZ2lzdHJ5L3JlZ2lzdHJ5LmpzXCIsXG5cdFwiLi9yZWdpc3RyeS9zcWwvcmVjb3Jkcy5zcWxcIjogXCIuL3JlZ2lzdHJ5L3NxbC9yZWNvcmRzLnNxbFwiLFxuXHRcIi4vcmVnaXN0cnkvd2ViL2luZGV4Lmh0bWxcIjogXCIuL3JlZ2lzdHJ5L3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9yZWdpc3RyeS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9yZWdpc3RyeS93ZWIvc3R5bGUuY3NzXCIsXG5cdFwiLi9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2VcIjogXCIuL21vZHMvc2V0dGluZ3MvbGliL2VtYWlsLWFwcHNwYWNlL3NldHRpbmdzLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UuanNcIjogXCIuL21vZHMvc2V0dGluZ3MvbGliL2VtYWlsLWFwcHNwYWNlL3NldHRpbmdzLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvc2V0dGluZ3MvbGliL2VtYWlsLWFwcHNwYWNlL3NldHRpbmdzLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvc2V0dGluZ3MvbGliL2VtYWlsLWFwcHNwYWNlL3NldHRpbmdzLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9zZXR0aW5ncy9zZXR0aW5nc1wiOiBcIi4vbW9kcy9zZXR0aW5ncy9zZXR0aW5ncy5qc1wiLFxuXHRcIi4vc2V0dGluZ3Mvc2V0dGluZ3MuanNcIjogXCIuL21vZHMvc2V0dGluZ3Mvc2V0dGluZ3MuanNcIixcblx0XCIuL3NldHRpbmdzL3dlYi9zdHlsZS5jc3NcIjogXCIuL3NldHRpbmdzL3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL3dhbGxldC9saWIvd2FsbGV0LnRlbXBsYXRlXCI6IFwiLi9tb2RzL3dhbGxldC9saWIvd2FsbGV0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi93YWxsZXQvbGliL3dhbGxldC50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy93YWxsZXQvbGliL3dhbGxldC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vd2FsbGV0L3dhbGxldFwiOiBcIi4vbW9kcy93YWxsZXQvd2FsbGV0LmpzXCIsXG5cdFwiLi93YWxsZXQvd2FsbGV0LmpzXCI6IFwiLi9tb2RzL3dhbGxldC93YWxsZXQuanNcIixcblx0XCIuL3dvcmRibG9ja3Mvd2ViL2ltZy9hcmNhZGUuanBnXCI6IFwiLi93b3JkYmxvY2tzL3dlYi9pbWcvYXJjYWRlLmpwZ1wiLFxuXHRcIi4vd29yZGJsb2Nrcy93ZWIvaW1nL3JlbG9hZC5wbmdcIjogXCIuL3dvcmRibG9ja3Mvd2ViL2ltZy9yZWxvYWQucG5nXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dlYi9pbmRleC5odG1sXCI6IFwiLi93b3JkYmxvY2tzL3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dlYi9zY3JpcHRcIjogXCIuL21vZHMvd29yZGJsb2Nrcy93ZWIvc2NyaXB0LmpzXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dlYi9zY3JpcHQuanNcIjogXCIuL21vZHMvd29yZGJsb2Nrcy93ZWIvc2NyaXB0LmpzXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dlYi9zdHlsZS5jc3NcIjogXCIuL3dvcmRibG9ja3Mvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vd29yZGJsb2Nrcy93b3JkYmxvY2tzXCI6IFwiLi9tb2RzL3dvcmRibG9ja3Mvd29yZGJsb2Nrcy5qc1wiLFxuXHRcIi4vd29yZGJsb2Nrcy93b3JkYmxvY2tzLmpzXCI6IFwiLi9tb2RzL3dvcmRibG9ja3Mvd29yZGJsb2Nrcy5qc1wiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCIuL21vZHMgc3luYyByZWN1cnNpdmUgXlxcXFwuXFxcXC8uKiRcIjsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods sync recursive ^\\.\\/.*$\n");
---
> eval("var map = {\n\t\"./appstore/lib/email-appspace/registry-appspace\": \"./mods/appstore/lib/email-appspace/registry-appspace.js\",\n\t\"./appstore/lib/email-appspace/registry-appspace.js\": \"./mods/appstore/lib/email-appspace/registry-appspace.js\",\n\t\"./appstore/lib/email-appspace/registry-appspace.template\": \"./mods/appstore/lib/email-appspace/registry-appspace.template.js\",\n\t\"./appstore/lib/email-appspace/registry-appspace.template.js\": \"./mods/appstore/lib/email-appspace/registry-appspace.template.js\",\n\t\"./appstore/registry\": \"./mods/appstore/registry.js\",\n\t\"./appstore/registry.js\": \"./mods/appstore/registry.js\",\n\t\"./appstore/sql/modules.sql\": \"./appstore/sql/modules.sql\",\n\t\"./appstore/sql/reviews.sql\": \"./appstore/sql/reviews.sql\",\n\t\"./appstore/web/index.html\": \"./appstore/web/index.html\",\n\t\"./appstore/web/style.css\": \"./appstore/web/style.css\",\n\t\"./arcade/arcade\": \"./mods/arcade/arcade.js\",\n\t\"./arcade/arcade.js\": \"./mods/arcade/arcade.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar.js\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template.js\",\n\t\"./arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template.js\": \"./mods/arcade/lib/arcade-left-sidebar/arcade-left-sidebar.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-game.template\": \"./mods/arcade/lib/arcade-main/arcade-game.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-game.template.js\": \"./mods/arcade/lib/arcade-main/arcade-game.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-gamelist-row.template\": \"./mods/arcade/lib/arcade-main/arcade-gamelist-row.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-gamelist-row.template.js\": \"./mods/arcade/lib/arcade-main/arcade-gamelist-row.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader\": \"./mods/arcade/lib/arcade-main/arcade-loader.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader.js\": \"./mods/arcade/lib/arcade-main/arcade-loader.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader.template\": \"./mods/arcade/lib/arcade-main/arcade-loader.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-loader.template.js\": \"./mods/arcade/lib/arcade-main/arcade-loader.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-main\": \"./mods/arcade/lib/arcade-main/arcade-main.js\",\n\t\"./arcade/lib/arcade-main/arcade-main.js\": \"./mods/arcade/lib/arcade-main/arcade-main.js\",\n\t\"./arcade/lib/arcade-main/arcade-main.template\": \"./mods/arcade/lib/arcade-main/arcade-main.template.js\",\n\t\"./arcade/lib/arcade-main/arcade-main.template.js\": \"./mods/arcade/lib/arcade-main/arcade-main.template.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar.js\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template.js\",\n\t\"./arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template.js\": \"./mods/arcade/lib/arcade-right-sidebar/arcade-right-sidebar.template.js\",\n\t\"./arcade/sql/games.sql\": \"./arcade/sql/games.sql\",\n\t\"./arcade/sql/gamestate.sql\": \"./arcade/sql/gamestate.sql\",\n\t\"./arcade/web/index.html\": \"./arcade/web/index.html\",\n\t\"./arcade/web/style.css\": \"./arcade/web/style.css\",\n\t\"./archive/archive\": \"./mods/archive/archive.js\",\n\t\"./archive/archive.js\": \"./mods/archive/archive.js\",\n\t\"./archive/sql/txs.sql\": \"./archive/sql/txs.sql\",\n\t\"./archive/web/index.html\": \"./archive/web/index.html\",\n\t\"./archive/web/script\": \"./mods/archive/web/script.js\",\n\t\"./archive/web/script.js\": \"./mods/archive/web/script.js\",\n\t\"./archive/web/style.css\": \"./archive/web/style.css\",\n\t\"./chat/chat\": \"./mods/chat/chat.js\",\n\t\"./chat/chat.js\": \"./mods/chat/chat.js\",\n\t\"./chat/lib/chat-main/chat-list/chat-list\": \"./mods/chat/lib/chat-main/chat-list/chat-list.js\",\n\t\"./chat/lib/chat-main/chat-list/chat-list-row.template\": \"./mods/chat/lib/chat-main/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/chat-main/chat-list/chat-list-row.template.js\": \"./mods/chat/lib/chat-main/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/chat-main/chat-list/chat-list.js\": \"./mods/chat/lib/chat-main/chat-list/chat-list.js\",\n\t\"./chat/lib/chat-main/chat-list/chat-list.template\": \"./mods/chat/lib/chat-main/chat-list/chat-list.template.js\",\n\t\"./chat/lib/chat-main/chat-list/chat-list.template.js\": \"./mods/chat/lib/chat-main/chat-list/chat-list.template.js\",\n\t\"./chat/lib/chat-main/chat-main\": \"./mods/chat/lib/chat-main/chat-main.js\",\n\t\"./chat/lib/chat-main/chat-main.js\": \"./mods/chat/lib/chat-main/chat-main.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-message-container.template\": \"./mods/chat/lib/chat-main/chat-room/chat-message-container.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-message-container.template.js\": \"./mods/chat/lib/chat-main/chat-room/chat-message-container.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room\": \"./mods/chat/lib/chat-main/chat-room/chat-room.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room-footer.template\": \"./mods/chat/lib/chat-main/chat-room/chat-room-footer.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room-footer.template.js\": \"./mods/chat/lib/chat-main/chat-room/chat-room-footer.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room-header.template\": \"./mods/chat/lib/chat-main/chat-room/chat-room-header.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room-header.template.js\": \"./mods/chat/lib/chat-main/chat-room/chat-room-header.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room-message.template\": \"./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room-message.template.js\": \"./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room.js\": \"./mods/chat/lib/chat-main/chat-room/chat-room.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room.template\": \"./mods/chat/lib/chat-main/chat-room/chat-room.template.js\",\n\t\"./chat/lib/chat-main/chat-room/chat-room.template.js\": \"./mods/chat/lib/chat-main/chat-room/chat-room.template.js\",\n\t\"./chat/lib/chatgroup\": \"./mods/chat/lib/chatgroup.js\",\n\t\"./chat/lib/chatgroup.js\": \"./mods/chat/lib/chatgroup.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box\": \"./mods/chat/lib/email-chat/chat-box/chat-box.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box-message-container.template\": \"./mods/chat/lib/email-chat/chat-box/chat-box-message-container.template.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box-message-container.template.js\": \"./mods/chat/lib/email-chat/chat-box/chat-box-message-container.template.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box.js\": \"./mods/chat/lib/email-chat/chat-box/chat-box.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box.template\": \"./mods/chat/lib/email-chat/chat-box/chat-box.template.js\",\n\t\"./chat/lib/email-chat/chat-box/chat-box.template.js\": \"./mods/chat/lib/email-chat/chat-box/chat-box.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list\": \"./mods/chat/lib/email-chat/chat-list/chat-list.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list-row.template\": \"./mods/chat/lib/email-chat/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list-row.template.js\": \"./mods/chat/lib/email-chat/chat-list/chat-list-row.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list.js\": \"./mods/chat/lib/email-chat/chat-list/chat-list.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list.template\": \"./mods/chat/lib/email-chat/chat-list/chat-list.template.js\",\n\t\"./chat/lib/email-chat/chat-list/chat-list.template.js\": \"./mods/chat/lib/email-chat/chat-list/chat-list.template.js\",\n\t\"./chat/lib/email-chat/chat-manager/chat-manager\": \"./mods/chat/lib/email-chat/chat-manager/chat-manager.js\",\n\t\"./chat/lib/email-chat/chat-manager/chat-manager.js\": \"./mods/chat/lib/email-chat/chat-manager/chat-manager.js\",\n\t\"./chat/lib/email-chat/email-chat\": \"./mods/chat/lib/email-chat/email-chat.js\",\n\t\"./chat/lib/email-chat/email-chat.js\": \"./mods/chat/lib/email-chat/email-chat.js\",\n\t\"./chat/lib/email-chat/email-chat.template\": \"./mods/chat/lib/email-chat/email-chat.template.js\",\n\t\"./chat/lib/email-chat/email-chat.template.js\": \"./mods/chat/lib/email-chat/email-chat.template.js\",\n\t\"./chat/sql/records.sql\": \"./chat/sql/records.sql\",\n\t\"./chat/sql/rooms.sql\": \"./chat/sql/rooms.sql\",\n\t\"./chat/web/css/email-chat.css\": \"./chat/web/css/email-chat.css\",\n\t\"./chat/web/img/chat_header.png\": \"./chat/web/img/chat_header.png\",\n\t\"./chat/web/index.html\": \"./chat/web/index.html\",\n\t\"./chat/web/script\": \"./mods/chat/web/script.js\",\n\t\"./chat/web/script.js\": \"./mods/chat/web/script.js\",\n\t\"./chat/web/style.css\": \"./chat/web/style.css\",\n\t\"./debug/debug\": \"./mods/debug/debug.js\",\n\t\"./debug/debug.js\": \"./mods/debug/debug.js\",\n\t\"./debug/lib/email-appspace/debug-appspace\": \"./mods/debug/lib/email-appspace/debug-appspace.js\",\n\t\"./debug/lib/email-appspace/debug-appspace.js\": \"./mods/debug/lib/email-appspace/debug-appspace.js\",\n\t\"./debug/lib/email-appspace/debug-appspace.template\": \"./mods/debug/lib/email-appspace/debug-appspace.template.js\",\n\t\"./debug/lib/email-appspace/debug-appspace.template.js\": \"./mods/debug/lib/email-appspace/debug-appspace.template.js\",\n\t\"./design/design\": \"./mods/design/design.js\",\n\t\"./design/design.js\": \"./mods/design/design.js\",\n\t\"./design/lib/email-appspace/design-appspace\": \"./mods/design/lib/email-appspace/design-appspace.js\",\n\t\"./design/lib/email-appspace/design-appspace.js\": \"./mods/design/lib/email-appspace/design-appspace.js\",\n\t\"./design/lib/email-appspace/design-appspace.template\": \"./mods/design/lib/email-appspace/design-appspace.template.js\",\n\t\"./design/lib/email-appspace/design-appspace.template.js\": \"./mods/design/lib/email-appspace/design-appspace.template.js\",\n\t\"./design/web/index.html\": \"./design/web/index.html\",\n\t\"./email/email\": \"./mods/email/email.js\",\n\t\"./email/email.js\": \"./mods/email/email.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace.js\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace.template\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.template.js\",\n\t\"./email/lib/email-main/email-body/email-appspace/email-appspace.template.js\": \"./mods/email/lib/email-main/email-body/email-appspace/email-appspace.template.js\",\n\t\"./email/lib/email-main/email-body/email-body\": \"./mods/email/lib/email-main/email-body/email-body.js\",\n\t\"./email/lib/email-main/email-body/email-body.js\": \"./mods/email/lib/email-main/email-body/email-body.js\",\n\t\"./email/lib/email-main/email-body/email-body.template\": \"./mods/email/lib/email-main/email-body/email-body.template.js\",\n\t\"./email/lib/email-main/email-body/email-body.template.js\": \"./mods/email/lib/email-main/email-body/email-body.template.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail.js\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail.template\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.template.js\",\n\t\"./email/lib/email-main/email-body/email-detail/email-detail.template.js\": \"./mods/email/lib/email-main/email-body/email-detail/email-detail.template.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form\": \"./mods/email/lib/email-main/email-body/email-form/email-form.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form.js\": \"./mods/email/lib/email-main/email-body/email-form/email-form.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form.template\": \"./mods/email/lib/email-main/email-body/email-form/email-form.template.js\",\n\t\"./email/lib/email-main/email-body/email-form/email-form.template.js\": \"./mods/email/lib/email-main/email-body/email-form/email-form.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list\": \"./mods/email/lib/email-main/email-body/email-list/email-list.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list-row.template\": \"./mods/email/lib/email-main/email-body/email-list/email-list-row.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list-row.template.js\": \"./mods/email/lib/email-main/email-body/email-list/email-list-row.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list.js\": \"./mods/email/lib/email-main/email-body/email-list/email-list.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list.template\": \"./mods/email/lib/email-main/email-body/email-list/email-list.template.js\",\n\t\"./email/lib/email-main/email-body/email-list/email-list.template.js\": \"./mods/email/lib/email-main/email-body/email-list/email-list.template.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js\": \"./mods/email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header.js\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\": \"./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header.js\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header.template\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-form-header/email-form-header.template.js\": \"./mods/email/lib/email-main/email-header/email-form-header/email-form-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-header\": \"./mods/email/lib/email-main/email-header/email-header.js\",\n\t\"./email/lib/email-main/email-header/email-header.js\": \"./mods/email/lib/email-main/email-header/email-header.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\",\n\t\"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\": \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\",\n\t\"./email/lib/email-main/email-main\": \"./mods/email/lib/email-main/email-main.js\",\n\t\"./email/lib/email-main/email-main.js\": \"./mods/email/lib/email-main/email-main.js\",\n\t\"./email/lib/email-main/email-main.template\": \"./mods/email/lib/email-main/email-main.template.js\",\n\t\"./email/lib/email-main/email-main.template.js\": \"./mods/email/lib/email-main/email-main.template.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu\": \"./mods/email/lib/email-sidebar/email-bars-menu.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu.js\": \"./mods/email/lib/email-sidebar/email-bars-menu.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu.template\": \"./mods/email/lib/email-sidebar/email-bars-menu.template.js\",\n\t\"./email/lib/email-sidebar/email-bars-menu.template.js\": \"./mods/email/lib/email-sidebar/email-bars-menu.template.js\",\n\t\"./email/lib/email-sidebar/email-chat\": \"./mods/email/lib/email-sidebar/email-chat.js\",\n\t\"./email/lib/email-sidebar/email-chat.js\": \"./mods/email/lib/email-sidebar/email-chat.js\",\n\t\"./email/lib/email-sidebar/email-chat.template\": \"./mods/email/lib/email-sidebar/email-chat.template.js\",\n\t\"./email/lib/email-sidebar/email-chat.template.js\": \"./mods/email/lib/email-sidebar/email-chat.template.js\",\n\t\"./email/lib/email-sidebar/email-controls\": \"./mods/email/lib/email-sidebar/email-controls.js\",\n\t\"./email/lib/email-sidebar/email-controls.js\": \"./mods/email/lib/email-sidebar/email-controls.js\",\n\t\"./email/lib/email-sidebar/email-controls.template\": \"./mods/email/lib/email-sidebar/email-controls.template.js\",\n\t\"./email/lib/email-sidebar/email-controls.template.js\": \"./mods/email/lib/email-sidebar/email-controls.template.js\",\n\t\"./email/lib/email-sidebar/email-sidebar\": \"./mods/email/lib/email-sidebar/email-sidebar.js\",\n\t\"./email/lib/email-sidebar/email-sidebar.js\": \"./mods/email/lib/email-sidebar/email-sidebar.js\",\n\t\"./email/lib/email-sidebar/email-sidebar.template\": \"./mods/email/lib/email-sidebar/email-sidebar.template.js\",\n\t\"./email/lib/email-sidebar/email-sidebar.template.js\": \"./mods/email/lib/email-sidebar/email-sidebar.template.js\",\n\t\"./email/web/index.html\": \"./email/web/index.html\",\n\t\"./email/web/style.css\": \"./email/web/style.css\",\n\t\"./encrypt/encrypt\": \"./mods/encrypt/encrypt.js\",\n\t\"./encrypt/encrypt.js\": \"./mods/encrypt/encrypt.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace.js\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace.template\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\",\n\t\"./encrypt/lib/email-appspace/encrypt-appspace.template.js\": \"./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\",\n\t\"./explorer/explorer\": \"./mods/explorer/explorer.js\",\n\t\"./explorer/explorer.js\": \"./mods/explorer/explorer.js\",\n\t\"./explorer/sql/transactions.sql\": \"./explorer/sql/transactions.sql\",\n\t\"./explorer/web/style.css\": \"./explorer/web/style.css\",\n\t\"./faucet/faucet\": \"./mods/faucet/faucet.js\",\n\t\"./faucet/faucet.js\": \"./mods/faucet/faucet.js\",\n\t\"./hospital/hospital\": \"./mods/hospital/hospital.js\",\n\t\"./hospital/hospital.js\": \"./mods/hospital/hospital.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace\": \"./mods/hospital/lib/email-appspace/hospital-appspace.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace.js\": \"./mods/hospital/lib/email-appspace/hospital-appspace.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace.template\": \"./mods/hospital/lib/email-appspace/hospital-appspace.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-appspace.template.js\": \"./mods/hospital/lib/email-appspace/hospital-appspace.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-history\": \"./mods/hospital/lib/email-appspace/hospital-history.js\",\n\t\"./hospital/lib/email-appspace/hospital-history.js\": \"./mods/hospital/lib/email-appspace/hospital-history.js\",\n\t\"./hospital/lib/email-appspace/hospital-history.template\": \"./mods/hospital/lib/email-appspace/hospital-history.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-history.template.js\": \"./mods/hospital/lib/email-appspace/hospital-history.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile\": \"./mods/hospital/lib/email-appspace/hospital-profile.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile.js\": \"./mods/hospital/lib/email-appspace/hospital-profile.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile.template\": \"./mods/hospital/lib/email-appspace/hospital-profile.template.js\",\n\t\"./hospital/lib/email-appspace/hospital-profile.template.js\": \"./mods/hospital/lib/email-appspace/hospital-profile.template.js\",\n\t\"./hospital/web/css/email-appspace.css\": \"./hospital/web/css/email-appspace.css\",\n\t\"./hospital/web/img/splash.jpg\": \"./hospital/web/img/splash.jpg\",\n\t\"./poker/BUGS.txt\": \"./poker/BUGS.txt\",\n\t\"./poker/license/LICENSE.txt\": \"./poker/license/LICENSE.txt\",\n\t\"./poker/poker\": \"./mods/poker/poker.js\",\n\t\"./poker/poker.js\": \"./mods/poker/poker.js\",\n\t\"./poker/web/img/cards/C1.png\": \"./poker/web/img/cards/C1.png\",\n\t\"./poker/web/img/cards/C10.png\": \"./poker/web/img/cards/C10.png\",\n\t\"./poker/web/img/cards/C11.png\": \"./poker/web/img/cards/C11.png\",\n\t\"./poker/web/img/cards/C12.png\": \"./poker/web/img/cards/C12.png\",\n\t\"./poker/web/img/cards/C13.png\": \"./poker/web/img/cards/C13.png\",\n\t\"./poker/web/img/cards/C2.png\": \"./poker/web/img/cards/C2.png\",\n\t\"./poker/web/img/cards/C3.png\": \"./poker/web/img/cards/C3.png\",\n\t\"./poker/web/img/cards/C4.png\": \"./poker/web/img/cards/C4.png\",\n\t\"./poker/web/img/cards/C5.png\": \"./poker/web/img/cards/C5.png\",\n\t\"./poker/web/img/cards/C6.png\": \"./poker/web/img/cards/C6.png\",\n\t\"./poker/web/img/cards/C7.png\": \"./poker/web/img/cards/C7.png\",\n\t\"./poker/web/img/cards/C8.png\": \"./poker/web/img/cards/C8.png\",\n\t\"./poker/web/img/cards/C9.png\": \"./poker/web/img/cards/C9.png\",\n\t\"./poker/web/img/cards/D1.png\": \"./poker/web/img/cards/D1.png\",\n\t\"./poker/web/img/cards/D10.png\": \"./poker/web/img/cards/D10.png\",\n\t\"./poker/web/img/cards/D11.png\": \"./poker/web/img/cards/D11.png\",\n\t\"./poker/web/img/cards/D12.png\": \"./poker/web/img/cards/D12.png\",\n\t\"./poker/web/img/cards/D13.png\": \"./poker/web/img/cards/D13.png\",\n\t\"./poker/web/img/cards/D2.png\": \"./poker/web/img/cards/D2.png\",\n\t\"./poker/web/img/cards/D3.png\": \"./poker/web/img/cards/D3.png\",\n\t\"./poker/web/img/cards/D4.png\": \"./poker/web/img/cards/D4.png\",\n\t\"./poker/web/img/cards/D5.png\": \"./poker/web/img/cards/D5.png\",\n\t\"./poker/web/img/cards/D6.png\": \"./poker/web/img/cards/D6.png\",\n\t\"./poker/web/img/cards/D7.png\": \"./poker/web/img/cards/D7.png\",\n\t\"./poker/web/img/cards/D8.png\": \"./poker/web/img/cards/D8.png\",\n\t\"./poker/web/img/cards/D9.png\": \"./poker/web/img/cards/D9.png\",\n\t\"./poker/web/img/cards/H1.png\": \"./poker/web/img/cards/H1.png\",\n\t\"./poker/web/img/cards/H10.png\": \"./poker/web/img/cards/H10.png\",\n\t\"./poker/web/img/cards/H11.png\": \"./poker/web/img/cards/H11.png\",\n\t\"./poker/web/img/cards/H12.png\": \"./poker/web/img/cards/H12.png\",\n\t\"./poker/web/img/cards/H13.png\": \"./poker/web/img/cards/H13.png\",\n\t\"./poker/web/img/cards/H2.png\": \"./poker/web/img/cards/H2.png\",\n\t\"./poker/web/img/cards/H3.png\": \"./poker/web/img/cards/H3.png\",\n\t\"./poker/web/img/cards/H4.png\": \"./poker/web/img/cards/H4.png\",\n\t\"./poker/web/img/cards/H5.png\": \"./poker/web/img/cards/H5.png\",\n\t\"./poker/web/img/cards/H6.png\": \"./poker/web/img/cards/H6.png\",\n\t\"./poker/web/img/cards/H7.png\": \"./poker/web/img/cards/H7.png\",\n\t\"./poker/web/img/cards/H8.png\": \"./poker/web/img/cards/H8.png\",\n\t\"./poker/web/img/cards/H9.png\": \"./poker/web/img/cards/H9.png\",\n\t\"./poker/web/img/cards/README.txt\": \"./poker/web/img/cards/README.txt\",\n\t\"./poker/web/img/cards/S1.png\": \"./poker/web/img/cards/S1.png\",\n\t\"./poker/web/img/cards/S10.png\": \"./poker/web/img/cards/S10.png\",\n\t\"./poker/web/img/cards/S11.png\": \"./poker/web/img/cards/S11.png\",\n\t\"./poker/web/img/cards/S12.png\": \"./poker/web/img/cards/S12.png\",\n\t\"./poker/web/img/cards/S13.png\": \"./poker/web/img/cards/S13.png\",\n\t\"./poker/web/img/cards/S2.png\": \"./poker/web/img/cards/S2.png\",\n\t\"./poker/web/img/cards/S3.png\": \"./poker/web/img/cards/S3.png\",\n\t\"./poker/web/img/cards/S4.png\": \"./poker/web/img/cards/S4.png\",\n\t\"./poker/web/img/cards/S5.png\": \"./poker/web/img/cards/S5.png\",\n\t\"./poker/web/img/cards/S6.png\": \"./poker/web/img/cards/S6.png\",\n\t\"./poker/web/img/cards/S7.png\": \"./poker/web/img/cards/S7.png\",\n\t\"./poker/web/img/cards/S8.png\": \"./poker/web/img/cards/S8.png\",\n\t\"./poker/web/img/cards/S9.png\": \"./poker/web/img/cards/S9.png\",\n\t\"./poker/web/img/cards/aces.png\": \"./poker/web/img/cards/aces.png\",\n\t\"./poker/web/img/cards/back_cards-07.png\": \"./poker/web/img/cards/back_cards-07.png\",\n\t\"./poker/web/img/cards/blue_back.png\": \"./poker/web/img/cards/blue_back.png\",\n\t\"./poker/web/img/cards/gray_back.png\": \"./poker/web/img/cards/gray_back.png\",\n\t\"./poker/web/img/cards/green_back.png\": \"./poker/web/img/cards/green_back.png\",\n\t\"./poker/web/img/cards/honor_clubs.png\": \"./poker/web/img/cards/honor_clubs.png\",\n\t\"./poker/web/img/cards/honor_diamond.png\": \"./poker/web/img/cards/honor_diamond.png\",\n\t\"./poker/web/img/cards/honor_heart-14.png\": \"./poker/web/img/cards/honor_heart-14.png\",\n\t\"./poker/web/img/cards/honors_spade-14.png\": \"./poker/web/img/cards/honors_spade-14.png\",\n\t\"./poker/web/img/cards/purple_back.png\": \"./poker/web/img/cards/purple_back.png\",\n\t\"./poker/web/img/cards/red_back.png\": \"./poker/web/img/cards/red_back.png\",\n\t\"./poker/web/img/cards/yellow_back.png\": \"./poker/web/img/cards/yellow_back.png\",\n\t\"./poker/web/img/gameboard.jpg\": \"./poker/web/img/gameboard.jpg\",\n\t\"./poker/web/img/poker.jpg\": \"./poker/web/img/poker.jpg\",\n\t\"./poker/web/index.html\": \"./poker/web/index.html\",\n\t\"./poker/web/script\": \"./mods/poker/web/script.js\",\n\t\"./poker/web/script.js\": \"./mods/poker/web/script.js\",\n\t\"./poker/web/style.css\": \"./poker/web/style.css\",\n\t\"./pwa-saito\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add.js\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add.template\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.template.js\",\n\t\"./pwa-saito/chat-ui/chat-add/chat-add.template.js\": \"./mods/pwa-saito/chat-ui/chat-add/chat-add.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list-row.template\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list-row.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list-row.template.js\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list-row.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list.js\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list.template\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.template.js\",\n\t\"./pwa-saito/chat-ui/chat-list/chat-list.template.js\": \"./mods/pwa-saito/chat-ui/chat-list/chat-list.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-footer.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-footer.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-footer.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-footer.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-header.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-header.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-header.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-header.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-message.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-message.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room-message.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room-message.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room.template\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.template.js\",\n\t\"./pwa-saito/chat-ui/chat-room/chat-room.template.js\": \"./mods/pwa-saito/chat-ui/chat-room/chat-room.template.js\",\n\t\"./pwa-saito/chat-ui/chat-ui\": \"./mods/pwa-saito/chat-ui/chat-ui.js\",\n\t\"./pwa-saito/chat-ui/chat-ui.js\": \"./mods/pwa-saito/chat-ui/chat-ui.js\",\n\t\"./pwa-saito/components/footer/navbar\": \"./mods/pwa-saito/components/footer/navbar.js\",\n\t\"./pwa-saito/components/footer/navbar.js\": \"./mods/pwa-saito/components/footer/navbar.js\",\n\t\"./pwa-saito/components/footer/navbar.template\": \"./mods/pwa-saito/components/footer/navbar.template.js\",\n\t\"./pwa-saito/components/footer/navbar.template.js\": \"./mods/pwa-saito/components/footer/navbar.template.js\",\n\t\"./pwa-saito/components/header/home-header\": \"./mods/pwa-saito/components/header/home-header.js\",\n\t\"./pwa-saito/components/header/home-header.js\": \"./mods/pwa-saito/components/header/home-header.js\",\n\t\"./pwa-saito/components/header/home-header.template\": \"./mods/pwa-saito/components/header/home-header.template.js\",\n\t\"./pwa-saito/components/header/home-header.template.js\": \"./mods/pwa-saito/components/header/home-header.template.js\",\n\t\"./pwa-saito/index\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/index.js\": \"./mods/pwa-saito/index.js\",\n\t\"./pwa-saito/src/app\": \"./mods/pwa-saito/src/app.js\",\n\t\"./pwa-saito/src/app.js\": \"./mods/pwa-saito/src/app.js\",\n\t\"./qrscanner/lib/scanner\": \"./mods/qrscanner/lib/scanner.js\",\n\t\"./qrscanner/lib/scanner.js\": \"./mods/qrscanner/lib/scanner.js\",\n\t\"./qrscanner/qrscanner\": \"./mods/qrscanner/qrscanner.js\",\n\t\"./qrscanner/qrscanner.js\": \"./mods/qrscanner/qrscanner.js\",\n\t\"./qrscanner/qrscanner.template\": \"./mods/qrscanner/qrscanner.template.js\",\n\t\"./qrscanner/qrscanner.template.js\": \"./mods/qrscanner/qrscanner.template.js\",\n\t\"./qrscanner/web/index.html\": \"./qrscanner/web/index.html\",\n\t\"./registry/lib/email-appspace/registry-appspace\": \"./mods/registry/lib/email-appspace/registry-appspace.js\",\n\t\"./registry/lib/email-appspace/registry-appspace.js\": \"./mods/registry/lib/email-appspace/registry-appspace.js\",\n\t\"./registry/lib/email-appspace/registry-appspace.template\": \"./mods/registry/lib/email-appspace/registry-appspace.template.js\",\n\t\"./registry/lib/email-appspace/registry-appspace.template.js\": \"./mods/registry/lib/email-appspace/registry-appspace.template.js\",\n\t\"./registry/registry\": \"./mods/registry/registry.js\",\n\t\"./registry/registry.js\": \"./mods/registry/registry.js\",\n\t\"./registry/sql/records.sql\": \"./registry/sql/records.sql\",\n\t\"./registry/web/index.html\": \"./registry/web/index.html\",\n\t\"./registry/web/style.css\": \"./registry/web/style.css\",\n\t\"./settings/lib/email-appspace/settings-appspace\": \"./mods/settings/lib/email-appspace/settings-appspace.js\",\n\t\"./settings/lib/email-appspace/settings-appspace.js\": \"./mods/settings/lib/email-appspace/settings-appspace.js\",\n\t\"./settings/lib/email-appspace/settings-appspace.template\": \"./mods/settings/lib/email-appspace/settings-appspace.template.js\",\n\t\"./settings/lib/email-appspace/settings-appspace.template.js\": \"./mods/settings/lib/email-appspace/settings-appspace.template.js\",\n\t\"./settings/settings\": \"./mods/settings/settings.js\",\n\t\"./settings/settings.js\": \"./mods/settings/settings.js\",\n\t\"./settings/web/style.css\": \"./settings/web/style.css\",\n\t\"./wallet/lib/wallet.template\": \"./mods/wallet/lib/wallet.template.js\",\n\t\"./wallet/lib/wallet.template.js\": \"./mods/wallet/lib/wallet.template.js\",\n\t\"./wallet/wallet\": \"./mods/wallet/wallet.js\",\n\t\"./wallet/wallet.js\": \"./mods/wallet/wallet.js\",\n\t\"./wordblocks/web/img/arcade.jpg\": \"./wordblocks/web/img/arcade.jpg\",\n\t\"./wordblocks/web/img/reload.png\": \"./wordblocks/web/img/reload.png\",\n\t\"./wordblocks/web/index.html\": \"./wordblocks/web/index.html\",\n\t\"./wordblocks/web/script\": \"./mods/wordblocks/web/script.js\",\n\t\"./wordblocks/web/script.js\": \"./mods/wordblocks/web/script.js\",\n\t\"./wordblocks/web/style.css\": \"./wordblocks/web/style.css\",\n\t\"./wordblocks/wordblocks\": \"./mods/wordblocks/wordblocks.js\",\n\t\"./wordblocks/wordblocks.js\": \"./mods/wordblocks/wordblocks.js\"\n***REMOVED***;\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n***REMOVED***\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t***REMOVED***\n\treturn map[req];\n***REMOVED***\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n***REMOVED***;\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./mods sync recursive ^\\\\.\\\\/.*$\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzIHN5bmMgcmVjdXJzaXZlIF5cXC5cXC8uKiQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzIHN5bmMgXlxcLlxcLy4qJD9jMDQ0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBtYXAgPSB7XG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2VcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UuanNcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXBwc3RvcmUvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcHBzdG9yZS9yZWdpc3RyeVwiOiBcIi4vbW9kcy9hcHBzdG9yZS9yZWdpc3RyeS5qc1wiLFxuXHRcIi4vYXBwc3RvcmUvcmVnaXN0cnkuanNcIjogXCIuL21vZHMvYXBwc3RvcmUvcmVnaXN0cnkuanNcIixcblx0XCIuL2FwcHN0b3JlL3NxbC9tb2R1bGVzLnNxbFwiOiBcIi4vYXBwc3RvcmUvc3FsL21vZHVsZXMuc3FsXCIsXG5cdFwiLi9hcHBzdG9yZS9zcWwvcmV2aWV3cy5zcWxcIjogXCIuL2FwcHN0b3JlL3NxbC9yZXZpZXdzLnNxbFwiLFxuXHRcIi4vYXBwc3RvcmUvd2ViL2luZGV4Lmh0bWxcIjogXCIuL2FwcHN0b3JlL3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9hcHBzdG9yZS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9hcHBzdG9yZS93ZWIvc3R5bGUuY3NzXCIsXG5cdFwiLi9hcmNhZGUvYXJjYWRlXCI6IFwiLi9tb2RzL2FyY2FkZS9hcmNhZGUuanNcIixcblx0XCIuL2FyY2FkZS9hcmNhZGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2FyY2FkZS5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXJcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXIuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLWxlZnQtc2lkZWJhci9hcmNhZGUtbGVmdC1zaWRlYmFyLmpzXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLWxlZnQtc2lkZWJhci9hcmNhZGUtbGVmdC1zaWRlYmFyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1sZWZ0LXNpZGViYXIvYXJjYWRlLWxlZnQtc2lkZWJhci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1sZWZ0LXNpZGViYXIvYXJjYWRlLWxlZnQtc2lkZWJhci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbGVmdC1zaWRlYmFyL2FyY2FkZS1sZWZ0LXNpZGViYXIudGVtcGxhdGUuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLWdhbWUudGVtcGxhdGVcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1nYW1lLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1nYW1lbGlzdC1yb3cudGVtcGxhdGVcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1nYW1lbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtZ2FtZWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXJcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXIuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXIudGVtcGxhdGVcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1sb2FkZXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbG9hZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1tYWluXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLW1haW4uanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLW1haW4uanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbWFpbi5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtbWFpbi9hcmNhZGUtbWFpbi50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1tYWluLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1tYWluL2FyY2FkZS1tYWluLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLW1haW4vYXJjYWRlLW1haW4udGVtcGxhdGUuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLXJpZ2h0LXNpZGViYXIvYXJjYWRlLXJpZ2h0LXNpZGViYXJcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtcmlnaHQtc2lkZWJhci9hcmNhZGUtcmlnaHQtc2lkZWJhci5qc1wiLFxuXHRcIi4vYXJjYWRlL2xpYi9hcmNhZGUtcmlnaHQtc2lkZWJhci9hcmNhZGUtcmlnaHQtc2lkZWJhci5qc1wiOiBcIi4vbW9kcy9hcmNhZGUvbGliL2FyY2FkZS1yaWdodC1zaWRlYmFyL2FyY2FkZS1yaWdodC1zaWRlYmFyLmpzXCIsXG5cdFwiLi9hcmNhZGUvbGliL2FyY2FkZS1yaWdodC1zaWRlYmFyL2FyY2FkZS1yaWdodC1zaWRlYmFyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2FyY2FkZS9saWIvYXJjYWRlLXJpZ2h0LXNpZGViYXIvYXJjYWRlLXJpZ2h0LXNpZGViYXIudGVtcGxhdGUuanNcIixcblx0XCIuL2FyY2FkZS9saWIvYXJjYWRlLXJpZ2h0LXNpZGViYXIvYXJjYWRlLXJpZ2h0LXNpZGViYXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvYXJjYWRlL2xpYi9hcmNhZGUtcmlnaHQtc2lkZWJhci9hcmNhZGUtcmlnaHQtc2lkZWJhci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vYXJjYWRlL3NxbC9nYW1lcy5zcWxcIjogXCIuL2FyY2FkZS9zcWwvZ2FtZXMuc3FsXCIsXG5cdFwiLi9hcmNhZGUvc3FsL2dhbWVzdGF0ZS5zcWxcIjogXCIuL2FyY2FkZS9zcWwvZ2FtZXN0YXRlLnNxbFwiLFxuXHRcIi4vYXJjYWRlL3dlYi9pbmRleC5odG1sXCI6IFwiLi9hcmNhZGUvd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL2FyY2FkZS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9hcmNhZGUvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vYXJjaGl2ZS9hcmNoaXZlXCI6IFwiLi9tb2RzL2FyY2hpdmUvYXJjaGl2ZS5qc1wiLFxuXHRcIi4vYXJjaGl2ZS9hcmNoaXZlLmpzXCI6IFwiLi9tb2RzL2FyY2hpdmUvYXJjaGl2ZS5qc1wiLFxuXHRcIi4vYXJjaGl2ZS9zcWwvdHhzLnNxbFwiOiBcIi4vYXJjaGl2ZS9zcWwvdHhzLnNxbFwiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvaW5kZXguaHRtbFwiOiBcIi4vYXJjaGl2ZS93ZWIvaW5kZXguaHRtbFwiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvc2NyaXB0XCI6IFwiLi9tb2RzL2FyY2hpdmUvd2ViL3NjcmlwdC5qc1wiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvc2NyaXB0LmpzXCI6IFwiLi9tb2RzL2FyY2hpdmUvd2ViL3NjcmlwdC5qc1wiLFxuXHRcIi4vYXJjaGl2ZS93ZWIvc3R5bGUuY3NzXCI6IFwiLi9hcmNoaXZlL3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL2NoYXQvY2hhdFwiOiBcIi4vbW9kcy9jaGF0L2NoYXQuanNcIixcblx0XCIuL2NoYXQvY2hhdC5qc1wiOiBcIi4vbW9kcy9jaGF0L2NoYXQuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0XCI6IFwiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1saXN0L2NoYXQtbGlzdC5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1saXN0L2NoYXQtbGlzdC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1tYWluXCI6IFwiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LW1haW4uanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LW1haW4uanNcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtbWFpbi5qc1wiLFxuXHRcIi4vY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LW1lc3NhZ2UtY29udGFpbmVyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1tZXNzYWdlLWNvbnRhaW5lci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LW1lc3NhZ2UtY29udGFpbmVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1tZXNzYWdlLWNvbnRhaW5lci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb21cIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20uanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0Z3JvdXBcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdGdyb3VwLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9jaGF0Z3JvdXAuanNcIjogXCIuL21vZHMvY2hhdC9saWIvY2hhdGdyb3VwLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94XCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3guanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC1tZXNzYWdlLWNvbnRhaW5lci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC1tZXNzYWdlLWNvbnRhaW5lci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LW1lc3NhZ2UtY29udGFpbmVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3guanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gudGVtcGxhdGVcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWJveC9jaGF0LWJveC50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtYm94L2NoYXQtYm94LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3RcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCIsXG5cdFwiLi9jaGF0L2xpYi9lbWFpbC1jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIixcblx0XCIuL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanNcIjogXCIuL21vZHMvY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LW1hbmFnZXIvY2hhdC1tYW5hZ2VyXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1tYW5hZ2VyL2NoYXQtbWFuYWdlci5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9jaGF0LW1hbmFnZXIvY2hhdC1tYW5hZ2VyLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1tYW5hZ2VyL2NoYXQtbWFuYWdlci5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0XCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvZW1haWwtY2hhdC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvZW1haWwtY2hhdC5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LnRlbXBsYXRlXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvZW1haWwtY2hhdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9saWIvZW1haWwtY2hhdC9lbWFpbC1jaGF0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvZW1haWwtY2hhdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vY2hhdC9zcWwvcmVjb3Jkcy5zcWxcIjogXCIuL2NoYXQvc3FsL3JlY29yZHMuc3FsXCIsXG5cdFwiLi9jaGF0L3NxbC9yb29tcy5zcWxcIjogXCIuL2NoYXQvc3FsL3Jvb21zLnNxbFwiLFxuXHRcIi4vY2hhdC93ZWIvY3NzL2VtYWlsLWNoYXQuY3NzXCI6IFwiLi9jaGF0L3dlYi9jc3MvZW1haWwtY2hhdC5jc3NcIixcblx0XCIuL2NoYXQvd2ViL2ltZy9jaGF0X2hlYWRlci5wbmdcIjogXCIuL2NoYXQvd2ViL2ltZy9jaGF0X2hlYWRlci5wbmdcIixcblx0XCIuL2NoYXQvd2ViL2luZGV4Lmh0bWxcIjogXCIuL2NoYXQvd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL2NoYXQvd2ViL3NjcmlwdFwiOiBcIi4vbW9kcy9jaGF0L3dlYi9zY3JpcHQuanNcIixcblx0XCIuL2NoYXQvd2ViL3NjcmlwdC5qc1wiOiBcIi4vbW9kcy9jaGF0L3dlYi9zY3JpcHQuanNcIixcblx0XCIuL2NoYXQvd2ViL3N0eWxlLmNzc1wiOiBcIi4vY2hhdC93ZWIvc3R5bGUuY3NzXCIsXG5cdFwiLi9kZWJ1Zy9kZWJ1Z1wiOiBcIi4vbW9kcy9kZWJ1Zy9kZWJ1Zy5qc1wiLFxuXHRcIi4vZGVidWcvZGVidWcuanNcIjogXCIuL21vZHMvZGVidWcvZGVidWcuanNcIixcblx0XCIuL2RlYnVnL2xpYi9lbWFpbC1hcHBzcGFjZS9kZWJ1Zy1hcHBzcGFjZVwiOiBcIi4vbW9kcy9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UuanNcIixcblx0XCIuL2RlYnVnL2xpYi9lbWFpbC1hcHBzcGFjZS9kZWJ1Zy1hcHBzcGFjZS5qc1wiOiBcIi4vbW9kcy9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UuanNcIixcblx0XCIuL2RlYnVnL2xpYi9lbWFpbC1hcHBzcGFjZS9kZWJ1Zy1hcHBzcGFjZS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2RlYnVnL2xpYi9lbWFpbC1hcHBzcGFjZS9kZWJ1Zy1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9kZWJ1Zy9saWIvZW1haWwtYXBwc3BhY2UvZGVidWctYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL2Rlc2lnbi9kZXNpZ25cIjogXCIuL21vZHMvZGVzaWduL2Rlc2lnbi5qc1wiLFxuXHRcIi4vZGVzaWduL2Rlc2lnbi5qc1wiOiBcIi4vbW9kcy9kZXNpZ24vZGVzaWduLmpzXCIsXG5cdFwiLi9kZXNpZ24vbGliL2VtYWlsLWFwcHNwYWNlL2Rlc2lnbi1hcHBzcGFjZVwiOiBcIi4vbW9kcy9kZXNpZ24vbGliL2VtYWlsLWFwcHNwYWNlL2Rlc2lnbi1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vZGVzaWduL2xpYi9lbWFpbC1hcHBzcGFjZS9kZXNpZ24tYXBwc3BhY2UuanNcIjogXCIuL21vZHMvZGVzaWduL2xpYi9lbWFpbC1hcHBzcGFjZS9kZXNpZ24tYXBwc3BhY2UuanNcIixcblx0XCIuL2Rlc2lnbi9saWIvZW1haWwtYXBwc3BhY2UvZGVzaWduLWFwcHNwYWNlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2Rlc2lnbi9saWIvZW1haWwtYXBwc3BhY2UvZGVzaWduLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9kZXNpZ24vbGliL2VtYWlsLWFwcHNwYWNlL2Rlc2lnbi1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9kZXNpZ24vbGliL2VtYWlsLWFwcHNwYWNlL2Rlc2lnbi1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZGVzaWduL3dlYi9pbmRleC5odG1sXCI6IFwiLi9kZXNpZ24vd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL2VtYWlsL2VtYWlsXCI6IFwiLi9tb2RzL2VtYWlsL2VtYWlsLmpzXCIsXG5cdFwiLi9lbWFpbC9lbWFpbC5qc1wiOiBcIi4vbW9kcy9lbWFpbC9lbWFpbC5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1hcHBzcGFjZS9lbWFpbC1hcHBzcGFjZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWFwcHNwYWNlL2VtYWlsLWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWFwcHNwYWNlL2VtYWlsLWFwcHNwYWNlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYXBwc3BhY2UvZW1haWwtYXBwc3BhY2UuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtYXBwc3BhY2UvZW1haWwtYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1hcHBzcGFjZS9lbWFpbC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1hcHBzcGFjZS9lbWFpbC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWFwcHNwYWNlL2VtYWlsLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWJvZHlcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWJvZHkuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWJvZHkudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWJvZHkudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1ib2R5LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWRldGFpbC9lbWFpbC1kZXRhaWxcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWRldGFpbC9lbWFpbC1kZXRhaWwuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWRldGFpbC9lbWFpbC1kZXRhaWwudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWRldGFpbC9lbWFpbC1kZXRhaWwudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1kZXRhaWwvZW1haWwtZGV0YWlsLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWZvcm0vZW1haWwtZm9ybVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWZvcm0vZW1haWwtZm9ybS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1mb3JtL2VtYWlsLWZvcm0uanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1mb3JtL2VtYWlsLWZvcm0uanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZm9ybS9lbWFpbC1mb3JtLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtZm9ybS9lbWFpbC1mb3JtLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWZvcm0vZW1haWwtZm9ybS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWZvcm0vZW1haWwtZm9ybS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3RcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3QuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LXJvdy50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC1yb3cudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC1yb3cudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWJvZHkvZW1haWwtbGlzdC9lbWFpbC1saXN0LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1ib2R5L2VtYWlsLWxpc3QvZW1haWwtbGlzdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3QudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtYm9keS9lbWFpbC1saXN0L2VtYWlsLWxpc3QudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWFwcHNwYWNlLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1hcHBzcGFjZS1oZWFkZXIvZW1haWwtYXBwc3BhY2UtaGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZGV0YWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlclwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci9lbWFpbC1mb3JtLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIvZW1haWwtZm9ybS1oZWFkZXIudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1oZWFkZXJcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWhlYWRlci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWhlYWRlci5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaGVhZGVyLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlclwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtbWFpblwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1tYWluLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1tYWluLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLW1haW4uanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLW1haW4udGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtbWFpbi50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLW1haW4vZW1haWwtbWFpbi50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1tYWluLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1iYXJzLW1lbnVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1iYXJzLW1lbnUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1iYXJzLW1lbnUudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1iYXJzLW1lbnUudGVtcGxhdGUuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jaGF0XCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNoYXQuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNoYXQuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY2hhdC5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY2hhdC50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jaGF0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jaGF0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNoYXQudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNvbnRyb2xzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNvbnRyb2xzLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jb250cm9scy5qc1wiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1jb250cm9scy5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY29udHJvbHMudGVtcGxhdGVcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtY29udHJvbHMudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNvbnRyb2xzLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWNvbnRyb2xzLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1zaWRlYmFyXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLXNpZGViYXIuanNcIixcblx0XCIuL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLXNpZGViYXIuanNcIjogXCIuL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtc2lkZWJhci5qc1wiLFxuXHRcIi4vZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtc2lkZWJhci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1zaWRlYmFyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9lbWFpbC9saWIvZW1haWwtc2lkZWJhci9lbWFpbC1zaWRlYmFyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLXNpZGViYXIudGVtcGxhdGUuanNcIixcblx0XCIuL2VtYWlsL3dlYi9pbmRleC5odG1sXCI6IFwiLi9lbWFpbC93ZWIvaW5kZXguaHRtbFwiLFxuXHRcIi4vZW1haWwvd2ViL3N0eWxlLmNzc1wiOiBcIi4vZW1haWwvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vZW5jcnlwdC9lbmNyeXB0XCI6IFwiLi9tb2RzL2VuY3J5cHQvZW5jcnlwdC5qc1wiLFxuXHRcIi4vZW5jcnlwdC9lbmNyeXB0LmpzXCI6IFwiLi9tb2RzL2VuY3J5cHQvZW5jcnlwdC5qc1wiLFxuXHRcIi4vZW5jcnlwdC9saWIvZW1haWwtYXBwc3BhY2UvZW5jcnlwdC1hcHBzcGFjZVwiOiBcIi4vbW9kcy9lbmNyeXB0L2xpYi9lbWFpbC1hcHBzcGFjZS9lbmNyeXB0LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9lbmNyeXB0L2xpYi9lbWFpbC1hcHBzcGFjZS9lbmNyeXB0LWFwcHNwYWNlLmpzXCI6IFwiLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UuanNcIixcblx0XCIuL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvZW5jcnlwdC9saWIvZW1haWwtYXBwc3BhY2UvZW5jcnlwdC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vZW5jcnlwdC9saWIvZW1haWwtYXBwc3BhY2UvZW5jcnlwdC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9lbmNyeXB0L2xpYi9lbWFpbC1hcHBzcGFjZS9lbmNyeXB0LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9leHBsb3Jlci9leHBsb3JlclwiOiBcIi4vbW9kcy9leHBsb3Jlci9leHBsb3Jlci5qc1wiLFxuXHRcIi4vZXhwbG9yZXIvZXhwbG9yZXIuanNcIjogXCIuL21vZHMvZXhwbG9yZXIvZXhwbG9yZXIuanNcIixcblx0XCIuL2V4cGxvcmVyL3NxbC90cmFuc2FjdGlvbnMuc3FsXCI6IFwiLi9leHBsb3Jlci9zcWwvdHJhbnNhY3Rpb25zLnNxbFwiLFxuXHRcIi4vZXhwbG9yZXIvd2ViL3N0eWxlLmNzc1wiOiBcIi4vZXhwbG9yZXIvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vZmF1Y2V0L2ZhdWNldFwiOiBcIi4vbW9kcy9mYXVjZXQvZmF1Y2V0LmpzXCIsXG5cdFwiLi9mYXVjZXQvZmF1Y2V0LmpzXCI6IFwiLi9tb2RzL2ZhdWNldC9mYXVjZXQuanNcIixcblx0XCIuL2hvc3BpdGFsL2hvc3BpdGFsXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2hvc3BpdGFsLmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9ob3NwaXRhbC5qc1wiOiBcIi4vbW9kcy9ob3NwaXRhbC9ob3NwaXRhbC5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWFwcHNwYWNlXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWFwcHNwYWNlLmpzXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWFwcHNwYWNlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWFwcHNwYWNlLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWhpc3RvcnlcIjogXCIuL21vZHMvaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWhpc3RvcnkuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1oaXN0b3J5LmpzXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1oaXN0b3J5LmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtaGlzdG9yeS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtaGlzdG9yeS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWhpc3RvcnkudGVtcGxhdGUuanNcIjogXCIuL21vZHMvaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLWhpc3RvcnkudGVtcGxhdGUuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1wcm9maWxlXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1wcm9maWxlLmpzXCIsXG5cdFwiLi9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtcHJvZmlsZS5qc1wiOiBcIi4vbW9kcy9ob3NwaXRhbC9saWIvZW1haWwtYXBwc3BhY2UvaG9zcGl0YWwtcHJvZmlsZS5qc1wiLFxuXHRcIi4vaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLXByb2ZpbGUudGVtcGxhdGVcIjogXCIuL21vZHMvaG9zcGl0YWwvbGliL2VtYWlsLWFwcHNwYWNlL2hvc3BpdGFsLXByb2ZpbGUudGVtcGxhdGUuanNcIixcblx0XCIuL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1wcm9maWxlLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL2hvc3BpdGFsL2xpYi9lbWFpbC1hcHBzcGFjZS9ob3NwaXRhbC1wcm9maWxlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9ob3NwaXRhbC93ZWIvY3NzL2VtYWlsLWFwcHNwYWNlLmNzc1wiOiBcIi4vaG9zcGl0YWwvd2ViL2Nzcy9lbWFpbC1hcHBzcGFjZS5jc3NcIixcblx0XCIuL2hvc3BpdGFsL3dlYi9pbWcvc3BsYXNoLmpwZ1wiOiBcIi4vaG9zcGl0YWwvd2ViL2ltZy9zcGxhc2guanBnXCIsXG5cdFwiLi9wb2tlci9CVUdTLnR4dFwiOiBcIi4vcG9rZXIvQlVHUy50eHRcIixcblx0XCIuL3Bva2VyL2xpY2Vuc2UvTElDRU5TRS50eHRcIjogXCIuL3Bva2VyL2xpY2Vuc2UvTElDRU5TRS50eHRcIixcblx0XCIuL3Bva2VyL3Bva2VyXCI6IFwiLi9tb2RzL3Bva2VyL3Bva2VyLmpzXCIsXG5cdFwiLi9wb2tlci9wb2tlci5qc1wiOiBcIi4vbW9kcy9wb2tlci9wb2tlci5qc1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzEucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxMC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzEwLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMTEucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxMS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzEyLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMTIucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MxMy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzEzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzIucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0MzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DMy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzQucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M0LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DNS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzUucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M2LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DNi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzcucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M3LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DOC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvQzgucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0M5LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9DOS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDEucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMTAucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxMC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDExLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMTEucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxMi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDEyLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMTMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QxMy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDIucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0QyLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EMy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q0LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ENC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDUucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q1LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ENi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDYucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q3LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ENy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDgucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0Q4LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9EOS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvRDkucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gxLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDEwLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMTAucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gxMS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDExLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMTIucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gxMi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDEzLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMTMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gyLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IMi5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0gzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9INC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDQucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g1LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9INS5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDYucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g2LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9INy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDcucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g4LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9IOC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvSDkucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL0g5LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9SRUFETUUudHh0XCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1JFQURNRS50eHRcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzEucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMTAucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxMC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzExLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMTEucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxMi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzEyLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMTMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MxMy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzIucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1MyLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TMy5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M0LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TNC5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzUucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M1LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TNi5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzYucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M3LnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TNy5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzgucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL1M4LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9TOS5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvUzkucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2FjZXMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2FjZXMucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2JhY2tfY2FyZHMtMDcucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2JhY2tfY2FyZHMtMDcucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2JsdWVfYmFjay5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvYmx1ZV9iYWNrLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ncmF5X2JhY2sucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2dyYXlfYmFjay5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvZ3JlZW5fYmFjay5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvZ3JlZW5fYmFjay5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvaG9ub3JfY2x1YnMucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2hvbm9yX2NsdWJzLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ob25vcl9kaWFtb25kLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ob25vcl9kaWFtb25kLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9ob25vcl9oZWFydC0xNC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvaG9ub3JfaGVhcnQtMTQucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL2hvbm9yc19zcGFkZS0xNC5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvaG9ub3JzX3NwYWRlLTE0LnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9wdXJwbGVfYmFjay5wbmdcIjogXCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMvcHVycGxlX2JhY2sucG5nXCIsXG5cdFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL3JlZF9iYWNrLnBuZ1wiOiBcIi4vcG9rZXIvd2ViL2ltZy9jYXJkcy9yZWRfYmFjay5wbmdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvY2FyZHMveWVsbG93X2JhY2sucG5nXCI6IFwiLi9wb2tlci93ZWIvaW1nL2NhcmRzL3llbGxvd19iYWNrLnBuZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2ltZy9nYW1lYm9hcmQuanBnXCI6IFwiLi9wb2tlci93ZWIvaW1nL2dhbWVib2FyZC5qcGdcIixcblx0XCIuL3Bva2VyL3dlYi9pbWcvcG9rZXIuanBnXCI6IFwiLi9wb2tlci93ZWIvaW1nL3Bva2VyLmpwZ1wiLFxuXHRcIi4vcG9rZXIvd2ViL2luZGV4Lmh0bWxcIjogXCIuL3Bva2VyL3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9wb2tlci93ZWIvc2NyaXB0XCI6IFwiLi9tb2RzL3Bva2VyL3dlYi9zY3JpcHQuanNcIixcblx0XCIuL3Bva2VyL3dlYi9zY3JpcHQuanNcIjogXCIuL21vZHMvcG9rZXIvd2ViL3NjcmlwdC5qc1wiLFxuXHRcIi4vcG9rZXIvd2ViL3N0eWxlLmNzc1wiOiBcIi4vcG9rZXIvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vcHdhLXNhaXRvXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9pbmRleC5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vaW5kZXguanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtYWRkL2NoYXQtYWRkXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtYWRkL2NoYXQtYWRkLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWFkZC9jaGF0LWFkZC5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWFkZC9jaGF0LWFkZC5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1hZGQvY2hhdC1hZGQudGVtcGxhdGVcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1hZGQvY2hhdC1hZGQudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtYWRkL2NoYXQtYWRkLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtYWRkL2NoYXQtYWRkLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0XCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3QuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdC5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3QudGVtcGxhdGUuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20taGVhZGVyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20taGVhZGVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtcm9vbS9jaGF0LXJvb20udGVtcGxhdGUuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC1yb29tL2NoYXQtcm9vbS50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NoYXQtdWkvY2hhdC11aVwiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXVpLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LXVpLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtdWkuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2Zvb3Rlci9uYXZiYXJcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NvbXBvbmVudHMvZm9vdGVyL25hdmJhci5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NvbXBvbmVudHMvZm9vdGVyL25hdmJhci5qc1wiOiBcIi4vbW9kcy9wd2Etc2FpdG8vY29tcG9uZW50cy9mb290ZXIvbmF2YmFyLmpzXCIsXG5cdFwiLi9wd2Etc2FpdG8vY29tcG9uZW50cy9mb290ZXIvbmF2YmFyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2Zvb3Rlci9uYXZiYXIudGVtcGxhdGUuanNcIixcblx0XCIuL3B3YS1zYWl0by9jb21wb25lbnRzL2Zvb3Rlci9uYXZiYXIudGVtcGxhdGUuanNcIjogXCIuL21vZHMvcHdhLXNhaXRvL2NvbXBvbmVudHMvZm9vdGVyL25hdmJhci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NvbXBvbmVudHMvaGVhZGVyL2hvbWUtaGVhZGVyXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NvbXBvbmVudHMvaGVhZGVyL2hvbWUtaGVhZGVyLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NvbXBvbmVudHMvaGVhZGVyL2hvbWUtaGVhZGVyLnRlbXBsYXRlXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2NvbXBvbmVudHMvaGVhZGVyL2hvbWUtaGVhZGVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9jb21wb25lbnRzL2hlYWRlci9ob21lLWhlYWRlci50ZW1wbGF0ZS5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2luZGV4XCI6IFwiLi9tb2RzL3B3YS1zYWl0by9pbmRleC5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL2luZGV4LmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9pbmRleC5qc1wiLFxuXHRcIi4vcHdhLXNhaXRvL3NyYy9hcHBcIjogXCIuL21vZHMvcHdhLXNhaXRvL3NyYy9hcHAuanNcIixcblx0XCIuL3B3YS1zYWl0by9zcmMvYXBwLmpzXCI6IFwiLi9tb2RzL3B3YS1zYWl0by9zcmMvYXBwLmpzXCIsXG5cdFwiLi9xcnNjYW5uZXIvbGliL3NjYW5uZXJcIjogXCIuL21vZHMvcXJzY2FubmVyL2xpYi9zY2FubmVyLmpzXCIsXG5cdFwiLi9xcnNjYW5uZXIvbGliL3NjYW5uZXIuanNcIjogXCIuL21vZHMvcXJzY2FubmVyL2xpYi9zY2FubmVyLmpzXCIsXG5cdFwiLi9xcnNjYW5uZXIvcXJzY2FubmVyXCI6IFwiLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanNcIixcblx0XCIuL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanNcIjogXCIuL21vZHMvcXJzY2FubmVyL3Fyc2Nhbm5lci5qc1wiLFxuXHRcIi4vcXJzY2FubmVyL3Fyc2Nhbm5lci50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9xcnNjYW5uZXIvcXJzY2FubmVyLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9xcnNjYW5uZXIvcXJzY2FubmVyLnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIudGVtcGxhdGUuanNcIixcblx0XCIuL3Fyc2Nhbm5lci93ZWIvaW5kZXguaHRtbFwiOiBcIi4vcXJzY2FubmVyL3dlYi9pbmRleC5odG1sXCIsXG5cdFwiLi9yZWdpc3RyeS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2VcIjogXCIuL21vZHMvcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9yZWdpc3RyeS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UuanNcIjogXCIuL21vZHMvcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLmpzXCIsXG5cdFwiLi9yZWdpc3RyeS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UudGVtcGxhdGVcIjogXCIuL21vZHMvcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9yZWdpc3RyeS9saWIvZW1haWwtYXBwc3BhY2UvcmVnaXN0cnktYXBwc3BhY2UudGVtcGxhdGUuanNcIjogXCIuL21vZHMvcmVnaXN0cnkvbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlLnRlbXBsYXRlLmpzXCIsXG5cdFwiLi9yZWdpc3RyeS9yZWdpc3RyeVwiOiBcIi4vbW9kcy9yZWdpc3RyeS9yZWdpc3RyeS5qc1wiLFxuXHRcIi4vcmVnaXN0cnkvcmVnaXN0cnkuanNcIjogXCIuL21vZHMvcmVnaXN0cnkvcmVnaXN0cnkuanNcIixcblx0XCIuL3JlZ2lzdHJ5L3NxbC9yZWNvcmRzLnNxbFwiOiBcIi4vcmVnaXN0cnkvc3FsL3JlY29yZHMuc3FsXCIsXG5cdFwiLi9yZWdpc3RyeS93ZWIvaW5kZXguaHRtbFwiOiBcIi4vcmVnaXN0cnkvd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL3JlZ2lzdHJ5L3dlYi9zdHlsZS5jc3NcIjogXCIuL3JlZ2lzdHJ5L3dlYi9zdHlsZS5jc3NcIixcblx0XCIuL3NldHRpbmdzL2xpYi9lbWFpbC1hcHBzcGFjZS9zZXR0aW5ncy1hcHBzcGFjZVwiOiBcIi4vbW9kcy9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UuanNcIixcblx0XCIuL3NldHRpbmdzL2xpYi9lbWFpbC1hcHBzcGFjZS9zZXR0aW5ncy1hcHBzcGFjZS5qc1wiOiBcIi4vbW9kcy9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UuanNcIixcblx0XCIuL3NldHRpbmdzL2xpYi9lbWFpbC1hcHBzcGFjZS9zZXR0aW5ncy1hcHBzcGFjZS50ZW1wbGF0ZVwiOiBcIi4vbW9kcy9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL3NldHRpbmdzL2xpYi9lbWFpbC1hcHBzcGFjZS9zZXR0aW5ncy1hcHBzcGFjZS50ZW1wbGF0ZS5qc1wiOiBcIi4vbW9kcy9zZXR0aW5ncy9saWIvZW1haWwtYXBwc3BhY2Uvc2V0dGluZ3MtYXBwc3BhY2UudGVtcGxhdGUuanNcIixcblx0XCIuL3NldHRpbmdzL3NldHRpbmdzXCI6IFwiLi9tb2RzL3NldHRpbmdzL3NldHRpbmdzLmpzXCIsXG5cdFwiLi9zZXR0aW5ncy9zZXR0aW5ncy5qc1wiOiBcIi4vbW9kcy9zZXR0aW5ncy9zZXR0aW5ncy5qc1wiLFxuXHRcIi4vc2V0dGluZ3Mvd2ViL3N0eWxlLmNzc1wiOiBcIi4vc2V0dGluZ3Mvd2ViL3N0eWxlLmNzc1wiLFxuXHRcIi4vd2FsbGV0L2xpYi93YWxsZXQudGVtcGxhdGVcIjogXCIuL21vZHMvd2FsbGV0L2xpYi93YWxsZXQudGVtcGxhdGUuanNcIixcblx0XCIuL3dhbGxldC9saWIvd2FsbGV0LnRlbXBsYXRlLmpzXCI6IFwiLi9tb2RzL3dhbGxldC9saWIvd2FsbGV0LnRlbXBsYXRlLmpzXCIsXG5cdFwiLi93YWxsZXQvd2FsbGV0XCI6IFwiLi9tb2RzL3dhbGxldC93YWxsZXQuanNcIixcblx0XCIuL3dhbGxldC93YWxsZXQuanNcIjogXCIuL21vZHMvd2FsbGV0L3dhbGxldC5qc1wiLFxuXHRcIi4vd29yZGJsb2Nrcy93ZWIvaW1nL2FyY2FkZS5qcGdcIjogXCIuL3dvcmRibG9ja3Mvd2ViL2ltZy9hcmNhZGUuanBnXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dlYi9pbWcvcmVsb2FkLnBuZ1wiOiBcIi4vd29yZGJsb2Nrcy93ZWIvaW1nL3JlbG9hZC5wbmdcIixcblx0XCIuL3dvcmRibG9ja3Mvd2ViL2luZGV4Lmh0bWxcIjogXCIuL3dvcmRibG9ja3Mvd2ViL2luZGV4Lmh0bWxcIixcblx0XCIuL3dvcmRibG9ja3Mvd2ViL3NjcmlwdFwiOiBcIi4vbW9kcy93b3JkYmxvY2tzL3dlYi9zY3JpcHQuanNcIixcblx0XCIuL3dvcmRibG9ja3Mvd2ViL3NjcmlwdC5qc1wiOiBcIi4vbW9kcy93b3JkYmxvY2tzL3dlYi9zY3JpcHQuanNcIixcblx0XCIuL3dvcmRibG9ja3Mvd2ViL3N0eWxlLmNzc1wiOiBcIi4vd29yZGJsb2Nrcy93ZWIvc3R5bGUuY3NzXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dvcmRibG9ja3NcIjogXCIuL21vZHMvd29yZGJsb2Nrcy93b3JkYmxvY2tzLmpzXCIsXG5cdFwiLi93b3JkYmxvY2tzL3dvcmRibG9ja3MuanNcIjogXCIuL21vZHMvd29yZGJsb2Nrcy93b3JkYmxvY2tzLmpzXCJcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8obWFwLCByZXEpKSB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBtYXBbcmVxXTtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSBcIi4vbW9kcyBzeW5jIHJlY3Vyc2l2ZSBeXFxcXC5cXFxcLy4qJFwiOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods sync recursive ^\\.\\/.*$\n");
942c942,1052
< eval("function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; ***REMOVED***; ***REMOVED*** else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; ***REMOVED***; ***REMOVED*** return _typeof(obj); ***REMOVED***\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; ***REMOVED*** return _assertThisInitialized(self); ***REMOVED***\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); ***REMOVED*** return self; ***REMOVED***\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; ***REMOVED*** else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); ***REMOVED*** return desc.value; ***REMOVED***; ***REMOVED*** return _get(target, property, receiver || target); ***REMOVED***\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; ***REMOVED*** return object; ***REMOVED***\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); ***REMOVED***; return _getPrototypeOf(o); ***REMOVED***\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); ***REMOVED*** subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true ***REMOVED*** ***REMOVED***); if (superClass) _setPrototypeOf(subClass, superClass); ***REMOVED***\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; ***REMOVED***; return _setPrototypeOf(o, p); ***REMOVED***\n\nvar saito = __webpack_require__(/*! ../../lib/saito/saito.js */ \"./lib/saito/saito.js\");\n\nvar ModTemplate = __webpack_require__(/*! ../../lib/templates/modtemplate */ \"./lib/templates/modtemplate.js\");\n\nvar ChatGroup = __webpack_require__(/*! ./lib/chatgroup */ \"./mods/chat/lib/chatgroup.js\");\n\nvar EmailChat = __webpack_require__(/*! ./lib/email-chat/email-chat */ \"./mods/chat/lib/email-chat/email-chat.js\");\n\nvar Chat =\n/*#__PURE__*/\nfunction (_ModTemplate) {\n  _inherits(Chat, _ModTemplate);\n\n  function Chat(app) {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, app));\n    _this.name = \"Chat\";\n    _this.events = ['encrypt-key-exchange-confirm']; //\n    // data managed by chat manager\n    //\n\n    _this.groups = [];\n    return _this;\n  ***REMOVED***\n\n  _createClass(Chat, [{\n    key: \"initialize\",\n    value: function initialize(app) {\n      _get(_getPrototypeOf(Chat.prototype), \"initialize\", this).call(this, app); //\n      // create chatgroups from keychain\n      //\n\n\n      var keys = this.app.keys.returnKeys();\n\n      for (var i = 0; i < keys.length; i++) {\n        this.createChatGroup(keys[i].publickey);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"respondTo\",\n    value: function respondTo(type) {\n      if (type == 'email-chat') {\n        var obj = {***REMOVED***;\n        obj.render = this.renderEmailChat;\n        obj.attachEvents = this.attachEventsEmailChat;\n        return obj;\n  ***REMOVED***\n\n      return null;\n***REMOVED*** ////////////////\n    // eMail Chat //\n    ////////////////\n\n  ***REMOVED***, {\n    key: \"renderEmailChat\",\n    value: function renderEmailChat(app, data) {\n      var chat_self = app.modules.returnModule(\"Chat\");\n      data.chat = {***REMOVED***;\n      data.chat.groups = chat_self.groups;\n      EmailChat.initialize(app, data);\n      EmailChat.render(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attachEventsEmailChat\",\n    value: function attachEventsEmailChat(app, data) {\n      EmailChat.attachEvents(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"receiveEvent\",\n    value: function receiveEvent(type, data) {\n      //\n      // new encryption channel opened\n      //\n      if (type === \"encrypt-key-exchange-confirm\") {\n        if (data.publickey === undefined) {\n          return;\n    ***REMOVED***\n\n        this.createChatGroup(data.publickey);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"createChatGroup\",\n    value: function createChatGroup() {\n      var publickey = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (publickey == null) {\n        return;\n  ***REMOVED***\n\n      var cg = new ChatGroup(this.app);\n      cg.group_members = [];\n      cg.group_members.push(this.app.wallet.returnPublicKey());\n      cg.group_members.push(publickey);\n      cg.group_members.sort();\n      cg.group_id = this.app.crypto.hash(cg.group_members[0] + \"_\" + cg.group_members[1]);\n      cg.group_name = publickey.substring(0, 16);\n\n      for (var i = 0; i < this.groups.length; i++) {\n        if (this.groups[i].group_id == cg.group_id) {\n          return;\n    ***REMOVED***\n  ***REMOVED***\n\n      cg.initialize(this.app);\n      this.groups.push(cg);\n      this.sendEvent('chat-render-request', {***REMOVED***);\n***REMOVED*** //\n    // onChain messages received on the blockchain arrive here\n    //\n\n  ***REMOVED***, {\n    key: \"onConfirmation\",\n    value: function onConfirmation(blk, tx, conf, app) {\n      var txmsg = tx.returnMessage();\n      var chat_self = app.modules.returnModule(\"Chat\");\n\n      if (conf == 0) {\n        if (txmsg.request == \"chat message\") {\n          if (tx.transaction.from[0].add == app.wallet.returnPublicKey()) {\n            return;\n      ***REMOVED***\n\n          chat_self.groups.forEach(function (group) {\n            if (group.group_id == txmsg.group_id) {\n              var msg = Object.assign(txmsg, {\n                sig: tx.transaction.sig,\n                type: \"others\"\n          ***REMOVED***);\n              group.messages.push(msg);\n              app.connection.emit('chat_receive_message', msg);\n        ***REMOVED***\n      ***REMOVED***);\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED*** //\n    // messages received peer-to-peer arrive here\n    //\n\n  ***REMOVED***, {\n    key: \"handlePeerRequest\",\n    value: function handlePeerRequest(app, req, peer, mycallback) {\n      if (req.request == null) {\n        return;\n  ***REMOVED***\n\n      if (req.data == null) {\n        return;\n  ***REMOVED***\n\n      var tx = new saito.transaction(JSON.parse(req.data));\n\n      try {\n        switch (req.request) {\n          case \"chat message\":\n            this.chatReceiveMessage(app, tx);\n            break;\n\n          case \"chat load messages\":\n            this.chatLoadMessages(app, tx);\n            break;\n\n          case \"chat request messages\":\n            this.chatLoadMessages(app, tx);\n            break;\n\n          default:\n            break;\n    ***REMOVED***\n\n        if (mycallback) {\n          mycallback({\n            \"payload\": \"success\",\n            \"error\": {***REMOVED***\n      ***REMOVED***);\n    ***REMOVED***\n\n        ;\n  ***REMOVED*** catch (err) {\n        console.log(err);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"chatLoadMessages\",\n    value: function chatLoadMessages(app, tx) {\n      var txmsg = tx.returnMessage(); //    for (let i = 0; i < txmsg.number_of_rooms_to_update; i++) {\n      //      this.chatReceiveMessage(txmsg.number[i]);\n      //***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"chatRequestMessages\",\n    value: function () {\n      var _chatRequestMessages = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(app, tx) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee);\n  ***REMOVED***));\n\n      function chatRequestMessages(_x, _x2) {\n        return _chatRequestMessages.apply(this, arguments);\n  ***REMOVED***\n\n      return chatRequestMessages;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"chatReceiveMessage\",\n    value: function chatReceiveMessage(app, tx) {\n      /*\n  ***REMOVED***\n      \n          let sender   = txmsg.sender;\n          let receiver = txmsg.receiver;\n          let room \t = txmsg.room;\n      \n  ***REMOVED***\n  ***REMOVED*** each chat group\n  ***REMOVED***\n          let room_id = this.app.crypto.hash(room);\n      \n  ***REMOVED***\n  ***REMOVED*** servers, save the data and relay\n  ***REMOVED***\n          if (i_am_not_a_party_to_this_chat) {\n      \n    ***REMOVED***\n    ***REMOVED*** save to database for my friends\n    ***REMOVED***\n            let room_sql = `INSERT OR IGNORE into rooms (uuid, name, publickey, tx) VALUES ($uuid, $name, $publickey, $tx)`;\n            let params   = {***REMOVED***;\n            this.app.storage.insertDatabaseEntryOnDatabase(room_sql, params, \"chat\");\n      \n      \n      ***REMOVED*** else {\n      \n    ***REMOVED***\n    ***REMOVED*** create module to handle chat\n    ***REMOVED***\n            let chatroom = this.app.modules.returnModule(room_id);\n            if (chatroom == null) {\n              this.app.modules.push(new saito.chat(room_id))\n              chatroom = this.app.modules.returnModule(room_id);\n        ***REMOVED***\n      \n    ***REMOVED***\n    ***REMOVED*** send information to this chat module\n    ***REMOVED***\n            chatroom.addMessage(app, tx);\n      \n      ***REMOVED***\n      \n  ***REMOVED***\n  ***REMOVED*** relay the chat message\n  ***REMOVED***\n          this.app.network.sendPeerRequestToPeer(receiver, tx);\n      */\n***REMOVED***\n  ***REMOVED***]);\n\n  return Chat;\n***REMOVED***(ModTemplate);\n\nmodule.exports = Chat;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvY2hhdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9jaGF0LmpzPzE2ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2FpdG8gPSByZXF1aXJlKCcuLi8uLi9saWIvc2FpdG8vc2FpdG8uanMnKTtcbmNvbnN0IE1vZFRlbXBsYXRlID0gcmVxdWlyZSgnLi4vLi4vbGliL3RlbXBsYXRlcy9tb2R0ZW1wbGF0ZScpO1xuY29uc3QgQ2hhdEdyb3VwID0gcmVxdWlyZSgnLi9saWIvY2hhdGdyb3VwJyk7XG5jb25zdCBFbWFpbENoYXQgPSByZXF1aXJlKCcuL2xpYi9lbWFpbC1jaGF0L2VtYWlsLWNoYXQnKTtcblxuY2xhc3MgQ2hhdCBleHRlbmRzIE1vZFRlbXBsYXRlIHtcblxuICBjb25zdHJ1Y3RvcihhcHApIHtcblxuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5uYW1lID0gXCJDaGF0XCI7XG4gICAgdGhpcy5ldmVudHMgPSBbJ2VuY3J5cHQta2V5LWV4Y2hhbmdlLWNvbmZpcm0nXTtcblxuICAgIC8vXG4gICAgLy8gZGF0YSBtYW5hZ2VkIGJ5IGNoYXQgbWFuYWdlclxuICAgIC8vXG4gICAgdGhpcy5ncm91cHMgPSBbXTtcblxuICB9XG5cbiAgaW5pdGlhbGl6ZShhcHApIHtcblxuICAgIHN1cGVyLmluaXRpYWxpemUoYXBwKTtcblxuICAgIC8vXG4gICAgLy8gY3JlYXRlIGNoYXRncm91cHMgZnJvbSBrZXljaGFpblxuICAgIC8vXG4gICAgbGV0IGtleXMgPSB0aGlzLmFwcC5rZXlzLnJldHVybktleXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuY3JlYXRlQ2hhdEdyb3VwKGtleXNbaV0ucHVibGlja2V5KTtcbiAgICB9XG5cbiAgfVxuXG5cbiAgcmVzcG9uZFRvKHR5cGUpIHtcblxuICAgIGlmICh0eXBlID09ICdlbWFpbC1jaGF0Jykge1xuICAgICAgbGV0IG9iaiA9IHt9O1xuICAgICAgICAgIG9iai5yZW5kZXIgPSB0aGlzLnJlbmRlckVtYWlsQ2hhdDtcbiAgICAgICAgICBvYmouYXR0YWNoRXZlbnRzID0gdGhpcy5hdHRhY2hFdmVudHNFbWFpbENoYXQ7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cblxuXG4gIC8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gZU1haWwgQ2hhdCAvL1xuICAvLy8vLy8vLy8vLy8vLy8vXG4gIHJlbmRlckVtYWlsQ2hhdChhcHAsIGRhdGEpIHtcbiAgICBsZXQgY2hhdF9zZWxmID0gYXBwLm1vZHVsZXMucmV0dXJuTW9kdWxlKFwiQ2hhdFwiKTtcblxuICAgIGRhdGEuY2hhdCA9IHt9O1xuICAgIGRhdGEuY2hhdC5ncm91cHMgPSBjaGF0X3NlbGYuZ3JvdXBzO1xuXG4gICAgRW1haWxDaGF0LmluaXRpYWxpemUoYXBwLCBkYXRhKTtcbiAgICBFbWFpbENoYXQucmVuZGVyKGFwcCwgZGF0YSk7XG4gIH1cblxuICBhdHRhY2hFdmVudHNFbWFpbENoYXQoYXBwLCBkYXRhKSB7XG4gICAgRW1haWxDaGF0LmF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpO1xuICB9XG5cblxuXG4gIHJlY2VpdmVFdmVudCh0eXBlLCBkYXRhKSB7XG5cbiAgICAvL1xuICAgIC8vIG5ldyBlbmNyeXB0aW9uIGNoYW5uZWwgb3BlbmVkXG4gICAgLy9cbiAgICBpZiAodHlwZSA9PT0gXCJlbmNyeXB0LWtleS1leGNoYW5nZS1jb25maXJtXCIpIHtcbiAgICAgIGlmIChkYXRhLnB1YmxpY2tleSA9PT0gdW5kZWZpbmVkKSB7IHJldHVybjsgfVxuICAgICAgdGhpcy5jcmVhdGVDaGF0R3JvdXAoZGF0YS5wdWJsaWNrZXkpO1xuICAgIH1cblxuICB9XG5cblxuXG5cbiAgY3JlYXRlQ2hhdEdyb3VwKHB1YmxpY2tleT1udWxsKSB7XG5cbiAgICBpZiAocHVibGlja2V5PT1udWxsKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IGNnID0gbmV3IENoYXRHcm91cCh0aGlzLmFwcCk7XG5cbiAgICBjZy5ncm91cF9tZW1iZXJzID0gW107XG4gICAgY2cuZ3JvdXBfbWVtYmVycy5wdXNoKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSk7XG4gICAgY2cuZ3JvdXBfbWVtYmVycy5wdXNoKHB1YmxpY2tleSk7XG4gICAgY2cuZ3JvdXBfbWVtYmVycy5zb3J0KCk7XG5cbiAgICBjZy5ncm91cF9pZCA9IHRoaXMuYXBwLmNyeXB0by5oYXNoKChjZy5ncm91cF9tZW1iZXJzWzBdICsgXCJfXCIgKyBjZy5ncm91cF9tZW1iZXJzWzFdKSk7XG4gICAgY2cuZ3JvdXBfbmFtZSA9IHB1YmxpY2tleS5zdWJzdHJpbmcoMCwgMTYpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuZ3JvdXBzW2ldLmdyb3VwX2lkID09IGNnLmdyb3VwX2lkKSB7IHJldHVybjsgfVxuICAgIH1cblxuICAgIGNnLmluaXRpYWxpemUodGhpcy5hcHApO1xuICAgIHRoaXMuZ3JvdXBzLnB1c2goY2cpO1xuXG4gICAgdGhpcy5zZW5kRXZlbnQoJ2NoYXQtcmVuZGVyLXJlcXVlc3QnLCB7fSk7XG5cbiAgfVxuXG5cblxuXG4gIC8vXG4gIC8vIG9uQ2hhaW4gbWVzc2FnZXMgcmVjZWl2ZWQgb24gdGhlIGJsb2NrY2hhaW4gYXJyaXZlIGhlcmVcbiAgLy9cbiAgb25Db25maXJtYXRpb24oYmxrLCB0eCwgY29uZiwgYXBwKSB7XG5cbiAgICBsZXQgdHhtc2cgPSB0eC5yZXR1cm5NZXNzYWdlKCk7XG4gICAgbGV0IGNoYXRfc2VsZiA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIkNoYXRcIik7XG5cbiAgICBpZiAoY29uZiA9PSAwKSB7XG4gICAgICBpZiAodHhtc2cucmVxdWVzdCA9PSBcImNoYXQgbWVzc2FnZVwiKSB7XG4gICAgICAgIGlmICh0eC50cmFuc2FjdGlvbi5mcm9tWzBdLmFkZCA9PSBhcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGNoYXRfc2VsZi5ncm91cHMuZm9yRWFjaChncm91cCA9PiB7XG4gICAgICAgICAgaWYgKGdyb3VwLmdyb3VwX2lkID09IHR4bXNnLmdyb3VwX2lkKSB7XG4gICAgICAgICAgICAgIGxldCBtc2cgPSBPYmplY3QuYXNzaWduKHR4bXNnLCB7IHNpZzogdHgudHJhbnNhY3Rpb24uc2lnLCB0eXBlOiBcIm90aGVyc1wiIH0pO1xuICAgICAgICAgICAgICBncm91cC5tZXNzYWdlcy5wdXNoKG1zZyk7XG4gICAgICAgICAgICAgIGFwcC5jb25uZWN0aW9uLmVtaXQoJ2NoYXRfcmVjZWl2ZV9tZXNzYWdlJywgbXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuXG4gIC8vXG4gIC8vIG1lc3NhZ2VzIHJlY2VpdmVkIHBlZXItdG8tcGVlciBhcnJpdmUgaGVyZVxuICAvL1xuICBoYW5kbGVQZWVyUmVxdWVzdChhcHAsIHJlcSwgcGVlciwgbXljYWxsYmFjaykge1xuXG4gICAgaWYgKHJlcS5yZXF1ZXN0ID09IG51bGwpIHsgcmV0dXJuOyB9XG4gICAgaWYgKHJlcS5kYXRhID09IG51bGwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgdHggPSBuZXcgc2FpdG8udHJhbnNhY3Rpb24oSlNPTi5wYXJzZShyZXEuZGF0YSkpO1xuXG4gICAgdHJ5IHtcblxuICAgICAgc3dpdGNoIChyZXEucmVxdWVzdCkge1xuXG4gICAgICAgIGNhc2UgXCJjaGF0IG1lc3NhZ2VcIjpcblx0ICB0aGlzLmNoYXRSZWNlaXZlTWVzc2FnZShhcHAsIHR4KTtcbiAgXHQgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJjaGF0IGxvYWQgbWVzc2FnZXNcIjpcblx0ICB0aGlzLmNoYXRMb2FkTWVzc2FnZXMoYXBwLCB0eCk7XG4gIFx0ICBicmVhaztcblxuICAgICAgICBjYXNlIFwiY2hhdCByZXF1ZXN0IG1lc3NhZ2VzXCI6XG5cdCAgdGhpcy5jaGF0TG9hZE1lc3NhZ2VzKGFwcCwgdHgpO1xuICBcdCAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcblx0ICBicmVhaztcblxuICAgICAgfVxuXG4gICAgICBpZiAobXljYWxsYmFjaykge1xuICAgICAgICBteWNhbGxiYWNrKHtcbiAgICAgICAgICBcInBheWxvYWRcIjogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBcImVycm9yXCI6IHt9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICB9IGNhdGNoKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH1cblxuXG5cblxuXG4gIGNoYXRMb2FkTWVzc2FnZXMoYXBwLCB0eCkge1xuXG4gICAgbGV0IHR4bXNnID0gdHgucmV0dXJuTWVzc2FnZSgpO1xuXG4vLyAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR4bXNnLm51bWJlcl9vZl9yb29tc190b191cGRhdGU7IGkrKykge1xuLy8gICAgICB0aGlzLmNoYXRSZWNlaXZlTWVzc2FnZSh0eG1zZy5udW1iZXJbaV0pO1xuLy8gICAgfVxuXG4gIH1cblxuXG5cbiAgYXN5bmMgY2hhdFJlcXVlc3RNZXNzYWdlcyhhcHAsIHR4KSB7XG5cbi8qXG4gICAgbGV0IHR4bXNnID0gdHgucmV0dXJuTWVzc2FnZSgpO1xuXG4gICAgaWYgKCFhcHAuc3RvcmFnZS5kb2VzRGF0YWJhc2VFeGlzdChcImNoYXRcIikpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgc3FsICAgID0gXCJTRUxFQ1QgKiBGUk9NIHJvb21zIFdIRVJFIHB1YmxpY2tleSA9ICRwdWJsaWNrZXlcIjtcbiAgICBsZXQgcGFyYW1zID0geyAkcHVibGlja2V5IDogdHhtc2cuc2VuZGVyIH1cbiAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGFwcC5zdG9yYWdlLnJldHVybkFycmF5RnJvbURhdGFiYXNlKHNxbCwgcGFyYW1zLCBcImNoYXRcIik7XG5cbiAgICBsZXQgcm9vbXMgPSBbXTtcblxuICAgIHJvb21zLnB1c2goe1xuICAgICAgbmFtZTogXCJBTExcIixcbiAgICAgIHV1aWQ6IFwiNTIzNDA5MjM0ODMwOTgyMzUyNSBGSVggVEhJU1wiXG4gICAgfSk7XG5cbiAgICBwYXlsb2FkLnJvb21zID0gcm9vbXMubWFwKGFzeW5jIHJvb20gPT4ge1xuICAgICAgICBsZXQgeyB1dWlkLCBuYW1lIH0gPSByb29tO1xuICAgICAgICBsZXQgYWRkcmVzc2VzID0gYXdhaXQgdGhpcy5kYi5hbGwoXG4gICAgICAgICAgXCJTRUxFQ1QgcHVibGlja2V5IGZyb20gcm9vbXMgV0hFUkUgdXVpZCA9ICR1dWlkXCIsXG4gICAgICAgICAgeyAkdXVpZDogdXVpZCB9XG4gICAgICAgICk7XG4gICAgICAgIGxldCBtZXNzYWdlcyA9IGF3YWl0IHRoaXMuZGIuYWxsKFxuICAgICAgICAgIFwiU0VMRUNUICogRlJPTSByZWNvcmRzIFdIRVJFIHJvb21faWQgPSAkcm9vbV9pZCBPUkRFUiBCWSBpZCBERVNDIExJTUlUIDUwXCIsXG4gICAgICAgICAgeyAkcm9vbV9pZDogdXVpZCB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcm9vbV9pZDogdXVpZCxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIGFkZHJlc3NlczogYWRkcmVzc2VzLm1hcChhZGRyZXNzID0+IGFkZHJlc3MucHVibGlja2V5KS5maWx0ZXIocHVibGlja2V5ID0+IHB1YmxpY2tleSAhPSBudWxsKSxcbiAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMucmV2ZXJzZSgpXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgcGF5bG9hZC5yb29tcyA9IGF3YWl0IFByb21pc2UuYWxsKHBheWxvYWQucm9vbXMpO1xuXG5cbiAgICAvL1xuICAgIC8vIHJlbGF5IHRoZSByZXN1bHRzIGJhY2tcbiAgICAvL1xuICAgIGxldCBuZXd0eCA9IG5ldyBzYWl0by50cmFuc2FjdGlvbigpO1xuICAgIGxldCBwYXlsb2FkX2RhdGFfaGVyZTtcbiAgICBuZXd0eC5tc2cgPSB7fTtcbiAgICBuZXd0eC5tc2cucmVxdWVzdCA9IFwiY2hhdCBsb2FkIG1lc3NhZ2VzXCI7XG4gICAgdGhpcy5hcHAubmV0d29yay5zZW5kUGVlclJlcXVlc3RUb1BlZXIoc2VuZGVyLCB0eCk7XG4qL1xuXG4gIH1cblxuXG5cblxuXG4gIGNoYXRSZWNlaXZlTWVzc2FnZShhcHAsIHR4KSB7XG4vKlxuICAgIGxldCB0eG1zZyA9IHR4LnJldHVybk1lc3NhZ2UoKTtcblxuICAgIGxldCBzZW5kZXIgICA9IHR4bXNnLnNlbmRlcjtcbiAgICBsZXQgcmVjZWl2ZXIgPSB0eG1zZy5yZWNlaXZlcjtcbiAgICBsZXQgcm9vbSBcdCA9IHR4bXNnLnJvb207XG5cbiAgICAvL1xuICAgIC8vIGVhY2ggY2hhdCBncm91cFxuICAgIC8vXG4gICAgbGV0IHJvb21faWQgPSB0aGlzLmFwcC5jcnlwdG8uaGFzaChyb29tKTtcblxuICAgIC8vXG4gICAgLy8gc2VydmVycywgc2F2ZSB0aGUgZGF0YSBhbmQgcmVsYXlcbiAgICAvL1xuICAgIGlmIChpX2FtX25vdF9hX3BhcnR5X3RvX3RoaXNfY2hhdCkge1xuXG4gICAgICAvL1xuICAgICAgLy8gc2F2ZSB0byBkYXRhYmFzZSBmb3IgbXkgZnJpZW5kc1xuICAgICAgLy9cbiAgICAgIGxldCByb29tX3NxbCA9IGBJTlNFUlQgT1IgSUdOT1JFIGludG8gcm9vbXMgKHV1aWQsIG5hbWUsIHB1YmxpY2tleSwgdHgpIFZBTFVFUyAoJHV1aWQsICRuYW1lLCAkcHVibGlja2V5LCAkdHgpYDtcbiAgICAgIGxldCBwYXJhbXMgICA9IHt9O1xuICAgICAgdGhpcy5hcHAuc3RvcmFnZS5pbnNlcnREYXRhYmFzZUVudHJ5T25EYXRhYmFzZShyb29tX3NxbCwgcGFyYW1zLCBcImNoYXRcIik7XG5cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBjcmVhdGUgbW9kdWxlIHRvIGhhbmRsZSBjaGF0XG4gICAgICAvL1xuICAgICAgbGV0IGNoYXRyb29tID0gdGhpcy5hcHAubW9kdWxlcy5yZXR1cm5Nb2R1bGUocm9vbV9pZCk7XG4gICAgICBpZiAoY2hhdHJvb20gPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmFwcC5tb2R1bGVzLnB1c2gobmV3IHNhaXRvLmNoYXQocm9vbV9pZCkpXG4gICAgICAgIGNoYXRyb29tID0gdGhpcy5hcHAubW9kdWxlcy5yZXR1cm5Nb2R1bGUocm9vbV9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vXG4gICAgICAvLyBzZW5kIGluZm9ybWF0aW9uIHRvIHRoaXMgY2hhdCBtb2R1bGVcbiAgICAgIC8vXG4gICAgICBjaGF0cm9vbS5hZGRNZXNzYWdlKGFwcCwgdHgpO1xuXG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyByZWxheSB0aGUgY2hhdCBtZXNzYWdlXG4gICAgLy9cbiAgICB0aGlzLmFwcC5uZXR3b3JrLnNlbmRQZWVyUmVxdWVzdFRvUGVlcihyZWNlaXZlciwgdHgpO1xuKi9cbiAgfVxuXG5cbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXQ7XG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBVEE7QUFXQTtBQUNBOzs7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7OztBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBTUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBTUE7QUFFQTtBQUdBO0FBQ0E7QUFFQTs7Ozs7O0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdEQTs7OztBQXZTQTtBQUNBO0FBNFNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/chat.js\n");
---
> eval("function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; ***REMOVED***; ***REMOVED*** else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; ***REMOVED***; ***REMOVED*** return _typeof(obj); ***REMOVED***\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; ***REMOVED*** return _assertThisInitialized(self); ***REMOVED***\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); ***REMOVED*** return self; ***REMOVED***\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; ***REMOVED*** else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); ***REMOVED*** return desc.value; ***REMOVED***; ***REMOVED*** return _get(target, property, receiver || target); ***REMOVED***\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; ***REMOVED*** return object; ***REMOVED***\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); ***REMOVED***; return _getPrototypeOf(o); ***REMOVED***\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); ***REMOVED*** subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true ***REMOVED*** ***REMOVED***); if (superClass) _setPrototypeOf(subClass, superClass); ***REMOVED***\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; ***REMOVED***; return _setPrototypeOf(o, p); ***REMOVED***\n\nvar saito = __webpack_require__(/*! ../../lib/saito/saito.js */ \"./lib/saito/saito.js\");\n\nvar ModTemplate = __webpack_require__(/*! ../../lib/templates/modtemplate */ \"./lib/templates/modtemplate.js\");\n\nvar ChatGroup = __webpack_require__(/*! ./lib/chatgroup */ \"./mods/chat/lib/chatgroup.js\");\n\nvar EmailChat = __webpack_require__(/*! ./lib/email-chat/email-chat */ \"./mods/chat/lib/email-chat/email-chat.js\");\n\nvar Header = __webpack_require__(/*! ../../lib/ui/header/header */ \"./lib/ui/header/header.js\");\n\nvar ChatMain = __webpack_require__(/*! ./lib/chat-main/chat-main */ \"./mods/chat/lib/chat-main/chat-main.js\");\n\nvar Chat =\n/*#__PURE__*/\nfunction (_ModTemplate) {\n  _inherits(Chat, _ModTemplate);\n\n  function Chat(app) {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, app));\n    _this.name = \"Chat\";\n    _this.events = ['encrypt-key-exchange-confirm']; //\n    // data managed by chat manager\n    //\n\n    _this.groups = [];\n    _this.uidata = {***REMOVED***;\n    return _this;\n  ***REMOVED***\n\n  _createClass(Chat, [{\n    key: \"initialize\",\n    value: function initialize(app) {\n      _get(_getPrototypeOf(Chat.prototype), \"initialize\", this).call(this, app); //\n      // create chatgroups from keychain\n      //\n\n\n      var keys = this.app.keys.returnKeys();\n\n      for (var i = 0; i < keys.length; i++) {\n        this.createChatGroup(keys[i].publickey);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"initializeHTML\",\n    value: function initializeHTML(app) {\n      _get(_getPrototypeOf(Chat.prototype), \"initializeHTML\", this).call(this, app);\n\n      Header.render(app, this.uidata);\n      Header.attachEvents(app, this.uidata);\n      document.body.requestFullscreen();\n      this.uidata.chat = {***REMOVED***;\n      this.uidata.chat.groups = this.groups;\n      this.uidata.chat.active = \"chat_list\";\n      ChatMain.render(app, this.uidata);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"respondTo\",\n    value: function respondTo(type) {\n      if (type == 'email-chat') {\n        var obj = {***REMOVED***;\n        obj.render = this.renderEmailChat;\n        obj.attachEvents = this.attachEventsEmailChat;\n        return obj;\n  ***REMOVED***\n\n      return null;\n***REMOVED*** ////////////////\n    // eMail Chat //\n    ////////////////\n\n  ***REMOVED***, {\n    key: \"renderEmailChat\",\n    value: function renderEmailChat(app, data) {\n      var chat_self = app.modules.returnModule(\"Chat\");\n      data.chat = {***REMOVED***;\n      data.chat.groups = chat_self.groups;\n      EmailChat.initialize(app, data);\n      EmailChat.render(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attachEventsEmailChat\",\n    value: function attachEventsEmailChat(app, data) {\n      EmailChat.attachEvents(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"receiveEvent\",\n    value: function receiveEvent(type, data) {\n      //\n      // new encryption channel opened\n      //\n      if (type === \"encrypt-key-exchange-confirm\") {\n        if (data.publickey === undefined) {\n          return;\n    ***REMOVED***\n\n        this.createChatGroup(data.publickey);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"createChatGroup\",\n    value: function createChatGroup() {\n      var publickey = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (publickey == null) {\n        return;\n  ***REMOVED***\n\n      var cg = new ChatGroup(this.app);\n      cg.group_members = [];\n      cg.group_members.push(this.app.wallet.returnPublicKey());\n      cg.group_members.push(publickey);\n      cg.group_members.sort();\n      cg.group_id = this.app.crypto.hash(cg.group_members[0] + \"_\" + cg.group_members[1]);\n      cg.group_name = publickey.substring(0, 16);\n\n      for (var i = 0; i < this.groups.length; i++) {\n        if (this.groups[i].group_id == cg.group_id) {\n          return;\n    ***REMOVED***\n  ***REMOVED***\n\n      cg.initialize(this.app);\n      this.groups.push(cg);\n      this.sendEvent('chat-render-request', {***REMOVED***);\n***REMOVED*** //\n    // onChain messages received on the blockchain arrive here\n    //\n\n  ***REMOVED***, {\n    key: \"onConfirmation\",\n    value: function onConfirmation(blk, tx, conf, app) {\n      var txmsg = tx.returnMessage();\n      var chat_self = app.modules.returnModule(\"Chat\");\n\n      if (conf == 0) {\n        if (txmsg.request == \"chat message\") {\n          if (tx.transaction.from[0].add == app.wallet.returnPublicKey()) {\n            return;\n      ***REMOVED***\n\n          chat_self.groups.forEach(function (group) {\n            if (group.group_id == txmsg.group_id) {\n              var msg = Object.assign(txmsg, {\n                sig: tx.transaction.sig,\n                type: \"others\"\n          ***REMOVED***);\n              group.messages.push(msg);\n              app.connection.emit('chat_receive_message', msg);\n        ***REMOVED***\n      ***REMOVED***);\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED*** //\n    // messages received peer-to-peer arrive here\n    //\n\n  ***REMOVED***, {\n    key: \"handlePeerRequest\",\n    value: function handlePeerRequest(app, req, peer, mycallback) {\n      if (req.request == null) {\n        return;\n  ***REMOVED***\n\n      if (req.data == null) {\n        return;\n  ***REMOVED***\n\n      var tx = new saito.transaction(JSON.parse(req.data));\n\n      try {\n        switch (req.request) {\n          case \"chat message\":\n            this.chatReceiveMessage(app, tx);\n            break;\n\n          case \"chat load messages\":\n            this.chatLoadMessages(app, tx);\n            break;\n\n          case \"chat request messages\":\n            this.chatLoadMessages(app, tx);\n            break;\n\n          default:\n            break;\n    ***REMOVED***\n\n        if (mycallback) {\n          mycallback({\n            \"payload\": \"success\",\n            \"error\": {***REMOVED***\n      ***REMOVED***);\n    ***REMOVED***\n\n        ;\n  ***REMOVED*** catch (err) {\n        console.log(err);\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"chatLoadMessages\",\n    value: function chatLoadMessages(app, tx) {\n      var txmsg = tx.returnMessage(); //    for (let i = 0; i < txmsg.number_of_rooms_to_update; i++) {\n      //      this.chatReceiveMessage(txmsg.number[i]);\n      //***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"chatRequestMessages\",\n    value: function () {\n      var _chatRequestMessages = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(app, tx) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee);\n  ***REMOVED***));\n\n      function chatRequestMessages(_x, _x2) {\n        return _chatRequestMessages.apply(this, arguments);\n  ***REMOVED***\n\n      return chatRequestMessages;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"chatReceiveMessage\",\n    value: function chatReceiveMessage(app, tx) {\n      /*\n  ***REMOVED***\n      \n          let sender   = txmsg.sender;\n          let receiver = txmsg.receiver;\n          let room \t = txmsg.room;\n      \n  ***REMOVED***\n  ***REMOVED*** each chat group\n  ***REMOVED***\n          let room_id = this.app.crypto.hash(room);\n      \n  ***REMOVED***\n  ***REMOVED*** servers, save the data and relay\n  ***REMOVED***\n          if (i_am_not_a_party_to_this_chat) {\n      \n    ***REMOVED***\n    ***REMOVED*** save to database for my friends\n    ***REMOVED***\n            let room_sql = `INSERT OR IGNORE into rooms (uuid, name, publickey, tx) VALUES ($uuid, $name, $publickey, $tx)`;\n            let params   = {***REMOVED***;\n            this.app.storage.insertDatabaseEntryOnDatabase(room_sql, params, \"chat\");\n      \n      \n      ***REMOVED*** else {\n      \n    ***REMOVED***\n    ***REMOVED*** create module to handle chat\n    ***REMOVED***\n            let chatroom = this.app.modules.returnModule(room_id);\n            if (chatroom == null) {\n              this.app.modules.push(new saito.chat(room_id))\n              chatroom = this.app.modules.returnModule(room_id);\n        ***REMOVED***\n      \n    ***REMOVED***\n    ***REMOVED*** send information to this chat module\n    ***REMOVED***\n            chatroom.addMessage(app, tx);\n      \n      ***REMOVED***\n      \n  ***REMOVED***\n  ***REMOVED*** relay the chat message\n  ***REMOVED***\n          this.app.network.sendPeerRequestToPeer(receiver, tx);\n      */\n***REMOVED***\n  ***REMOVED***]);\n\n  return Chat;\n***REMOVED***(ModTemplate);\n\nmodule.exports = Chat;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvY2hhdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9jaGF0LmpzPzE2ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2FpdG8gPSByZXF1aXJlKCcuLi8uLi9saWIvc2FpdG8vc2FpdG8uanMnKTtcbmNvbnN0IE1vZFRlbXBsYXRlID0gcmVxdWlyZSgnLi4vLi4vbGliL3RlbXBsYXRlcy9tb2R0ZW1wbGF0ZScpO1xuY29uc3QgQ2hhdEdyb3VwID0gcmVxdWlyZSgnLi9saWIvY2hhdGdyb3VwJyk7XG5jb25zdCBFbWFpbENoYXQgPSByZXF1aXJlKCcuL2xpYi9lbWFpbC1jaGF0L2VtYWlsLWNoYXQnKTtcblxuY29uc3QgSGVhZGVyID0gcmVxdWlyZSgnLi4vLi4vbGliL3VpL2hlYWRlci9oZWFkZXInKTtcbmNvbnN0IENoYXRNYWluID0gcmVxdWlyZSgnLi9saWIvY2hhdC1tYWluL2NoYXQtbWFpbicpO1xuXG5jbGFzcyBDaGF0IGV4dGVuZHMgTW9kVGVtcGxhdGUge1xuXG4gIGNvbnN0cnVjdG9yKGFwcCkge1xuXG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLm5hbWUgPSBcIkNoYXRcIjtcbiAgICB0aGlzLmV2ZW50cyA9IFsnZW5jcnlwdC1rZXktZXhjaGFuZ2UtY29uZmlybSddO1xuXG4gICAgLy9cbiAgICAvLyBkYXRhIG1hbmFnZWQgYnkgY2hhdCBtYW5hZ2VyXG4gICAgLy9cbiAgICB0aGlzLmdyb3VwcyA9IFtdO1xuXG4gICAgdGhpcy51aWRhdGEgPSB7fTtcblxuICB9XG5cbiAgaW5pdGlhbGl6ZShhcHApIHtcblxuICAgIHN1cGVyLmluaXRpYWxpemUoYXBwKTtcblxuICAgIC8vXG4gICAgLy8gY3JlYXRlIGNoYXRncm91cHMgZnJvbSBrZXljaGFpblxuICAgIC8vXG4gICAgbGV0IGtleXMgPSB0aGlzLmFwcC5rZXlzLnJldHVybktleXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuY3JlYXRlQ2hhdEdyb3VwKGtleXNbaV0ucHVibGlja2V5KTtcbiAgICB9XG5cbiAgfVxuXG4gIGluaXRpYWxpemVIVE1MKGFwcCkge1xuICAgIHN1cGVyLmluaXRpYWxpemVIVE1MKGFwcCk7XG5cbiAgICBIZWFkZXIucmVuZGVyKGFwcCwgdGhpcy51aWRhdGEpO1xuICAgIEhlYWRlci5hdHRhY2hFdmVudHMoYXBwLCB0aGlzLnVpZGF0YSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LnJlcXVlc3RGdWxsc2NyZWVuKCk7XG5cbiAgICB0aGlzLnVpZGF0YS5jaGF0ID0ge307XG4gICAgdGhpcy51aWRhdGEuY2hhdC5ncm91cHMgPSB0aGlzLmdyb3VwcztcblxuICAgIHRoaXMudWlkYXRhLmNoYXQuYWN0aXZlID0gXCJjaGF0X2xpc3RcIjtcblxuICAgIENoYXRNYWluLnJlbmRlcihhcHAsIHRoaXMudWlkYXRhKTtcbiAgfVxuXG5cbiAgcmVzcG9uZFRvKHR5cGUpIHtcblxuICAgIGlmICh0eXBlID09ICdlbWFpbC1jaGF0Jykge1xuICAgICAgbGV0IG9iaiA9IHt9O1xuICAgICAgICAgIG9iai5yZW5kZXIgPSB0aGlzLnJlbmRlckVtYWlsQ2hhdDtcbiAgICAgICAgICBvYmouYXR0YWNoRXZlbnRzID0gdGhpcy5hdHRhY2hFdmVudHNFbWFpbENoYXQ7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cblxuXG4gIC8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gZU1haWwgQ2hhdCAvL1xuICAvLy8vLy8vLy8vLy8vLy8vXG4gIHJlbmRlckVtYWlsQ2hhdChhcHAsIGRhdGEpIHtcbiAgICBsZXQgY2hhdF9zZWxmID0gYXBwLm1vZHVsZXMucmV0dXJuTW9kdWxlKFwiQ2hhdFwiKTtcblxuICAgIGRhdGEuY2hhdCA9IHt9O1xuICAgIGRhdGEuY2hhdC5ncm91cHMgPSBjaGF0X3NlbGYuZ3JvdXBzO1xuXG4gICAgRW1haWxDaGF0LmluaXRpYWxpemUoYXBwLCBkYXRhKTtcbiAgICBFbWFpbENoYXQucmVuZGVyKGFwcCwgZGF0YSk7XG4gIH1cblxuICBhdHRhY2hFdmVudHNFbWFpbENoYXQoYXBwLCBkYXRhKSB7XG4gICAgRW1haWxDaGF0LmF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpO1xuICB9XG5cblxuXG4gIHJlY2VpdmVFdmVudCh0eXBlLCBkYXRhKSB7XG5cbiAgICAvL1xuICAgIC8vIG5ldyBlbmNyeXB0aW9uIGNoYW5uZWwgb3BlbmVkXG4gICAgLy9cbiAgICBpZiAodHlwZSA9PT0gXCJlbmNyeXB0LWtleS1leGNoYW5nZS1jb25maXJtXCIpIHtcbiAgICAgIGlmIChkYXRhLnB1YmxpY2tleSA9PT0gdW5kZWZpbmVkKSB7IHJldHVybjsgfVxuICAgICAgdGhpcy5jcmVhdGVDaGF0R3JvdXAoZGF0YS5wdWJsaWNrZXkpO1xuICAgIH1cblxuICB9XG5cblxuXG5cbiAgY3JlYXRlQ2hhdEdyb3VwKHB1YmxpY2tleT1udWxsKSB7XG5cbiAgICBpZiAocHVibGlja2V5PT1udWxsKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IGNnID0gbmV3IENoYXRHcm91cCh0aGlzLmFwcCk7XG5cbiAgICBjZy5ncm91cF9tZW1iZXJzID0gW107XG4gICAgY2cuZ3JvdXBfbWVtYmVycy5wdXNoKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSk7XG4gICAgY2cuZ3JvdXBfbWVtYmVycy5wdXNoKHB1YmxpY2tleSk7XG4gICAgY2cuZ3JvdXBfbWVtYmVycy5zb3J0KCk7XG5cbiAgICBjZy5ncm91cF9pZCA9IHRoaXMuYXBwLmNyeXB0by5oYXNoKChjZy5ncm91cF9tZW1iZXJzWzBdICsgXCJfXCIgKyBjZy5ncm91cF9tZW1iZXJzWzFdKSk7XG4gICAgY2cuZ3JvdXBfbmFtZSA9IHB1YmxpY2tleS5zdWJzdHJpbmcoMCwgMTYpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuZ3JvdXBzW2ldLmdyb3VwX2lkID09IGNnLmdyb3VwX2lkKSB7IHJldHVybjsgfVxuICAgIH1cblxuICAgIGNnLmluaXRpYWxpemUodGhpcy5hcHApO1xuICAgIHRoaXMuZ3JvdXBzLnB1c2goY2cpO1xuXG4gICAgdGhpcy5zZW5kRXZlbnQoJ2NoYXQtcmVuZGVyLXJlcXVlc3QnLCB7fSk7XG5cbiAgfVxuXG5cblxuXG4gIC8vXG4gIC8vIG9uQ2hhaW4gbWVzc2FnZXMgcmVjZWl2ZWQgb24gdGhlIGJsb2NrY2hhaW4gYXJyaXZlIGhlcmVcbiAgLy9cbiAgb25Db25maXJtYXRpb24oYmxrLCB0eCwgY29uZiwgYXBwKSB7XG5cbiAgICBsZXQgdHhtc2cgPSB0eC5yZXR1cm5NZXNzYWdlKCk7XG4gICAgbGV0IGNoYXRfc2VsZiA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIkNoYXRcIik7XG5cbiAgICBpZiAoY29uZiA9PSAwKSB7XG4gICAgICBpZiAodHhtc2cucmVxdWVzdCA9PSBcImNoYXQgbWVzc2FnZVwiKSB7XG4gICAgICAgIGlmICh0eC50cmFuc2FjdGlvbi5mcm9tWzBdLmFkZCA9PSBhcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGNoYXRfc2VsZi5ncm91cHMuZm9yRWFjaChncm91cCA9PiB7XG4gICAgICAgICAgaWYgKGdyb3VwLmdyb3VwX2lkID09IHR4bXNnLmdyb3VwX2lkKSB7XG4gICAgICAgICAgICAgIGxldCBtc2cgPSBPYmplY3QuYXNzaWduKHR4bXNnLCB7IHNpZzogdHgudHJhbnNhY3Rpb24uc2lnLCB0eXBlOiBcIm90aGVyc1wiIH0pO1xuICAgICAgICAgICAgICBncm91cC5tZXNzYWdlcy5wdXNoKG1zZyk7XG4gICAgICAgICAgICAgIGFwcC5jb25uZWN0aW9uLmVtaXQoJ2NoYXRfcmVjZWl2ZV9tZXNzYWdlJywgbXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuXG4gIC8vXG4gIC8vIG1lc3NhZ2VzIHJlY2VpdmVkIHBlZXItdG8tcGVlciBhcnJpdmUgaGVyZVxuICAvL1xuICBoYW5kbGVQZWVyUmVxdWVzdChhcHAsIHJlcSwgcGVlciwgbXljYWxsYmFjaykge1xuXG4gICAgaWYgKHJlcS5yZXF1ZXN0ID09IG51bGwpIHsgcmV0dXJuOyB9XG4gICAgaWYgKHJlcS5kYXRhID09IG51bGwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgdHggPSBuZXcgc2FpdG8udHJhbnNhY3Rpb24oSlNPTi5wYXJzZShyZXEuZGF0YSkpO1xuXG4gICAgdHJ5IHtcblxuICAgICAgc3dpdGNoIChyZXEucmVxdWVzdCkge1xuXG4gICAgICAgIGNhc2UgXCJjaGF0IG1lc3NhZ2VcIjpcblx0ICB0aGlzLmNoYXRSZWNlaXZlTWVzc2FnZShhcHAsIHR4KTtcbiAgXHQgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJjaGF0IGxvYWQgbWVzc2FnZXNcIjpcblx0ICB0aGlzLmNoYXRMb2FkTWVzc2FnZXMoYXBwLCB0eCk7XG4gIFx0ICBicmVhaztcblxuICAgICAgICBjYXNlIFwiY2hhdCByZXF1ZXN0IG1lc3NhZ2VzXCI6XG5cdCAgdGhpcy5jaGF0TG9hZE1lc3NhZ2VzKGFwcCwgdHgpO1xuICBcdCAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcblx0ICBicmVhaztcblxuICAgICAgfVxuXG4gICAgICBpZiAobXljYWxsYmFjaykge1xuICAgICAgICBteWNhbGxiYWNrKHtcbiAgICAgICAgICBcInBheWxvYWRcIjogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBcImVycm9yXCI6IHt9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICB9IGNhdGNoKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH1cblxuXG5cblxuXG4gIGNoYXRMb2FkTWVzc2FnZXMoYXBwLCB0eCkge1xuXG4gICAgbGV0IHR4bXNnID0gdHgucmV0dXJuTWVzc2FnZSgpO1xuXG4vLyAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR4bXNnLm51bWJlcl9vZl9yb29tc190b191cGRhdGU7IGkrKykge1xuLy8gICAgICB0aGlzLmNoYXRSZWNlaXZlTWVzc2FnZSh0eG1zZy5udW1iZXJbaV0pO1xuLy8gICAgfVxuXG4gIH1cblxuXG5cbiAgYXN5bmMgY2hhdFJlcXVlc3RNZXNzYWdlcyhhcHAsIHR4KSB7XG5cbi8qXG4gICAgbGV0IHR4bXNnID0gdHgucmV0dXJuTWVzc2FnZSgpO1xuXG4gICAgaWYgKCFhcHAuc3RvcmFnZS5kb2VzRGF0YWJhc2VFeGlzdChcImNoYXRcIikpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgc3FsICAgID0gXCJTRUxFQ1QgKiBGUk9NIHJvb21zIFdIRVJFIHB1YmxpY2tleSA9ICRwdWJsaWNrZXlcIjtcbiAgICBsZXQgcGFyYW1zID0geyAkcHVibGlja2V5IDogdHhtc2cuc2VuZGVyIH1cbiAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGFwcC5zdG9yYWdlLnJldHVybkFycmF5RnJvbURhdGFiYXNlKHNxbCwgcGFyYW1zLCBcImNoYXRcIik7XG5cbiAgICBsZXQgcm9vbXMgPSBbXTtcblxuICAgIHJvb21zLnB1c2goe1xuICAgICAgbmFtZTogXCJBTExcIixcbiAgICAgIHV1aWQ6IFwiNTIzNDA5MjM0ODMwOTgyMzUyNSBGSVggVEhJU1wiXG4gICAgfSk7XG5cbiAgICBwYXlsb2FkLnJvb21zID0gcm9vbXMubWFwKGFzeW5jIHJvb20gPT4ge1xuICAgICAgICBsZXQgeyB1dWlkLCBuYW1lIH0gPSByb29tO1xuICAgICAgICBsZXQgYWRkcmVzc2VzID0gYXdhaXQgdGhpcy5kYi5hbGwoXG4gICAgICAgICAgXCJTRUxFQ1QgcHVibGlja2V5IGZyb20gcm9vbXMgV0hFUkUgdXVpZCA9ICR1dWlkXCIsXG4gICAgICAgICAgeyAkdXVpZDogdXVpZCB9XG4gICAgICAgICk7XG4gICAgICAgIGxldCBtZXNzYWdlcyA9IGF3YWl0IHRoaXMuZGIuYWxsKFxuICAgICAgICAgIFwiU0VMRUNUICogRlJPTSByZWNvcmRzIFdIRVJFIHJvb21faWQgPSAkcm9vbV9pZCBPUkRFUiBCWSBpZCBERVNDIExJTUlUIDUwXCIsXG4gICAgICAgICAgeyAkcm9vbV9pZDogdXVpZCB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcm9vbV9pZDogdXVpZCxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIGFkZHJlc3NlczogYWRkcmVzc2VzLm1hcChhZGRyZXNzID0+IGFkZHJlc3MucHVibGlja2V5KS5maWx0ZXIocHVibGlja2V5ID0+IHB1YmxpY2tleSAhPSBudWxsKSxcbiAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMucmV2ZXJzZSgpXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgcGF5bG9hZC5yb29tcyA9IGF3YWl0IFByb21pc2UuYWxsKHBheWxvYWQucm9vbXMpO1xuXG5cbiAgICAvL1xuICAgIC8vIHJlbGF5IHRoZSByZXN1bHRzIGJhY2tcbiAgICAvL1xuICAgIGxldCBuZXd0eCA9IG5ldyBzYWl0by50cmFuc2FjdGlvbigpO1xuICAgIGxldCBwYXlsb2FkX2RhdGFfaGVyZTtcbiAgICBuZXd0eC5tc2cgPSB7fTtcbiAgICBuZXd0eC5tc2cucmVxdWVzdCA9IFwiY2hhdCBsb2FkIG1lc3NhZ2VzXCI7XG4gICAgdGhpcy5hcHAubmV0d29yay5zZW5kUGVlclJlcXVlc3RUb1BlZXIoc2VuZGVyLCB0eCk7XG4qL1xuXG4gIH1cblxuXG5cblxuXG4gIGNoYXRSZWNlaXZlTWVzc2FnZShhcHAsIHR4KSB7XG4vKlxuICAgIGxldCB0eG1zZyA9IHR4LnJldHVybk1lc3NhZ2UoKTtcblxuICAgIGxldCBzZW5kZXIgICA9IHR4bXNnLnNlbmRlcjtcbiAgICBsZXQgcmVjZWl2ZXIgPSB0eG1zZy5yZWNlaXZlcjtcbiAgICBsZXQgcm9vbSBcdCA9IHR4bXNnLnJvb207XG5cbiAgICAvL1xuICAgIC8vIGVhY2ggY2hhdCBncm91cFxuICAgIC8vXG4gICAgbGV0IHJvb21faWQgPSB0aGlzLmFwcC5jcnlwdG8uaGFzaChyb29tKTtcblxuICAgIC8vXG4gICAgLy8gc2VydmVycywgc2F2ZSB0aGUgZGF0YSBhbmQgcmVsYXlcbiAgICAvL1xuICAgIGlmIChpX2FtX25vdF9hX3BhcnR5X3RvX3RoaXNfY2hhdCkge1xuXG4gICAgICAvL1xuICAgICAgLy8gc2F2ZSB0byBkYXRhYmFzZSBmb3IgbXkgZnJpZW5kc1xuICAgICAgLy9cbiAgICAgIGxldCByb29tX3NxbCA9IGBJTlNFUlQgT1IgSUdOT1JFIGludG8gcm9vbXMgKHV1aWQsIG5hbWUsIHB1YmxpY2tleSwgdHgpIFZBTFVFUyAoJHV1aWQsICRuYW1lLCAkcHVibGlja2V5LCAkdHgpYDtcbiAgICAgIGxldCBwYXJhbXMgICA9IHt9O1xuICAgICAgdGhpcy5hcHAuc3RvcmFnZS5pbnNlcnREYXRhYmFzZUVudHJ5T25EYXRhYmFzZShyb29tX3NxbCwgcGFyYW1zLCBcImNoYXRcIik7XG5cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIC8vXG4gICAgICAvLyBjcmVhdGUgbW9kdWxlIHRvIGhhbmRsZSBjaGF0XG4gICAgICAvL1xuICAgICAgbGV0IGNoYXRyb29tID0gdGhpcy5hcHAubW9kdWxlcy5yZXR1cm5Nb2R1bGUocm9vbV9pZCk7XG4gICAgICBpZiAoY2hhdHJvb20gPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmFwcC5tb2R1bGVzLnB1c2gobmV3IHNhaXRvLmNoYXQocm9vbV9pZCkpXG4gICAgICAgIGNoYXRyb29tID0gdGhpcy5hcHAubW9kdWxlcy5yZXR1cm5Nb2R1bGUocm9vbV9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vXG4gICAgICAvLyBzZW5kIGluZm9ybWF0aW9uIHRvIHRoaXMgY2hhdCBtb2R1bGVcbiAgICAgIC8vXG4gICAgICBjaGF0cm9vbS5hZGRNZXNzYWdlKGFwcCwgdHgpO1xuXG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyByZWxheSB0aGUgY2hhdCBtZXNzYWdlXG4gICAgLy9cbiAgICB0aGlzLmFwcC5uZXR3b3JrLnNlbmRQZWVyUmVxdWVzdFRvUGVlcihyZWNlaXZlciwgdHgpO1xuKi9cbiAgfVxuXG5cbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXQ7XG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQVhBO0FBYUE7QUFDQTs7O0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBOzs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU1BO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQU1BO0FBRUE7QUFHQTtBQUNBO0FBRUE7Ozs7OztBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnREE7Ozs7QUF6VEE7QUFDQTtBQThUQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/chat/chat.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-list/chat-list-row.template.js":
> /*!*********************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-list/chat-list-row.template.js ***!
>   \*********************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports, __webpack_require__) {
> 
> eval("var datetimeFormatter = __webpack_require__(/*! ../../../../../lib/helpers/datetime_formatter */ \"./lib/helpers/datetime_formatter.js\");\n\nmodule.exports = ChatListRowTemplate = function ChatListRowTemplate(_ref) {\n  var name = _ref.name,\n      group_id = _ref.group_id,\n      message = _ref.message,\n      timestamp = _ref.timestamp;\n  var datetime = datetimeFormatter(timestamp);\n  return \"\\n    <div id=\\\"chat-row-\".concat(group_id, \"\\\" class=\\\"chat-row\\\">\\n      <img src=\\\"/saito/img/logo-color.svg\\\">\\n      <div class=\\\"chat-content\\\">\\n          <div class=\\\"chat-group-name\\\">\").concat(name, \"</div>\\n          <div class=\\\"chat-last-message\\\">\").concat(message.substring(0, 72), \"</div>\\n      </div>\\n      <div class=\\\"chat-last-message-timestamp\\\">\").concat(datetime.hours, \":\").concat(datetime.minutes, \"</div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzPzliN2YiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGF0ZXRpbWVGb3JtYXR0ZXIgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9saWIvaGVscGVycy9kYXRldGltZV9mb3JtYXR0ZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0TGlzdFJvd1RlbXBsYXRlID0gKHtuYW1lLCBncm91cF9pZCwgbWVzc2FnZSwgdGltZXN0YW1wfSkgPT4ge1xuXG4gIGxldCBkYXRldGltZSA9IGRhdGV0aW1lRm9ybWF0dGVyKHRpbWVzdGFtcCk7XG5cbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGlkPVwiY2hhdC1yb3ctJHtncm91cF9pZH1cIiBjbGFzcz1cImNoYXQtcm93XCI+XG4gICAgICA8aW1nIHNyYz1cIi9zYWl0by9pbWcvbG9nby1jb2xvci5zdmdcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWNvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1ncm91cC1uYW1lXCI+JHtuYW1lfTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWxhc3QtbWVzc2FnZVwiPiR7bWVzc2FnZS5zdWJzdHJpbmcoMCwgNzIpfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1sYXN0LW1lc3NhZ2UtdGltZXN0YW1wXCI+JHtkYXRldGltZS5ob3Vyc306JHtkYXRldGltZS5taW51dGVzfTwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBVUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-list/chat-list-row.template.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-list/chat-list.js":
> /*!********************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-list/chat-list.js ***!
>   \********************************************************/
> /*! no static exports found */
> /***/ (function(module, exports, __webpack_require__) {
> 
> eval("var ChatListTemplate = __webpack_require__(/*! ./chat-list.template */ \"./mods/chat/lib/chat-main/chat-list/chat-list.template.js\");\n\nvar ChatListRowTemplate = __webpack_require__(/*! ./chat-list-row.template */ \"./mods/chat/lib/chat-main/chat-list/chat-list-row.template.js\");\n\nvar ChatRoom = __webpack_require__(/*! ../chat-room/chat-room */ \"./mods/chat/lib/chat-main/chat-room/chat-room.js\"); // const ChatAdd = require('../chat-add/chatadd');\n\n\nmodule.exports = ChatList = {\n  render: function render(app, data) {\n    var chat_main = document.querySelector('.chat-main');\n\n    if (!chat_main) {\n      return;\n***REMOVED***\n\n    chat_main.innerHTML = ChatListTemplate(); // Object.values(data.chat.groups).forEach((group) => {\n    //     document.querySelector('.chat').innerHTML\n    //         += ChatListRowTemplate(group, group.messages[group.messages.length - 1]);\n    // ***REMOVED***);\n\n    data.chat.groups.forEach(function (group) {\n      var last_message = group.messages[group.messages.length - 1];\n      var message = '';\n      var timestamp = new Date().getTime();\n\n      if (last_message) {\n        message = last_message.message;\n        timestamp = last_message.ts;\n  ***REMOVED***\n\n      var msg = {\n        name: group.group_name,\n        group_id: group.group_id,\n        message: message,\n        timestamp: timestamp\n  ***REMOVED***;\n      document.querySelector('.chat').innerHTML += ChatListRowTemplate(msg);\n***REMOVED***); // this.bindDOMFunctionstoModule(mod);\n    // this.attachEvents(chat);\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {\n    // add click event to all of our existing chat rows\n    Array.from(document.getElementsByClassName('chat-row')).forEach(function (row) {\n      return row.addEventListener('click', function (e) {\n        var group_id = e.currentTarget.id;\n        data.chat.active_group_id = group_id;\n        ChatRoom.render(app, data);\n  ***REMOVED***);\n***REMOVED***); // add click event to create-button\n    // document.querySelector('#chat.create-button')\n    //         .addEventListener('click', ChatAdd.render);\n  ***REMOVED*** // persepctive of Module\n  // bindDOMFunctionstoModule(mod) {\n  //     mod.chat.renderChatList = this.renderChatList(mod);\n  //     mod.chat.addRoomToDOM = this.addRoomToDOM(mod);\n  // ***REMOVED***,\n  // renderChatList(mod) {\n  //     return function () {\n  //         Object.values(mod.chat.rooms).forEach((room) => {\n  //             document.querySelector('.chat').innerHTML\n  //                 += ChatListRowTemplate(room, room.messages[room.messages.length - 1]);\n  //     ***REMOVED***);\n  //         Array.from(document.getElementsByClassName('chat-row'))\n  //             .forEach(row => row.addEventListener('click', (e) => {\n  //                 let room_id = e.currentTarget.id;\n  //                 ChatRoom.render(mod, mod.chat.rooms[room_id]);\n  //         ***REMOVED***)\n  //         );\n  // ***REMOVED*** add click event to create-button\n  //         document.querySelector('#chat.create-button')\n  //                 .addEventListener('click', ChatAdd.render);\n  // ***REMOVED***\n  // ***REMOVED***,\n  // addRoomToDOM(mod) {\n  //     return function (room) {\n  //         var new_room_elem = document.createElement('div')\n  //         new_room_elem.innerHTML = ChatListRowTemplate(room, 0);\n  //         new_room_elem.addEventListener('click', () => {\n  //             let room_id = e.currentTarget.id;\n  //             ChatRoom.render(mod, mod.chat.rooms[room_id]);\n  //     ***REMOVED***);\n  //         document.querySelector('.chat').append(new_room_elem);\n  // ***REMOVED***\n  // ***REMOVED***\n\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1saXN0L2NoYXQtbGlzdC5qcz9mNGE0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENoYXRMaXN0VGVtcGxhdGUgPSByZXF1aXJlKCcuL2NoYXQtbGlzdC50ZW1wbGF0ZScpO1xuY29uc3QgQ2hhdExpc3RSb3dUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vY2hhdC1saXN0LXJvdy50ZW1wbGF0ZScpO1xuXG5jb25zdCBDaGF0Um9vbSA9IHJlcXVpcmUoJy4uL2NoYXQtcm9vbS9jaGF0LXJvb20nKTtcbi8vIGNvbnN0IENoYXRBZGQgPSByZXF1aXJlKCcuLi9jaGF0LWFkZC9jaGF0YWRkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhdExpc3QgPSB7XG4gICAgcmVuZGVyKGFwcCwgZGF0YSkge1xuICAgICAgICBsZXQgY2hhdF9tYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtbWFpbicpXG5cbiAgICAgICAgaWYgKCFjaGF0X21haW4pIHsgcmV0dXJuOyB9XG4gICAgICAgIGNoYXRfbWFpbi5pbm5lckhUTUwgPSBDaGF0TGlzdFRlbXBsYXRlKCk7XG5cbiAgICAgICAgLy8gT2JqZWN0LnZhbHVlcyhkYXRhLmNoYXQuZ3JvdXBzKS5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQnKS5pbm5lckhUTUxcbiAgICAgICAgLy8gICAgICAgICArPSBDaGF0TGlzdFJvd1RlbXBsYXRlKGdyb3VwLCBncm91cC5tZXNzYWdlc1tncm91cC5tZXNzYWdlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGRhdGEuY2hhdC5ncm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgICAgICAgIGxldCBsYXN0X21lc3NhZ2UgPSBncm91cC5tZXNzYWdlc1tncm91cC5tZXNzYWdlcy5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgIGxldCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgaWYgKGxhc3RfbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBsYXN0X21lc3NhZ2UubWVzc2FnZVxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IGxhc3RfbWVzc2FnZS50cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG1zZyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBncm91cC5ncm91cF9uYW1lLFxuICAgICAgICAgICAgICAgIGdyb3VwX2lkOiBncm91cC5ncm91cF9pZCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQnKS5pbm5lckhUTUxcbiAgICAgICAgICAgICAgICArPSBDaGF0TGlzdFJvd1RlbXBsYXRlKG1zZyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHRoaXMuYmluZERPTUZ1bmN0aW9uc3RvTW9kdWxlKG1vZCk7XG4gICAgICAgIC8vIHRoaXMuYXR0YWNoRXZlbnRzKGNoYXQpO1xuICAgIH0sXG5cbiAgICBhdHRhY2hFdmVudHMoYXBwLCBkYXRhKSB7XG4gICAgICAgIC8vIGFkZCBjbGljayBldmVudCB0byBhbGwgb2Ygb3VyIGV4aXN0aW5nIGNoYXQgcm93c1xuICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NoYXQtcm93JykpXG4gICAgICAgICAgICAgLmZvckVhY2gocm93ID0+IHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwX2lkID0gZS5jdXJyZW50VGFyZ2V0LmlkO1xuICAgICAgICAgICAgICAgIGRhdGEuY2hhdC5hY3RpdmVfZ3JvdXBfaWQgPSBncm91cF9pZDtcbiAgICAgICAgICAgICAgICBDaGF0Um9vbS5yZW5kZXIoYXBwLCBkYXRhKTtcbiAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGFkZCBjbGljayBldmVudCB0byBjcmVhdGUtYnV0dG9uXG4gICAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0LmNyZWF0ZS1idXR0b24nKVxuICAgICAgICAvLyAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENoYXRBZGQucmVuZGVyKTtcbiAgICB9LFxuXG4gICAgLy8gcGVyc2VwY3RpdmUgb2YgTW9kdWxlXG4gICAgLy8gYmluZERPTUZ1bmN0aW9uc3RvTW9kdWxlKG1vZCkge1xuICAgIC8vICAgICBtb2QuY2hhdC5yZW5kZXJDaGF0TGlzdCA9IHRoaXMucmVuZGVyQ2hhdExpc3QobW9kKTtcbiAgICAvLyAgICAgbW9kLmNoYXQuYWRkUm9vbVRvRE9NID0gdGhpcy5hZGRSb29tVG9ET00obW9kKTtcbiAgICAvLyB9LFxuXG4gICAgLy8gcmVuZGVyQ2hhdExpc3QobW9kKSB7XG4gICAgLy8gICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgICAgICBPYmplY3QudmFsdWVzKG1vZC5jaGF0LnJvb21zKS5mb3JFYWNoKChyb29tKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQnKS5pbm5lckhUTUxcbiAgICAvLyAgICAgICAgICAgICAgICAgKz0gQ2hhdExpc3RSb3dUZW1wbGF0ZShyb29tLCByb29tLm1lc3NhZ2VzW3Jvb20ubWVzc2FnZXMubGVuZ3RoIC0gMV0pO1xuICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAvLyAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY2hhdC1yb3cnKSlcbiAgICAvLyAgICAgICAgICAgICAuZm9yRWFjaChyb3cgPT4gcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgbGV0IHJvb21faWQgPSBlLmN1cnJlbnRUYXJnZXQuaWQ7XG4gICAgLy8gICAgICAgICAgICAgICAgIENoYXRSb29tLnJlbmRlcihtb2QsIG1vZC5jaGF0LnJvb21zW3Jvb21faWRdKTtcbiAgICAvLyAgICAgICAgICAgICB9KVxuICAgIC8vICAgICAgICAgKTtcblxuICAgIC8vICAgICAgICAgLy8gYWRkIGNsaWNrIGV2ZW50IHRvIGNyZWF0ZS1idXR0b25cbiAgICAvLyAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0LmNyZWF0ZS1idXR0b24nKVxuICAgIC8vICAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBDaGF0QWRkLnJlbmRlcik7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9LFxuXG4gICAgLy8gYWRkUm9vbVRvRE9NKG1vZCkge1xuICAgIC8vICAgICByZXR1cm4gZnVuY3Rpb24gKHJvb20pIHtcbiAgICAvLyAgICAgICAgIHZhciBuZXdfcm9vbV9lbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAvLyAgICAgICAgIG5ld19yb29tX2VsZW0uaW5uZXJIVE1MID0gQ2hhdExpc3RSb3dUZW1wbGF0ZShyb29tLCAwKTtcblxuICAgIC8vICAgICAgICAgbmV3X3Jvb21fZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvLyAgICAgICAgICAgICBsZXQgcm9vbV9pZCA9IGUuY3VycmVudFRhcmdldC5pZDtcbiAgICAvLyAgICAgICAgICAgICBDaGF0Um9vbS5yZW5kZXIobW9kLCBtb2QuY2hhdC5yb29tc1tyb29tX2lkXSk7XG4gICAgLy8gICAgICAgICB9KTtcblxuICAgIC8vICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQnKS5hcHBlbmQobmV3X3Jvb21fZWxlbSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBM0ZBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-list/chat-list.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-list/chat-list.template.js":
> /*!*****************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-list/chat-list.template.js ***!
>   \*****************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports) {
> 
> eval("module.exports = ChatListTemplate = function ChatListTemplate() {\n  return \"\\n      <div class=\\\"chat container\\\"></div>\\n      <button id=\\\"chat\\\" class=\\\"create-button\\\"><i class=\\\"fas fa-plus\\\"></i></button>\\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qcz8zYTdhIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gQ2hhdExpc3RUZW1wbGF0ZSA9ICgpID0+IHtcbiAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0IGNvbnRhaW5lclwiPjwvZGl2PlxuICAgICAgPGJ1dHRvbiBpZD1cImNoYXRcIiBjbGFzcz1cImNyZWF0ZS1idXR0b25cIj48aSBjbGFzcz1cImZhcyBmYS1wbHVzXCI+PC9pPjwvYnV0dG9uPlxuICBgO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-list/chat-list.template.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-main.js":
> /*!**********************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-main.js ***!
>   \**********************************************/
> /*! no static exports found */
> /***/ (function(module, exports, __webpack_require__) {
> 
> eval("var ChatList = __webpack_require__(/*! ./chat-list/chat-list */ \"./mods/chat/lib/chat-main/chat-list/chat-list.js\");\n\nvar ChatRoom = __webpack_require__(/*! ./chat-room/chat-room */ \"./mods/chat/lib/chat-main/chat-room/chat-room.js\");\n\nmodule.exports = ChatMain = {\n  render: function render(app, data) {\n    data.chat.main = this;\n\n    switch (data.chat.active) {\n      case 'chat_list':\n        ChatList.render(app, data);\n        ChatList.attachEvents(app, data);\n        break;\n\n      case 'chat_room':\n        ChatRoom.render(app, data);\n        ChatRoom.attachEvents(app, data);\n        break;\n\n      default:\n        break;\n***REMOVED***\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LW1haW4uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LW1haW4uanM/NGM3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDaGF0TGlzdCA9IHJlcXVpcmUoJy4vY2hhdC1saXN0L2NoYXQtbGlzdCcpO1xuY29uc3QgQ2hhdFJvb20gPSByZXF1aXJlKCcuL2NoYXQtcm9vbS9jaGF0LXJvb20nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0TWFpbiA9IHtcbiAgcmVuZGVyKGFwcCwgZGF0YSkge1xuICAgIGRhdGEuY2hhdC5tYWluID0gdGhpcztcblxuICAgIHN3aXRjaChkYXRhLmNoYXQuYWN0aXZlKSB7XG4gICAgICBjYXNlICdjaGF0X2xpc3QnOlxuICAgICAgICBDaGF0TGlzdC5yZW5kZXIoYXBwLCBkYXRhKTtcbiAgICAgICAgQ2hhdExpc3QuYXR0YWNoRXZlbnRzKGFwcCwgZGF0YSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2hhdF9yb29tJzpcbiAgICAgICAgQ2hhdFJvb20ucmVuZGVyKGFwcCwgZGF0YSk7XG4gICAgICAgIENoYXRSb29tLmF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9LFxuXG4gIGF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpIHtcblxuICB9XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFWQTtBQVlBO0FBRUE7QUFsQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-main.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-room/chat-message-container.template.js":
> /*!******************************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-room/chat-message-container.template.js ***!
>   \******************************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports, __webpack_require__) {
> 
> eval("var ChatRoomMessageTemplate = __webpack_require__(/*! ./chat-room-message.template */ \"./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js\");\n\nmodule.exports = ChatMessageContainerTemplate = function ChatMessageContainerTemplate(data, sig, type) {\n  return \"\\n    <div class=\\\"chat-message-container chat-message-\".concat(type, \"\\\">\\n      \").concat(ChatRoomMessageTemplate(data, sig, type), \"\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1tZXNzYWdlLWNvbnRhaW5lci50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LW1lc3NhZ2UtY29udGFpbmVyLnRlbXBsYXRlLmpzP2FmNjgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQ2hhdFJvb21NZXNzYWdlVGVtcGxhdGUgPSByZXF1aXJlKCcuL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhdE1lc3NhZ2VDb250YWluZXJUZW1wbGF0ZSA9IChkYXRhLCBzaWcsIHR5cGUpID0+IHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGNsYXNzPVwiY2hhdC1tZXNzYWdlLWNvbnRhaW5lciBjaGF0LW1lc3NhZ2UtJHt0eXBlfVwiPlxuICAgICAgJHtDaGF0Um9vbU1lc3NhZ2VUZW1wbGF0ZShkYXRhLCBzaWcsIHR5cGUpfVxuICAgIDwvZGl2PlxuICBgO1xufVxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-room/chat-message-container.template.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-room/chat-room-footer.template.js":
> /*!************************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-room/chat-room-footer.template.js ***!
>   \************************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports) {
> 
> eval("// import { modules ***REMOVED*** from \"../../../../../lib/saito/saito\";\nmodule.exports = ChatRoomFooterTemplate = function ChatRoomFooterTemplate() {\n  return \"\\n        <div class=\\\"chat-room-input\\\">\\n            <textarea id=\\\"input\\\" class=\\\"chat-room-input\\\"></textarea>\\n            <div class=\\\"chat-room-submit-button\\\"><i class=\\\"icon-small fas fa-arrow-right\\\"></i></div>\\n        </div>\\n    \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20tZm9vdGVyLnRlbXBsYXRlLmpzPzQ2ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsgbW9kdWxlcyB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9saWIvc2FpdG8vc2FpdG9cIjtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0Um9vbUZvb3RlclRlbXBsYXRlID0gKCkgPT4ge1xuICAgIHJldHVybiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LXJvb20taW5wdXRcIj5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cImlucHV0XCIgY2xhc3M9XCJjaGF0LXJvb20taW5wdXRcIj48L3RleHRhcmVhPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtcm9vbS1zdWJtaXQtYnV0dG9uXCI+PGkgY2xhc3M9XCJpY29uLXNtYWxsIGZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgYDtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQTtBQUNBO0FBTUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-room/chat-room-footer.template.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-room/chat-room-header.template.js":
> /*!************************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-room/chat-room-header.template.js ***!
>   \************************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports) {
> 
> eval("module.exports = ChatRoomHeaderTemplate = function ChatRoomHeaderTemplate(room_name) {\n  return \"\\n        <i id=\\\"back-button\\\" class=\\\"icon-med fas fa-arrow-left\\\"></i>\\n        <p class=\\\"chat-room-name\\\">\".concat(room_name, \"</p>\\n    \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvY2hhdC1tYWluL2NoYXQtcm9vbS9jaGF0LXJvb20taGVhZGVyLnRlbXBsYXRlLmpzP2Y4ZDkiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBDaGF0Um9vbUhlYWRlclRlbXBsYXRlID0gKHJvb21fbmFtZSkgPT4ge1xuICAgIHJldHVybiBgXG4gICAgICAgIDxpIGlkPVwiYmFjay1idXR0b25cIiBjbGFzcz1cImljb24tbWVkIGZhcyBmYS1hcnJvdy1sZWZ0XCI+PC9pPlxuICAgICAgICA8cCBjbGFzcz1cImNoYXQtcm9vbS1uYW1lXCI+JHtyb29tX25hbWV9PC9wPlxuICAgIGA7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-room/chat-room-header.template.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js":
> /*!*************************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js ***!
>   \*************************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports, __webpack_require__) {
> 
> eval("var datetimeFormatter = __webpack_require__(/*! ../../../../../lib/helpers/datetime_formatter */ \"./lib/helpers/datetime_formatter.js\");\n\nmodule.exports = ChatRoomMessageTemplate = function ChatRoomMessageTemplate(_ref, sig, type) {\n  var message = _ref.message,\n      publickey = _ref.publickey,\n      timestamp = _ref.timestamp;\n  var datetime = datetimeFormatter(timestamp);\n  return \"\\n    <div id=\\\"\".concat(sig, \"\\\" class=\\\"chat-room-message chat-room-message-\").concat(type, \"\\\">\\n      <p>\").concat(message, \"</p>\\n      <div class=\\\"chat-message-header\\\">\\n          <p class=\\\"chat-message-author\\\">\").concat(publickey.substring(0, 20), \"</p>\\n          <p class=\\\"chat-message-timestamp\\\">\").concat(datetime.hours, \":\").concat(datetime.minutes, \"</p>\\n      </div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUuanM/ZjYzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYXRldGltZUZvcm1hdHRlciA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2xpYi9oZWxwZXJzL2RhdGV0aW1lX2Zvcm1hdHRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXRSb29tTWVzc2FnZVRlbXBsYXRlID0gKHsgbWVzc2FnZSwgcHVibGlja2V5LCB0aW1lc3RhbXAgfSwgc2lnLCB0eXBlKSA9PiB7XG4gIGxldCBkYXRldGltZSA9IGRhdGV0aW1lRm9ybWF0dGVyKHRpbWVzdGFtcCk7XG4gIHJldHVybiBgXG4gICAgPGRpdiBpZD1cIiR7c2lnfVwiIGNsYXNzPVwiY2hhdC1yb29tLW1lc3NhZ2UgY2hhdC1yb29tLW1lc3NhZ2UtJHt0eXBlfVwiPlxuICAgICAgPHA+JHttZXNzYWdlfTwvcD5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LW1lc3NhZ2UtaGVhZGVyXCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJjaGF0LW1lc3NhZ2UtYXV0aG9yXCI+JHtwdWJsaWNrZXkuc3Vic3RyaW5nKDAsIDIwKX08L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJjaGF0LW1lc3NhZ2UtdGltZXN0YW1wXCI+JHtkYXRldGltZS5ob3Vyc306JHtkYXRldGltZS5taW51dGVzfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBU0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-room/chat-room.js":
> /*!********************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-room/chat-room.js ***!
>   \********************************************************/
> /*! no static exports found */
> /***/ (function(module, exports, __webpack_require__) {
> 
> eval("var Header = __webpack_require__(/*! ../../../../../lib/ui/header/header */ \"./lib/ui/header/header.js\");\n\nvar ChatRoomTemplate = __webpack_require__(/*! ./chat-room.template */ \"./mods/chat/lib/chat-main/chat-room/chat-room.template.js\");\n\nvar ChatRoomHeaderTemplate = __webpack_require__(/*! ./chat-room-header.template */ \"./mods/chat/lib/chat-main/chat-room/chat-room-header.template.js\");\n\nvar ChatRoomFooterTemplate = __webpack_require__(/*! ./chat-room-footer.template */ \"./mods/chat/lib/chat-main/chat-room/chat-room-footer.template.js\");\n\nvar ChatRoomMessageTemplate = __webpack_require__(/*! ./chat-room-message.template */ \"./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js\");\n\nvar ChatMessageContainerTemplate = __webpack_require__(/*! ./chat-message-container.template */ \"./mods/chat/lib/chat-main/chat-room/chat-message-container.template.js\");\n\nmodule.exports = ChatRoom = {\n  group: {***REMOVED***,\n  render: function render(app, data) {\n    var main = document.querySelector('.main');\n    main.innerHTML = ChatRoomTemplate();\n    this.group = data.chat.groups.filter(function (group) {\n      return data.chat.active_group_id === \"chat-row-\".concat(group.group_id);\n***REMOVED***);\n    this.group[0].messages.forEach(function (room_message) {\n      var author = room_message.author,\n          timestamp = room_message.timestamp;\n      var type = app.wallet.returnPublicKey() == author ? 'myself' : 'others';\n      document.querySelector('.chat-room-content').innerHTML += ChatMessageContainerTemplate(room_message, timestamp, type);\n***REMOVED***); // let header = document.querySelector('.header');\n    // header.classList.remove(\"header-home\");\n    // header.classList.add(\"chat-room-header\");\n    // header.innerHTML = ChatRoomHeaderTemplate(this.group[0].name);\n\n    document.querySelector('.chat-room-header').innerHTML = ChatRoomHeaderTemplate(this.group[0].group_name); // let footer = document.querySelector('.footer');\n    // footer.classList.remove(\"nav-bar\");\n    // footer.classList.add(\"chat-room-footer\");\n    // footer.innerHTML = ChatRoomFooterTemplate();\n    // footer.style.display = 'flex';\n\n    document.querySelector('.chat-room-footer').innerHTML = ChatRoomFooterTemplate();\n    this.attachEvents(app, data);\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {\n    var _this = this;\n\n    var fired = false;\n    console.log(\"NEW GROUP: \", this.group);\n\n    var renderDefaultHeaderAndFooter = function renderDefaultHeaderAndFooter(chat) {\n      // header\n      var header = document.querySelector('.header');\n      header.classList.remove(\"chat-room-header\");\n      Header.render(chat.app); // footer\n\n      var footer = document.querySelector('.footer');\n      footer.classList.remove(\"chat-room-footer\");\n      footer.innerHTML = '';\n      footer.style.display = 'none'; // NavBar.render(chat.app);\n***REMOVED***;\n\n    var submitMessage = function submitMessage() {\n      var message_input = document.querySelector('#input.chat-room-input');\n      var msg = message_input.value;\n\n      if (msg == '') {\n        return;\n  ***REMOVED***\n\n      message_input.value = '';\n\n      var newtx = _this.createMessage(app, _this.group[0].group_id, msg);\n\n      _this.sendMessageOnChain(app, newtx);\n\n      console.log(_this.group); // add message to group\n      // this.group.addMessage(newtx);\n\n      _this.addTXToDOM(newtx);\n\n      _this.scrollToBottom();\n***REMOVED***; // document.querySelector('#back-button')\n    //         .addEventListener('click', () => {\n    //             data.chat.active = \"chat_list\";\n    //             renderDefaultHeaderAndFooter(chat);\n    //             data.chat.main.render(app, data);\n    //     ***REMOVED***);\n\n\n    document.querySelector('.chat-room-submit-button').addEventListener('click', function () {\n      submitMessage();\n***REMOVED***);\n    document.addEventListener('keydown', function (e) {\n      if (e.keyCode == '13') {\n        if (!fired) {\n          fired = true;\n          e.preventDefault();\n          submitMessage();\n          console.log(\"event fired\");\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***);\n    document.addEventListener('keyup', function (e) {\n      if (e.keyCode == '13') {\n        fired = false;\n  ***REMOVED***\n***REMOVED***);\n    app.connection.on('chat_receive_message', function (data) {\n      _this.addMessageToDOM(data);\n\n      _this.scrollToBottom();\n***REMOVED***);\n  ***REMOVED***,\n  createMessage: function createMessage(app, group_id, msg) {\n    var publickey = app.network.peers[0].peer.publickey;\n    var newtx = app.wallet.createUnsignedTransaction(publickey, 0.0, 0.0);\n\n    if (newtx == null) {\n      return;\n***REMOVED***\n\n    newtx.transaction.msg = {\n      module: \"Chat\",\n      request: \"chat message\",\n      publickey: app.wallet.returnPublicKey(),\n      group_id: group_id,\n      message: msg,\n      //this.app.keys.encryptMessage(this.app.wallet.returnPublicKey(), msg),\n      timestamp: new Date().getTime()\n***REMOVED***; // newtx.transaction.msg = this.app.keys.encryptMessage(this.app.wallet.returnPublicKey(), newtx.transaction.msg);\n\n    newtx.transaction.msg.sig = app.wallet.signMessage(JSON.stringify(newtx.transaction.msg));\n    newtx = app.wallet.signTransaction(newtx);\n    return newtx;\n  ***REMOVED***,\n  sendMessage: function sendMessage(app, tx) {\n    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    app.network.sendTransactionToPeers(tx, \"chat send message\", callback);\n  ***REMOVED***,\n  sendMessageOnChain: function sendMessageOnChain(app, tx) {\n    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    app.network.propagateTransaction(tx);\n  ***REMOVED***,\n  addTXToDOM: function addTXToDOM(tx) {\n    document.querySelector('.chat-room-content').innerHTML += ChatMessageContainerTemplate(tx.returnMessage(), tx.transaction.msg.sig, 'myself');\n  ***REMOVED***,\n  addMessageToDOM: function addMessageToDOM(msg) {\n    document.querySelector('.chat-room-content').innerHTML += ChatMessageContainerTemplate(msg, msg.sig, msg.type);\n  ***REMOVED***,\n  scrollToBottom: function scrollToBottom() {\n    var chat_room_content = document.querySelector(\".chat-room-content\");\n    chat_room_content.scrollTop = chat_room_content.scrollHeight; // chat_room_content.scrollIntoView(false);\n  ***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS5qcz85MTBmIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEhlYWRlciA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2xpYi91aS9oZWFkZXIvaGVhZGVyJyk7XG5cbmNvbnN0IENoYXRSb29tVGVtcGxhdGUgPSByZXF1aXJlKCcuL2NoYXQtcm9vbS50ZW1wbGF0ZScpO1xuY29uc3QgQ2hhdFJvb21IZWFkZXJUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vY2hhdC1yb29tLWhlYWRlci50ZW1wbGF0ZScpO1xuY29uc3QgQ2hhdFJvb21Gb290ZXJUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vY2hhdC1yb29tLWZvb3Rlci50ZW1wbGF0ZScpO1xuY29uc3QgQ2hhdFJvb21NZXNzYWdlVGVtcGxhdGUgPSByZXF1aXJlKCcuL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlJyk7XG5cbmNvbnN0IENoYXRNZXNzYWdlQ29udGFpbmVyVGVtcGxhdGUgPSByZXF1aXJlKCcuL2NoYXQtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0Um9vbSA9IHtcbiAgICBncm91cDoge30sXG4gICAgcmVuZGVyKGFwcCwgZGF0YSkge1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG4gICAgICAgIG1haW4uaW5uZXJIVE1MID0gQ2hhdFJvb21UZW1wbGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBkYXRhLmNoYXQuZ3JvdXBzLmZpbHRlcihncm91cCA9PiBkYXRhLmNoYXQuYWN0aXZlX2dyb3VwX2lkID09PSBgY2hhdC1yb3ctJHtncm91cC5ncm91cF9pZH1gKTtcblxuICAgICAgICB0aGlzLmdyb3VwWzBdLm1lc3NhZ2VzLmZvckVhY2gocm9vbV9tZXNzYWdlID0+IHtcbiAgICAgICAgICAgIGxldCB7IGF1dGhvciwgdGltZXN0YW1wIH0gPSByb29tX21lc3NhZ2U7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IGFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCkgPT0gYXV0aG9yID8gJ215c2VsZicgOiAnb3RoZXJzJztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LXJvb20tY29udGVudCcpLmlubmVySFRNTFxuICAgICAgICAgICAgICAgICs9IENoYXRNZXNzYWdlQ29udGFpbmVyVGVtcGxhdGUocm9vbV9tZXNzYWdlLCB0aW1lc3RhbXAsIHR5cGUpO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8vIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG4gICAgICAgIC8vIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyLWhvbWVcIik7XG4gICAgICAgIC8vIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiY2hhdC1yb29tLWhlYWRlclwiKTtcbiAgICAgICAgLy8gaGVhZGVyLmlubmVySFRNTCA9IENoYXRSb29tSGVhZGVyVGVtcGxhdGUodGhpcy5ncm91cFswXS5uYW1lKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtcm9vbS1oZWFkZXInKS5pbm5lckhUTUwgPSBDaGF0Um9vbUhlYWRlclRlbXBsYXRlKHRoaXMuZ3JvdXBbMF0uZ3JvdXBfbmFtZSk7XG5cbiAgICAgICAgLy8gbGV0IGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKTtcbiAgICAgICAgLy8gZm9vdGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtYmFyXCIpO1xuICAgICAgICAvLyBmb290ZXIuY2xhc3NMaXN0LmFkZChcImNoYXQtcm9vbS1mb290ZXJcIik7XG4gICAgICAgIC8vIGZvb3Rlci5pbm5lckhUTUwgPSBDaGF0Um9vbUZvb3RlclRlbXBsYXRlKCk7XG4gICAgICAgIC8vIGZvb3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1yb29tLWZvb3RlcicpLmlubmVySFRNTCA9IENoYXRSb29tRm9vdGVyVGVtcGxhdGUoKTtcblxuICAgICAgICB0aGlzLmF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpO1xuICAgIH0sXG5cbiAgICBhdHRhY2hFdmVudHMoYXBwLCBkYXRhKSB7XG4gICAgICAgIGxldCBmaXJlZCA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTkVXIEdST1VQOiBcIiwgdGhpcy5ncm91cCk7XG5cbiAgICAgICAgbGV0IHJlbmRlckRlZmF1bHRIZWFkZXJBbmRGb290ZXIgPSAoY2hhdCkgPT4ge1xuICAgICAgICAgICAgLy8gaGVhZGVyXG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xuICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjaGF0LXJvb20taGVhZGVyXCIpO1xuICAgICAgICAgICAgSGVhZGVyLnJlbmRlcihjaGF0LmFwcCk7XG5cbiAgICAgICAgICAgIC8vIGZvb3RlclxuICAgICAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKTtcbiAgICAgICAgICAgIGZvb3Rlci5jbGFzc0xpc3QucmVtb3ZlKFwiY2hhdC1yb29tLWZvb3RlclwiKTtcbiAgICAgICAgICAgIGZvb3Rlci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvb3Rlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgLy8gTmF2QmFyLnJlbmRlcihjaGF0LmFwcCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3VibWl0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlX2lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0LmNoYXQtcm9vbS1pbnB1dCcpO1xuICAgICAgICAgICAgbGV0IG1zZyA9IG1lc3NhZ2VfaW5wdXQudmFsdWU7XG4gICAgICAgICAgICBpZiAobXNnID09ICcnKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICBtZXNzYWdlX2lucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgICAgICAgIGxldCBuZXd0eCA9IHRoaXMuY3JlYXRlTWVzc2FnZShhcHAsIHRoaXMuZ3JvdXBbMF0uZ3JvdXBfaWQsIG1zZyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlT25DaGFpbihhcHAsIG5ld3R4KTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ncm91cCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBtZXNzYWdlIHRvIGdyb3VwXG4gICAgICAgICAgICAvLyB0aGlzLmdyb3VwLmFkZE1lc3NhZ2UobmV3dHgpO1xuXG4gICAgICAgICAgICB0aGlzLmFkZFRYVG9ET00obmV3dHgpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JhY2stYnV0dG9uJylcbiAgICAgICAgLy8gICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGRhdGEuY2hhdC5hY3RpdmUgPSBcImNoYXRfbGlzdFwiO1xuICAgICAgICAvLyAgICAgICAgICAgICByZW5kZXJEZWZhdWx0SGVhZGVyQW5kRm9vdGVyKGNoYXQpO1xuICAgICAgICAvLyAgICAgICAgICAgICBkYXRhLmNoYXQubWFpbi5yZW5kZXIoYXBwLCBkYXRhKTtcbiAgICAgICAgLy8gICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1yb29tLXN1Ym1pdC1idXR0b24nKVxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAnMTMnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0TWVzc2FnZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXZlbnQgZmlyZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09ICcxMycpIHsgZmlyZWQgPSBmYWxzZTsgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhcHAuY29ubmVjdGlvbi5vbignY2hhdF9yZWNlaXZlX21lc3NhZ2UnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlVG9ET00oZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBjcmVhdGVNZXNzYWdlKGFwcCwgZ3JvdXBfaWQsIG1zZykge1xuICAgICAgICBsZXQgcHVibGlja2V5ID0gYXBwLm5ldHdvcmsucGVlcnNbMF0ucGVlci5wdWJsaWNrZXk7XG4gICAgICAgIGxldCBuZXd0eCA9IGFwcC53YWxsZXQuY3JlYXRlVW5zaWduZWRUcmFuc2FjdGlvbihwdWJsaWNrZXksIDAuMCwgMC4wKTtcbiAgICAgICAgaWYgKG5ld3R4ID09IG51bGwpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnID0ge1xuICAgICAgICAgICAgbW9kdWxlOiBcIkNoYXRcIixcbiAgICAgICAgICAgIHJlcXVlc3Q6IFwiY2hhdCBtZXNzYWdlXCIsXG4gICAgICAgICAgICBwdWJsaWNrZXk6IGFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCksXG4gICAgICAgICAgICBncm91cF9pZDogZ3JvdXBfaWQsXG4gICAgICAgICAgICBtZXNzYWdlOiAgbXNnLFxuICAgICAgICAgICAgLy90aGlzLmFwcC5rZXlzLmVuY3J5cHRNZXNzYWdlKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSwgbXNnKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gbmV3dHgudHJhbnNhY3Rpb24ubXNnID0gdGhpcy5hcHAua2V5cy5lbmNyeXB0TWVzc2FnZSh0aGlzLmFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCksIG5ld3R4LnRyYW5zYWN0aW9uLm1zZyk7XG4gICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5zaWcgPSBhcHAud2FsbGV0LnNpZ25NZXNzYWdlKEpTT04uc3RyaW5naWZ5KG5ld3R4LnRyYW5zYWN0aW9uLm1zZykpO1xuICAgICAgICBuZXd0eCA9IGFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcbiAgICAgICAgcmV0dXJuIG5ld3R4O1xuICAgIH0sXG5cbiAgICBzZW5kTWVzc2FnZShhcHAsIHR4LCBjYWxsYmFjaz1udWxsKSB7XG4gICAgICAgIGFwcC5uZXR3b3JrLnNlbmRUcmFuc2FjdGlvblRvUGVlcnModHgsIFwiY2hhdCBzZW5kIG1lc3NhZ2VcIiwgY2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICBzZW5kTWVzc2FnZU9uQ2hhaW4oYXBwLCB0eCwgY2FsbGJhY2s9bnVsbCkge1xuICAgICAgICBhcHAubmV0d29yay5wcm9wYWdhdGVUcmFuc2FjdGlvbih0eCk7XG4gICAgfSxcblxuICAgIGFkZFRYVG9ET00odHgpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtcm9vbS1jb250ZW50JylcbiAgICAgICAgICAgICAgICAuaW5uZXJIVE1MICs9IENoYXRNZXNzYWdlQ29udGFpbmVyVGVtcGxhdGUodHgucmV0dXJuTWVzc2FnZSgpLCB0eC50cmFuc2FjdGlvbi5tc2cuc2lnLCAnbXlzZWxmJyk7XG4gICAgfSxcblxuICAgIGFkZE1lc3NhZ2VUb0RPTShtc2cpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtcm9vbS1jb250ZW50JylcbiAgICAgICAgICAgICAgICAuaW5uZXJIVE1MICs9IENoYXRNZXNzYWdlQ29udGFpbmVyVGVtcGxhdGUobXNnLCBtc2cuc2lnLCBtc2cudHlwZSk7XG4gICAgfSxcblxuICAgIHNjcm9sbFRvQm90dG9tKCkge1xuICAgICAgICBsZXQgY2hhdF9yb29tX2NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXQtcm9vbS1jb250ZW50XCIpO1xuICAgICAgICBjaGF0X3Jvb21fY29udGVudC5zY3JvbGxUb3AgPSBjaGF0X3Jvb21fY29udGVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIC8vIGNoYXRfcm9vbV9jb250ZW50LnNjcm9sbEludG9WaWV3KGZhbHNlKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFsSkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-room/chat-room.js\n");
> 
> /***/ ***REMOVED***),
> 
> /***/ "./mods/chat/lib/chat-main/chat-room/chat-room.template.js":
> /*!*****************************************************************!*\
>   !*** ./mods/chat/lib/chat-main/chat-room/chat-room.template.js ***!
>   \*****************************************************************/
> /*! no static exports found */
> /***/ (function(module, exports) {
> 
> eval("module.exports = ChatRoomTemplate = function ChatRoomTemplate(room_id) {\n  return \"\\n        <div id=\\\"\".concat(room_id, \"\\\" class=\\\"chat-room\\\">\\n            <div class=\\\"chat-room-header\\\"></div>\\n            <div id=\\\"\").concat(room_id, \"\\\" class=\\\"chat-room-content\\\"></div>\\n            <div class=\\\"chat-room-footer\\\"></div>\\n        </div>\\n    \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9jaGF0L2xpYi9jaGF0LW1haW4vY2hhdC1yb29tL2NoYXQtcm9vbS50ZW1wbGF0ZS5qcz9iNGFiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gQ2hhdFJvb21UZW1wbGF0ZSA9IChyb29tX2lkKSA9PiB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgPGRpdiBpZD1cIiR7cm9vbV9pZH1cIiBjbGFzcz1cImNoYXQtcm9vbVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtcm9vbS1oZWFkZXJcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCIke3Jvb21faWR9XCIgY2xhc3M9XCJjaGF0LXJvb20tY29udGVudFwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtcm9vbS1mb290ZXJcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgYDtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFPQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/chat/lib/chat-main/chat-room/chat-room.template.js\n");
964c1074
< eval("var ChatRoomMessageTemplate = __webpack_require__(/*! ../../this-needs-refactoring/chat-room/chat-room-message.template */ \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js\");\n\nmodule.exports = ChatBoxMessageContainerTemplate = function ChatBoxMessageContainerTemplate(data, sig, type) {\n  return \"\\n    <div class=\\\"chat-box-message-container chat-message-\".concat(type, \"\\\">\\n      \").concat(ChatRoomMessageTemplate(data, sig, type), \"\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGUuanM/ZWVkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDaGF0Um9vbU1lc3NhZ2VUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhdEJveE1lc3NhZ2VDb250YWluZXJUZW1wbGF0ZSA9IChkYXRhLCBzaWcsIHR5cGUpID0+IHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGNsYXNzPVwiY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIgY2hhdC1tZXNzYWdlLSR7dHlwZX1cIj5cbiAgICAgICR7Q2hhdFJvb21NZXNzYWdlVGVtcGxhdGUoZGF0YSwgc2lnLCB0eXBlKX1cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/email-chat/chat-box/chat-box-message-container.template.js\n");
---
> eval("var ChatRoomMessageTemplate = __webpack_require__(/*! ../../chat-main/chat-room/chat-room-message.template */ \"./mods/chat/lib/chat-main/chat-room/chat-room-message.template.js\");\n\nmodule.exports = ChatBoxMessageContainerTemplate = function ChatBoxMessageContainerTemplate(data, sig, type) {\n  return \"\\n    <div class=\\\"chat-box-message-container chat-message-\".concat(type, \"\\\">\\n      \").concat(ChatRoomMessageTemplate(data, sig, type), \"\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL2VtYWlsLWNoYXQvY2hhdC1ib3gvY2hhdC1ib3gtbWVzc2FnZS1jb250YWluZXIudGVtcGxhdGUuanM/ZWVkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDaGF0Um9vbU1lc3NhZ2VUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uL2NoYXQtbWFpbi9jaGF0LXJvb20vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0Qm94TWVzc2FnZUNvbnRhaW5lclRlbXBsYXRlID0gKGRhdGEsIHNpZywgdHlwZSkgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJjaGF0LWJveC1tZXNzYWdlLWNvbnRhaW5lciBjaGF0LW1lc3NhZ2UtJHt0eXBlfVwiPlxuICAgICAgJHtDaGF0Um9vbU1lc3NhZ2VUZW1wbGF0ZShkYXRhLCBzaWcsIHR5cGUpfVxuICAgIDwvZGl2PlxuICBgO1xufVxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/chat/lib/email-chat/chat-box/chat-box-message-container.template.js\n");
1056,1143d1165
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js":
< /*!**********************************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js ***!
<   \**********************************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports, __webpack_require__) {
< 
< eval("var datetimeFormatter = __webpack_require__(/*! ../../../../../lib/helpers/datetime_formatter */ \"./lib/helpers/datetime_formatter.js\");\n\nmodule.exports = ChatListRowTemplate = function ChatListRowTemplate(_ref, _ref2) {\n  var name = _ref.name,\n      group_id = _ref.group_id;\n  var message = _ref2.message,\n      timestamp = _ref2.timestamp;\n  var datetime = datetimeFormatter(timestamp);\n  return \"\\n    <div id=\\\"chat-row-\".concat(group_id, \"\\\" class=\\\"chat-row\\\">\\n      <img src=\\\"/saito/img/logo-color.svg\\\">\\n      <div class=\\\"chat-content\\\">\\n          <div class=\\\"chat-group-name\\\">\").concat(name, \"</div>\\n          <div class=\\\"chat-last-message\\\">\").concat(message.substring(0, 72), \"</div>\\n      </div>\\n      <div class=\\\"chat-last-message-timestamp\\\">\").concat(datetime.hours, \":\").concat(datetime.minutes, \"</div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC1yb3cudGVtcGxhdGUuanM/YWY4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYXRldGltZUZvcm1hdHRlciA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2xpYi9oZWxwZXJzL2RhdGV0aW1lX2Zvcm1hdHRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXRMaXN0Um93VGVtcGxhdGUgPSAoe25hbWUsIGdyb3VwX2lkfSwge21lc3NhZ2UsIHRpbWVzdGFtcH0pID0+IHtcblxuICBsZXQgZGF0ZXRpbWUgPSBkYXRldGltZUZvcm1hdHRlcih0aW1lc3RhbXApO1xuXG4gIHJldHVybiBgXG4gICAgPGRpdiBpZD1cImNoYXQtcm93LSR7Z3JvdXBfaWR9XCIgY2xhc3M9XCJjaGF0LXJvd1wiPlxuICAgICAgPGltZyBzcmM9XCIvc2FpdG8vaW1nL2xvZ28tY29sb3Iuc3ZnXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1jb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtZ3JvdXAtbmFtZVwiPiR7bmFtZX08L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1sYXN0LW1lc3NhZ2VcIj4ke21lc3NhZ2Uuc3Vic3RyaW5nKDAsIDcyKX08L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNoYXQtbGFzdC1tZXNzYWdlLXRpbWVzdGFtcFwiPiR7ZGF0ZXRpbWUuaG91cnN9OiR7ZGF0ZXRpbWUubWludXRlc308L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQVVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.js":
< /*!*********************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.js ***!
<   \*********************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports, __webpack_require__) {
< 
< eval("var ChatListTemplate = __webpack_require__(/*! ./chat-list.template */ \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.template.js\");\n\nvar ChatListRowTemplate = __webpack_require__(/*! ./chat-list-row.template */ \"./mods/chat/lib/this-needs-refactoring/chat-list/chat-list-row.template.js\");\n\nvar ChatRoom = __webpack_require__(/*! ../chat-room/chat-room */ \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.js\"); // const ChatAdd = require('../chat-add/chatadd');\n\n\nmodule.exports = ChatList = {\n  chat: {***REMOVED***,\n  render: function render(chat) {\n    this.chat = chat;\n    var chat_main = document.querySelector('.chat-main');\n\n    if (!chat_main) {\n      return;\n***REMOVED***\n\n    chat_main.innerHTML = ChatListTemplate();\n    Object.values(chat.groups).forEach(function (group) {\n      document.querySelector('.chat').innerHTML += ChatListRowTemplate(group, group.messages[group.messages.length - 1]);\n***REMOVED***); // this.bindDOMFunctionstoModule(mod);\n\n    this.attachEvents(chat);\n  ***REMOVED***,\n  attachEvents: function attachEvents(chat) {\n    // add click event to all of our existing chat rows\n    Array.from(document.getElementsByClassName('chat-row')).forEach(function (row) {\n      return row.addEventListener('click', function (e) {\n        var group_id = e.currentTarget.id;\n        ChatRoom.render(chat, chat.groups[group_id]);\n  ***REMOVED***);\n***REMOVED***); // add click event to create-button\n    // document.querySelector('#chat.create-button')\n    //         .addEventListener('click', ChatAdd.render);\n  ***REMOVED*** // persepctive of Module\n  // bindDOMFunctionstoModule(mod) {\n  //     mod.chat.renderChatList = this.renderChatList(mod);\n  //     mod.chat.addRoomToDOM = this.addRoomToDOM(mod);\n  // ***REMOVED***,\n  // renderChatList(mod) {\n  //     return function () {\n  //         Object.values(mod.chat.rooms).forEach((room) => {\n  //             document.querySelector('.chat').innerHTML\n  //                 += ChatListRowTemplate(room, room.messages[room.messages.length - 1]);\n  //     ***REMOVED***);\n  //         Array.from(document.getElementsByClassName('chat-row'))\n  //             .forEach(row => row.addEventListener('click', (e) => {\n  //                 let room_id = e.currentTarget.id;\n  //                 ChatRoom.render(mod, mod.chat.rooms[room_id]);\n  //         ***REMOVED***)\n  //         );\n  // ***REMOVED*** add click event to create-button\n  //         document.querySelector('#chat.create-button')\n  //                 .addEventListener('click', ChatAdd.render);\n  // ***REMOVED***\n  // ***REMOVED***,\n  // addRoomToDOM(mod) {\n  //     return function (room) {\n  //         var new_room_elem = document.createElement('div')\n  //         new_room_elem.innerHTML = ChatListRowTemplate(room, 0);\n  //         new_room_elem.addEventListener('click', () => {\n  //             let room_id = e.currentTarget.id;\n  //             ChatRoom.render(mod, mod.chat.rooms[room_id]);\n  //     ***REMOVED***);\n  //         document.querySelector('.chat').append(new_room_elem);\n  // ***REMOVED***\n  // ***REMOVED***\n\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LmpzPzdiMWIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQ2hhdExpc3RUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vY2hhdC1saXN0LnRlbXBsYXRlJyk7XG5jb25zdCBDaGF0TGlzdFJvd1RlbXBsYXRlID0gcmVxdWlyZSgnLi9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlJyk7XG5cbmNvbnN0IENoYXRSb29tID0gcmVxdWlyZSgnLi4vY2hhdC1yb29tL2NoYXQtcm9vbScpO1xuLy8gY29uc3QgQ2hhdEFkZCA9IHJlcXVpcmUoJy4uL2NoYXQtYWRkL2NoYXRhZGQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0TGlzdCA9IHtcbiAgICBjaGF0OiB7fSxcbiAgICByZW5kZXIoY2hhdCkge1xuICAgICAgICB0aGlzLmNoYXQgPSBjaGF0O1xuICAgICAgICBsZXQgY2hhdF9tYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtbWFpbicpXG5cbiAgICAgICAgaWYgKCFjaGF0X21haW4pIHsgcmV0dXJuOyB9XG4gICAgICAgIGNoYXRfbWFpbi5pbm5lckhUTUwgPSBDaGF0TGlzdFRlbXBsYXRlKCk7XG5cbiAgICAgICAgT2JqZWN0LnZhbHVlcyhjaGF0Lmdyb3VwcykuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0JykuaW5uZXJIVE1MXG4gICAgICAgICAgICAgICAgKz0gQ2hhdExpc3RSb3dUZW1wbGF0ZShncm91cCwgZ3JvdXAubWVzc2FnZXNbZ3JvdXAubWVzc2FnZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyB0aGlzLmJpbmRET01GdW5jdGlvbnN0b01vZHVsZShtb2QpO1xuICAgICAgICB0aGlzLmF0dGFjaEV2ZW50cyhjaGF0KTtcbiAgICB9LFxuXG4gICAgYXR0YWNoRXZlbnRzKGNoYXQpIHtcbiAgICAgICAgLy8gYWRkIGNsaWNrIGV2ZW50IHRvIGFsbCBvZiBvdXIgZXhpc3RpbmcgY2hhdCByb3dzXG4gICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY2hhdC1yb3cnKSlcbiAgICAgICAgICAgICAuZm9yRWFjaChyb3cgPT4gcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXBfaWQgPSBlLmN1cnJlbnRUYXJnZXQuaWQ7XG4gICAgICAgICAgICAgICAgQ2hhdFJvb20ucmVuZGVyKGNoYXQsIGNoYXQuZ3JvdXBzW2dyb3VwX2lkXSk7XG4gICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBhZGQgY2xpY2sgZXZlbnQgdG8gY3JlYXRlLWJ1dHRvblxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdC5jcmVhdGUtYnV0dG9uJylcbiAgICAgICAgLy8gICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBDaGF0QWRkLnJlbmRlcik7XG4gICAgfSxcblxuICAgIC8vIHBlcnNlcGN0aXZlIG9mIE1vZHVsZVxuICAgIC8vIGJpbmRET01GdW5jdGlvbnN0b01vZHVsZShtb2QpIHtcbiAgICAvLyAgICAgbW9kLmNoYXQucmVuZGVyQ2hhdExpc3QgPSB0aGlzLnJlbmRlckNoYXRMaXN0KG1vZCk7XG4gICAgLy8gICAgIG1vZC5jaGF0LmFkZFJvb21Ub0RPTSA9IHRoaXMuYWRkUm9vbVRvRE9NKG1vZCk7XG4gICAgLy8gfSxcblxuICAgIC8vIHJlbmRlckNoYXRMaXN0KG1vZCkge1xuICAgIC8vICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICAgT2JqZWN0LnZhbHVlcyhtb2QuY2hhdC5yb29tcykuZm9yRWFjaCgocm9vbSkgPT4ge1xuICAgIC8vICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0JykuaW5uZXJIVE1MXG4gICAgLy8gICAgICAgICAgICAgICAgICs9IENoYXRMaXN0Um93VGVtcGxhdGUocm9vbSwgcm9vbS5tZXNzYWdlc1tyb29tLm1lc3NhZ2VzLmxlbmd0aCAtIDFdKTtcbiAgICAvLyAgICAgICAgIH0pO1xuXG4gICAgLy8gICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NoYXQtcm93JykpXG4gICAgLy8gICAgICAgICAgICAgLmZvckVhY2gocm93ID0+IHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGxldCByb29tX2lkID0gZS5jdXJyZW50VGFyZ2V0LmlkO1xuICAgIC8vICAgICAgICAgICAgICAgICBDaGF0Um9vbS5yZW5kZXIobW9kLCBtb2QuY2hhdC5yb29tc1tyb29tX2lkXSk7XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICk7XG5cbiAgICAvLyAgICAgICAgIC8vIGFkZCBjbGljayBldmVudCB0byBjcmVhdGUtYnV0dG9uXG4gICAgLy8gICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdC5jcmVhdGUtYnV0dG9uJylcbiAgICAvLyAgICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQ2hhdEFkZC5yZW5kZXIpO1xuICAgIC8vICAgICB9XG4gICAgLy8gfSxcblxuICAgIC8vIGFkZFJvb21Ub0RPTShtb2QpIHtcbiAgICAvLyAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb29tKSB7XG4gICAgLy8gICAgICAgICB2YXIgbmV3X3Jvb21fZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgLy8gICAgICAgICBuZXdfcm9vbV9lbGVtLmlubmVySFRNTCA9IENoYXRMaXN0Um93VGVtcGxhdGUocm9vbSwgMCk7XG5cbiAgICAvLyAgICAgICAgIG5ld19yb29tX2VsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgbGV0IHJvb21faWQgPSBlLmN1cnJlbnRUYXJnZXQuaWQ7XG4gICAgLy8gICAgICAgICAgICAgQ2hhdFJvb20ucmVuZGVyKG1vZCwgbW9kLmNoYXQucm9vbXNbcm9vbV9pZF0pO1xuICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAvLyAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0JykuYXBwZW5kKG5ld19yb29tX2VsZW0pO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBdkVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.template.js":
< /*!******************************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.template.js ***!
<   \******************************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports) {
< 
< eval("module.exports = ChatListTemplate = function ChatListTemplate() {\n  return \"\\n      <div class=\\\"chat container\\\"></div>\\n      <button id=\\\"chat\\\" class=\\\"create-button\\\"><i class=\\\"fas fa-plus\\\"></i></button>\\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1saXN0L2NoYXQtbGlzdC50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LWxpc3QvY2hhdC1saXN0LnRlbXBsYXRlLmpzPzIwOWQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBDaGF0TGlzdFRlbXBsYXRlID0gKCkgPT4ge1xuICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImNoYXQgY29udGFpbmVyXCI+PC9kaXY+XG4gICAgICA8YnV0dG9uIGlkPVwiY2hhdFwiIGNsYXNzPVwiY3JlYXRlLWJ1dHRvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXBsdXNcIj48L2k+PC9idXR0b24+XG4gIGA7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-list/chat-list.template.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js":
< /*!*************************************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js ***!
<   \*************************************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports) {
< 
< eval("// import { modules ***REMOVED*** from \"../../../../../lib/saito/saito\";\nmodule.exports = ChatRoomFooterTemplate = function ChatRoomFooterTemplate() {\n  return \"\\n        <div class=\\\"chat-room-input\\\">\\n            <textarea id=\\\"input\\\" class=\\\"chat-room-input\\\"></textarea>\\n            <div class=\\\"chat-room-submit-button\\\"><i class=\\\"icon-small fas fa-arrow-right\\\"></i></div>\\n        </div>\\n    \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1mb290ZXIudGVtcGxhdGUuanM/Mjg1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBtb2R1bGVzIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2xpYi9zYWl0by9zYWl0b1wiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXRSb29tRm9vdGVyVGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtcm9vbS1pbnB1dFwiPlxuICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiaW5wdXRcIiBjbGFzcz1cImNoYXQtcm9vbS1pbnB1dFwiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1yb29tLXN1Ym1pdC1idXR0b25cIj48aSBjbGFzcz1cImljb24tc21hbGwgZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBO0FBQ0E7QUFNQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js":
< /*!*************************************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js ***!
<   \*************************************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports) {
< 
< eval("module.exports = ChatRoomHeaderTemplate = function ChatRoomHeaderTemplate(room_name) {\n  return \"\\n        <i id=\\\"back-button\\\" class=\\\"icon-med fas fa-arrow-left\\\"></i>\\n        <p class=\\\"chat-room-name\\\">\".concat(room_name, \"</p>\\n    \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1oZWFkZXIudGVtcGxhdGUuanM/MDIxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IENoYXRSb29tSGVhZGVyVGVtcGxhdGUgPSAocm9vbV9uYW1lKSA9PiB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgPGkgaWQ9XCJiYWNrLWJ1dHRvblwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLWFycm93LWxlZnRcIj48L2k+XG4gICAgICAgIDxwIGNsYXNzPVwiY2hhdC1yb29tLW5hbWVcIj4ke3Jvb21fbmFtZX08L3A+XG4gICAgYDtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUlBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js":
< /*!**************************************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js ***!
<   \**************************************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports, __webpack_require__) {
< 
< eval("var datetimeFormatter = __webpack_require__(/*! ../../../../../lib/helpers/datetime_formatter */ \"./lib/helpers/datetime_formatter.js\");\n\nmodule.exports = ChatRoomMessageTemplate = function ChatRoomMessageTemplate(_ref, sig, type) {\n  var message = _ref.message,\n      publickey = _ref.publickey,\n      timestamp = _ref.timestamp;\n  var datetime = datetimeFormatter(timestamp);\n  return \"\\n    <div id=\\\"\".concat(sig, \"\\\" class=\\\"chat-room-message chat-room-message-\").concat(type, \"\\\">\\n      <p>\").concat(message, \"</p>\\n      <div class=\\\"chat-message-header\\\">\\n          <p class=\\\"chat-message-author\\\">\").concat(publickey.substring(0, 20), \"</p>\\n          <p class=\\\"chat-message-timestamp\\\">\").concat(datetime.hours, \":\").concat(datetime.minutes, \"</p>\\n      </div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS1tZXNzYWdlLnRlbXBsYXRlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9jaGF0L2xpYi90aGlzLW5lZWRzLXJlZmFjdG9yaW5nL2NoYXQtcm9vbS9jaGF0LXJvb20tbWVzc2FnZS50ZW1wbGF0ZS5qcz8xZDExIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRhdGV0aW1lRm9ybWF0dGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vbGliL2hlbHBlcnMvZGF0ZXRpbWVfZm9ybWF0dGVyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhdFJvb21NZXNzYWdlVGVtcGxhdGUgPSAoeyBtZXNzYWdlLCBwdWJsaWNrZXksIHRpbWVzdGFtcCB9LCBzaWcsIHR5cGUpID0+IHtcbiAgbGV0IGRhdGV0aW1lID0gZGF0ZXRpbWVGb3JtYXR0ZXIodGltZXN0YW1wKTtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGlkPVwiJHtzaWd9XCIgY2xhc3M9XCJjaGF0LXJvb20tbWVzc2FnZSBjaGF0LXJvb20tbWVzc2FnZS0ke3R5cGV9XCI+XG4gICAgICA8cD4ke21lc3NhZ2V9PC9wPlxuICAgICAgPGRpdiBjbGFzcz1cImNoYXQtbWVzc2FnZS1oZWFkZXJcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cImNoYXQtbWVzc2FnZS1hdXRob3JcIj4ke3B1YmxpY2tleS5zdWJzdHJpbmcoMCwgMjApfTwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cImNoYXQtbWVzc2FnZS10aW1lc3RhbXBcIj4ke2RhdGV0aW1lLmhvdXJzfToke2RhdGV0aW1lLm1pbnV0ZXN9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGBcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFTQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.js":
< /*!*********************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.js ***!
<   \*********************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports, __webpack_require__) {
< 
< eval("var Header = __webpack_require__(/*! ../../../../../lib/ui/header/header */ \"./lib/ui/header/header.js\");\n\nvar ChatRoomTemplate = __webpack_require__(/*! ./chat-room.template */ \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.template.js\");\n\nvar ChatRoomHeaderTemplate = __webpack_require__(/*! ./chat-room-header.template */ \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-header.template.js\");\n\nvar ChatRoomFooterTemplate = __webpack_require__(/*! ./chat-room-footer.template */ \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-footer.template.js\");\n\nvar ChatRoomMessageTemplate = __webpack_require__(/*! ./chat-room-message.template */ \"./mods/chat/lib/this-needs-refactoring/chat-room/chat-room-message.template.js\");\n\nmodule.exports = ChatRoom = {\n  group: {***REMOVED***,\n  render: function render(chat, group) {\n    this.group = group;\n    var main = document.querySelector('.main');\n    main.innerHTML = ChatRoomTemplate();\n    group.messages.forEach(function (room_message) {\n      var author = room_message.author,\n          timestamp = room_message.timestamp;\n      var type = chat.app.wallet.returnPublicKey() == author ? 'myself' : 'others';\n      document.querySelector('.chat-room-content').innerHTML += ChatRoomMessageTemplate(room_message, timestamp, type);\n***REMOVED***);\n    var header = document.querySelector('.header');\n    header.classList.remove(\"header-home\");\n    header.classList.add(\"chat-room-header\");\n    header.innerHTML = ChatRoomHeaderTemplate(group.name);\n    var footer = document.querySelector('.footer');\n    footer.classList.remove(\"nav-bar\");\n    footer.classList.add(\"chat-room-footer\");\n    footer.innerHTML = ChatRoomFooterTemplate();\n    this.attachEvents(chat, group);\n  ***REMOVED***,\n  attachEvents: function attachEvents(chat) {\n    var _this = this;\n\n    var fired = false;\n    console.log(\"NEW GROUP: \", this.group);\n\n    var renderDefaultHeaderAndFooter = function renderDefaultHeaderAndFooter(chat) {\n      // header\n      var header = document.querySelector('.header');\n      header.classList.remove(\"chat-room-header\");\n      Header.render(chat.app); // footer\n\n      var footer = document.querySelector('.footer');\n      footer.classList.remove(\"chat-room-footer\");\n      footer.innerHTML = ''; // NavBar.render(chat.app);\n***REMOVED***;\n\n    var submitMessage = function submitMessage() {\n      var message_input = document.querySelector('#input.chat-room-input');\n      var msg = message_input.value;\n\n      if (msg == '') {\n        return;\n  ***REMOVED***\n\n      message_input.value = '';\n\n      var newtx = _this.createMessage(chat.app, _this.group.group_id, msg);\n\n      _this.sendMessage(chat.app, newtx);\n\n      console.log(_this.group); // add message to group\n\n      _this.group.addMessage(newtx);\n\n      _this.addMessageToDOM(newtx);\n\n      _this.scrollToBottom();\n***REMOVED***;\n\n    document.querySelector('#back-button').addEventListener('click', function () {\n      // chat chat render\n      chat.renderDOM();\n      renderDefaultHeaderAndFooter(chat); // NavBar.updateNavBarButton('chat');\n***REMOVED***);\n    document.querySelector('.chat-room-submit-button').addEventListener('click', function () {\n      // let message_input = document.querySelector('#input.chat-room-input');\n      // let msg = message_input.value;\n      // if (msg == '') { return; ***REMOVED***\n      // message_input.value = '';\n      // let newtx = this.createMessage(chat.app, group.group_id, msg);\n      // this.sendMessage(chat.app, newtx);\n      // // add message to group\n      // group.addMessage(newtx);\n      // this.addMessageToDOM(newtx);\n      // this.scrollToBottom();\n      submitMessage();\n***REMOVED***);\n    document.addEventListener('keydown', function (e) {\n      if (e.keyCode == '13') {\n        if (!fired) {\n          fired = true;\n          e.preventDefault();\n          submitMessage();\n          console.log(\"event fired\");\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***);\n    document.addEventListener('keyup', function (e) {\n      if (e.keyCode == '13') {\n        fired = false;\n  ***REMOVED***\n***REMOVED***);\n  ***REMOVED***,\n  createMessage: function createMessage(saito, chat_room_id, msg) {\n    var publickey = saito.network.peers[0].peer.publickey;\n    var newtx = saito.wallet.createUnsignedTransaction(publickey, 0.0, 0.0);\n\n    if (newtx == null) {\n      return;\n***REMOVED***\n\n    newtx.transaction.msg = {\n      module: \"Chat\",\n      request: \"chat send message\",\n      publickey: saito.wallet.returnPublicKey(),\n      room_id: chat_room_id,\n      message: msg,\n      //this.saito.keys.encryptMessage(this.saito.wallet.returnPublicKey(), msg),\n      timestamp: new Date().getTime()\n***REMOVED***; // newtx.transaction.msg = this.app.keys.encryptMessage(this.app.wallet.returnPublicKey(), newtx.transaction.msg);\n\n    newtx.transaction.msg.sig = saito.wallet.signMessage(JSON.stringify(newtx.transaction.msg));\n    newtx = saito.wallet.signTransaction(newtx);\n    return newtx;\n  ***REMOVED***,\n  sendMessage: function sendMessage(saito, tx) {\n    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    saito.network.sendTransactionToPeers(tx, \"chat send message\", callback);\n  ***REMOVED***,\n  addMessageToDOM: function addMessageToDOM(tx) {\n    document.querySelector('.chat-room-content').innerHTML += ChatRoomMessageTemplate(tx.returnMessage(), tx.transaction.msg.sig, 'myself');\n  ***REMOVED***,\n  scrollToBottom: function scrollToBottom() {\n    document.querySelector(\".chat-room-content\").scrollIntoView(false);\n  ***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLmpzP2M5YmIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgSGVhZGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vbGliL3VpL2hlYWRlci9oZWFkZXInKTtcblxuY29uc3QgQ2hhdFJvb21UZW1wbGF0ZSA9IHJlcXVpcmUoJy4vY2hhdC1yb29tLnRlbXBsYXRlJyk7XG5jb25zdCBDaGF0Um9vbUhlYWRlclRlbXBsYXRlID0gcmVxdWlyZSgnLi9jaGF0LXJvb20taGVhZGVyLnRlbXBsYXRlJyk7XG5jb25zdCBDaGF0Um9vbUZvb3RlclRlbXBsYXRlID0gcmVxdWlyZSgnLi9jaGF0LXJvb20tZm9vdGVyLnRlbXBsYXRlJyk7XG5jb25zdCBDaGF0Um9vbU1lc3NhZ2VUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vY2hhdC1yb29tLW1lc3NhZ2UudGVtcGxhdGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGF0Um9vbSA9IHtcbiAgICBncm91cDoge30sXG4gICAgcmVuZGVyKGNoYXQsIGdyb3VwKSB7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcblxuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG4gICAgICAgIG1haW4uaW5uZXJIVE1MID0gQ2hhdFJvb21UZW1wbGF0ZSgpO1xuXG4gICAgICAgIGdyb3VwLm1lc3NhZ2VzLmZvckVhY2gocm9vbV9tZXNzYWdlID0+IHtcbiAgICAgICAgICAgIGxldCB7IGF1dGhvciwgdGltZXN0YW1wIH0gPSByb29tX21lc3NhZ2U7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IGNoYXQuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSA9PSBhdXRob3IgPyAnbXlzZWxmJyA6ICdvdGhlcnMnO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtcm9vbS1jb250ZW50JykuaW5uZXJIVE1MXG4gICAgICAgICAgICAgICAgKz0gQ2hhdFJvb21NZXNzYWdlVGVtcGxhdGUocm9vbV9tZXNzYWdlLCB0aW1lc3RhbXAsIHR5cGUpO1xuICAgICAgICB9KVxuXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyLWhvbWVcIik7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiY2hhdC1yb29tLWhlYWRlclwiKTtcbiAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IENoYXRSb29tSGVhZGVyVGVtcGxhdGUoZ3JvdXAubmFtZSk7XG5cbiAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKTtcbiAgICAgICAgZm9vdGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtYmFyXCIpO1xuICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZChcImNoYXQtcm9vbS1mb290ZXJcIik7XG4gICAgICAgIGZvb3Rlci5pbm5lckhUTUwgPSBDaGF0Um9vbUZvb3RlclRlbXBsYXRlKCk7XG5cbiAgICAgICAgdGhpcy5hdHRhY2hFdmVudHMoY2hhdCwgZ3JvdXApO1xuICAgIH0sXG5cbiAgICBhdHRhY2hFdmVudHMoY2hhdCkge1xuICAgICAgICBsZXQgZmlyZWQgPSBmYWxzZTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIk5FVyBHUk9VUDogXCIsIHRoaXMuZ3JvdXApO1xuXG4gICAgICAgIGxldCByZW5kZXJEZWZhdWx0SGVhZGVyQW5kRm9vdGVyID0gKGNoYXQpID0+IHtcbiAgICAgICAgICAgIC8vIGhlYWRlclxuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcbiAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiY2hhdC1yb29tLWhlYWRlclwiKTtcbiAgICAgICAgICAgIEhlYWRlci5yZW5kZXIoY2hhdC5hcHApO1xuXG4gICAgICAgICAgICAvLyBmb290ZXJcbiAgICAgICAgICAgIGxldCBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJyk7XG4gICAgICAgICAgICBmb290ZXIuY2xhc3NMaXN0LnJlbW92ZShcImNoYXQtcm9vbS1mb290ZXJcIik7XG4gICAgICAgICAgICBmb290ZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAvLyBOYXZCYXIucmVuZGVyKGNoYXQuYXBwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdWJtaXRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2VfaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXQuY2hhdC1yb29tLWlucHV0Jyk7XG4gICAgICAgICAgICBsZXQgbXNnID0gbWVzc2FnZV9pbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChtc2cgPT0gJycpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgIG1lc3NhZ2VfaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICAgICAgbGV0IG5ld3R4ID0gdGhpcy5jcmVhdGVNZXNzYWdlKGNoYXQuYXBwLCB0aGlzLmdyb3VwLmdyb3VwX2lkLCBtc2cpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShjaGF0LmFwcCwgbmV3dHgpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyb3VwKTtcblxuICAgICAgICAgICAgLy8gYWRkIG1lc3NhZ2UgdG8gZ3JvdXBcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAuYWRkTWVzc2FnZShuZXd0eCk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZVRvRE9NKG5ld3R4KTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiYWNrLWJ1dHRvbicpXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGF0IGNoYXQgcmVuZGVyXG4gICAgICAgICAgICAgICAgICAgIGNoYXQucmVuZGVyRE9NKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHRIZWFkZXJBbmRGb290ZXIoY2hhdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5hdkJhci51cGRhdGVOYXZCYXJCdXR0b24oJ2NoYXQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1yb29tLXN1Ym1pdC1idXR0b24nKVxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IG1lc3NhZ2VfaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXQuY2hhdC1yb29tLWlucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBtc2cgPSBtZXNzYWdlX2lucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAobXNnID09ICcnKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2VfaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbmV3dHggPSB0aGlzLmNyZWF0ZU1lc3NhZ2UoY2hhdC5hcHAsIGdyb3VwLmdyb3VwX2lkLCBtc2cpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbmRNZXNzYWdlKGNoYXQuYXBwLCBuZXd0eCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gYWRkIG1lc3NhZ2UgdG8gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgLy8gZ3JvdXAuYWRkTWVzc2FnZShuZXd0eCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5hZGRNZXNzYWdlVG9ET00obmV3dHgpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdE1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gJzEzJykge1xuICAgICAgICAgICAgICAgIGlmICghZmlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdE1lc3NhZ2UoKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImV2ZW50IGZpcmVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAnMTMnKSB7IGZpcmVkID0gZmFsc2U7IH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNyZWF0ZU1lc3NhZ2Uoc2FpdG8sIGNoYXRfcm9vbV9pZCwgbXNnKSB7XG4gICAgICAgIGxldCBwdWJsaWNrZXkgPSBzYWl0by5uZXR3b3JrLnBlZXJzWzBdLnBlZXIucHVibGlja2V5O1xuICAgICAgICBsZXQgbmV3dHggPSBzYWl0by53YWxsZXQuY3JlYXRlVW5zaWduZWRUcmFuc2FjdGlvbihwdWJsaWNrZXksIDAuMCwgMC4wKTtcbiAgICAgICAgaWYgKG5ld3R4ID09IG51bGwpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnID0ge1xuICAgICAgICAgICAgbW9kdWxlOiBcIkNoYXRcIixcbiAgICAgICAgICAgIHJlcXVlc3Q6IFwiY2hhdCBzZW5kIG1lc3NhZ2VcIixcbiAgICAgICAgICAgIHB1YmxpY2tleTogc2FpdG8ud2FsbGV0LnJldHVyblB1YmxpY0tleSgpLFxuICAgICAgICAgICAgcm9vbV9pZDogY2hhdF9yb29tX2lkLFxuICAgICAgICAgICAgbWVzc2FnZTogIG1zZyxcbiAgICAgICAgICAgIC8vdGhpcy5zYWl0by5rZXlzLmVuY3J5cHRNZXNzYWdlKHRoaXMuc2FpdG8ud2FsbGV0LnJldHVyblB1YmxpY0tleSgpLCBtc2cpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBuZXd0eC50cmFuc2FjdGlvbi5tc2cgPSB0aGlzLmFwcC5rZXlzLmVuY3J5cHRNZXNzYWdlKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSwgbmV3dHgudHJhbnNhY3Rpb24ubXNnKTtcbiAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnNpZyA9IHNhaXRvLndhbGxldC5zaWduTWVzc2FnZShKU09OLnN0cmluZ2lmeShuZXd0eC50cmFuc2FjdGlvbi5tc2cpKTtcbiAgICAgICAgbmV3dHggPSBzYWl0by53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcbiAgICAgICAgcmV0dXJuIG5ld3R4O1xuICAgIH0sXG5cbiAgICBzZW5kTWVzc2FnZShzYWl0bywgdHgsIGNhbGxiYWNrPW51bGwpIHtcbiAgICAgICAgc2FpdG8ubmV0d29yay5zZW5kVHJhbnNhY3Rpb25Ub1BlZXJzKHR4LCBcImNoYXQgc2VuZCBtZXNzYWdlXCIsIGNhbGxiYWNrKTtcbiAgICB9LFxuXG4gICAgYWRkTWVzc2FnZVRvRE9NKHR4KSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LXJvb20tY29udGVudCcpXG4gICAgICAgICAgICAgICAgLmlubmVySFRNTCArPSBDaGF0Um9vbU1lc3NhZ2VUZW1wbGF0ZSh0eC5yZXR1cm5NZXNzYWdlKCksIHR4LnRyYW5zYWN0aW9uLm1zZy5zaWcsICdteXNlbGYnKTtcbiAgICB9LFxuXG4gICAgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhdC1yb29tLWNvbnRlbnRcIikuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBN0lBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.js\n");
< 
< /***/ ***REMOVED***),
< 
< /***/ "./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.template.js":
< /*!******************************************************************************!*\
<   !*** ./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.template.js ***!
<   \******************************************************************************/
< /*! no static exports found */
< /***/ (function(module, exports) {
< 
< eval("module.exports = ChatRoomTemplate = function ChatRoomTemplate(room_id) {\n  return \"\\n        <div id=\\\"\".concat(room_id, \"\\\" class=\\\"chat-room\\\">\\n            <div id=\\\"\").concat(room_id, \"\\\" class=\\\"chat-room-content\\\">\\n            </div>\\n        </div>\\n    \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2NoYXQvbGliL3RoaXMtbmVlZHMtcmVmYWN0b3JpbmcvY2hhdC1yb29tL2NoYXQtcm9vbS50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvY2hhdC9saWIvdGhpcy1uZWVkcy1yZWZhY3RvcmluZy9jaGF0LXJvb20vY2hhdC1yb29tLnRlbXBsYXRlLmpzPzY0NTQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBDaGF0Um9vbVRlbXBsYXRlID0gKHJvb21faWQpID0+IHtcbiAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2IGlkPVwiJHtyb29tX2lkfVwiIGNsYXNzPVwiY2hhdC1yb29tXCI+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiJHtyb29tX2lkfVwiIGNsYXNzPVwiY2hhdC1yb29tLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQU1BIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/chat/lib/this-needs-refactoring/chat-room/chat-room.template.js\n");
< 
< /***/ ***REMOVED***),
< 
1393c1415
< eval("module.exports = EmailDetailHeaderTempkate = function EmailDetailHeaderTempkate(app, data) {\n  return \"\\n    <div class=\\\"email-detail-left-options\\\">\\n      <i id=\\\"email-form-back-button\\\" class=\\\"icon-med fas fa-arrow-left\\\"></i>\\n      <h4>\".concat(data.parentmod.header_title, \"</h4>\\n    </div>\\n    <div class=\\\"email-detail-right-options\\\">\\n    <div class=\\\"email-icons\\\">\\n      <i id=\\\"email-delete-icon\\\" class=\\\"icon-med far fa-trash-alt\\\"></i>\\n      <i id=\\\"email-detail-reply\\\" class=\\\"icon-med fas fa-reply\\\"></i>\\n      <i id=\\\"email-detail-forward\\\" class=\\\"icon-med fas fa-share\\\"></i>\\n    </div>\\n    <div class=\\\"email-balance detail\\\"></div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIudGVtcGxhdGUuanM/NzBjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEVtYWlsRGV0YWlsSGVhZGVyVGVtcGthdGUgPSAoYXBwLCBkYXRhKSA9PiB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBjbGFzcz1cImVtYWlsLWRldGFpbC1sZWZ0LW9wdGlvbnNcIj5cbiAgICAgIDxpIGlkPVwiZW1haWwtZm9ybS1iYWNrLWJ1dHRvblwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLWFycm93LWxlZnRcIj48L2k+XG4gICAgICA8aDQ+JHtkYXRhLnBhcmVudG1vZC5oZWFkZXJfdGl0bGV9PC9oND5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiZW1haWwtZGV0YWlsLXJpZ2h0LW9wdGlvbnNcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZW1haWwtaWNvbnNcIj5cbiAgICAgIDxpIGlkPVwiZW1haWwtZGVsZXRlLWljb25cIiBjbGFzcz1cImljb24tbWVkIGZhciBmYS10cmFzaC1hbHRcIj48L2k+XG4gICAgICA8aSBpZD1cImVtYWlsLWRldGFpbC1yZXBseVwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLXJlcGx5XCI+PC9pPlxuICAgICAgPGkgaWQ9XCJlbWFpbC1kZXRhaWwtZm9yd2FyZFwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLXNoYXJlXCI+PC9pPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1iYWxhbmNlIGRldGFpbFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBY0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\n");
---
> eval("module.exports = EmailDetailHeaderTempkate = function EmailDetailHeaderTempkate(app, data) {\n  return \"\\n    <div class=\\\"email-detail-left-options\\\">\\n      <i id=\\\"email-form-back-button\\\" class=\\\"icon-med fas fa-arrow-left\\\"></i>\\n      <h3>\".concat(data.parentmod.header_title, \"</h3>\\n    </div>\\n    <div class=\\\"email-detail-right-options\\\">\\n    <div class=\\\"email-icons\\\">\\n      <i id=\\\"email-delete-icon\\\" class=\\\"icon-med far fa-trash-alt\\\"></i>\\n      <i id=\\\"email-detail-reply\\\" class=\\\"icon-med fas fa-reply\\\"></i>\\n      <i id=\\\"email-detail-forward\\\" class=\\\"icon-med fas fa-share\\\"></i>\\n    </div>\\n    <div class=\\\"email-balance\\\"></div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1kZXRhaWwtaGVhZGVyL2VtYWlsLWRldGFpbC1oZWFkZXIudGVtcGxhdGUuanM/NzBjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEVtYWlsRGV0YWlsSGVhZGVyVGVtcGthdGUgPSAoYXBwLCBkYXRhKSA9PiB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBjbGFzcz1cImVtYWlsLWRldGFpbC1sZWZ0LW9wdGlvbnNcIj5cbiAgICAgIDxpIGlkPVwiZW1haWwtZm9ybS1iYWNrLWJ1dHRvblwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLWFycm93LWxlZnRcIj48L2k+XG4gICAgICA8aDM+JHtkYXRhLnBhcmVudG1vZC5oZWFkZXJfdGl0bGV9PC9oMz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiZW1haWwtZGV0YWlsLXJpZ2h0LW9wdGlvbnNcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZW1haWwtaWNvbnNcIj5cbiAgICAgIDxpIGlkPVwiZW1haWwtZGVsZXRlLWljb25cIiBjbGFzcz1cImljb24tbWVkIGZhciBmYS10cmFzaC1hbHRcIj48L2k+XG4gICAgICA8aSBpZD1cImVtYWlsLWRldGFpbC1yZXBseVwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLXJlcGx5XCI+PC9pPlxuICAgICAgPGkgaWQ9XCJlbWFpbC1kZXRhaWwtZm9yd2FyZFwiIGNsYXNzPVwiaWNvbi1tZWQgZmFzIGZhLXNoYXJlXCI+PC9pPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1iYWxhbmNlXCI+PC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFjQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js\n");
1437c1459
< eval("var EmailBarsMenuTemplate = __webpack_require__(/*! ../../../email-sidebar/email-bars-menu.template */ \"./mods/email/lib/email-sidebar/email-bars-menu.template.js\");\n\nvar EmailInboxHeaderTemplate = __webpack_require__(/*! ./email-inbox-header.template */ \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\");\n\nmodule.exports = EmailInboxHeader = {\n  render: function render(app, data) {\n    document.querySelector('.email-header').innerHTML = EmailInboxHeaderTemplate(app, data);\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {\n    document.getElementById('email-select-icon').addEventListener('click', function (e) {\n      Array.from(document.getElementsByClassName('email-selected')).forEach(function (checkbox) {\n        checkbox.checked = e.currentTarget.checked;\n  ***REMOVED***);\n***REMOVED***);\n    document.getElementById('email-delete-icon').addEventListener('click', function (e) {\n      var email_list = document.querySelector('.email-list');\n      Array.from(document.getElementsByClassName('email-message')).forEach(function (mail) {\n        var is_checked = mail.children[0].checked; // remove from DOM\n\n        if (is_checked) {\n          email_list.removeChild(mail); //\n  ***REMOVED*** tell our parentmod to purge this transaction\n  ***REMOVED***\n\n          var mysig = mail.id;\n\n          for (var i = 0; i < data.parentmod.emails[data.parentmod.emails.active].length; i++) {\n            var mytx = data.parentmod.emails[data.parentmod.emails.active][i];\n\n            if (mytx.transaction.sig == mysig) {\n              data.parentmod.deleteTransaction(mytx);\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***);\n***REMOVED***);\n    document.getElementById('email-bars-icon').addEventListener('click', function (e) {\n      var email_bars_menu = document.querySelector('#mobile.email-bars-menu');\n\n      if (email_bars_menu != null) {\n        email_bars_menu.style.display = email_bars_menu.style.display == \"block\" ? \"none\" : \"block\";\n  ***REMOVED*** else {\n        email_bars_menu = document.createElement('DIV');\n        email_bars_menu.classList.add('email-bars-menu');\n        email_bars_menu.id = \"mobile\";\n        email_bars_menu.style.display = \"block\";\n        email_bars_menu.innerHTML = EmailBarsMenuTemplate();\n\n        for (var i = 0; i < data.mods.length; i++) {\n          var mobile_email_apps = email_bars_menu.querySelector(\".email-apps\");\n          mobile_email_apps.innerHTML += \"<li class=\\\"email-apps-item\\\" id=\\\"\".concat(i, \"\\\">\").concat(data.mods[i].name, \"</li>\");\n    ***REMOVED***\n\n        document.querySelector('body').append(email_bars_menu);\n        EmailBarsMenu.attachEvents(app, data); // extend functionatliy for mobile menu\n\n        email_bars_menu.addEventListener('click', function () {\n          email_bars_menu.style.display = \"none\";\n    ***REMOVED***);\n        window.addEventListener('click', function (e) {\n          if (e.target.id !== \"email-bars-icon\") {\n            email_bars_menu.style.display = \"none\";\n      ***REMOVED***\n    ***REMOVED***);\n  ***REMOVED***\n***REMOVED***);\n  ***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci5qcz9mZDU5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVtYWlsQmFyc01lbnVUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlJyk7XG5jb25zdCBFbWFpbEluYm94SGVhZGVyVGVtcGxhdGUgPSByZXF1aXJlKCcuL2VtYWlsLWluYm94LWhlYWRlci50ZW1wbGF0ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVtYWlsSW5ib3hIZWFkZXIgPSB7XG5cbiAgcmVuZGVyKGFwcCwgZGF0YSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbWFpbC1oZWFkZXInKS5pbm5lckhUTUwgPSBFbWFpbEluYm94SGVhZGVyVGVtcGxhdGUoYXBwLCBkYXRhKTtcbiAgfSxcblxuICBhdHRhY2hFdmVudHMoYXBwLCBkYXRhKSB7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwtc2VsZWN0LWljb24nKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlbWFpbC1zZWxlY3RlZCcpKS5mb3JFYWNoKGNoZWNrYm94ID0+IHtcbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwtZGVsZXRlLWljb24nKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgbGV0IGVtYWlsX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1haWwtbGlzdCcpO1xuICAgICAgICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2VtYWlsLW1lc3NhZ2UnKSkuZm9yRWFjaChtYWlsID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXNfY2hlY2tlZCA9IG1haWwuY2hpbGRyZW5bMF0uY2hlY2tlZDtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIERPTVxuICAgICAgICAgICAgICAgIGlmIChpc19jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICBlbWFpbF9saXN0LnJlbW92ZUNoaWxkKG1haWwpO1xuICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgIC8vIHRlbGwgb3VyIHBhcmVudG1vZCB0byBwdXJnZSB0aGlzIHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgbGV0IG15c2lnID0gbWFpbC5pZDtcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5wYXJlbnRtb2QuZW1haWxzW2RhdGEucGFyZW50bW9kLmVtYWlscy5hY3RpdmVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBteXR4ID0gZGF0YS5wYXJlbnRtb2QuZW1haWxzW2RhdGEucGFyZW50bW9kLmVtYWlscy5hY3RpdmVdW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobXl0eC50cmFuc2FjdGlvbi5zaWcgPT0gbXlzaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLnBhcmVudG1vZC5kZWxldGVUcmFuc2FjdGlvbihteXR4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsLWJhcnMtaWNvbicpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlbWFpbF9iYXJzX21lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9iaWxlLmVtYWlsLWJhcnMtbWVudScpO1xuICAgICAgICAgICAgICAgIGlmIChlbWFpbF9iYXJzX21lbnUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbF9iYXJzX21lbnUuc3R5bGUuZGlzcGxheSA9IGVtYWlsX2JhcnNfbWVudS5zdHlsZS5kaXNwbGF5ID09IFwiYmxvY2tcIiA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgICAgICAgICAgICAgICAgICBlbWFpbF9iYXJzX21lbnUuY2xhc3NMaXN0LmFkZCgnZW1haWwtYmFycy1tZW51Jyk7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5pZCA9IFwibW9iaWxlXCJcbiAgICAgICAgICAgICAgICAgICAgZW1haWxfYmFyc19tZW51LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5pbm5lckhUTUwgPSBFbWFpbEJhcnNNZW51VGVtcGxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLm1vZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2JpbGVfZW1haWxfYXBwcyA9IGVtYWlsX2JhcnNfbWVudS5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsLWFwcHNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZV9lbWFpbF9hcHBzLmlubmVySFRNTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICs9IGA8bGkgY2xhc3M9XCJlbWFpbC1hcHBzLWl0ZW1cIiBpZD1cIiR7aX1cIj4ke2RhdGEubW9kc1tpXS5uYW1lfTwvbGk+YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kKGVtYWlsX2JhcnNfbWVudSk7XG4gICAgICAgICAgICAgICAgICAgIEVtYWlsQmFyc01lbnUuYXR0YWNoRXZlbnRzKGFwcCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV4dGVuZCBmdW5jdGlvbmF0bGl5IGZvciBtb2JpbGUgbWVudVxuXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuaWQgIT09IFwiZW1haWwtYmFycy1pY29uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbF9iYXJzX21lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICB9LFxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXZFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\n");
---
> eval("var EmailBarsMenuTemplate = __webpack_require__(/*! ../../../email-sidebar/email-bars-menu.template */ \"./mods/email/lib/email-sidebar/email-bars-menu.template.js\");\n\nvar EmailInboxHeaderTemplate = __webpack_require__(/*! ./email-inbox-header.template */ \"./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js\");\n\nmodule.exports = EmailInboxHeader = {\n  render: function render(app, data) {\n    document.querySelector('.email-header').innerHTML = EmailInboxHeaderTemplate(app, data);\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {\n    document.getElementById('email-select-icon').addEventListener('click', function (e) {\n      Array.from(document.getElementsByClassName('email-selected')).forEach(function (checkbox) {\n        checkbox.checked = e.currentTarget.checked;\n  ***REMOVED***);\n***REMOVED***);\n    document.getElementById('email-delete-icon').addEventListener('click', function (e) {\n      var email_list = document.querySelector('.email-list');\n      Array.from(document.getElementsByClassName('email-message')).forEach(function (mail) {\n        var is_checked = mail.children[0].checked; // remove from DOM\n\n        if (is_checked) {\n          email_list.removeChild(mail); //\n  ***REMOVED*** tell our parentmod to purge this transaction\n  ***REMOVED***\n\n          var mysig = mail.id;\n\n          for (var i = 0; i < data.parentmod.emails[data.parentmod.emails.active].length; i++) {\n            var mytx = data.parentmod.emails[data.parentmod.emails.active][i];\n\n            if (mytx.transaction.sig == mysig) {\n              data.parentmod.deleteTransaction(mytx);\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***\n  ***REMOVED***);\n***REMOVED***);\n    document.getElementById('email-bars-icon').addEventListener('click', function (e) {\n      var email_bars_menu = document.querySelector('#mobile.email-bars-menu');\n\n      if (email_bars_menu != null) {\n        email_bars_menu.style.display = email_bars_menu.style.display == \"block\" ? \"none\" : \"block\";\n  ***REMOVED*** else {\n        email_bars_menu = document.createElement('DIV');\n        email_bars_menu.classList.add('email-bars-menu');\n        email_bars_menu.id = \"mobile\";\n        email_bars_menu.style.display = \"block\";\n        email_bars_menu.innerHTML = EmailBarsMenuTemplate();\n\n        for (var i = 0; i < data.mods.length; i++) {\n          var mobile_email_apps = email_bars_menu.querySelectorAll(\":scope > .email-apps\");\n          mobile_email_apps[0].innerHTML += \"<li class=\\\"email-apps-item\\\" id=\\\"\".concat(i, \"\\\">\").concat(data.mods[i].name, \"</li>\");\n    ***REMOVED***\n\n        document.querySelector('body').append(email_bars_menu);\n        EmailBarsMenu.attachEvents(app, data); // extend functionatliy for mobile menu\n\n        email_bars_menu.addEventListener('click', function () {\n          email_bars_menu.style.display = \"none\";\n    ***REMOVED***);\n        window.addEventListener('click', function (e) {\n          if (e.target.id !== \"email-bars-icon\") {\n            email_bars_menu.style.display = \"none\";\n      ***REMOVED***\n    ***REMOVED***);\n  ***REMOVED***\n***REMOVED***);\n  ***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1tYWluL2VtYWlsLWhlYWRlci9lbWFpbC1pbmJveC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9lbWFpbC9saWIvZW1haWwtbWFpbi9lbWFpbC1oZWFkZXIvZW1haWwtaW5ib3gtaGVhZGVyL2VtYWlsLWluYm94LWhlYWRlci5qcz9mZDU5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVtYWlsQmFyc01lbnVUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlJyk7XG5jb25zdCBFbWFpbEluYm94SGVhZGVyVGVtcGxhdGUgPSByZXF1aXJlKCcuL2VtYWlsLWluYm94LWhlYWRlci50ZW1wbGF0ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVtYWlsSW5ib3hIZWFkZXIgPSB7XG5cbiAgcmVuZGVyKGFwcCwgZGF0YSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbWFpbC1oZWFkZXInKS5pbm5lckhUTUwgPSBFbWFpbEluYm94SGVhZGVyVGVtcGxhdGUoYXBwLCBkYXRhKTtcbiAgfSxcblxuICBhdHRhY2hFdmVudHMoYXBwLCBkYXRhKSB7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwtc2VsZWN0LWljb24nKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlbWFpbC1zZWxlY3RlZCcpKS5mb3JFYWNoKGNoZWNrYm94ID0+IHtcbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwtZGVsZXRlLWljb24nKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgbGV0IGVtYWlsX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1haWwtbGlzdCcpO1xuICAgICAgICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2VtYWlsLW1lc3NhZ2UnKSkuZm9yRWFjaChtYWlsID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXNfY2hlY2tlZCA9IG1haWwuY2hpbGRyZW5bMF0uY2hlY2tlZDtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIERPTVxuICAgICAgICAgICAgICAgIGlmIChpc19jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICBlbWFpbF9saXN0LnJlbW92ZUNoaWxkKG1haWwpO1xuICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgIC8vIHRlbGwgb3VyIHBhcmVudG1vZCB0byBwdXJnZSB0aGlzIHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgbGV0IG15c2lnID0gbWFpbC5pZDtcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5wYXJlbnRtb2QuZW1haWxzW2RhdGEucGFyZW50bW9kLmVtYWlscy5hY3RpdmVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBteXR4ID0gZGF0YS5wYXJlbnRtb2QuZW1haWxzW2RhdGEucGFyZW50bW9kLmVtYWlscy5hY3RpdmVdW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobXl0eC50cmFuc2FjdGlvbi5zaWcgPT0gbXlzaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLnBhcmVudG1vZC5kZWxldGVUcmFuc2FjdGlvbihteXR4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsLWJhcnMtaWNvbicpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlbWFpbF9iYXJzX21lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9iaWxlLmVtYWlsLWJhcnMtbWVudScpO1xuICAgICAgICAgICAgICAgIGlmIChlbWFpbF9iYXJzX21lbnUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbF9iYXJzX21lbnUuc3R5bGUuZGlzcGxheSA9IGVtYWlsX2JhcnNfbWVudS5zdHlsZS5kaXNwbGF5ID09IFwiYmxvY2tcIiA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgICAgICAgICAgICAgICAgICBlbWFpbF9iYXJzX21lbnUuY2xhc3NMaXN0LmFkZCgnZW1haWwtYmFycy1tZW51Jyk7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5pZCA9IFwibW9iaWxlXCJcbiAgICAgICAgICAgICAgICAgICAgZW1haWxfYmFyc19tZW51LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5pbm5lckhUTUwgPSBFbWFpbEJhcnNNZW51VGVtcGxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLm1vZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2JpbGVfZW1haWxfYXBwcyA9IGVtYWlsX2JhcnNfbWVudS5xdWVyeVNlbGVjdG9yQWxsKFwiOnNjb3BlID4gLmVtYWlsLWFwcHNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZV9lbWFpbF9hcHBzWzBdLmlubmVySFRNTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICs9IGA8bGkgY2xhc3M9XCJlbWFpbC1hcHBzLWl0ZW1cIiBpZD1cIiR7aX1cIj4ke2RhdGEubW9kc1tpXS5uYW1lfTwvbGk+YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kKGVtYWlsX2JhcnNfbWVudSk7XG4gICAgICAgICAgICAgICAgICAgIEVtYWlsQmFyc01lbnUuYXR0YWNoRXZlbnRzKGFwcCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV4dGVuZCBmdW5jdGlvbmF0bGl5IGZvciBtb2JpbGUgbWVudVxuXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsX2JhcnNfbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuaWQgIT09IFwiZW1haWwtYmFycy1pY29uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbF9iYXJzX21lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICB9LFxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXZFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js\n");
1492c1514
< eval("module.exports = EmailBarsMenuTemplate = function EmailBarsMenuTemplate() {\n  return \"\\n  <div class=\\\"email-navigator-bars-menu\\\">\\n  <div>\\n    <ul class=\\\"email-navigator\\\" id=\\\"email-navigator\\\">\\n      <li class=\\\"email-navigator-item active-navigator-item\\\" id=\\\"inbox\\\">Inbox</li>\\n      <li class=\\\"email-navigator-item\\\" id=\\\"sent\\\">Sent</li>\\n      <li class=\\\"email-navigator-item\\\" id=\\\"trash\\\">Trash</li>\\n    </ul>\\n  </div>\\n  <div>\\n    <ul class=\\\"email-apps\\\" id=\\\"email-apps\\\"></ul>\\n  </div>\\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWJhcnMtbWVudS50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlLmpzP2Q2NmEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBFbWFpbEJhcnNNZW51VGVtcGxhdGUgPSAoKSA9PiB7XG4gIHJldHVybiBgXG4gIDxkaXYgY2xhc3M9XCJlbWFpbC1uYXZpZ2F0b3ItYmFycy1tZW51XCI+XG4gIDxkaXY+XG4gICAgPHVsIGNsYXNzPVwiZW1haWwtbmF2aWdhdG9yXCIgaWQ9XCJlbWFpbC1uYXZpZ2F0b3JcIj5cbiAgICAgIDxsaSBjbGFzcz1cImVtYWlsLW5hdmlnYXRvci1pdGVtIGFjdGl2ZS1uYXZpZ2F0b3ItaXRlbVwiIGlkPVwiaW5ib3hcIj5JbmJveDwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJlbWFpbC1uYXZpZ2F0b3ItaXRlbVwiIGlkPVwic2VudFwiPlNlbnQ8L2xpPlxuICAgICAgPGxpIGNsYXNzPVwiZW1haWwtbmF2aWdhdG9yLWl0ZW1cIiBpZD1cInRyYXNoXCI+VHJhc2g8L2xpPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuICA8ZGl2PlxuICAgIDx1bCBjbGFzcz1cImVtYWlsLWFwcHNcIiBpZD1cImVtYWlsLWFwcHNcIj48L3VsPlxuICA8L2Rpdj5cbiAgYDtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFhQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/email/lib/email-sidebar/email-bars-menu.template.js\n");
---
> eval("module.exports = EmailBarsMenuTemplate = function EmailBarsMenuTemplate() {\n  return \"\\n    <ul class=\\\"email-navigator\\\" id=\\\"email-navigator\\\">\\n      <li class=\\\"email-navigator-item active-navigator-item\\\" id=\\\"inbox\\\">Inbox</li>\\n      <li class=\\\"email-navigator-item\\\" id=\\\"sent\\\">Sent</li>\\n      <li class=\\\"email-navigator-item\\\" id=\\\"trash\\\">Trash</li>\\n    </ul>\\n    <ul class=\\\"email-apps\\\" id=\\\"email-apps\\\"></ul>\\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VtYWlsL2xpYi9lbWFpbC1zaWRlYmFyL2VtYWlsLWJhcnMtbWVudS50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvZW1haWwvbGliL2VtYWlsLXNpZGViYXIvZW1haWwtYmFycy1tZW51LnRlbXBsYXRlLmpzP2Q2NmEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBFbWFpbEJhcnNNZW51VGVtcGxhdGUgPSAoKSA9PiB7XG4gIHJldHVybiBgXG4gICAgPHVsIGNsYXNzPVwiZW1haWwtbmF2aWdhdG9yXCIgaWQ9XCJlbWFpbC1uYXZpZ2F0b3JcIj5cbiAgICAgIDxsaSBjbGFzcz1cImVtYWlsLW5hdmlnYXRvci1pdGVtIGFjdGl2ZS1uYXZpZ2F0b3ItaXRlbVwiIGlkPVwiaW5ib3hcIj5JbmJveDwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJlbWFpbC1uYXZpZ2F0b3ItaXRlbVwiIGlkPVwic2VudFwiPlNlbnQ8L2xpPlxuICAgICAgPGxpIGNsYXNzPVwiZW1haWwtbmF2aWdhdG9yLWl0ZW1cIiBpZD1cInRyYXNoXCI+VHJhc2g8L2xpPlxuICAgIDwvdWw+XG4gICAgPHVsIGNsYXNzPVwiZW1haWwtYXBwc1wiIGlkPVwiZW1haWwtYXBwc1wiPjwvdWw+XG4gIGA7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBUUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/email/lib/email-sidebar/email-bars-menu.template.js\n");
1580c1602
< eval("var EncryptAppspaceTemplate = __webpack_require__(/*! ./encrypt-appspace.template.js */ \"./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\");\n\nmodule.exports = EncryptAppspace = {\n  render: function render(app, data) {\n    document.querySelector(\".email-appspace\").innerHTML = EncryptAppspaceTemplate();\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {\n    document.querySelector('.email-submit').addEventListener('click', function (e) {\n      var recipient = document.getElementById('email-to-address').value;\n      data.parentmod.appspace_mod.initiate_key_exchange(recipient);\n***REMOVED***);\n    document.querySelector('.fetch').addEventListener('click', function (e) {\n      alert(\"testing fetch identifier: \");\n      data.parentmod.app.keys.fetchIdentifier(\"*\", function (rows) {\n        alert(\"RESULT: \" + JSON.stringify(rows));\n  ***REMOVED***);\n***REMOVED***);\n  ***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UuanM/OWU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFbmNyeXB0QXBwc3BhY2VUZW1wbGF0ZSBcdD0gcmVxdWlyZSgnLi9lbmNyeXB0LWFwcHNwYWNlLnRlbXBsYXRlLmpzJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBFbmNyeXB0QXBwc3BhY2UgPSB7XG5cbiAgICByZW5kZXIoYXBwLCBkYXRhKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsLWFwcHNwYWNlXCIpLmlubmVySFRNTCA9IEVuY3J5cHRBcHBzcGFjZVRlbXBsYXRlKCk7XG4gICAgfSxcblxuICAgIGF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpIHtcblxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtYWlsLXN1Ym1pdCcpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdCAgbGV0IHJlY2lwaWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbC10by1hZGRyZXNzJykudmFsdWU7XG5cdCAgZGF0YS5wYXJlbnRtb2QuYXBwc3BhY2VfbW9kLmluaXRpYXRlX2tleV9leGNoYW5nZShyZWNpcGllbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZXRjaCcpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5hbGVydChcInRlc3RpbmcgZmV0Y2ggaWRlbnRpZmllcjogXCIpO1xuXHQgIGRhdGEucGFyZW50bW9kLmFwcC5rZXlzLmZldGNoSWRlbnRpZmllcihcIipcIiwgZnVuY3Rpb24ocm93cykge1xuYWxlcnQoXCJSRVNVTFQ6IFwiICsgSlNPTi5zdHJpbmdpZnkocm93cykpO1xuXHQgIH0pO1xuICAgICAgfSk7XG5cbiAgICB9LFxuXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXRCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/encrypt/lib/email-appspace/encrypt-appspace.js\n");
---
> eval("var EncryptAppspaceTemplate = __webpack_require__(/*! ./encrypt-appspace.template.js */ \"./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\");\n\nmodule.exports = EncryptAppspace = {\n  render: function render(app, data) {\n    document.querySelector(\".email-appspace\").innerHTML = EncryptAppspaceTemplate();\n  ***REMOVED***,\n  attachEvents: function attachEvents(app, data) {\n    document.querySelector('.email-submit').addEventListener('click', function (e) {\n      var recipient = document.getElementById('email-to-address').value;\n      data.parentmod.appspace_mod.initiate_key_exchange(recipient);\n***REMOVED***);\n  ***REMOVED***\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UuanM/OWU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFbmNyeXB0QXBwc3BhY2VUZW1wbGF0ZSBcdD0gcmVxdWlyZSgnLi9lbmNyeXB0LWFwcHNwYWNlLnRlbXBsYXRlLmpzJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBFbmNyeXB0QXBwc3BhY2UgPSB7XG5cbiAgICByZW5kZXIoYXBwLCBkYXRhKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsLWFwcHNwYWNlXCIpLmlubmVySFRNTCA9IEVuY3J5cHRBcHBzcGFjZVRlbXBsYXRlKCk7XG4gICAgfSxcblxuICAgIGF0dGFjaEV2ZW50cyhhcHAsIGRhdGEpIHtcblxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtYWlsLXN1Ym1pdCcpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdCAgbGV0IHJlY2lwaWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbC10by1hZGRyZXNzJykudmFsdWU7XG5cdCAgZGF0YS5wYXJlbnRtb2QuYXBwc3BhY2VfbW9kLmluaXRpYXRlX2tleV9leGNoYW5nZShyZWNpcGllbnQpO1xuICAgICAgfSk7XG5cbiAgICB9LFxuXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQWRBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/encrypt/lib/email-appspace/encrypt-appspace.js\n");
1591c1613
< eval("module.exports = EmailAppspaceTemplate = function EmailAppspaceTemplate() {\n  return \"\\n<div class=\\\"email-appspace-encrypt\\\">\\n  <h3>Encrypt transations and messages:</h3>\\n  <p>\\n    Enter a private key or address to perform an onchain Diffie-Hellman key exchange and encrypt your transactions.\\n  </p>\\n  <br />\\n  <div class=\\\"grid-2\\\">\\n    <div>Address:</div>\\n    <div><input id=\\\"email-to-address\\\" type=\\\"text\\\" placeholder=\\\"Recipient Address\\\"></div>\\n    <div></div>\\n    <div>\\n      <button class=\\\"email-submit\\\">Encrypt</button>\\n      <button class=\\\"fetch\\\">Fetch</button>\\n    </div>\\n  </div>\\n</div> \\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGUuanM/YmQxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEVtYWlsQXBwc3BhY2VUZW1wbGF0ZSA9ICgpID0+IHtcbiAgcmV0dXJuIGBcbjxkaXYgY2xhc3M9XCJlbWFpbC1hcHBzcGFjZS1lbmNyeXB0XCI+XG4gIDxoMz5FbmNyeXB0IHRyYW5zYXRpb25zIGFuZCBtZXNzYWdlczo8L2gzPlxuICA8cD5cbiAgICBFbnRlciBhIHByaXZhdGUga2V5IG9yIGFkZHJlc3MgdG8gcGVyZm9ybSBhbiBvbmNoYWluIERpZmZpZS1IZWxsbWFuIGtleSBleGNoYW5nZSBhbmQgZW5jcnlwdCB5b3VyIHRyYW5zYWN0aW9ucy5cbiAgPC9wPlxuICA8YnIgLz5cbiAgPGRpdiBjbGFzcz1cImdyaWQtMlwiPlxuICAgIDxkaXY+QWRkcmVzczo8L2Rpdj5cbiAgICA8ZGl2PjxpbnB1dCBpZD1cImVtYWlsLXRvLWFkZHJlc3NcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiUmVjaXBpZW50IEFkZHJlc3NcIj48L2Rpdj5cbiAgICA8ZGl2PjwvZGl2PlxuICAgIDxkaXY+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiZW1haWwtc3VibWl0XCI+RW5jcnlwdDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImZldGNoXCI+RmV0Y2g8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj4gXG4gIGA7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFrQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\n");
---
> eval("module.exports = EmailAppspaceTemplate = function EmailAppspaceTemplate() {\n  return \"\\n<div class=\\\"email-appspace-encrypt\\\">\\n  <h3>Encrypt transations and messages:</h3>\\n  <p>\\n    Enter a private key or address to perform an onchain Diffie-Hellman key exchange and encrypt your transactions.\\n  </p>\\n  <br />\\n  <div class=\\\"grid-2\\\">\\n    <div>Address:</div>\\n    <div><input id=\\\"email-to-address\\\" type=\\\"text\\\" placeholder=\\\"Recipient Address\\\"></div>\\n    <div></div>\\n    <div>\\n      <button class=\\\"email-submit\\\">Encrypt</button>\\n    </div>\\n  </div>\\n</div> \\n  \";\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL2VuY3J5cHQvbGliL2VtYWlsLWFwcHNwYWNlL2VuY3J5cHQtYXBwc3BhY2UudGVtcGxhdGUuanM/YmQxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEVtYWlsQXBwc3BhY2VUZW1wbGF0ZSA9ICgpID0+IHtcbiAgcmV0dXJuIGBcbjxkaXYgY2xhc3M9XCJlbWFpbC1hcHBzcGFjZS1lbmNyeXB0XCI+XG4gIDxoMz5FbmNyeXB0IHRyYW5zYXRpb25zIGFuZCBtZXNzYWdlczo8L2gzPlxuICA8cD5cbiAgICBFbnRlciBhIHByaXZhdGUga2V5IG9yIGFkZHJlc3MgdG8gcGVyZm9ybSBhbiBvbmNoYWluIERpZmZpZS1IZWxsbWFuIGtleSBleGNoYW5nZSBhbmQgZW5jcnlwdCB5b3VyIHRyYW5zYWN0aW9ucy5cbiAgPC9wPlxuICA8YnIgLz5cbiAgPGRpdiBjbGFzcz1cImdyaWQtMlwiPlxuICAgIDxkaXY+QWRkcmVzczo8L2Rpdj5cbiAgICA8ZGl2PjxpbnB1dCBpZD1cImVtYWlsLXRvLWFkZHJlc3NcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiUmVjaXBpZW50IEFkZHJlc3NcIj48L2Rpdj5cbiAgICA8ZGl2PjwvZGl2PlxuICAgIDxkaXY+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiZW1haWwtc3VibWl0XCI+RW5jcnlwdDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PiBcbiAgYDtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQWlCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mods/encrypt/lib/email-appspace/encrypt-appspace.template.js\n");
1748c1770
< eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChatListRowTemplate\", function() { return ChatListRowTemplate; ***REMOVED***);\nvar datetimeFormatter = __webpack_require__(/*! ../../../../lib/helpers/datetime_formatter */ \"./lib/helpers/datetime_formatter.js\");\n\nvar ChatListRowTemplate = function ChatListRowTemplate(_ref, _ref2) {\n  var name = _ref.name,\n      room_id = _ref.room_id;\n  var message = _ref2.message,\n      timestamp = _ref2.timestamp;\n  var datetime = datetimeFormatter(timestamp);\n  return \"\\n    <div id=\\\"\".concat(room_id, \"\\\" class=\\\"chat-row\\\">\\n      <img src=\\\"logo-color.svg\\\">\\n      <div class=\\\"chat-content\\\">\\n          <div class=\\\"chat-group-name\\\">\").concat(name, \"</div>\\n          <div class=\\\"chat-last-message\\\">\").concat(message.substring(0, 72), \"</div>\\n      </div>\\n      <div class=\\\"chat-last-message-timestamp\\\">\").concat(datetime.hours, \":\").concat(datetime.minutes, \"</div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qcz9hNzAyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRhdGV0aW1lRm9ybWF0dGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vbGliL2hlbHBlcnMvZGF0ZXRpbWVfZm9ybWF0dGVyJyk7XG5cbmV4cG9ydCBjb25zdCBDaGF0TGlzdFJvd1RlbXBsYXRlID0gKHtuYW1lLCByb29tX2lkfSwge21lc3NhZ2UsIHRpbWVzdGFtcH0pID0+IHtcbiAgbGV0IGRhdGV0aW1lID0gZGF0ZXRpbWVGb3JtYXR0ZXIodGltZXN0YW1wKTtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGlkPVwiJHtyb29tX2lkfVwiIGNsYXNzPVwiY2hhdC1yb3dcIj5cbiAgICAgIDxpbWcgc3JjPVwibG9nby1jb2xvci5zdmdcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWNvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1ncm91cC1uYW1lXCI+JHtuYW1lfTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWxhc3QtbWVzc2FnZVwiPiR7bWVzc2FnZS5zdWJzdHJpbmcoMCwgNzIpfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1sYXN0LW1lc3NhZ2UtdGltZXN0YW1wXCI+JHtkYXRldGltZS5ob3Vyc306JHtkYXRldGltZS5taW51dGVzfTwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/pwa-saito/chat-ui/chat-list/chat-list-row.template.js\n");
---
> eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChatListRowTemplate\", function() { return ChatListRowTemplate; ***REMOVED***);\nvar datetimeFormatter = __webpack_require__(/*! ../../../../lib/helpers/datetime_formatter */ \"./lib/helpers/datetime_formatter.js\");\n\nvar ChatListRowTemplate = function ChatListRowTemplate(_ref) {\n  var name = _ref.name,\n      group_id = _ref.group_id,\n      message = _ref.message,\n      timestamp = _ref.timestamp;\n  var datetime = datetimeFormatter(timestamp);\n  return \"\\n    <div id=\\\"\".concat(group_id, \"\\\" class=\\\"chat-row\\\">\\n      <img src=\\\"logo-color.svg\\\">\\n      <div class=\\\"chat-content\\\">\\n          <div class=\\\"chat-group-name\\\">\").concat(name, \"</div>\\n          <div class=\\\"chat-last-message\\\">\").concat(message.substring(0, 72), \"</div>\\n      </div>\\n      <div class=\\\"chat-last-message-timestamp\\\">\").concat(datetime.hours, \":\").concat(datetime.minutes, \"</div>\\n    </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3B3YS1zYWl0by9jaGF0LXVpL2NoYXQtbGlzdC9jaGF0LWxpc3Qtcm93LnRlbXBsYXRlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9wd2Etc2FpdG8vY2hhdC11aS9jaGF0LWxpc3QvY2hhdC1saXN0LXJvdy50ZW1wbGF0ZS5qcz9hNzAyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRhdGV0aW1lRm9ybWF0dGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vbGliL2hlbHBlcnMvZGF0ZXRpbWVfZm9ybWF0dGVyJyk7XG5cbmV4cG9ydCBjb25zdCBDaGF0TGlzdFJvd1RlbXBsYXRlID0gKHtuYW1lLCBncm91cF9pZCwgbWVzc2FnZSwgdGltZXN0YW1wfSkgPT4ge1xuICBsZXQgZGF0ZXRpbWUgPSBkYXRldGltZUZvcm1hdHRlcih0aW1lc3RhbXApO1xuICByZXR1cm4gYFxuICAgIDxkaXYgaWQ9XCIke2dyb3VwX2lkfVwiIGNsYXNzPVwiY2hhdC1yb3dcIj5cbiAgICAgIDxpbWcgc3JjPVwibG9nby1jb2xvci5zdmdcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWNvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1ncm91cC1uYW1lXCI+JHtuYW1lfTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWxhc3QtbWVzc2FnZVwiPiR7bWVzc2FnZS5zdWJzdHJpbmcoMCwgNzIpfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1sYXN0LW1lc3NhZ2UtdGltZXN0YW1wXCI+JHtkYXRldGltZS5ob3Vyc306JHtkYXRldGltZS5taW51dGVzfTwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/pwa-saito/chat-ui/chat-list/chat-list-row.template.js\n");
1938c1960
< eval("function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; ***REMOVED***; ***REMOVED*** else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; ***REMOVED***; ***REMOVED*** return _typeof(obj); ***REMOVED***\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; ***REMOVED*** return _assertThisInitialized(self); ***REMOVED***\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); ***REMOVED*** return self; ***REMOVED***\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; ***REMOVED*** else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); ***REMOVED*** return desc.value; ***REMOVED***; ***REMOVED*** return _get(target, property, receiver || target); ***REMOVED***\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; ***REMOVED*** return object; ***REMOVED***\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); ***REMOVED***; return _getPrototypeOf(o); ***REMOVED***\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); ***REMOVED*** subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true ***REMOVED*** ***REMOVED***); if (superClass) _setPrototypeOf(subClass, superClass); ***REMOVED***\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; ***REMOVED***; return _setPrototypeOf(o, p); ***REMOVED***\n\nvar qrcode = __webpack_require__(/*! ./lib/scanner */ \"./mods/qrscanner/lib/scanner.js\");\n\nvar ModTemplate = __webpack_require__(/*! ../../lib/templates/modtemplate */ \"./lib/templates/modtemplate.js\");\n\nvar QRScannerTemplate = __webpack_require__(/*! ./qrscanner.template */ \"./mods/qrscanner/qrscanner.template.js\");\n\nvar QRScanner =\n/*#__PURE__*/\nfunction (_ModTemplate) {\n  _inherits(QRScanner, _ModTemplate);\n\n  function QRScanner(app) {\n    var _this;\n\n    _classCallCheck(this, QRScanner);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QRScanner).call(this, app));\n    _this.video = null;\n    _this.canvas = null;\n    _this.canvas_context = null;\n    _this.isStreamInit = false;\n    _this.constraints = {\n      audio: false,\n      video: {\n        facingMode: 'environment'\n  ***REMOVED***\n***REMOVED***;\n    qrcode.callback = _this.read;\n    _this.name = \"QRScanner\";\n    return _this;\n  ***REMOVED***\n\n  _createClass(QRScanner, [{\n    key: \"initialize\",\n    value: function initialize(app) {\n      _get(_getPrototypeOf(QRScanner.prototype), \"initialize\", this).call(this, app);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"initializeHTML\",\n    value: function () {\n      var _initializeHTML = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(app) {\n        var _this2 = this;\n\n        var stream;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.video = document.querySelector('video');\n                this.canvas = document.getElementById('qr-canvas');\n                this.canvas_context = this.canvas.getContext(\"2d\");\n                _context.prev = 3;\n                _context.next = 6;\n                return navigator.mediaDevices.getUserMedia(this.constraints);\n\n              case 6:\n                stream = _context.sent;\n                this.handleSuccess(stream);\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                this.handleError(_context.t0);\n\n              case 13:\n                setTimeout(function () {\n                  _this2.attemptQRDecode();\n            ***REMOVED***, 500);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this, [[3, 10]]);\n  ***REMOVED***));\n\n      function initializeHTML(_x) {\n        return _initializeHTML.apply(this, arguments);\n  ***REMOVED***\n\n      return initializeHTML;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"render\",\n    value: function render() {\n      document.querySelector('body').innerHTML = QRScannerTemplate();\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attachEvents\",\n    value: function attachEvents() {\n      var _this3 = this;\n\n      document.querySelector('.file-button').addEventListener('click', function (e) {\n        var inputFile = document.getElementById('file-input');\n        inputFile.addEventListener('change', function (e) {\n          var file = e.target.files[0];\n\n          if (!file) {\n            return;\n      ***REMOVED***\n\n          _this3.decodeFromFile(file);\n    ***REMOVED***);\n        inputFile.click();\n  ***REMOVED***);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attemptQRDecode\",\n    value: function attemptQRDecode() {\n      var _this4 = this;\n\n      if (this.isStreamInit) {\n        this.canvas.width = this.video.videoWidth;\n        this.canvas.height = this.video.videoHeight;\n        this.canvas_context.drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height);\n\n***REMOVED***\n          qrcode.decode();\n    ***REMOVED*** catch (err) {\n          console.log(err);\n          setTimeout(function () {\n            _this4.attemptQRDecode();\n      ***REMOVED***, 500);\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"decodeFromFile\",\n    value: function decodeFromFile(f) {\n      var _this5 = this;\n\n      var reader = new FileReader();\n\n      reader.onload = function (file) {\n        return function (e) {\n          _this5.canvas_context.clearRect(0, 0, _this5.canvas.width, _this5.canvas.height);\n\n          qrcode.decode(e.target.result);\n    ***REMOVED***;\n  ***REMOVED***(f);\n\n      reader.readAsDataURL(f);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"handleSuccess\",\n    value: function handleSuccess(stream) {\n      window.stream = stream;\n      this.video.srcObject = stream;\n      this.isStreamInit = true;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"handleError\",\n    value: function handleError(error) {\n      console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);\n***REMOVED*** // default read value that we provide if a callback isn't declared in initialize\n\n  ***REMOVED***, {\n    key: \"read\",\n    value: function read(a) {\n      var _this6 = this;\n\n      alert(a);\n      setTimeout(function () {\n        _this6.attemptQRDecode();\n  ***REMOVED***, 500);\n***REMOVED***\n  ***REMOVED***]);\n\n  return QRScanner;\n***REMOVED***(ModTemplate);\n\nmodule.exports = QRScanner;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanM/MGQ5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBxcmNvZGUgPSByZXF1aXJlKCcuL2xpYi9zY2FubmVyJyk7XG5jb25zdCBNb2RUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uL2xpYi90ZW1wbGF0ZXMvbW9kdGVtcGxhdGUnKTtcblxuY29uc3QgUVJTY2FubmVyVGVtcGxhdGUgPSByZXF1aXJlKCcuL3Fyc2Nhbm5lci50ZW1wbGF0ZScpO1xuXG5jbGFzcyBRUlNjYW5uZXIgZXh0ZW5kcyBNb2RUZW1wbGF0ZSB7XG4gIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgIHN1cGVyKGFwcCk7XG5cbiAgICB0aGlzLnZpZGVvID0gbnVsbDtcbiAgICB0aGlzLmNhbnZhcyA9IG51bGw7XG5cbiAgICB0aGlzLmNhbnZhc19jb250ZXh0ID0gbnVsbDtcblxuICAgIHRoaXMuaXNTdHJlYW1Jbml0ID0gZmFsc2U7XG5cbiAgICB0aGlzLmNvbnN0cmFpbnRzID0ge1xuICAgICAgYXVkaW86IGZhbHNlLFxuICAgICAgdmlkZW86IHtcbiAgICAgICAgICBmYWNpbmdNb2RlOiAnZW52aXJvbm1lbnQnXG4gICAgICB9XG4gICAgfTtcblxuICAgIHFyY29kZS5jYWxsYmFjayA9IHRoaXMucmVhZDtcblxuICAgIHRoaXMubmFtZSA9IFwiUVJTY2FubmVyXCI7XG4gIH1cblxuICBpbml0aWFsaXplKGFwcCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoYXBwKTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemVIVE1MKGFwcCkge1xuICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd2aWRlbycpO1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FyLWNhbnZhcycpO1xuXG4gICAgdGhpcy5jYW52YXNfY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodGhpcy5jb25zdHJhaW50cylcbiAgICAgIHRoaXMuaGFuZGxlU3VjY2VzcyhzdHJlYW0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnIpO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5hdHRlbXB0UVJEZWNvZGUoKSB9LCA1MDApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5pbm5lckhUTUwgPSBRUlNjYW5uZXJUZW1wbGF0ZSgpO1xuICB9XG5cbiAgYXR0YWNoRXZlbnRzKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWJ1dHRvbicpXG4gICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGlucHV0RmlsZSAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1pbnB1dCcpO1xuICAgICAgICAgICAgIGlucHV0RmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgaW5wdXRGaWxlLmNsaWNrKCk7XG4gICAgICAgICB9KTtcbiAgfVxuXG4gIGF0dGVtcHRRUkRlY29kZSgpIHtcbiAgICBpZiAodGhpcy5pc1N0cmVhbUluaXQpICB7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy52aWRlby52aWRlb1dpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnZpZGVvLnZpZGVvSGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbnZhc19jb250ZXh0LmRyYXdJbWFnZSh0aGlzLnZpZGVvLCAwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcXJjb2RlLmRlY29kZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5hdHRlbXB0UVJEZWNvZGUoKSB9LCA1MDApO1xuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVjb2RlRnJvbUZpbGUoZikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWQgPSAoKGZpbGUpID0+IHtcbiAgICAgICAgIHJldHVybiAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW52YXNfY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICBxcmNvZGUuZGVjb2RlKGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICB9O1xuICAgIH0pKGYpO1xuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGYpO1xuICB9XG5cbiAgaGFuZGxlU3VjY2VzcyhzdHJlYW0pIHtcbiAgICB3aW5kb3cuc3RyZWFtID0gc3RyZWFtO1xuICAgIHRoaXMudmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgIHRoaXMuaXNTdHJlYW1Jbml0ID0gdHJ1ZTtcbiAgfVxuXG4gIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ25hdmlnYXRvci5NZWRpYURldmljZXMuZ2V0VXNlck1lZGlhIGVycm9yOiAnLCBlcnJvci5tZXNzYWdlLCBlcnJvci5uYW1lKTtcbiAgfVxuXG4gIC8vIGRlZmF1bHQgcmVhZCB2YWx1ZSB0aGF0IHdlIHByb3ZpZGUgaWYgYSBjYWxsYmFjayBpc24ndCBkZWNsYXJlZCBpbiBpbml0aWFsaXplXG4gIHJlYWQoYSkge1xuICAgIGFsZXJ0KGEpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmF0dGVtcHRRUkRlY29kZSgpIH0sIDUwMCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBRUlNjYW5uZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBT0E7QUFFQTtBQW5CQTtBQW9CQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBOzs7Ozs7OztBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTs7QUFEQTtBQUNBOzs7Ozs7O0FBRUE7QUFDQTs7QUFDQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7OztBQW5HQTtBQUNBO0FBcUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/qrscanner/qrscanner.js\n");
---
> eval("function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; ***REMOVED***; ***REMOVED*** else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; ***REMOVED***; ***REMOVED*** return _typeof(obj); ***REMOVED***\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; ***REMOVED*** return _assertThisInitialized(self); ***REMOVED***\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); ***REMOVED*** return self; ***REMOVED***\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; ***REMOVED*** else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); ***REMOVED*** return desc.value; ***REMOVED***; ***REMOVED*** return _get(target, property, receiver || target); ***REMOVED***\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; ***REMOVED*** return object; ***REMOVED***\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); ***REMOVED***; return _getPrototypeOf(o); ***REMOVED***\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); ***REMOVED*** subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true ***REMOVED*** ***REMOVED***); if (superClass) _setPrototypeOf(subClass, superClass); ***REMOVED***\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; ***REMOVED***; return _setPrototypeOf(o, p); ***REMOVED***\n\nvar qrcode = __webpack_require__(/*! ./lib/scanner */ \"./mods/qrscanner/lib/scanner.js\");\n\nvar ModTemplate = __webpack_require__(/*! ../../lib/templates/modtemplate */ \"./lib/templates/modtemplate.js\");\n\nvar QRScannerTemplate = __webpack_require__(/*! ./qrscanner.template */ \"./mods/qrscanner/qrscanner.template.js\");\n\nvar QRScanner =\n/*#__PURE__*/\nfunction (_ModTemplate) {\n  _inherits(QRScanner, _ModTemplate);\n\n  function QRScanner(app) {\n    var _this;\n\n    _classCallCheck(this, QRScanner);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QRScanner).call(this, app));\n    _this.events = ['encrypt-key-exchange-confirm'];\n    _this.video = null;\n    _this.canvas = null;\n    _this.canvas_context = null;\n    _this.isStreamInit = false;\n    _this.constraints = {\n      audio: false,\n      video: {\n        facingMode: 'environment'\n  ***REMOVED***\n***REMOVED***;\n\n    qrcode.callback = function (data) {\n      _this.read(data);\n***REMOVED***;\n\n    _this.name = \"QRScanner\";\n    return _this;\n  ***REMOVED***\n\n  _createClass(QRScanner, [{\n    key: \"initialize\",\n    value: function initialize(app) {\n      _get(_getPrototypeOf(QRScanner.prototype), \"initialize\", this).call(this, app);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"initializeHTML\",\n    value: function () {\n      var _initializeHTML = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(app) {\n        var _this2 = this;\n\n        var stream;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.video = document.querySelector('video');\n                this.canvas = document.getElementById('qr-canvas');\n                this.canvas_context = this.canvas.getContext(\"2d\");\n                _context.prev = 3;\n                _context.next = 6;\n                return navigator.mediaDevices.getUserMedia(this.constraints);\n\n              case 6:\n                stream = _context.sent;\n                this.handleSuccess(stream);\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                this.handleError(_context.t0);\n\n              case 13:\n                setTimeout(function () {\n                  _this2.attemptQRDecode();\n            ***REMOVED***, 500);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this, [[3, 10]]);\n  ***REMOVED***));\n\n      function initializeHTML(_x) {\n        return _initializeHTML.apply(this, arguments);\n  ***REMOVED***\n\n      return initializeHTML;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"render\",\n    value: function render() {\n      document.querySelector('body').innerHTML = QRScannerTemplate();\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attachEvents\",\n    value: function attachEvents() {\n      var _this3 = this;\n\n      document.querySelector('.file-button').addEventListener('click', function (e) {\n        var inputFile = document.getElementById('file-input');\n        inputFile.addEventListener('change', function (e) {\n          var file = e.target.files[0];\n\n          if (!file) {\n            return;\n      ***REMOVED***\n\n          _this3.decodeFromFile(file);\n    ***REMOVED***);\n        inputFile.click();\n  ***REMOVED***);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attemptQRDecode\",\n    value: function attemptQRDecode() {\n      var _this4 = this;\n\n      if (this.isStreamInit) {\n        this.canvas.width = this.video.videoWidth;\n        this.canvas.height = this.video.videoHeight;\n        this.canvas_context.drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height);\n\n***REMOVED***\n          qrcode.decode();\n    ***REMOVED*** catch (err) {\n          console.log(err);\n          setTimeout(function () {\n            _this4.attemptQRDecode();\n      ***REMOVED***, 500);\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"decodeFromFile\",\n    value: function decodeFromFile(f) {\n      var _this5 = this;\n\n      var reader = new FileReader();\n\n      reader.onload = function (file) {\n        return function (e) {\n          _this5.canvas_context.clearRect(0, 0, _this5.canvas.width, _this5.canvas.height);\n\n          qrcode.decode(e.target.result);\n    ***REMOVED***;\n  ***REMOVED***(f);\n\n      reader.readAsDataURL(f);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"handleSuccess\",\n    value: function handleSuccess(stream) {\n      window.stream = stream;\n      this.video.srcObject = stream;\n      this.isStreamInit = true;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"handleError\",\n    value: function handleError(error) {\n      console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"receiveEvent\",\n    value: function receiveEvent(type, data) {\n      if (type === \"encrypt-key-exchange-confirm\") {\n        if (document.getElementById('qr-canvas')) {\n          alert('sucess');\n          window.location.assign('/chat');\n    ***REMOVED***\n  ***REMOVED***\n***REMOVED*** // default read value that we provide if a callback isn't declared in initialize\n\n  ***REMOVED***, {\n    key: \"read\",\n    value: function read(a) {\n      var _this6 = this;\n\n      if (this.app.crypto.isPublicKey(a)) {\n        var encrypt_mod = this.app.modules.returnModule('Encrypt');\n        encrypt_mod.initiate_key_exchange(a);\n        alert(\"Initiating Key Exchange with \".concat(a));\n  ***REMOVED*** else {\n        this.sendEvent('qrcode', a);\n  ***REMOVED***\n\n      setTimeout(function () {\n        _this6.attemptQRDecode();\n  ***REMOVED***, 500);\n***REMOVED***\n  ***REMOVED***]);\n\n  return QRScanner;\n***REMOVED***(ModTemplate);\n\nmodule.exports = QRScanner;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2RzL3Fyc2Nhbm5lci9xcnNjYW5uZXIuanM/MGQ5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBxcmNvZGUgPSByZXF1aXJlKCcuL2xpYi9zY2FubmVyJyk7XG5jb25zdCBNb2RUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uL2xpYi90ZW1wbGF0ZXMvbW9kdGVtcGxhdGUnKTtcblxuY29uc3QgUVJTY2FubmVyVGVtcGxhdGUgPSByZXF1aXJlKCcuL3Fyc2Nhbm5lci50ZW1wbGF0ZScpO1xuXG5jbGFzcyBRUlNjYW5uZXIgZXh0ZW5kcyBNb2RUZW1wbGF0ZSB7XG4gIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgIHN1cGVyKGFwcCk7XG5cbiAgICB0aGlzLmV2ZW50cyA9IFsnZW5jcnlwdC1rZXktZXhjaGFuZ2UtY29uZmlybSddO1xuXG4gICAgdGhpcy52aWRlbyA9IG51bGw7XG4gICAgdGhpcy5jYW52YXMgPSBudWxsO1xuXG4gICAgdGhpcy5jYW52YXNfY29udGV4dCA9IG51bGw7XG5cbiAgICB0aGlzLmlzU3RyZWFtSW5pdCA9IGZhbHNlO1xuXG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHtcbiAgICAgIGF1ZGlvOiBmYWxzZSxcbiAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgZmFjaW5nTW9kZTogJ2Vudmlyb25tZW50J1xuICAgICAgfVxuICAgIH07XG5cbiAgICBxcmNvZGUuY2FsbGJhY2sgPSAoZGF0YSkgPT4geyB0aGlzLnJlYWQoZGF0YSkgfTtcblxuICAgIHRoaXMubmFtZSA9IFwiUVJTY2FubmVyXCI7XG4gIH1cblxuICBpbml0aWFsaXplKGFwcCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoYXBwKTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemVIVE1MKGFwcCkge1xuICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd2aWRlbycpO1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FyLWNhbnZhcycpO1xuXG4gICAgdGhpcy5jYW52YXNfY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodGhpcy5jb25zdHJhaW50cylcbiAgICAgIHRoaXMuaGFuZGxlU3VjY2VzcyhzdHJlYW0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnIpO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5hdHRlbXB0UVJEZWNvZGUoKSB9LCA1MDApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5pbm5lckhUTUwgPSBRUlNjYW5uZXJUZW1wbGF0ZSgpO1xuICB9XG5cbiAgYXR0YWNoRXZlbnRzKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWJ1dHRvbicpXG4gICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGlucHV0RmlsZSAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1pbnB1dCcpO1xuICAgICAgICAgICAgIGlucHV0RmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgaW5wdXRGaWxlLmNsaWNrKCk7XG4gICAgICAgICB9KTtcbiAgfVxuXG4gIGF0dGVtcHRRUkRlY29kZSgpIHtcbiAgICBpZiAodGhpcy5pc1N0cmVhbUluaXQpICB7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy52aWRlby52aWRlb1dpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnZpZGVvLnZpZGVvSGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbnZhc19jb250ZXh0LmRyYXdJbWFnZSh0aGlzLnZpZGVvLCAwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcXJjb2RlLmRlY29kZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5hdHRlbXB0UVJEZWNvZGUoKSB9LCA1MDApO1xuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVjb2RlRnJvbUZpbGUoZikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWQgPSAoKGZpbGUpID0+IHtcbiAgICAgICAgIHJldHVybiAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW52YXNfY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICBxcmNvZGUuZGVjb2RlKGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICB9O1xuICAgIH0pKGYpO1xuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGYpO1xuICB9XG5cbiAgaGFuZGxlU3VjY2VzcyhzdHJlYW0pIHtcbiAgICB3aW5kb3cuc3RyZWFtID0gc3RyZWFtO1xuICAgIHRoaXMudmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgIHRoaXMuaXNTdHJlYW1Jbml0ID0gdHJ1ZTtcbiAgfVxuXG4gIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ25hdmlnYXRvci5NZWRpYURldmljZXMuZ2V0VXNlck1lZGlhIGVycm9yOiAnLCBlcnJvci5tZXNzYWdlLCBlcnJvci5uYW1lKTtcbiAgfVxuXG4gIHJlY2VpdmVFdmVudCh0eXBlLCBkYXRhKSB7XG4gICAgaWYgKHR5cGUgPT09IFwiZW5jcnlwdC1rZXktZXhjaGFuZ2UtY29uZmlybVwiKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXItY2FudmFzJykpIHtcbiAgICAgICAgICBhbGVydCgnc3VjZXNzJyk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbignL2NoYXQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGRlZmF1bHQgcmVhZCB2YWx1ZSB0aGF0IHdlIHByb3ZpZGUgaWYgYSBjYWxsYmFjayBpc24ndCBkZWNsYXJlZCBpbiBpbml0aWFsaXplXG4gIHJlYWQoYSkge1xuICAgIGlmICh0aGlzLmFwcC5jcnlwdG8uaXNQdWJsaWNLZXkoYSkpIHtcbiAgICAgIGxldCBlbmNyeXB0X21vZCA9IHRoaXMuYXBwLm1vZHVsZXMucmV0dXJuTW9kdWxlKCdFbmNyeXB0Jyk7XG4gICAgICBlbmNyeXB0X21vZC5pbml0aWF0ZV9rZXlfZXhjaGFuZ2UoYSk7XG4gICAgICBhbGVydChgSW5pdGlhdGluZyBLZXkgRXhjaGFuZ2Ugd2l0aCAke2F9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEV2ZW50KCdxcmNvZGUnLCBhKTtcbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuYXR0ZW1wdFFSRGVjb2RlKCkgfSwgNTAwKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFFSU2Nhbm5lcjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQXJCQTtBQXNCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBOzs7Ozs7OztBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTs7QUFEQTtBQUNBOzs7Ozs7O0FBRUE7QUFDQTs7QUFDQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7O0FBcEhBO0FBQ0E7QUFzSEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/qrscanner/qrscanner.js\n");
1982c2004
< eval("function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; ***REMOVED***; ***REMOVED*** else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; ***REMOVED***; ***REMOVED*** return _typeof(obj); ***REMOVED***\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; ***REMOVED*** return _assertThisInitialized(self); ***REMOVED***\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); ***REMOVED***; return _getPrototypeOf(o); ***REMOVED***\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); ***REMOVED*** return self; ***REMOVED***\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); ***REMOVED*** subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true ***REMOVED*** ***REMOVED***); if (superClass) _setPrototypeOf(subClass, superClass); ***REMOVED***\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; ***REMOVED***; return _setPrototypeOf(o, p); ***REMOVED***\n\nvar path = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n\nvar saito = __webpack_require__(/*! ../../lib/saito/saito */ \"./lib/saito/saito.js\");\n\nvar ModTemplate = __webpack_require__(/*! ../../lib/templates/modtemplate */ \"./lib/templates/modtemplate.js\");\n\nvar Registry =\n/*#__PURE__*/\nfunction (_ModTemplate) {\n  _inherits(Registry, _ModTemplate);\n\n  function Registry(app) {\n    var _this;\n\n    _classCallCheck(this, Registry);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Registry).call(this, app));\n    _this.app = app;\n    _this.name = \"Registry\"; //\n    // master DNS publickey for this module\n    //\n\n    _this.publickey = '23ykRYbjvAzHLRaTYPcqjkQ2LnFYeMkg9cJgXPbrWcHmr';\n    return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n  ***REMOVED***\n\n  _createClass(Registry, [{\n    key: \"respondTo\",\n    value: function respondTo(type) {\n      if (type == 'email-appspace') {\n        var obj = {***REMOVED***;\n        obj.render = this.renderEmail;\n        obj.attachEvents = this.attachEventsEmail;\n        return obj;\n  ***REMOVED***\n\n      return null;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"renderEmail\",\n    value: function renderEmail(app, data) {\n      data.registry = app.modules.returnModule(\"Registry\");\n\n      var RegistryAppspace = __webpack_require__(/*! ./lib/email-appspace/registry-appspace */ \"./mods/registry/lib/email-appspace/registry-appspace.js\");\n\n      RegistryAppspace.render(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attachEventsEmail\",\n    value: function attachEventsEmail(app, data) {\n      data.registry = app.modules.returnModule(\"Registry\");\n      RegistryAppspace.attachEvents(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"register_identifier\",\n    value: function register_identifier(identifier) {\n      var newtx = this.app.wallet.createUnsignedTransaction(this.publickey, this.app.wallet.wallet.default_fee, this.app.wallet.wallet.default_fee);\n\n      if (newtx == null) {\n        console.log(\"NULL TX CREATED IN REGISTRY MODULE\");\n        return;\n  ***REMOVED***\n\n      newtx.transaction.msg.module = \"Registry\";\n      newtx.transaction.msg.request = \"register\";\n      newtx.transaction.msg.identifier = identifier;\n      newtx = this.app.wallet.signTransaction(newtx);\n      this.app.network.propagateTransaction(newtx);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"onPeerHandshakeComplete\",\n    value: function onPeerHandshakeComplete(app, peer) {\n      var registry_self = app.modules.returnModule(\"Registry\");\n\n      if (registry_self.app.options.server != undefined) {\n        registry_self.publickey = registry_self.app.wallet.returnPublicKey();\n  ***REMOVED*** else {\n        registry_self.publickey = peer.peer.publickey;\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"onConfirmation\",\n    value: function () {\n      var _onConfirmation = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(blk, tx, conf, app) {\n        var registry_self, txmsg, request, identifier, publickey, unixtime, bid, bsh, lock_block, signed_message, sig, signer, lc, res, fee, newtx, _newtx, _identifier, _signed_message, _sig;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                registry_self = app.modules.returnModule(\"Registry\");\n                txmsg = tx.returnMessage();\n\n                if (!(conf == 0)) {\n                  _context.next = 23;\n                  break;\n            ***REMOVED***\n\n                if (!(txmsg.module === \"Registry\")) {\n                  _context.next = 22;\n                  break;\n            ***REMOVED***\n\n                if (!(tx.isTo(registry_self.publickey) && app.wallet.returnPublicKey() == registry_self.publickey)) {\n                  _context.next = 22;\n                  break;\n            ***REMOVED***\n\n                request = txmsg.request;\n                identifier = txmsg.identifier;\n                publickey = tx.transaction.from[0].add;\n                unixtime = new Date().getTime();\n                bid = blk.block.id;\n                bsh = blk.returnHash();\n                lock_block = 0;\n                signed_message = identifier + publickey + bid + bsh;\n                sig = registry_self.app.wallet.signMessage(signed_message);\n                signer = this.publickey;\n                lc = 1; // servers update database\n\n                _context.next = 18;\n                return registry_self.addRecord(identifier, publickey, unixtime, bid, bsh, lock_block, sig, signer, 1);\n\n              case 18:\n                res = _context.sent;\n                fee = tx.returnPaymentTo(registry_self.publickey); // send message\n\n                if (res == 1) {\n                  newtx = registry_self.app.wallet.createUnsignedTransaction(tx.transaction.from[0].add, 0.0, fee);\n                  newtx.transaction.msg.module = \"Email\";\n                  newtx.transaction.msg.title = \"Address Registration Success!\";\n                  newtx.transaction.msg.message = \"You have successfully registered the identifier: \" + identifier;\n                  newtx.transaction.msg.identifier = identifier;\n                  newtx.transaction.msg.signed_message = signed_message;\n                  newtx.transaction.msg.sig = sig;\n                  newtx = registry_self.app.wallet.signTransaction(newtx);\n                  registry_self.app.network.propagateTransaction(newtx);\n            ***REMOVED*** else {\n                  _newtx = registry_self.app.wallet.createUnsignedTransaction(tx.transaction.from[0].add, 0.0, fee);\n                  _newtx.transaction.msg.module = \"Email\";\n                  _newtx.transaction.msg.title = \"Address Registration Failed!\";\n                  _newtx.transaction.msg.message = \"The identifier you requested (\" + identifier + \") has already been registered\";\n                  _newtx.transaction.msg.identifier = identifier;\n                  _newtx.transaction.msg.signed_message = \"\";\n                  _newtx.transaction.msg.sig = \"\";\n                  _newtx = registry_self.app.wallet.signTransaction(_newtx);\n                  registry_self.app.network.propagateTransaction(_newtx);\n            ***REMOVED***\n\n                return _context.abrupt(\"return\");\n\n              case 22:\n        ***REMOVED***\n        ***REMOVED***\n        ***REMOVED***\n                if (txmsg.module == \"Email\") {\n                  if (tx.transaction.from[0].add == registry_self.publickey) {\n                    if (tx.transaction.to[0].add == registry_self.app.wallet.returnPublicKey()) {\n                      if (tx.transaction.msg.identifier != \"\" && tx.transaction.msg.signed_message != \"\" && tx.transaction.msg.sig != \"\") {\n                ***REMOVED***\n                ***REMOVED*** am email? for us? from the DNS registrar?\n                ***REMOVED***\n                        _identifier = tx.transaction.msg.identifier;\n                        _signed_message = tx.transaction.msg.signed_message;\n                        _sig = tx.transaction.msg.sig;\n\n                        if (registry_self.app.crypto.verifyMessage(_signed_message, _sig, registry_self.publickey)) {\n                          registry_self.app.keys.addKey(tx.transaction.to[0].add, _identifier, true, \"\", blk.block.id, blk.returnHash(), 1);\n                    ***REMOVED***\n                  ***REMOVED***\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED***\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this);\n  ***REMOVED***));\n\n      function onConfirmation(_x, _x2, _x3, _x4) {\n        return _onConfirmation.apply(this, arguments);\n  ***REMOVED***\n\n      return onConfirmation;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"addRecord\",\n    value: function () {\n      var _addRecord = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var identifier,\n            publickey,\n            unixtime,\n            bid,\n            bsh,\n            lock_block,\n            sig,\n            signer,\n            lc,\n            sql,\n            params,\n            rows,\n            _args2 = arguments;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                identifier = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : \"\";\n                publickey = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : \"\";\n                unixtime = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : 0;\n                bid = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : 0;\n                bsh = _args2.length > 4 && _args2[4] !== undefined ? _args2[4] : \"\";\n                lock_block = _args2.length > 5 && _args2[5] !== undefined ? _args2[5] : 0;\n                sig = _args2.length > 6 && _args2[6] !== undefined ? _args2[6] : \"\";\n                signer = _args2.length > 7 && _args2[7] !== undefined ? _args2[7] : \"\";\n                lc = _args2.length > 8 && _args2[8] !== undefined ? _args2[8] : 1;\n                sql = \"INSERT INTO records (\\n\\tidentifier, \\n\\tpublickey, \\n\\tunixtime, \\n\\tbid, \\n\\tbsh, \\n\\tlock_block, \\n\\tsig,\\n\\tsigner, \\n\\tlc\\n      ) VALUES (\\n\\t$identifier, \\n\\t$publickey,\\n\\t$unixtime, \\n\\t$bid, \\n\\t$bsh, \\n\\t$lock_block, \\n\\t$sig, \\n\\t$signer, \\n\\t$lc\\n      )\";\n                params = {\n                  $identifier: identifier,\n                  $publickey: publickey,\n                  $unixtime: unixtime,\n                  $bid: bid,\n                  $bsh: bsh,\n                  $lock_block: lock_block,\n                  $sig: sig,\n                  $signer: signer,\n                  $lc: lc\n            ***REMOVED***;\n                _context2.next = 13;\n                return this.app.storage.executeDatabase(sql, params, \"registry\");\n\n              case 13:\n                sql = \"SELECT * FROM records WHERE identifier = $identifier AND publickey = $publickey AND unixtime = $unixtime AND bid = $bid AND bsh = $bsh AND lock_block = $lock_block AND sig = $sig AND signer = $signer AND lc = $lc\";\n                _context2.next = 16;\n                return this.app.storage.queryDatabase(sql, params, \"registry\");\n\n              case 16:\n                rows = _context2.sent;\n                console.log(sql);\n                console.log(params);\n                console.log(\"\\n\\n\\nRES: \" + JSON.stringify(rows));\n                console.log(\"ROWS: \" + rows.length);\n\n                if (!(rows.length == 0)) {\n                  _context2.next = 25;\n                  break;\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", 0);\n\n              case 25:\n                return _context2.abrupt(\"return\", 1);\n\n              case 26:\n              case \"end\":\n                return _context2.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee2, this);\n  ***REMOVED***));\n\n      function addRecord() {\n        return _addRecord.apply(this, arguments);\n  ***REMOVED***\n\n      return addRecord;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"onChainReorganization\",\n    value: function () {\n      var _onChainReorganization = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(bid, bsh, lc) {\n        var sql, params;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                sql = \"UPDATE records SET lc = $lc WHERE bid = $bid AND bsh = $bsh\";\n                params = {\n                  $bid: bid,\n                  $bsh: bsh\n            ***REMOVED***;\n                _context3.next = 4;\n                return this.app.storage.executeDatabase(sql, params, \"registry\");\n\n              case 4:\n                return _context3.abrupt(\"return\");\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee3, this);\n  ***REMOVED***));\n\n      function onChainReorganization(_x5, _x6, _x7) {\n        return _onChainReorganization.apply(this, arguments);\n  ***REMOVED***\n\n      return onChainReorganization;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"shouldAffixCallbackToModule\",\n    value: function shouldAffixCallbackToModule(modname) {\n      if (modname == this.name) {\n        return 1;\n  ***REMOVED***\n\n      if (modname == \"Email\") {\n        return 1;\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"sendSuccessResponse\",\n    value: function sendSuccessResponse(tx) {\n      var fee = tx.returnPaymentTo(this.app.wallet.returnPublicKey());\n      var newtx = registry_self.app.wallet.createUnsignedTransaction(to, 0.0, fee);\n\n      if (newtx == null) {\n        console.log(\"NULL TX CREATED IN REGISTRY MODULE\");\n        return;\n  ***REMOVED***\n\n      newtx.transaction.msg.module = \"Email\";\n      newtx.transaction.msg.data = \"You have successfully registered your address\";\n      newtx.transaction.msg.title = \"Address Registration Success!\";\n      newtx = this.app.wallet.signTransaction(tx);\n      this.app.network.propagateTransaction(newtx);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"sendFailureResponse\",\n    value: function sendFailureResponse(tx) {\n      var fee = tx.returnPaymentTo(this.app.wallet.returnPublicKey());\n      var newtx = registry_self.app.wallet.createUnsignedTransaction(to, 0.0, fee);\n\n      if (newtx == null) {\n        console.log(\"NULL TX CREATED IN REGISTRY MODULE\");\n        return;\n  ***REMOVED***\n\n      newtx.transaction.msg.module = \"Email\";\n      newtx.transaction.msg.data = \"You have successfully registered your address\";\n      newtx.transaction.msg.title = \"Address Registration Success!\";\n      newtx = this.app.wallet.signTransaction(tx);\n      this.app.network.propagateTransaction(newtx);\n***REMOVED***\n  ***REMOVED***]);\n\n  return Registry;\n***REMOVED***(ModTemplate);\n\nmodule.exports = Registry;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3JlZ2lzdHJ5L3JlZ2lzdHJ5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9yZWdpc3RyeS9yZWdpc3RyeS5qcz9hYTM1Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhdGggICAgICAgID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3Qgc2FpdG8gPSByZXF1aXJlKCcuLi8uLi9saWIvc2FpdG8vc2FpdG8nKTtcbmNvbnN0IE1vZFRlbXBsYXRlID0gcmVxdWlyZSgnLi4vLi4vbGliL3RlbXBsYXRlcy9tb2R0ZW1wbGF0ZScpO1xuXG5cblxuY2xhc3MgUmVnaXN0cnkgZXh0ZW5kcyBNb2RUZW1wbGF0ZSB7XG5cbiAgY29uc3RydWN0b3IoYXBwKSB7XG5cbiAgICBzdXBlcihhcHApO1xuXG4gICAgdGhpcy5hcHAgICAgICAgICAgICA9IGFwcDtcbiAgICB0aGlzLm5hbWUgICAgICAgICAgID0gXCJSZWdpc3RyeVwiO1xuXG4gICAgLy9cbiAgICAvLyBtYXN0ZXIgRE5TIHB1YmxpY2tleSBmb3IgdGhpcyBtb2R1bGVcbiAgICAvL1xuICAgIHRoaXMucHVibGlja2V5ID0gJzIzeWtSWWJqdkF6SExSYVRZUGNxamtRMkxuRlllTWtnOWNKZ1hQYnJXY0htcidcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cblxuXG5cbiAgcmVzcG9uZFRvKHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PSAnZW1haWwtYXBwc3BhY2UnKSB7XG4gICAgICBsZXQgb2JqID0ge307XG4gICAgICAgICAgb2JqLnJlbmRlciA9IHRoaXMucmVuZGVyRW1haWw7XG4gICAgICAgICAgb2JqLmF0dGFjaEV2ZW50cyA9IHRoaXMuYXR0YWNoRXZlbnRzRW1haWw7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZW5kZXJFbWFpbChhcHAsIGRhdGEpIHtcbiAgICAgZGF0YS5yZWdpc3RyeSA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIlJlZ2lzdHJ5XCIpO1xuICAgICBsZXQgUmVnaXN0cnlBcHBzcGFjZSA9IHJlcXVpcmUoJy4vbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlJyk7XG4gICAgIFJlZ2lzdHJ5QXBwc3BhY2UucmVuZGVyKGFwcCwgZGF0YSk7XG4gIH1cbiAgYXR0YWNoRXZlbnRzRW1haWwoYXBwLCBkYXRhKSB7XG4gICAgIGRhdGEucmVnaXN0cnkgPSBhcHAubW9kdWxlcy5yZXR1cm5Nb2R1bGUoXCJSZWdpc3RyeVwiKTtcbiAgICAgUmVnaXN0cnlBcHBzcGFjZS5hdHRhY2hFdmVudHMoYXBwLCBkYXRhKTtcbiAgfVxuXG5cblxuXG5cbiAgcmVnaXN0ZXJfaWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG5cbiAgICBsZXQgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuY3JlYXRlVW5zaWduZWRUcmFuc2FjdGlvbih0aGlzLnB1YmxpY2tleSwgdGhpcy5hcHAud2FsbGV0LndhbGxldC5kZWZhdWx0X2ZlZSwgdGhpcy5hcHAud2FsbGV0LndhbGxldC5kZWZhdWx0X2ZlZSk7XG4gICAgaWYgKG5ld3R4ID09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTlVMTCBUWCBDUkVBVEVEIElOIFJFR0lTVFJZIE1PRFVMRVwiKVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5tb2R1bGUgICBcdD0gXCJSZWdpc3RyeVwiO1xuICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5yZXF1ZXN0XHQ9IFwicmVnaXN0ZXJcIjtcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllclx0PSBpZGVudGlmaWVyO1xuXG4gICAgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcbiAgICB0aGlzLmFwcC5uZXR3b3JrLnByb3BhZ2F0ZVRyYW5zYWN0aW9uKG5ld3R4KTsgXG5cbiAgfVxuXG5cbiAgb25QZWVySGFuZHNoYWtlQ29tcGxldGUoYXBwLCBwZWVyKSB7XG5cbiAgICBsZXQgcmVnaXN0cnlfc2VsZiA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIlJlZ2lzdHJ5XCIpO1xuXG4gICAgaWYgKHJlZ2lzdHJ5X3NlbGYuYXBwLm9wdGlvbnMuc2VydmVyICE9IHVuZGVmaW5lZCkge1xuICAgICAgcmVnaXN0cnlfc2VsZi5wdWJsaWNrZXkgPSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZ2lzdHJ5X3NlbGYucHVibGlja2V5ID0gcGVlci5wZWVyLnB1YmxpY2tleTtcbiAgICB9XG5cbiAgfVxuXG5cbiAgYXN5bmMgb25Db25maXJtYXRpb24oYmxrLCB0eCwgY29uZiwgYXBwKSB7XG5cbiAgICBsZXQgcmVnaXN0cnlfc2VsZiA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIlJlZ2lzdHJ5XCIpO1xuICAgIGxldCB0eG1zZyA9IHR4LnJldHVybk1lc3NhZ2UoKTtcblxuICAgIGlmIChjb25mID09IDApIHtcbiAgICAgIGlmICh0eG1zZy5tb2R1bGUgPT09IFwiUmVnaXN0cnlcIikge1xuICAgICAgICBpZiAodHguaXNUbyhyZWdpc3RyeV9zZWxmLnB1YmxpY2tleSkgJiYgYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSA9PSByZWdpc3RyeV9zZWxmLnB1YmxpY2tleSkge1xuXG4gICAgICAgICAgbGV0IHJlcXVlc3QgPSB0eG1zZy5yZXF1ZXN0O1xuICAgICAgICAgIGxldCBpZGVudGlmaWVyID0gdHhtc2cuaWRlbnRpZmllcjtcbiAgICAgICAgICBsZXQgcHVibGlja2V5ID0gdHgudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQ7XG4gIFx0ICBsZXQgdW5peHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICBsZXQgYmlkID0gYmxrLmJsb2NrLmlkO1xuICAgICAgICAgIGxldCBic2ggPSBibGsucmV0dXJuSGFzaCgpO1xuICBcdCAgbGV0IGxvY2tfYmxvY2sgPSAwO1xuICAgICAgICAgIGxldCBzaWduZWRfbWVzc2FnZSA9IGlkZW50aWZpZXIgKyBwdWJsaWNrZXkgKyBiaWQgKyBic2g7XG5cdCAgbGV0IHNpZyA9IHJlZ2lzdHJ5X3NlbGYuYXBwLndhbGxldC5zaWduTWVzc2FnZShzaWduZWRfbWVzc2FnZSk7XG5cdCAgbGV0IHNpZ25lciA9IHRoaXMucHVibGlja2V5O1xuXHQgIGxldCBsYyA9IDE7XG5cbiAgICAgICAgICAvLyBzZXJ2ZXJzIHVwZGF0ZSBkYXRhYmFzZVxuICAgICAgICAgIGxldCByZXMgPSBhd2FpdCByZWdpc3RyeV9zZWxmLmFkZFJlY29yZChpZGVudGlmaWVyLCBwdWJsaWNrZXksIHVuaXh0aW1lLCBiaWQsIGJzaCwgbG9ja19ibG9jaywgc2lnLCBzaWduZXIsIDEpO1xuICAgICAgICAgIGxldCBmZWUgPSB0eC5yZXR1cm5QYXltZW50VG8ocmVnaXN0cnlfc2VsZi5wdWJsaWNrZXkpO1xuXG5cdCAgLy8gc2VuZCBtZXNzYWdlXG5cdCAgaWYgKHJlcyA9PSAxKSB7XG5cdCAgICBcblx0ICAgIGxldCBuZXd0eCA9IHJlZ2lzdHJ5X3NlbGYuYXBwLndhbGxldC5jcmVhdGVVbnNpZ25lZFRyYW5zYWN0aW9uKHR4LnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkLCAwLjAsIGZlZSk7XHQgICAgXG5cdFx0bmV3dHgudHJhbnNhY3Rpb24ubXNnLm1vZHVsZSA9IFwiRW1haWxcIjtcblx0XHRuZXd0eC50cmFuc2FjdGlvbi5tc2cudGl0bGUgID0gXCJBZGRyZXNzIFJlZ2lzdHJhdGlvbiBTdWNjZXNzIVwiO1xuXHQgICAgXHRuZXd0eC50cmFuc2FjdGlvbi5tc2cubWVzc2FnZSA9IFwiWW91IGhhdmUgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQgdGhlIGlkZW50aWZpZXI6IFwiICsgaWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllciA9IGlkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnNpZ25lZF9tZXNzYWdlID0gc2lnbmVkX21lc3NhZ2U7XG4gICAgICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnNpZyA9IHNpZztcblxuXHQgICAgbmV3dHggPSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcblx0ICAgIHJlZ2lzdHJ5X3NlbGYuYXBwLm5ldHdvcmsucHJvcGFnYXRlVHJhbnNhY3Rpb24obmV3dHgpO1xuXG5cdCAgfSBlbHNlIHtcblxuICAgICAgICAgICAgbGV0IG5ld3R4ID0gcmVnaXN0cnlfc2VsZi5hcHAud2FsbGV0LmNyZWF0ZVVuc2lnbmVkVHJhbnNhY3Rpb24odHgudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQsIDAuMCwgZmVlKTtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubW9kdWxlID0gXCJFbWFpbFwiO1xuICAgICAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy50aXRsZSAgPSBcIkFkZHJlc3MgUmVnaXN0cmF0aW9uIEZhaWxlZCFcIjtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubWVzc2FnZSA9IFwiVGhlIGlkZW50aWZpZXIgeW91IHJlcXVlc3RlZCAoXCIgKyBpZGVudGlmaWVyICsgXCIpIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZFwiO1xuICAgICAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5pZGVudGlmaWVyID0gaWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cuc2lnbmVkX21lc3NhZ2UgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5zaWcgPSBcIlwiO1xuXG4gICAgICAgICAgICBuZXd0eCA9IHJlZ2lzdHJ5X3NlbGYuYXBwLndhbGxldC5zaWduVHJhbnNhY3Rpb24obmV3dHgpO1xuICAgICAgICAgICAgcmVnaXN0cnlfc2VsZi5hcHAubmV0d29yay5wcm9wYWdhdGVUcmFuc2FjdGlvbihuZXd0eCk7XG5cblx0ICB9XG5cbiAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG5cblxuICAgICAgLy9cbiAgICAgIC8vXG4gICAgICAvL1xuICAgICAgaWYgKHR4bXNnLm1vZHVsZSA9PSBcIkVtYWlsXCIpIHtcblx0aWYgKHR4LnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkID09IHJlZ2lzdHJ5X3NlbGYucHVibGlja2V5KSB7XG5cdCAgaWYgKHR4LnRyYW5zYWN0aW9uLnRvWzBdLmFkZCA9PSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCkpIHtcblx0ICAgIGlmICh0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllciAhPSBcIlwiICYmIHR4LnRyYW5zYWN0aW9uLm1zZy5zaWduZWRfbWVzc2FnZSAhPSBcIlwiICYmIHR4LnRyYW5zYWN0aW9uLm1zZy5zaWcgIT0gXCJcIikge1xuXG5cdCAgICAgIC8vXG5cdCAgICAgIC8vIGFtIGVtYWlsPyBmb3IgdXM/IGZyb20gdGhlIEROUyByZWdpc3RyYXI/XG5cdCAgICAgIC8vXG5cdCAgICAgIGxldCBpZGVudGlmaWVyIFx0PSB0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllcjtcblx0ICAgICAgbGV0IHNpZ25lZF9tZXNzYWdlIFx0PSB0eC50cmFuc2FjdGlvbi5tc2cuc2lnbmVkX21lc3NhZ2U7XG5cdCAgICAgIGxldCBzaWdcdFx0PSB0eC50cmFuc2FjdGlvbi5tc2cuc2lnO1xuXG5cdCAgICAgIGlmIChyZWdpc3RyeV9zZWxmLmFwcC5jcnlwdG8udmVyaWZ5TWVzc2FnZShzaWduZWRfbWVzc2FnZSwgc2lnLCByZWdpc3RyeV9zZWxmLnB1YmxpY2tleSkpIHtcblx0ICAgICAgICByZWdpc3RyeV9zZWxmLmFwcC5rZXlzLmFkZEtleSh0eC50cmFuc2FjdGlvbi50b1swXS5hZGQsIGlkZW50aWZpZXIsIHRydWUsIFwiXCIsIGJsay5ibG9jay5pZCwgYmxrLnJldHVybkhhc2goKSwgMSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGFzeW5jIGFkZFJlY29yZChpZGVudGlmaWVyPVwiXCIsIHB1YmxpY2tleT1cIlwiLCB1bml4dGltZT0wLCBiaWQ9MCwgYnNoPVwiXCIsIGxvY2tfYmxvY2s9MCwgc2lnPVwiXCIsIHNpZ25lcj1cIlwiLCBsYz0xKSB7XG5cbiAgICBsZXQgc3FsID0gYElOU0VSVCBJTlRPIHJlY29yZHMgKFxuXHRpZGVudGlmaWVyLCBcblx0cHVibGlja2V5LCBcblx0dW5peHRpbWUsIFxuXHRiaWQsIFxuXHRic2gsIFxuXHRsb2NrX2Jsb2NrLCBcblx0c2lnLFxuXHRzaWduZXIsIFxuXHRsY1xuICAgICAgKSBWQUxVRVMgKFxuXHQkaWRlbnRpZmllciwgXG5cdCRwdWJsaWNrZXksXG5cdCR1bml4dGltZSwgXG5cdCRiaWQsIFxuXHQkYnNoLCBcblx0JGxvY2tfYmxvY2ssIFxuXHQkc2lnLCBcblx0JHNpZ25lciwgXG5cdCRsY1xuICAgICAgKWA7XG4gICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgICAgJGlkZW50aWZpZXJcdDpcdGlkZW50aWZpZXIgLFxuICAgICAgICAkcHVibGlja2V5XHQ6XHRwdWJsaWNrZXkgLFxuICAgICAgICAkdW5peHRpbWVcdDpcdHVuaXh0aW1lICxcbiAgICAgICAgJGJpZFx0XHQ6XHRiaWQgLFxuICAgICAgICAkYnNoXHRcdDpcdGJzaCAsXG4gICAgICAgICRsb2NrX2Jsb2NrXHQ6XHRsb2NrX2Jsb2NrICxcbiAgICAgICAgJHNpZ1x0XHQ6XHRzaWcsXG4gICAgICAgICRzaWduZXJcdFx0Olx0c2lnbmVyLFxuICAgICAgICAkbGNcdFx0Olx0bGMsXG4gICAgICB9XG4gICAgYXdhaXQgdGhpcy5hcHAuc3RvcmFnZS5leGVjdXRlRGF0YWJhc2Uoc3FsLCBwYXJhbXMsIFwicmVnaXN0cnlcIik7XG5cbiAgICBzcWwgPSBcIlNFTEVDVCAqIEZST00gcmVjb3JkcyBXSEVSRSBpZGVudGlmaWVyID0gJGlkZW50aWZpZXIgQU5EIHB1YmxpY2tleSA9ICRwdWJsaWNrZXkgQU5EIHVuaXh0aW1lID0gJHVuaXh0aW1lIEFORCBiaWQgPSAkYmlkIEFORCBic2ggPSAkYnNoIEFORCBsb2NrX2Jsb2NrID0gJGxvY2tfYmxvY2sgQU5EIHNpZyA9ICRzaWcgQU5EIHNpZ25lciA9ICRzaWduZXIgQU5EIGxjID0gJGxjXCI7XG4gICAgbGV0IHJvd3MgPSBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLnF1ZXJ5RGF0YWJhc2Uoc3FsLCBwYXJhbXMsIFwicmVnaXN0cnlcIik7XG5jb25zb2xlLmxvZyhzcWwpO1xuY29uc29sZS5sb2cocGFyYW1zKTtcbmNvbnNvbGUubG9nKFwiXFxuXFxuXFxuUkVTOiBcIiArIEpTT04uc3RyaW5naWZ5KHJvd3MpKTtcbmNvbnNvbGUubG9nKFwiUk9XUzogXCIgKyByb3dzLmxlbmd0aCk7XG4gICAgaWYgKHJvd3MubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgfVxuXG5cblxuXG4gIGFzeW5jIG9uQ2hhaW5SZW9yZ2FuaXphdGlvbihiaWQsIGJzaCwgbGMpIHtcblxuICAgIHZhciBzcWwgICAgPSBcIlVQREFURSByZWNvcmRzIFNFVCBsYyA9ICRsYyBXSEVSRSBiaWQgPSAkYmlkIEFORCBic2ggPSAkYnNoXCI7XG4gICAgdmFyIHBhcmFtcyA9IHsgJGJpZCA6IGJpZCAsICRic2ggOiBic2ggfVxuICAgIGF3YWl0IHRoaXMuYXBwLnN0b3JhZ2UuZXhlY3V0ZURhdGFiYXNlKHNxbCwgcGFyYW1zLCBcInJlZ2lzdHJ5XCIpO1xuXG4gICAgcmV0dXJuO1xuXG4gIH1cblxuICBcblxuXG5cbiAgc2hvdWxkQWZmaXhDYWxsYmFja1RvTW9kdWxlKG1vZG5hbWUpIHtcbiAgICBpZiAobW9kbmFtZSA9PSB0aGlzLm5hbWUpIHsgcmV0dXJuIDE7IH1cbiAgICBpZiAobW9kbmFtZSA9PSBcIkVtYWlsXCIpIHsgcmV0dXJuIDE7IH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG5cblxuICBzZW5kU3VjY2Vzc1Jlc3BvbnNlKHR4KSB7XG5cbiAgICBsZXQgZmVlID0gdHgucmV0dXJuUGF5bWVudFRvKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSk7XG5cbiAgICBsZXQgIG5ld3R4ID0gcmVnaXN0cnlfc2VsZi5hcHAud2FsbGV0LmNyZWF0ZVVuc2lnbmVkVHJhbnNhY3Rpb24odG8sIDAuMCwgZmVlKTtcbiAgICBpZiAobmV3dHggPT0gbnVsbCkge1xuICAgICAgY29uc29sZS5sb2coXCJOVUxMIFRYIENSRUFURUQgSU4gUkVHSVNUUlkgTU9EVUxFXCIpXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLm1vZHVsZSAgID0gXCJFbWFpbFwiO1xuICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5kYXRhICAgICA9IFwiWW91IGhhdmUgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQgeW91ciBhZGRyZXNzXCI7XG4gICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnRpdGxlICAgID0gXCJBZGRyZXNzIFJlZ2lzdHJhdGlvbiBTdWNjZXNzIVwiO1xuXG4gICAgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHR4KTtcbiAgICB0aGlzLmFwcC5uZXR3b3JrLnByb3BhZ2F0ZVRyYW5zYWN0aW9uKG5ld3R4KTsgXG5cbiAgfVxuXG5cblxuXG4gIHNlbmRGYWlsdXJlUmVzcG9uc2UodHgpIHtcblxuICAgIGxldCBmZWUgPSB0eC5yZXR1cm5QYXltZW50VG8odGhpcy5hcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpKTtcblxuICAgIGxldCAgbmV3dHggPSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQuY3JlYXRlVW5zaWduZWRUcmFuc2FjdGlvbih0bywgMC4wLCBmZWUpO1xuICAgIGlmIChuZXd0eCA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5VTEwgVFggQ1JFQVRFRCBJTiBSRUdJU1RSWSBNT0RVTEVcIilcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubW9kdWxlICAgPSBcIkVtYWlsXCI7XG4gICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLmRhdGEgICAgID0gXCJZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZCB5b3VyIGFkZHJlc3NcIjtcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cudGl0bGUgICAgPSBcIkFkZHJlc3MgUmVnaXN0cmF0aW9uIFN1Y2Nlc3MhXCI7XG5cbiAgICBuZXd0eCA9IHRoaXMuYXBwLndhbGxldC5zaWduVHJhbnNhY3Rpb24odHgpO1xuICAgIHRoaXMuYXBwLm5ldHdvcmsucHJvcGFnYXRlVHJhbnNhY3Rpb24obmV3dHgpOyBcblxuICB9XG5cblxuXG5cbn1cbm1vZHVsZS5leHBvcnRzID0gUmVnaXN0cnk7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7Ozs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBOzs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFNQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUdBOzs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7Ozs7O0FBQ0E7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBREE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBOztBQVdBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTs7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7Ozs7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUtBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQW5SQTtBQUNBO0FBd1JBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/registry/registry.js\n");
---
> eval("function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; ***REMOVED***; ***REMOVED*** else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; ***REMOVED***; ***REMOVED*** return _typeof(obj); ***REMOVED***\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; ***REMOVED*** catch (error) { reject(error); return; ***REMOVED*** if (info.done) { resolve(value); ***REMOVED*** else { Promise.resolve(value).then(_next, _throw); ***REMOVED*** ***REMOVED***\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); ***REMOVED*** function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); ***REMOVED*** _next(undefined); ***REMOVED***); ***REMOVED***; ***REMOVED***\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); ***REMOVED*** ***REMOVED***\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); ***REMOVED*** ***REMOVED***\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; ***REMOVED***\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; ***REMOVED*** return _assertThisInitialized(self); ***REMOVED***\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); ***REMOVED***; return _getPrototypeOf(o); ***REMOVED***\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); ***REMOVED*** return self; ***REMOVED***\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); ***REMOVED*** subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true ***REMOVED*** ***REMOVED***); if (superClass) _setPrototypeOf(subClass, superClass); ***REMOVED***\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; ***REMOVED***; return _setPrototypeOf(o, p); ***REMOVED***\n\nvar path = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n\nvar saito = __webpack_require__(/*! ../../lib/saito/saito */ \"./lib/saito/saito.js\");\n\nvar ModTemplate = __webpack_require__(/*! ../../lib/templates/modtemplate */ \"./lib/templates/modtemplate.js\");\n\nvar Registry =\n/*#__PURE__*/\nfunction (_ModTemplate) {\n  _inherits(Registry, _ModTemplate);\n\n  function Registry(app) {\n    var _this;\n\n    _classCallCheck(this, Registry);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Registry).call(this, app));\n    _this.app = app;\n    _this.name = \"Registry\"; //\n    // master DNS publickey for this module\n    //\n\n    _this.publickey = '23ykRYbjvAzHLRaTYPcqjkQ2LnFYeMkg9cJgXPbrWcHmr';\n    return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n  ***REMOVED***\n\n  _createClass(Registry, [{\n    key: \"respondTo\",\n    value: function respondTo(type) {\n      if (type == 'email-appspace') {\n        var obj = {***REMOVED***;\n        obj.render = this.renderEmail;\n        obj.attachEvents = this.attachEventsEmail;\n        return obj;\n  ***REMOVED***\n\n      return null;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"renderEmail\",\n    value: function renderEmail(app, data) {\n      data.registry = app.modules.returnModule(\"Registry\");\n\n      var RegistryAppspace = __webpack_require__(/*! ./lib/email-appspace/registry-appspace */ \"./mods/registry/lib/email-appspace/registry-appspace.js\");\n\n      RegistryAppspace.render(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"attachEventsEmail\",\n    value: function attachEventsEmail(app, data) {\n      data.registry = app.modules.returnModule(\"Registry\");\n      RegistryAppspace.attachEvents(app, data);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"register_identifier\",\n    value: function register_identifier(identifier) {\n      var newtx = this.app.wallet.createUnsignedTransaction(this.publickey, this.app.wallet.wallet.default_fee, this.app.wallet.wallet.default_fee);\n\n      if (newtx == null) {\n        console.log(\"NULL TX CREATED IN REGISTRY MODULE\");\n        return;\n  ***REMOVED***\n\n      newtx.transaction.msg.module = \"Registry\";\n      newtx.transaction.msg.request = \"register\";\n      newtx.transaction.msg.identifier = identifier;\n      newtx = this.app.wallet.signTransaction(newtx);\n      this.app.network.propagateTransaction(newtx);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"onPeerHandshakeComplete\",\n    value: function onPeerHandshakeComplete(app, peer) {\n      var registry_self = app.modules.returnModule(\"Registry\");\n\n      if (registry_self.app.options.server != undefined) {\n        registry_self.publickey = registry_self.app.wallet.returnPublicKey();\n  ***REMOVED*** else {\n        registry_self.publickey = peer.peer.publickey;\n  ***REMOVED***\n***REMOVED***\n  ***REMOVED***, {\n    key: \"onConfirmation\",\n    value: function () {\n      var _onConfirmation = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(blk, tx, conf, app) {\n        var registry_self, txmsg, request, identifier, publickey, unixtime, bid, bsh, lock_block, signed_message, sig, signer, lc, res, fee, newtx, _newtx, _identifier, _signed_message, _sig;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                registry_self = app.modules.returnModule(\"Registry\");\n                txmsg = tx.returnMessage();\n\n                if (!(conf == 0)) {\n                  _context.next = 23;\n                  break;\n            ***REMOVED***\n\n                if (!(txmsg.module === \"Registry\")) {\n                  _context.next = 22;\n                  break;\n            ***REMOVED***\n\n                if (!(tx.isTo(registry_self.publickey) && app.wallet.returnPublicKey() == registry_self.publickey)) {\n                  _context.next = 22;\n                  break;\n            ***REMOVED***\n\n                request = txmsg.request;\n                identifier = txmsg.identifier;\n                publickey = tx.transaction.from[0].add;\n                unixtime = new Date().getTime();\n                bid = blk.block.id;\n                bsh = blk.returnHash();\n                lock_block = 0;\n                signed_message = identifier + publickey + bid + bsh;\n                sig = registry_self.app.wallet.signMessage(signed_message);\n                signer = this.publickey;\n                lc = 1; // servers update database\n\n                _context.next = 18;\n                return registry_self.addRecord(identifier, publickey, unixtime, bid, bsh, lock_block, sig, signer, 1);\n\n              case 18:\n                res = _context.sent;\n                fee = tx.returnPaymentTo(registry_self.publickey); // send message\n\n                if (res == 1) {\n                  newtx = registry_self.app.wallet.createUnsignedTransaction(tx.transaction.from[0].add, 0.0, fee);\n                  newtx.transaction.msg.module = \"Email\";\n                  newtx.transaction.msg.title = \"Address Registration Success!\";\n                  newtx.transaction.msg.message = \"You have successfully registered the identifier: \" + identifier;\n                  newtx.transaction.msg.identifier = identifier;\n                  newtx.transaction.msg.signed_message = signed_message;\n                  newtx.transaction.msg.sig = sig;\n                  newtx = registry_self.app.wallet.signTransaction(newtx);\n                  registry_self.app.network.propagateTransaction(newtx);\n            ***REMOVED*** else {\n                  _newtx = registry_self.app.wallet.createUnsignedTransaction(tx.transaction.from[0].add, 0.0, fee);\n                  _newtx.transaction.msg.module = \"Email\";\n                  _newtx.transaction.msg.title = \"Address Registration Failed!\";\n                  _newtx.transaction.msg.message = \"The identifier you requested (\" + identifier + \") has already been registered\";\n                  _newtx.transaction.msg.identifier = identifier;\n                  _newtx.transaction.msg.signed_message = \"\";\n                  _newtx.transaction.msg.sig = \"\";\n                  _newtx = registry_self.app.wallet.signTransaction(_newtx);\n                  registry_self.app.network.propagateTransaction(_newtx);\n            ***REMOVED***\n\n                return _context.abrupt(\"return\");\n\n              case 22:\n        ***REMOVED***\n        ***REMOVED***\n        ***REMOVED***\n                if (txmsg.module == \"Email\") {\n                  if (tx.transaction.from[0].add == registry_self.publickey) {\n                    if (tx.transaction.to[0].add == registry_self.app.wallet.returnPublicKey()) {\n                      if (tx.transaction.msg.identifier != undefined && tx.transaction.msg.signed_message != undefined && tx.transaction.msg.sig != undefined) {\n                ***REMOVED***\n                ***REMOVED*** am email? for us? from the DNS registrar?\n                ***REMOVED***\n                        _identifier = tx.transaction.msg.identifier;\n                        _signed_message = tx.transaction.msg.signed_message;\n                        _sig = tx.transaction.msg.sig;\n\n                        if (registry_self.app.crypto.verifyMessage(_signed_message, _sig, registry_self.publickey)) {\n                          registry_self.app.keys.addKey(tx.transaction.to[0].add, _identifier, true, \"\", blk.block.id, blk.returnHash(), 1);\n                    ***REMOVED***\n                  ***REMOVED***\n                ***REMOVED***\n              ***REMOVED***\n            ***REMOVED***\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee, this);\n  ***REMOVED***));\n\n      function onConfirmation(_x, _x2, _x3, _x4) {\n        return _onConfirmation.apply(this, arguments);\n  ***REMOVED***\n\n      return onConfirmation;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"addRecord\",\n    value: function () {\n      var _addRecord = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var identifier,\n            publickey,\n            unixtime,\n            bid,\n            bsh,\n            lock_block,\n            sig,\n            signer,\n            lc,\n            sql,\n            params,\n            rows,\n            _args2 = arguments;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                identifier = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : \"\";\n                publickey = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : \"\";\n                unixtime = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : 0;\n                bid = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : 0;\n                bsh = _args2.length > 4 && _args2[4] !== undefined ? _args2[4] : \"\";\n                lock_block = _args2.length > 5 && _args2[5] !== undefined ? _args2[5] : 0;\n                sig = _args2.length > 6 && _args2[6] !== undefined ? _args2[6] : \"\";\n                signer = _args2.length > 7 && _args2[7] !== undefined ? _args2[7] : \"\";\n                lc = _args2.length > 8 && _args2[8] !== undefined ? _args2[8] : 1;\n                sql = \"INSERT INTO records (\\n\\tidentifier, \\n\\tpublickey, \\n\\tunixtime, \\n\\tbid, \\n\\tbsh, \\n\\tlock_block, \\n\\tsig,\\n\\tsigner, \\n\\tlc\\n      ) VALUES (\\n\\t$identifier, \\n\\t$publickey,\\n\\t$unixtime, \\n\\t$bid, \\n\\t$bsh, \\n\\t$lock_block, \\n\\t$sig, \\n\\t$signer, \\n\\t$lc\\n      )\";\n                params = {\n                  $identifier: identifier,\n                  $publickey: publickey,\n                  $unixtime: unixtime,\n                  $bid: bid,\n                  $bsh: bsh,\n                  $lock_block: lock_block,\n                  $sig: sig,\n                  $signer: signer,\n                  $lc: lc\n            ***REMOVED***;\n                _context2.next = 13;\n                return this.app.storage.executeDatabase(sql, params, \"registry\");\n\n              case 13:\n                sql = \"SELECT * FROM records WHERE identifier = $identifier AND publickey = $publickey AND unixtime = $unixtime AND bid = $bid AND bsh = $bsh AND lock_block = $lock_block AND sig = $sig AND signer = $signer AND lc = $lc\";\n                _context2.next = 16;\n                return this.app.storage.queryDatabase(sql, params, \"registry\");\n\n              case 16:\n                rows = _context2.sent;\n                console.log(sql);\n                console.log(params);\n                console.log(\"\\n\\n\\nRES: \" + JSON.stringify(rows));\n                console.log(\"ROWS: \" + rows.length);\n\n                if (!(rows.length == 0)) {\n                  _context2.next = 25;\n                  break;\n            ***REMOVED***\n\n                return _context2.abrupt(\"return\", 0);\n\n              case 25:\n                return _context2.abrupt(\"return\", 1);\n\n              case 26:\n              case \"end\":\n                return _context2.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee2, this);\n  ***REMOVED***));\n\n      function addRecord() {\n        return _addRecord.apply(this, arguments);\n  ***REMOVED***\n\n      return addRecord;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"onChainReorganization\",\n    value: function () {\n      var _onChainReorganization = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(bid, bsh, lc) {\n        var sql, params;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                sql = \"UPDATE records SET lc = $lc WHERE bid = $bid AND bsh = $bsh\";\n                params = {\n                  $bid: bid,\n                  $bsh: bsh\n            ***REMOVED***;\n                _context3.next = 4;\n                return this.app.storage.executeDatabase(sql, params, \"registry\");\n\n              case 4:\n                return _context3.abrupt(\"return\");\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n        ***REMOVED***\n      ***REMOVED***\n    ***REMOVED***, _callee3, this);\n  ***REMOVED***));\n\n      function onChainReorganization(_x5, _x6, _x7) {\n        return _onChainReorganization.apply(this, arguments);\n  ***REMOVED***\n\n      return onChainReorganization;\n***REMOVED***()\n  ***REMOVED***, {\n    key: \"shouldAffixCallbackToModule\",\n    value: function shouldAffixCallbackToModule(modname) {\n      if (modname == this.name) {\n        return 1;\n  ***REMOVED***\n\n      if (modname == \"Email\") {\n        return 1;\n  ***REMOVED***\n\n      return 0;\n***REMOVED***\n  ***REMOVED***, {\n    key: \"sendSuccessResponse\",\n    value: function sendSuccessResponse(tx) {\n      var fee = tx.returnPaymentTo(this.app.wallet.returnPublicKey());\n      var newtx = registry_self.app.wallet.createUnsignedTransaction(to, 0.0, fee);\n\n      if (newtx == null) {\n        console.log(\"NULL TX CREATED IN REGISTRY MODULE\");\n        return;\n  ***REMOVED***\n\n      newtx.transaction.msg.module = \"Email\";\n      newtx.transaction.msg.data = \"You have successfully registered your address\";\n      newtx.transaction.msg.title = \"Address Registration Success!\";\n      newtx = this.app.wallet.signTransaction(tx);\n      this.app.network.propagateTransaction(newtx);\n***REMOVED***\n  ***REMOVED***, {\n    key: \"sendFailureResponse\",\n    value: function sendFailureResponse(tx) {\n      var fee = tx.returnPaymentTo(this.app.wallet.returnPublicKey());\n      var newtx = registry_self.app.wallet.createUnsignedTransaction(to, 0.0, fee);\n\n      if (newtx == null) {\n        console.log(\"NULL TX CREATED IN REGISTRY MODULE\");\n        return;\n  ***REMOVED***\n\n      newtx.transaction.msg.module = \"Email\";\n      newtx.transaction.msg.data = \"You have successfully registered your address\";\n      newtx.transaction.msg.title = \"Address Registration Success!\";\n      newtx = this.app.wallet.signTransaction(tx);\n      this.app.network.propagateTransaction(newtx);\n***REMOVED***\n  ***REMOVED***]);\n\n  return Registry;\n***REMOVED***(ModTemplate);\n\nmodule.exports = Registry;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3JlZ2lzdHJ5L3JlZ2lzdHJ5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kcy9yZWdpc3RyeS9yZWdpc3RyeS5qcz9hYTM1Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhdGggICAgICAgID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3Qgc2FpdG8gPSByZXF1aXJlKCcuLi8uLi9saWIvc2FpdG8vc2FpdG8nKTtcbmNvbnN0IE1vZFRlbXBsYXRlID0gcmVxdWlyZSgnLi4vLi4vbGliL3RlbXBsYXRlcy9tb2R0ZW1wbGF0ZScpO1xuXG5cblxuY2xhc3MgUmVnaXN0cnkgZXh0ZW5kcyBNb2RUZW1wbGF0ZSB7XG5cbiAgY29uc3RydWN0b3IoYXBwKSB7XG5cbiAgICBzdXBlcihhcHApO1xuXG4gICAgdGhpcy5hcHAgICAgICAgICAgICA9IGFwcDtcbiAgICB0aGlzLm5hbWUgICAgICAgICAgID0gXCJSZWdpc3RyeVwiO1xuXG4gICAgLy9cbiAgICAvLyBtYXN0ZXIgRE5TIHB1YmxpY2tleSBmb3IgdGhpcyBtb2R1bGVcbiAgICAvL1xuICAgIHRoaXMucHVibGlja2V5ID0gJzIzeWtSWWJqdkF6SExSYVRZUGNxamtRMkxuRlllTWtnOWNKZ1hQYnJXY0htcidcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cblxuXG5cbiAgcmVzcG9uZFRvKHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PSAnZW1haWwtYXBwc3BhY2UnKSB7XG4gICAgICBsZXQgb2JqID0ge307XG4gICAgICAgICAgb2JqLnJlbmRlciA9IHRoaXMucmVuZGVyRW1haWw7XG4gICAgICAgICAgb2JqLmF0dGFjaEV2ZW50cyA9IHRoaXMuYXR0YWNoRXZlbnRzRW1haWw7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZW5kZXJFbWFpbChhcHAsIGRhdGEpIHtcbiAgICAgZGF0YS5yZWdpc3RyeSA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIlJlZ2lzdHJ5XCIpO1xuICAgICBsZXQgUmVnaXN0cnlBcHBzcGFjZSA9IHJlcXVpcmUoJy4vbGliL2VtYWlsLWFwcHNwYWNlL3JlZ2lzdHJ5LWFwcHNwYWNlJyk7XG4gICAgIFJlZ2lzdHJ5QXBwc3BhY2UucmVuZGVyKGFwcCwgZGF0YSk7XG4gIH1cbiAgYXR0YWNoRXZlbnRzRW1haWwoYXBwLCBkYXRhKSB7XG4gICAgIGRhdGEucmVnaXN0cnkgPSBhcHAubW9kdWxlcy5yZXR1cm5Nb2R1bGUoXCJSZWdpc3RyeVwiKTtcbiAgICAgUmVnaXN0cnlBcHBzcGFjZS5hdHRhY2hFdmVudHMoYXBwLCBkYXRhKTtcbiAgfVxuXG5cblxuXG5cbiAgcmVnaXN0ZXJfaWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG5cbiAgICBsZXQgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuY3JlYXRlVW5zaWduZWRUcmFuc2FjdGlvbih0aGlzLnB1YmxpY2tleSwgdGhpcy5hcHAud2FsbGV0LndhbGxldC5kZWZhdWx0X2ZlZSwgdGhpcy5hcHAud2FsbGV0LndhbGxldC5kZWZhdWx0X2ZlZSk7XG4gICAgaWYgKG5ld3R4ID09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTlVMTCBUWCBDUkVBVEVEIElOIFJFR0lTVFJZIE1PRFVMRVwiKVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5tb2R1bGUgICBcdD0gXCJSZWdpc3RyeVwiO1xuICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5yZXF1ZXN0XHQ9IFwicmVnaXN0ZXJcIjtcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllclx0PSBpZGVudGlmaWVyO1xuXG4gICAgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcbiAgICB0aGlzLmFwcC5uZXR3b3JrLnByb3BhZ2F0ZVRyYW5zYWN0aW9uKG5ld3R4KTsgXG5cbiAgfVxuXG5cbiAgb25QZWVySGFuZHNoYWtlQ29tcGxldGUoYXBwLCBwZWVyKSB7XG5cbiAgICBsZXQgcmVnaXN0cnlfc2VsZiA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIlJlZ2lzdHJ5XCIpO1xuXG4gICAgaWYgKHJlZ2lzdHJ5X3NlbGYuYXBwLm9wdGlvbnMuc2VydmVyICE9IHVuZGVmaW5lZCkge1xuICAgICAgcmVnaXN0cnlfc2VsZi5wdWJsaWNrZXkgPSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZ2lzdHJ5X3NlbGYucHVibGlja2V5ID0gcGVlci5wZWVyLnB1YmxpY2tleTtcbiAgICB9XG5cbiAgfVxuXG5cbiAgYXN5bmMgb25Db25maXJtYXRpb24oYmxrLCB0eCwgY29uZiwgYXBwKSB7XG5cbiAgICBsZXQgcmVnaXN0cnlfc2VsZiA9IGFwcC5tb2R1bGVzLnJldHVybk1vZHVsZShcIlJlZ2lzdHJ5XCIpO1xuICAgIGxldCB0eG1zZyA9IHR4LnJldHVybk1lc3NhZ2UoKTtcblxuICAgIGlmIChjb25mID09IDApIHtcbiAgICAgIGlmICh0eG1zZy5tb2R1bGUgPT09IFwiUmVnaXN0cnlcIikge1xuICAgICAgICBpZiAodHguaXNUbyhyZWdpc3RyeV9zZWxmLnB1YmxpY2tleSkgJiYgYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSA9PSByZWdpc3RyeV9zZWxmLnB1YmxpY2tleSkge1xuXG4gICAgICAgICAgbGV0IHJlcXVlc3QgPSB0eG1zZy5yZXF1ZXN0O1xuICAgICAgICAgIGxldCBpZGVudGlmaWVyID0gdHhtc2cuaWRlbnRpZmllcjtcbiAgICAgICAgICBsZXQgcHVibGlja2V5ID0gdHgudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQ7XG4gIFx0ICBsZXQgdW5peHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICBsZXQgYmlkID0gYmxrLmJsb2NrLmlkO1xuICAgICAgICAgIGxldCBic2ggPSBibGsucmV0dXJuSGFzaCgpO1xuICBcdCAgbGV0IGxvY2tfYmxvY2sgPSAwO1xuICAgICAgICAgIGxldCBzaWduZWRfbWVzc2FnZSA9IGlkZW50aWZpZXIgKyBwdWJsaWNrZXkgKyBiaWQgKyBic2g7XG5cdCAgbGV0IHNpZyA9IHJlZ2lzdHJ5X3NlbGYuYXBwLndhbGxldC5zaWduTWVzc2FnZShzaWduZWRfbWVzc2FnZSk7XG5cdCAgbGV0IHNpZ25lciA9IHRoaXMucHVibGlja2V5O1xuXHQgIGxldCBsYyA9IDE7XG5cbiAgICAgICAgICAvLyBzZXJ2ZXJzIHVwZGF0ZSBkYXRhYmFzZVxuICAgICAgICAgIGxldCByZXMgPSBhd2FpdCByZWdpc3RyeV9zZWxmLmFkZFJlY29yZChpZGVudGlmaWVyLCBwdWJsaWNrZXksIHVuaXh0aW1lLCBiaWQsIGJzaCwgbG9ja19ibG9jaywgc2lnLCBzaWduZXIsIDEpO1xuICAgICAgICAgIGxldCBmZWUgPSB0eC5yZXR1cm5QYXltZW50VG8ocmVnaXN0cnlfc2VsZi5wdWJsaWNrZXkpO1xuXG5cdCAgLy8gc2VuZCBtZXNzYWdlXG5cdCAgaWYgKHJlcyA9PSAxKSB7XG5cdCAgICBcblx0ICAgIGxldCBuZXd0eCA9IHJlZ2lzdHJ5X3NlbGYuYXBwLndhbGxldC5jcmVhdGVVbnNpZ25lZFRyYW5zYWN0aW9uKHR4LnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkLCAwLjAsIGZlZSk7XHQgICAgXG5cdFx0bmV3dHgudHJhbnNhY3Rpb24ubXNnLm1vZHVsZSA9IFwiRW1haWxcIjtcblx0XHRuZXd0eC50cmFuc2FjdGlvbi5tc2cudGl0bGUgID0gXCJBZGRyZXNzIFJlZ2lzdHJhdGlvbiBTdWNjZXNzIVwiO1xuXHQgICAgXHRuZXd0eC50cmFuc2FjdGlvbi5tc2cubWVzc2FnZSA9IFwiWW91IGhhdmUgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQgdGhlIGlkZW50aWZpZXI6IFwiICsgaWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllciA9IGlkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnNpZ25lZF9tZXNzYWdlID0gc2lnbmVkX21lc3NhZ2U7XG4gICAgICAgICAgICAgICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnNpZyA9IHNpZztcblxuXHQgICAgbmV3dHggPSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKG5ld3R4KTtcblx0ICAgIHJlZ2lzdHJ5X3NlbGYuYXBwLm5ldHdvcmsucHJvcGFnYXRlVHJhbnNhY3Rpb24obmV3dHgpO1xuXG5cdCAgfSBlbHNlIHtcblxuICAgICAgICAgICAgbGV0IG5ld3R4ID0gcmVnaXN0cnlfc2VsZi5hcHAud2FsbGV0LmNyZWF0ZVVuc2lnbmVkVHJhbnNhY3Rpb24odHgudHJhbnNhY3Rpb24uZnJvbVswXS5hZGQsIDAuMCwgZmVlKTtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubW9kdWxlID0gXCJFbWFpbFwiO1xuICAgICAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy50aXRsZSAgPSBcIkFkZHJlc3MgUmVnaXN0cmF0aW9uIEZhaWxlZCFcIjtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubWVzc2FnZSA9IFwiVGhlIGlkZW50aWZpZXIgeW91IHJlcXVlc3RlZCAoXCIgKyBpZGVudGlmaWVyICsgXCIpIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZFwiO1xuICAgICAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5pZGVudGlmaWVyID0gaWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cuc2lnbmVkX21lc3NhZ2UgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5zaWcgPSBcIlwiO1xuXG4gICAgICAgICAgICBuZXd0eCA9IHJlZ2lzdHJ5X3NlbGYuYXBwLndhbGxldC5zaWduVHJhbnNhY3Rpb24obmV3dHgpO1xuICAgICAgICAgICAgcmVnaXN0cnlfc2VsZi5hcHAubmV0d29yay5wcm9wYWdhdGVUcmFuc2FjdGlvbihuZXd0eCk7XG5cblx0ICB9XG5cbiAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG5cblxuICAgICAgLy9cbiAgICAgIC8vXG4gICAgICAvL1xuICAgICAgaWYgKHR4bXNnLm1vZHVsZSA9PSBcIkVtYWlsXCIpIHtcblx0aWYgKHR4LnRyYW5zYWN0aW9uLmZyb21bMF0uYWRkID09IHJlZ2lzdHJ5X3NlbGYucHVibGlja2V5KSB7XG5cdCAgaWYgKHR4LnRyYW5zYWN0aW9uLnRvWzBdLmFkZCA9PSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCkpIHtcblx0ICAgIGlmICh0eC50cmFuc2FjdGlvbi5tc2cuaWRlbnRpZmllciAhPSB1bmRlZmluZWQgJiYgdHgudHJhbnNhY3Rpb24ubXNnLnNpZ25lZF9tZXNzYWdlICE9IHVuZGVmaW5lZCAmJiB0eC50cmFuc2FjdGlvbi5tc2cuc2lnICE9IHVuZGVmaW5lZCkge1xuXG5cdCAgICAgIC8vXG5cdCAgICAgIC8vIGFtIGVtYWlsPyBmb3IgdXM/IGZyb20gdGhlIEROUyByZWdpc3RyYXI/XG5cdCAgICAgIC8vXG5cdCAgICAgIGxldCBpZGVudGlmaWVyIFx0ID0gdHgudHJhbnNhY3Rpb24ubXNnLmlkZW50aWZpZXI7XG5cdCAgICAgIGxldCBzaWduZWRfbWVzc2FnZSA9IHR4LnRyYW5zYWN0aW9uLm1zZy5zaWduZWRfbWVzc2FnZTtcblx0ICAgICAgbGV0IHNpZ1x0XHQgPSB0eC50cmFuc2FjdGlvbi5tc2cuc2lnO1xuXG5cdCAgICAgIGlmIChyZWdpc3RyeV9zZWxmLmFwcC5jcnlwdG8udmVyaWZ5TWVzc2FnZShzaWduZWRfbWVzc2FnZSwgc2lnLCByZWdpc3RyeV9zZWxmLnB1YmxpY2tleSkpIHtcblx0ICAgICAgICByZWdpc3RyeV9zZWxmLmFwcC5rZXlzLmFkZEtleSh0eC50cmFuc2FjdGlvbi50b1swXS5hZGQsIGlkZW50aWZpZXIsIHRydWUsIFwiXCIsIGJsay5ibG9jay5pZCwgYmxrLnJldHVybkhhc2goKSwgMSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGFzeW5jIGFkZFJlY29yZChpZGVudGlmaWVyPVwiXCIsIHB1YmxpY2tleT1cIlwiLCB1bml4dGltZT0wLCBiaWQ9MCwgYnNoPVwiXCIsIGxvY2tfYmxvY2s9MCwgc2lnPVwiXCIsIHNpZ25lcj1cIlwiLCBsYz0xKSB7XG5cbiAgICBsZXQgc3FsID0gYElOU0VSVCBJTlRPIHJlY29yZHMgKFxuXHRpZGVudGlmaWVyLCBcblx0cHVibGlja2V5LCBcblx0dW5peHRpbWUsIFxuXHRiaWQsIFxuXHRic2gsIFxuXHRsb2NrX2Jsb2NrLCBcblx0c2lnLFxuXHRzaWduZXIsIFxuXHRsY1xuICAgICAgKSBWQUxVRVMgKFxuXHQkaWRlbnRpZmllciwgXG5cdCRwdWJsaWNrZXksXG5cdCR1bml4dGltZSwgXG5cdCRiaWQsIFxuXHQkYnNoLCBcblx0JGxvY2tfYmxvY2ssIFxuXHQkc2lnLCBcblx0JHNpZ25lciwgXG5cdCRsY1xuICAgICAgKWA7XG4gICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgICAgJGlkZW50aWZpZXJcdDpcdGlkZW50aWZpZXIgLFxuICAgICAgICAkcHVibGlja2V5XHQ6XHRwdWJsaWNrZXkgLFxuICAgICAgICAkdW5peHRpbWVcdDpcdHVuaXh0aW1lICxcbiAgICAgICAgJGJpZFx0XHQ6XHRiaWQgLFxuICAgICAgICAkYnNoXHRcdDpcdGJzaCAsXG4gICAgICAgICRsb2NrX2Jsb2NrXHQ6XHRsb2NrX2Jsb2NrICxcbiAgICAgICAgJHNpZ1x0XHQ6XHRzaWcsXG4gICAgICAgICRzaWduZXJcdFx0Olx0c2lnbmVyLFxuICAgICAgICAkbGNcdFx0Olx0bGMsXG4gICAgICB9XG4gICAgYXdhaXQgdGhpcy5hcHAuc3RvcmFnZS5leGVjdXRlRGF0YWJhc2Uoc3FsLCBwYXJhbXMsIFwicmVnaXN0cnlcIik7XG5cbiAgICBzcWwgPSBcIlNFTEVDVCAqIEZST00gcmVjb3JkcyBXSEVSRSBpZGVudGlmaWVyID0gJGlkZW50aWZpZXIgQU5EIHB1YmxpY2tleSA9ICRwdWJsaWNrZXkgQU5EIHVuaXh0aW1lID0gJHVuaXh0aW1lIEFORCBiaWQgPSAkYmlkIEFORCBic2ggPSAkYnNoIEFORCBsb2NrX2Jsb2NrID0gJGxvY2tfYmxvY2sgQU5EIHNpZyA9ICRzaWcgQU5EIHNpZ25lciA9ICRzaWduZXIgQU5EIGxjID0gJGxjXCI7XG4gICAgbGV0IHJvd3MgPSBhd2FpdCB0aGlzLmFwcC5zdG9yYWdlLnF1ZXJ5RGF0YWJhc2Uoc3FsLCBwYXJhbXMsIFwicmVnaXN0cnlcIik7XG5jb25zb2xlLmxvZyhzcWwpO1xuY29uc29sZS5sb2cocGFyYW1zKTtcbmNvbnNvbGUubG9nKFwiXFxuXFxuXFxuUkVTOiBcIiArIEpTT04uc3RyaW5naWZ5KHJvd3MpKTtcbmNvbnNvbGUubG9nKFwiUk9XUzogXCIgKyByb3dzLmxlbmd0aCk7XG4gICAgaWYgKHJvd3MubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgfVxuXG5cblxuXG4gIGFzeW5jIG9uQ2hhaW5SZW9yZ2FuaXphdGlvbihiaWQsIGJzaCwgbGMpIHtcblxuICAgIHZhciBzcWwgICAgPSBcIlVQREFURSByZWNvcmRzIFNFVCBsYyA9ICRsYyBXSEVSRSBiaWQgPSAkYmlkIEFORCBic2ggPSAkYnNoXCI7XG4gICAgdmFyIHBhcmFtcyA9IHsgJGJpZCA6IGJpZCAsICRic2ggOiBic2ggfVxuICAgIGF3YWl0IHRoaXMuYXBwLnN0b3JhZ2UuZXhlY3V0ZURhdGFiYXNlKHNxbCwgcGFyYW1zLCBcInJlZ2lzdHJ5XCIpO1xuXG4gICAgcmV0dXJuO1xuXG4gIH1cblxuICBcblxuXG5cbiAgc2hvdWxkQWZmaXhDYWxsYmFja1RvTW9kdWxlKG1vZG5hbWUpIHtcbiAgICBpZiAobW9kbmFtZSA9PSB0aGlzLm5hbWUpIHsgcmV0dXJuIDE7IH1cbiAgICBpZiAobW9kbmFtZSA9PSBcIkVtYWlsXCIpIHsgcmV0dXJuIDE7IH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG5cblxuICBzZW5kU3VjY2Vzc1Jlc3BvbnNlKHR4KSB7XG5cbiAgICBsZXQgZmVlID0gdHgucmV0dXJuUGF5bWVudFRvKHRoaXMuYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSk7XG5cbiAgICBsZXQgIG5ld3R4ID0gcmVnaXN0cnlfc2VsZi5hcHAud2FsbGV0LmNyZWF0ZVVuc2lnbmVkVHJhbnNhY3Rpb24odG8sIDAuMCwgZmVlKTtcbiAgICBpZiAobmV3dHggPT0gbnVsbCkge1xuICAgICAgY29uc29sZS5sb2coXCJOVUxMIFRYIENSRUFURUQgSU4gUkVHSVNUUlkgTU9EVUxFXCIpXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLm1vZHVsZSAgID0gXCJFbWFpbFwiO1xuICAgIG5ld3R4LnRyYW5zYWN0aW9uLm1zZy5kYXRhICAgICA9IFwiWW91IGhhdmUgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQgeW91ciBhZGRyZXNzXCI7XG4gICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLnRpdGxlICAgID0gXCJBZGRyZXNzIFJlZ2lzdHJhdGlvbiBTdWNjZXNzIVwiO1xuXG4gICAgbmV3dHggPSB0aGlzLmFwcC53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHR4KTtcbiAgICB0aGlzLmFwcC5uZXR3b3JrLnByb3BhZ2F0ZVRyYW5zYWN0aW9uKG5ld3R4KTsgXG5cbiAgfVxuXG5cblxuXG4gIHNlbmRGYWlsdXJlUmVzcG9uc2UodHgpIHtcblxuICAgIGxldCBmZWUgPSB0eC5yZXR1cm5QYXltZW50VG8odGhpcy5hcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpKTtcblxuICAgIGxldCAgbmV3dHggPSByZWdpc3RyeV9zZWxmLmFwcC53YWxsZXQuY3JlYXRlVW5zaWduZWRUcmFuc2FjdGlvbih0bywgMC4wLCBmZWUpO1xuICAgIGlmIChuZXd0eCA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5VTEwgVFggQ1JFQVRFRCBJTiBSRUdJU1RSWSBNT0RVTEVcIilcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cubW9kdWxlICAgPSBcIkVtYWlsXCI7XG4gICAgbmV3dHgudHJhbnNhY3Rpb24ubXNnLmRhdGEgICAgID0gXCJZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZCB5b3VyIGFkZHJlc3NcIjtcbiAgICBuZXd0eC50cmFuc2FjdGlvbi5tc2cudGl0bGUgICAgPSBcIkFkZHJlc3MgUmVnaXN0cmF0aW9uIFN1Y2Nlc3MhXCI7XG5cbiAgICBuZXd0eCA9IHRoaXMuYXBwLndhbGxldC5zaWduVHJhbnNhY3Rpb24odHgpO1xuICAgIHRoaXMuYXBwLm5ldHdvcmsucHJvcGFnYXRlVHJhbnNhY3Rpb24obmV3dHgpOyBcblxuICB9XG5cblxuXG5cbn1cbm1vZHVsZS5leHBvcnRzID0gUmVnaXN0cnk7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7Ozs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBOzs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFNQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUdBOzs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7Ozs7O0FBQ0E7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBREE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBOztBQVdBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTs7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7Ozs7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUtBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQW5SQTtBQUNBO0FBd1JBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/registry/registry.js\n");
2004c2026
< eval("module.exports = EmailAppspaceTemplate = function EmailAppspaceTemplate(app) {\n  return \"\\n  <link rel=\\\"stylesheet\\\" href=\\\"/settings/style.css\\\">\\n  <div class=\\\"email-appspace-settings\\\">\\n      <h3>Network Keys</h3>\\n  \\n      <div class=\\\"grid-1-2-columns\\\">\\n          <div id=\\\"qrcode\\\"></div>\\n          <div>\\n              <div class=\\\"grid-2\\\">\\n                  <div>public:</div>\\n                  <div>\".concat(app.wallet.returnPublicKey(), \"</div>\\n                  <div>private:</div>\\n                  <div>\\n                      <input id=\\\"privatekey\\\" type=\\\"password\\\" value=\\\"\").concat(app.wallet.returnPrivateKey(), \"\\\" class=\\\"password\\\" />\\n                  </div>\\n                  <div>address:</div>\\n                  <div>\").concat(app.keys.returnIdentifierByPublicKey(app.wallet.returnPublicKey()) || \"no address registered\", \"</div>\\n              </div>\\n              <button id=\\\"reset-account-btn\\\" class=\\\"reset-account-btn\\\">Reset Account</button>\\n          </div>\\n      </div>\\n  </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3NldHRpbmdzL2xpYi9lbWFpbC1hcHBzcGFjZS9zZXR0aW5ncy1hcHBzcGFjZS50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvc2V0dGluZ3MvbGliL2VtYWlsLWFwcHNwYWNlL3NldHRpbmdzLWFwcHNwYWNlLnRlbXBsYXRlLmpzPzMyYWEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBFbWFpbEFwcHNwYWNlVGVtcGxhdGUgPSAoYXBwKSA9PiB7XG4gIHJldHVybiBgXG4gIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3NldHRpbmdzL3N0eWxlLmNzc1wiPlxuICA8ZGl2IGNsYXNzPVwiZW1haWwtYXBwc3BhY2Utc2V0dGluZ3NcIj5cbiAgICAgIDxoMz5OZXR3b3JrIEtleXM8L2gzPlxuICBcbiAgICAgIDxkaXYgY2xhc3M9XCJncmlkLTEtMi1jb2x1bW5zXCI+XG4gICAgICAgICAgPGRpdiBpZD1cInFyY29kZVwiPjwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncmlkLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+cHVibGljOjwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdj4ke2FwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCl9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PnByaXZhdGU6PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInByaXZhdGVrZXlcIiB0eXBlPVwicGFzc3dvcmRcIiB2YWx1ZT1cIiR7YXBwLndhbGxldC5yZXR1cm5Qcml2YXRlS2V5KCl9XCIgY2xhc3M9XCJwYXNzd29yZFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+YWRkcmVzczo8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+JHthcHAua2V5cy5yZXR1cm5JZGVudGlmaWVyQnlQdWJsaWNLZXkoYXBwLndhbGxldC5yZXR1cm5QdWJsaWNLZXkoKSkgfHwgXCJubyBhZGRyZXNzIHJlZ2lzdGVyZWRcIn08L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJyZXNldC1hY2NvdW50LWJ0blwiIGNsYXNzPVwicmVzZXQtYWNjb3VudC1idG5cIj5SZXNldCBBY2NvdW50PC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIGA7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUF1QkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mods/settings/lib/email-appspace/settings-appspace.template.js\n");
---
> eval("module.exports = EmailAppspaceTemplate = function EmailAppspaceTemplate(app) {\n  return \"\\n  <link rel=\\\"stylesheet\\\" href=\\\"/settings/style.css\\\">\\n  <div class=\\\"email-appspace-settings\\\">\\n      <h3>Network Keys</h3>\\n  \\n      <div class=\\\"grid-3-columns\\\">\\n          <div id=\\\"qrcode\\\"></div>\\n          <div>\\n              <div class=\\\"grid-2\\\">\\n                  <div>public:</div>\\n                  <div>\".concat(app.wallet.returnPublicKey(), \"</div>\\n                  <div>private:</div>\\n                  <div>\\n                      <input id=\\\"privatekey\\\" type=\\\"password\\\" value=\\\"\").concat(app.wallet.returnPrivateKey(), \"\\\" class=\\\"password\\\" />\\n                  </div>\\n                  <div>address:</div>\\n                  <div>\").concat(app.keys.returnIdentifierByPublicKey(app.wallet.returnPublicKey()) || \"no address registered\", \"</div>\\n              </div>\\n              <button id=\\\"reset-account-btn\\\" class=\\\"reset-account-btn\\\">Reset Account</button>\\n          </div>\\n      </div>\\n  </div>\\n  \");\n***REMOVED***;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2RzL3NldHRpbmdzL2xpYi9lbWFpbC1hcHBzcGFjZS9zZXR0aW5ncy1hcHBzcGFjZS50ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHMvc2V0dGluZ3MvbGliL2VtYWlsLWFwcHNwYWNlL3NldHRpbmdzLWFwcHNwYWNlLnRlbXBsYXRlLmpzPzMyYWEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBFbWFpbEFwcHNwYWNlVGVtcGxhdGUgPSAoYXBwKSA9PiB7XG4gIHJldHVybiBgXG4gIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3NldHRpbmdzL3N0eWxlLmNzc1wiPlxuICA8ZGl2IGNsYXNzPVwiZW1haWwtYXBwc3BhY2Utc2V0dGluZ3NcIj5cbiAgICAgIDxoMz5OZXR3b3JrIEtleXM8L2gzPlxuICBcbiAgICAgIDxkaXYgY2xhc3M9XCJncmlkLTMtY29sdW1uc1wiPlxuICAgICAgICAgIDxkaXYgaWQ9XCJxcmNvZGVcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2PnB1YmxpYzo8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+JHthcHAud2FsbGV0LnJldHVyblB1YmxpY0tleSgpfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdj5wcml2YXRlOjwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJwcml2YXRla2V5XCIgdHlwZT1cInBhc3N3b3JkXCIgdmFsdWU9XCIke2FwcC53YWxsZXQucmV0dXJuUHJpdmF0ZUtleSgpfVwiIGNsYXNzPVwicGFzc3dvcmRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PmFkZHJlc3M6PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PiR7YXBwLmtleXMucmV0dXJuSWRlbnRpZmllckJ5UHVibGljS2V5KGFwcC53YWxsZXQucmV0dXJuUHVibGljS2V5KCkpIHx8IFwibm8gYWRkcmVzcyByZWdpc3RlcmVkXCJ9PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwicmVzZXQtYWNjb3VudC1idG5cIiBjbGFzcz1cInJlc2V0LWFjY291bnQtYnRuXCI+UmVzZXQgQWNjb3VudDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gIDwvZGl2PlxuICBgO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBdUJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mods/settings/lib/email-appspace/settings-appspace.template.js\n");
